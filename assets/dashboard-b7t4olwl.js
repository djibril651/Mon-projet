const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BQPlt_fh.js","assets/vendor-DO0iH4nS.js","assets/firebase-By92KB86.js","assets/index-BkLOGhZA.css"])))=>i.map(i=>d[i]);
var Jo=Object.defineProperty;var Xo=(a,t,r)=>t in a?Jo(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;var Ea=(a,t,r)=>Xo(a,typeof t!="symbol"?t+"":t,r);import{a as H,r as Li,t as Zo,b as Ri,d as ec,s as Oa,e as At,u as P,j as e,B as C,A as ac,o as $t,_ as L,f as ee,m as O,S as ea,g as G,h as tc,i as re,C as $a,k as wa,l as Fi,M as Bi,n as Gi,U as rc,p as sr,Q as zt,q as nc,v as In,w as on,x as Ut,y as qi,z as Xe,D as ba,E as dt,P as ut,X as ie,F as va,O as $i,G as cn,L as sc,H as Ze,I as mt,J as me,K as He,R as Ce,N as Ht,T as dn,V as le,W as Be,Y as It,Z as zi,$ as Ui,a0 as Hi,a1 as we,a2 as Vi,a3 as rt,a4 as Wi,a5 as la,a6 as un,a7 as mn,a8 as pn,a9 as En,aa as pt,ab as Mn,ac as ir,ad as _i,ae as Ki,af as ic,ag as lc,ah as aa,ai as ra,aj as oc,ak as cc,al as dc,am as uc,an as xs,ao as Yi,ap as mc,aq as pc,ar as lr,as as xc,at as gc,au as Na,av as hc,aw as fc,ax as vc,ay as bc,az as de,aA as yc,aB as xn,aC as fa,aD as Qi,aE as jc,aF as wc,aG as Nc,aH as gs,aI as kc,aJ as Cc,aK as Dc,aL as Sc,aM as Et,aN as Ac,aO as Ic}from"./index-BQPlt_fh.js";import{r as h,u as Tn,c as Ji,R as ae,e as Ec,a as Mc,i as Tc,N as Xi,f as Oc,h as je}from"./vendor-DO0iH4nS.js";import{_ as ka,q as Pc,h as ga,j as Lc,k as Ta,y as Rc,l as hs,E as gn,m as Fc}from"./firebase-By92KB86.js";import{_ as Bc}from"./defineProperty-CYmQapUm.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=H("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=H("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=H("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=H("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=H("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=H("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=H("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=H("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=H("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=H("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=H("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=H("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=H("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=H("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=H("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=H("Columns",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"12",x2:"12",y1:"3",y2:"21",key:"1efggb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=H("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=H("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=H("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=H("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=H("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=H("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=H("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=H("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=H("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=H("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=H("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=H("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=H("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=H("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=H("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=H("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=H("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=H("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=H("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=H("MenuSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 8h10",key:"1jw688"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=H("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=H("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=H("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=H("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=H("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=H("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=H("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=H("Rows",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=H("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=H("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=H("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=H("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=H("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=H("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=H("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=H("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=H("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=H("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=H("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);function cl(a,t){Li(2,arguments);var r=Zo(a),n=Ri(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var i=r.getDate(),s=new Date(r.getTime());s.setMonth(r.getMonth()+n+1,0);var l=s.getDate();return i>=l?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function fn(a,t){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fn(a,t)}function pd(a,t){Li(2,arguments);var r=Ri(t);return cl(a,-r)}function dr(){const[a,t]=h.useState(null),[r,n]=h.useState(null),[i,s]=h.useState(!0);return h.useEffect(()=>{const l=ec.onAuthStateChanged(async o=>{if(t(o),o)try{const c=await Oa.getStaffByEmail(o.email);n(c)}catch(c){console.error("Error fetching staff data:",c),n(null)}else n(null);s(!1)});return()=>l()},[]),{user:a,staffData:r,loading:i,isAuthenticated:!!a}}function xd(a){if(!a)throw new Error("No file provided");if(!a.type.startsWith("image/"))throw new Error("Only image files are allowed");if(a.size>5*1024*1024)throw new Error("File size must be less than 5MB")}function gd(a){if(!(a!=null&&a.secure_url))throw new Error("Invalid response from Cloudinary")}class ze extends Error{constructor(t,r){super(t),this.code=r,this.name="CloudinaryError"}}class hd{constructor(){Ea(this,"CLOUD_NAME",At.cloudName);Ea(this,"UPLOAD_PRESET",At.uploadPreset);Ea(this,"API_KEY",At.apiKey);Ea(this,"API_SECRET",At.apiSecret)}async uploadFile(t,r){try{xd(t),r==null||r(0);const n=new FormData;return n.append("file",t),n.append("upload_preset",this.UPLOAD_PRESET),n.append("folder","restaurant"),new Promise((i,s)=>{const l=new XMLHttpRequest;l.upload.onprogress=o=>{if(o.lengthComputable&&r){const c=Math.min(98,Math.round(o.loaded/o.total*100));r(c)}},l.onload=()=>{var o;if(l.status===200)try{const c=JSON.parse(l.responseText);gd(c),r==null||r(100),i(c.secure_url)}catch{s(new ze("Invalid response format","INVALID_RESPONSE"))}else try{const c=JSON.parse(l.responseText);s(new ze(((o=c.error)==null?void 0:o.message)||"Upload failed","UPLOAD_FAILED"))}catch{s(new ze(`Upload failed with status: ${l.status}`,"UPLOAD_FAILED"))}},l.onerror=()=>s(new ze("Network error during upload","NETWORK_ERROR")),l.onabort=()=>s(new ze("Upload was aborted","UPLOAD_ABORTED")),l.ontimeout=()=>s(new ze("Upload timed out","TIMEOUT")),l.open("POST",`https://api.cloudinary.com/v1_1/${this.CLOUD_NAME}/image/upload`),l.timeout=3e4,l.send(n)})}catch(n){throw console.error("Upload error:",n),r==null||r(0),n}}async deleteFile(t){var r;try{const n=Math.round(new Date().getTime()/1e3),i=await this.generateSignature(t,n),s=new FormData;s.append("public_id",`restaurant/${t}`),s.append("api_key",this.API_KEY),s.append("timestamp",n.toString()),s.append("signature",i);const l=await fetch(`https://api.cloudinary.com/v1_1/${this.CLOUD_NAME}/image/destroy`,{method:"POST",body:s,headers:{Accept:"application/json"}});if(!l.ok)throw new ze(`Delete failed with status: ${l.status}`,"DELETE_FAILED");const o=await l.json();if(o.result!=="ok")throw new ze(((r=o.error)==null?void 0:r.message)||"Delete failed","DELETE_FAILED")}catch(n){throw console.error("Delete error:",n),n instanceof ze?n:new ze("Failed to delete file","DELETE_FAILED")}}async generateSignature(t,r){try{const n=`public_id=restaurant/${t}&timestamp=${r}${this.API_SECRET}`,i=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-1",i);return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}catch(n){throw console.error("Signature generation error:",n),new ze("Failed to generate signature","SIGNATURE_ERROR")}}}const et=new hd;function fd(){const a=Tn(),{t}=P("common");return e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>a("/"),children:[e.jsx(ac,{className:"w-4 h-4 mr-2"}),t("go-back")]})}function ur(){const[a,t]=h.useState([]),[r,n]=h.useState(!0),[i,s]=h.useState(null);return h.useEffect(()=>{let l=!0;n(!0);const o=$t.subscribeToOrders(c=>{if(l)try{const d=c.map(m=>({...m,total:Number(m.total||0),subtotal:m.subtotal?Number(m.subtotal):Number(m.total||0),taxTotal:m.taxTotal?Number(m.taxTotal):0,amountPaid:m.amountPaid?Number(m.amountPaid):0,change:m.change?Number(m.change):0,createdAt:m.createdAt||{seconds:Date.now()/1e3}}));t(d),n(!1),s(null)}catch(d){console.error("Error formatting orders:",d),s(d instanceof Error?d:new Error("Unknown error formatting orders")),n(!1)}},c=>{l&&(console.error("Error in orders subscription:",c),s(c),n(!1),L.error("Erreur de chargement des commandes"))});return()=>{if(l=!1,typeof o=="function")try{o()}catch(c){console.error("Error unsubscribing from orders:",c)}}},[]),{orders:a,isLoading:r,error:i,isError:!!i}}const ys=10;function vd(){const[a,t]=h.useState([]),{orders:r}=ur(),n=h.useRef(null),i=h.useRef([]);h.useEffect(()=>{if(n.current===null&&r.length>0){n.current=r,i.current=r;return}if(n.current===null)return;const o=r.filter(c=>!i.current.some(d=>d.id===c.id));o.length>0&&t(c=>[...o.map(d=>({id:crypto.randomUUID(),order:d,read:!1})),...c].slice(0,ys)),i.current=r},[r]);const s=o=>{t(c=>c.filter(d=>d.id!==o))},l=a.some(o=>!o.read);return{notifications:a.slice(0,ys),clearNotification:s,hasUnread:l}}function bd(a){return a&&typeof a.seconds=="number"&&typeof a.nanoseconds=="number"}function yd(a){if(!a||!bd(a))return"";try{const t=new Date,r=new Date(a.seconds*1e3),n=Math.floor((t.getTime()-r.getTime())/1e3);if(n<60)return"à l'instant";if(n<3600){const i=Math.floor(n/60);return`il y a ${i} minute${i>1?"s":""}`}else if(n<86400){const i=Math.floor(n/3600);return`il y a ${i} heure${i>1?"s":""}`}else if(n<604800){const i=Math.floor(n/86400);return`il y a ${i} jour${i>1?"s":""}`}else return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(r)}catch(t){return console.error("Error formatting timestamp:",t),""}}function jd({order:a,onClose:t}){const r=Tn(),{settings:n}=ee(),i=()=>{r("/dashboard/orders"),t()},s=yd(a.createdAt);return e.jsx(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},onClick:i,className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-2 rounded-lg",children:e.jsx(ea,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Nouvelle commande #",a.id.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:[a.customerName," • ",G(a.total,n==null?void 0:n.currency)]}),s&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Commande reçue ",s]})]})]})})}const Br=5;function wd(){const{notifications:a,clearNotification:t,hasUnread:r}=vd(),[n,i]=h.useState(!1),[s,l]=h.useState(1),o=[...a].sort((g,f)=>new Date(f.order.createdAt).getTime()-new Date(g.order.createdAt).getTime()),c=Math.ceil(o.length/Br),d=(s-1)*Br,m=d+Br,u=o.slice(d,m);h.useEffect(()=>{n&&l(1)},[n]),h.useEffect(()=>{const g=f=>{n&&!f.defaultPrevented&&i(!1)};return document.addEventListener("click",g),()=>{document.removeEventListener("click",g)}},[n]);const p=g=>{g.stopPropagation(),s>1&&l(f=>f-1)},x=g=>{g.stopPropagation(),s<c&&l(f=>f+1)};return e.jsxs("div",{className:"relative",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),i(!n)},className:"relative h-10 w-10 rounded-full p-0",children:[e.jsx(tc,{className:"h-5 w-5"}),r&&e.jsx(O.div,{initial:{scale:0},animate:{scale:1},className:"absolute -right-1 -top-1 h-3 w-3 rounded-full bg-red-500"})]}),e.jsx(re,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>i(!1)}),e.jsx(O.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 z-50 mt-2 w-80 rounded-lg bg-white p-4 shadow-xl dark:bg-gray-800",onClick:g=>g.stopPropagation(),children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-500 dark:text-gray-400",children:[a.length," notification",a.length>1?"s":""]}),e.jsx("div",{className:"space-y-2",children:e.jsx(re,{mode:"wait",children:u.map(g=>e.jsx(jd,{order:g.order,onClose:()=>{t(g.id),u.length===1&&s>1&&l(f=>f-1)}},g.id))})}),c>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 pt-3",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:p,disabled:s===1,className:"p-1",children:e.jsx($a,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",s," sur ",c]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:x,disabled:s===c,className:"p-1",children:e.jsx(wa,{className:"h-4 w-4"})})]})]}):e.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-4",children:"Aucune notification"})})]})})]})}function Nd(){const{theme:a,toggleTheme:t}=Fi(),{t:r}=P();return e.jsx(C,{variant:"ghost",size:"sm",onClick:t,className:"h-10 w-10 rounded-full p-0",children:a==="light"?e.jsx(Bi,{size:20,title:r("common.darkMode")}):e.jsx(Gi,{size:20,title:r("common.lightMode")})})}function kd({onLogout:a}){const{t}=P();return e.jsxs(C,{variant:"secondary",size:"sm",onClick:a,children:[e.jsx(nd,{className:"w-4 h-4 mr-2"}),t("common:logout")]})}function xt(){const{user:a}=dr(),[t,r]=h.useState(!1),[n,i]=h.useState(null),[s,l]=h.useState(!0);return h.useEffect(()=>{async function o(){if(!(a!=null&&a.email)){r(!1),i(null),l(!1);return}try{const c=await Oa.getStaffByEmail(a.email);r(!!c),i(c)}catch(c){console.error("Error checking staff status:",c),r(!1),i(null)}finally{l(!1)}}o()},[a==null?void 0:a.email]),{isStaff:t,staffData:n,isLoading:s}}function Cd(){const{user:a}=dr(),{isStaff:t,isLoading:r,staffData:n}=xt();return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:[e.jsx(cr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:a==null?void 0:a.email}),e.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),r?e.jsx("span",{className:"text-gray-400",children:"Loading..."}):e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium capitalize",children:t&&(n==null?void 0:n.role)!=="admin"?"Staff":"Admin"})]})]})}function Dd({onLogout:a}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Cd,{}),e.jsx(wd,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nd,{}),e.jsx(kd,{onLogout:a})]})]})}function Sd({onLogout:a}){const{t}=P("dashboard");return e.jsx("header",{className:"h-16 bg-white dark:bg-gray-800 border-b border:gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(fd,{}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("dashboard")})]}),e.jsx(Dd,{onLogout:a})]})})}function js({currentPage:a,isStaff:t,settings:r,staffData:n}){const{t:i}=P("dashboard"),s=Tn(),[l,o]=h.useState(!1),c=[{id:"dashboard",icon:nl,label:i("dashboard")},{id:"orders",icon:ea,label:i("orders")},{id:"pos",icon:cd,label:i("pos")},{id:"traffic",icon:Hc,label:i("traffic")},{id:"menu",icon:rc,label:i("menu")},{id:"categories",icon:On,label:i("categories")},{id:"variants",icon:hn,label:i("variants")},{id:"inventory",icon:$e,label:i("inventory")},{id:"payments",icon:sr,label:i("payments")},{id:"accounting",icon:el,label:i("accounting")},{id:"customers",icon:Ln,label:i("costumer-title")},{id:"qr-code",icon:zt,label:i("qr-code")},{id:"staff",icon:ud,label:i("staff")},{id:"media",icon:Vt,label:i("media")},{id:"settings",icon:nc,label:i("settings")}];return e.jsxs(O.aside,{initial:!1,animate:{width:l?"5rem":"16rem"},className:"relative h-full bg-white dark:bg-gray-800 flex flex-col shadow-sm",children:[e.jsx("button",{onClick:()=>o(!l),className:"absolute -right-3 top-3 z-20 rounded-full border bg-white p-1.5 shadow-sm hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700",children:l?e.jsx(wa,{className:"h-4 w-4"}):e.jsx($a,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent",children:e.jsx("nav",{className:"p-3 pt-8",children:c.filter(d=>!t||(n==null?void 0:n.role)==="admin"?!0:n!=null&&n.active?(r==null?void 0:r.staffPermissions.includes(d.id))&&d.id!=="dashboard":!1).map(d=>e.jsxs(O.div,{className:"relative my-1",initial:!1,children:[e.jsx(O.button,{whileHover:{x:l?0:4},whileTap:{scale:.98},onClick:()=>s(`/dashboard/${d.id}`),className:`
                  w-full flex items-center space-x-3 
                  ${l?"justify-center px-3 py-3":"px-4 py-3"}
                  rounded-lg transition-colors relative group
                  ${a===d.id?"bg-blue-50 text-white dark:bg-blue-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}
                `,children:e.jsxs("div",{className:`
                  relative z-10 flex items-center 
                  ${l?"w-full justify-center":""}
                `,children:[e.jsx(d.icon,{className:`
                    relative z-10 transition-transform duration-200
                    ${l?"w-6 h-6 group-hover:scale-110":"w-5 h-5"}
                  `}),e.jsx(re,{mode:"wait",children:!l&&e.jsx(O.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"relative z-10 whitespace-nowrap overflow-hidden ml-3",children:d.label})})]})}),l&&e.jsx("div",{className:`
                  absolute left-full top-1/2 -translate-y-1/2 ml-3 
                  bg-gray-800 text-white text-xs 
                  px-3 py-2 rounded-md 
                  opacity-0 invisible
                  group-hover:opacity-100 group-hover:visible
                  transition-all duration-200
                  pointer-events-none
                  z-50
                  shadow-lg
                `,children:d.label})]},d.id))})})]})}function Ad({children:a,onLogout:t,settings:r,isStaff:n,staffData:i}){const s=Ji(),l=s.pathname.split("/dashboard/")[1]||"",[o,c]=h.useState(!1),d=In();return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[!d&&e.jsx("div",{className:"flex-none",children:e.jsx(Sd,{onLogout:t,onMenuClick:()=>c(!o)})}),e.jsxs("div",{className:"flex-1 flex min-h-0",children:[!d&&e.jsx("div",{className:"flex-none",children:e.jsx(js,{currentPage:l,onClose:()=>c(!1),isStaff:n,staffData:i,settings:r})}),e.jsx(re,{children:d&&o&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>c(!1)}),e.jsx(O.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 left-0 w-64 z-50",children:e.jsx(js,{currentPage:l,onClose:()=>c(!1),isStaff:n,staffData:i,settings:r})})]})}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto p-4 md:p-6",children:e.jsx(re,{mode:"wait",children:e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"container mx-auto max-w-7xl",children:a},s.pathname)})})})]})]})}function ws(a,t){const[r,n]=h.useState(()=>{try{const s=localStorage.getItem(a);return s?JSON.parse(s):t}catch(s){return console.error("Error reading from localStorage:",s),t}}),i=h.useCallback(s=>{try{const l=s instanceof Function?s(r):s;n(l),localStorage.setItem(a,JSON.stringify(l))}catch(l){console.error("Error writing to localStorage:",l)}},[a,r]);return[r,i]}function Id(){const[a,t]=h.useState(!0),{loading:r}=dr(),n=Ji(),[i,s]=ws("hasShownInitialLoad",!1),[l,o]=ws("initialDashboardLoad",!0);return h.useEffect(()=>{if(!r)if(n.pathname.startsWith("/dashboard"))if(l){const d=setTimeout(()=>{t(!1),o(!1)},1500);return()=>clearTimeout(d)}else t(!1);else if(i)t(!1);else{const d=setTimeout(()=>{t(!1),s(!0)},1500);return()=>clearTimeout(d)}},[r,n.pathname,i,l,s,o]),{isLoading:a||r}}function Se({children:a}){return e.jsx("div",{className:"py-6 md:py-8",children:a})}function Ns(a){const{t,i18n:r}=P("common"),{date:n,onSelect:i,isOpen:s,onClose:l,position:o="bottom"}=a,[c,d]=h.useState(n),m=new Date,u=h.useRef(null),p=r.language,g={en:qi,fr:Ut}[p]||Ut,f=c.getMonth(),v=c.getFullYear(),b=new Date(v,f+1,0).getDate(),y=new Date(v,f,1).getDay(),w=Array.from({length:b},(D,N)=>N+1),j=[t("common:sun"),t("common:mon"),t("common:tue"),t("common:wed"),t("common:thur"),t("common:fri"),t("common:sat")];return h.useEffect(()=>{const D=N=>{u.current&&!u.current.contains(N.target)&&l()};if(s)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[s,l]),s?e.jsx("div",{className:` ${o==="bottom"?"top-full mt-1":"bottom-full mb-1"} left-0 z-50`,style:{minWidth:"max-content"},children:e.jsxs(O.div,{ref:u,initial:{opacity:0,y:o==="bottom"?10:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:o==="bottom"?10:-10},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b dark:border-gray-700",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>d(pd(c,1)),className:"h-8 w-8 p-0",children:e.jsx($a,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-sm font-medium",children:on(c,"MMMM yyyy",{locale:g})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>d(cl(c,1)),className:"h-8 w-8 p-0",children:e.jsx(wa,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:j.map(D=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1",children:D},D))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:y}).map((D,N)=>e.jsx("div",{},`empty-${N}`)),w.map(D=>{const N=new Date(v,f,D),I=N.toDateString()===m.toDateString(),T=N.toDateString()===n.toDateString();return e.jsx("button",{onClick:()=>{i(N),l()},className:`
                    flex h-8 w-8 items-center justify-center rounded-lg text-sm transition-all
                    hover:bg-gray-100 dark:hover:bg-gray-700
                    ${T?"bg-blue-600 text-white hover:bg-blue-700":I?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":""}
                  `,children:D},D)})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-2",children:e.jsx(C,{variant:"ghost",size:"sm",className:"w-full justify-center text-sm",onClick:()=>{i(new Date),l()},children:t("common:today")})})]})}):null}function Da(a){const{startDate:t,endDate:r,onDateChange:n}=a,{t:i,i18n:s}=P(),[l,o]=h.useState(!1),[c,d]=h.useState(!1),m=In(),u=s.language,x={en:qi,fr:Ut}[u]||Ut,g=on(t,"dd MMM yyyy",{locale:x}),f=on(r,"dd MMM yyyy",{locale:x}),v=[{label:i("common:today"),days:0},{label:m?"7j":i("common:last-week"),days:7},{label:m?"30j":i("common:last-month"),days:30}],b=y=>{const w=new Date,j=new Date;y>0?j.setDate(j.getDate()-y):j.setHours(0,0,0,0),n(j,w)};return e.jsx("div",{className:"w-full sm:w-auto relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2 order-2 sm:order-1",children:v.map(y=>e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>b(y.days),className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-3",children:y.label},y.days))}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>{d(!1),o(!0)},className:"w-full sm:w-[140px] justify-start text-xs sm:text-sm",children:[e.jsx(Xe,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500"}),g]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl p-4 max-w-fit mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 -mt-2",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:"✕"})}),e.jsx(Ns,{date:t,onSelect:y=>{n(y,r),o(!1)},isOpen:l,onClose:()=>o(!1),position:"center"})]})})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:u==="fr"?"à":"to"}),e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>{o(!1),d(!0)},className:"w-full sm:w-[140px] justify-start text-xs sm:text-sm",children:[e.jsx(Xe,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500"}),f]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl p-4 max-w-fit mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 -mt-2",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:" top-2 right-2",children:"✕"})}),e.jsx(Ns,{date:r,onSelect:y=>{n(t,y),d(!1)},isOpen:c,onClose:()=>d(!1),position:"center"})]})})]})]})]})})}function ks(a){const{totalRevenue:t,totalOrders:r,uniqueCustomers:n,dailyOrderRate:i}=a,{settings:s}=ee(),{t:l}=P("dashboard"),o=[{title:l("total-income-without-tax"),value:G(Number(t),s==null?void 0:s.currency),icon:ca,color:"green"},{title:l("orders"),value:r.toString(),icon:Ua,color:"blue"},{title:l("unique-customers"),value:n.toString(),icon:Ln,color:"purple"},{title:l("day-order"),value:ba(Number(i.toFixed(1))),icon:Xe,color:"orange"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:o.map((c,d)=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-md hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center ${c.color==="green"?"bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-400":c.color==="blue"?"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400":c.color==="purple"?"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400":"bg-orange-100 text-orange-600 dark:bg-orange-900/50 dark:text-orange-400"}`,children:e.jsx(c.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:c.title}),e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white truncate",children:c.value})]})]})},c.title))})}function Ed({data:a}){const{t}=P("common"),r=Object.values(a).reduce((s,l)=>s+l,0),n={pending:"bg-yellow-500",preparing:"bg-blue-500",ready:"bg-green-500",delivered:"bg-purple-500",cancelled:"bg-red-500"},i={pending:t("pending"),preparing:t("preparing"),ready:t("ready"),delivered:t("delivered"),cancelled:t("cancelled")};return e.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([s,l])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:i[`${s}`]}),e.jsx("span",{className:"font-medium",children:l})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(O.div,{initial:{width:0},animate:{width:`${l/r*100}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full ${n[s]}`})})]},s))})}const Tt=5;function Cs({orders:a}){const{settings:t}=ee(),[r,n]=h.useState(1),{t:i}=P("dashboard"),s=h.useMemo(()=>{const d=new Map;return a.filter(u=>u.status==="delivered").forEach(u=>{u.items.forEach(p=>{const x=d.get(p.id);x?(x.quantity+=Number(p.quantity),x.revenue+=Number(p.price)*Number(p.quantity)):d.set(p.id,{id:p.id,name:p.name,quantity:Number(p.quantity),revenue:Number(p.price)*Number(p.quantity)})})}),Array.from(d.values()).sort((u,p)=>p.quantity-u.quantity)},[a]),l=s.reduce((d,m)=>d+m.quantity,0),o=Math.ceil(s.length/Tt),c=s.slice((r-1)*Tt,r*Tt);return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx($e,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:i("pales-by-product")}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[s.length," ",i("products-sold")]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(re,{mode:"wait",children:c.map((d,m)=>e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:m*.1},className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs sm:text-sm font-medium",children:["#",(r-1)*Tt+m+1]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 dark:text-white",children:d.name}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[ba(Number((d.quantity/l*100).toFixed(2))),i("common:percent-of-sales")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-sm sm:text-base text-gray-900 dark:text-white",children:[d.quantity," ",i("common:sales")]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:G(d.revenue,t==null?void 0:t.currency)})]})]},d.id))}),o>1&&e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t dark:border-gray-700",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>n(d=>Math.max(1,d-1)),disabled:r===1,className:"text-gray-500 dark:text-gray-400",children:e.jsx($a,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",r," sur ",o]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>n(d=>Math.min(o,d+1)),disabled:r===o,className:"text-gray-500 dark:text-gray-400",children:e.jsx(wa,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ua,{className:"w-8 h-8 sm:w-12 sm:h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400",children:i("no-product-sales")})]})]})]})}function da({currentPage:a,totalPages:t,onPageChange:r}){const i=Array.from({length:t},(s,l)=>l+1).filter(s=>t<=5||s===1||s===t?!0:Math.abs(s-a)<=1);return e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>r(a-1),disabled:a===1,type:"button",children:e.jsx($a,{className:"w-4 h-4"})}),i.map((s,l)=>l>0&&s-i[l-1]>1?e.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${s}`):e.jsx("button",{onClick:()=>r(s),type:"button",className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${a===s?"bg-blue-600 text-white dark:bg-blue-500":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:s},s)),e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>r(a+1),disabled:a===t,type:"button",children:e.jsx(wa,{className:"w-4 h-4"})})]})}function dl({customer:a,orders:t,onClose:r}){const{t:n,i18n:i}=P(["dashboard","common"]),{settings:s}=ee(),l=i.language,o=ae.useMemo(()=>{if(!t.length)return null;const c=t.reduce((p,x)=>p+x.total,0),d=c/t.length,m=t[t.length-1],u=t[0];return{totalSpent:c,averageOrder:d,ordersCount:t.length,firstOrder:m,lastOrder:u}},[t]);return!a||!o?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-bold",children:n(a.name)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),a.email]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ut,{className:"w-4 h-4 mr-1"}),a.phone]})]})]}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(sr,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("costumer-total-spent")})]}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:G(o.totalSpent,s==null?void 0:s.currency)})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ea,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("orders")})]}),e.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:o.ordersCount})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ua,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("average-order-value")})]}),e.jsx("p",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400",children:G(o.averageOrder,s==null?void 0:s.currency)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3 text-gray-900 dark:text-white",children:n("costumer-history")}),e.jsx("div",{className:"space-y-2",children:t.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:["#",c.id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:va(c.createdAt,l)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-sm",children:G(c.total,s==null?void 0:s.currency)}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[c.items.length," ",n("orders-items")]})]})]},c.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("first-order")})]}),e.jsx("p",{className:"text-sm font-medium",children:va(o.firstOrder.createdAt,l)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Xe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("last-order")})]}),e.jsx("p",{className:"text-sm font-medium",children:va(o.lastOrder.createdAt,l)})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4",children:e.jsx(C,{onClick:r,className:"w-full",children:n("close")})})]})})}function Md({orders:a,itemsPerPage:t}){const{settings:r}=ee(),[n,i]=h.useState(1),[s,l]=h.useState(null),{t:o}=P("order"),c=h.useMemo(()=>{const x=a.reduce((g,f)=>{const v=f.customerPhone,b=g.get(v);return b?(b.totalOrders++,b.totalSpent+=f.total,b.orders.push(f)):g.set(v,{name:f.customerName,email:f.customerEmail,phone:f.customerPhone,totalOrders:1,totalSpent:f.total,orders:[f]}),g},new Map);return Array.from(x.values()).sort((g,f)=>f.totalSpent-g.totalSpent)},[a]),d=Math.ceil(c.length/t),m=(n-1)*t,u=c.slice(m,m+t),p=h.useMemo(()=>s?a.filter(x=>x.customerPhone===s.phone).sort((x,g)=>new Date(g.createdAt).getTime()-new Date(x.createdAt).getTime()):[],[s,a]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[u.map((x,g)=>e.jsxs(O.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},onClick:()=>l({name:x.name,email:x.email,phone:x.phone}),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors text-left",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.jsxs("span",{className:"flex items-center ",children:[e.jsx(cr,{className:"w-4 h-4 mr-1"})," ",x.name]})}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ut,{className:"w-4 h-4 mr-1"}),x.phone]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x.totalOrders," ",o("orders")]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:G(x.totalSpent,r==null?void 0:r.currency)})})]},x.email||x.phone)),d>1&&e.jsx(da,{currentPage:n,totalPages:d,onPageChange:i})]}),e.jsx(dl,{customer:s,orders:p,onClose:()=>l(null)})]})}function Td({order:a,onClose:t}){const{settings:r}=ee(),{t:n,i18n:i}=P("order"),s=i.language;return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(ea,{className:"w-5 h-5 text-blue-500"}),n("order")," #",a.id.slice(0,8)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:va(a.createdAt,s)})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[e.jsx($i,{order:a,status:a.status,createdAt:a.createdAt,updatedAt:a.updatedAt}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:n("common:client-details")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(ut,{className:"w-4 h-4"}),a.customerPhone]}),a.customerEmail&&e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(dt,{className:"w-4 h-4"}),a.customerEmail]}),a.diningOption==="delivery"&&a.customerAddress&&e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(cn,{className:"w-4 h-4"}),a.customerAddress]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:n("common:item-ordered")}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:a.items.map(l=>e.jsxs("div",{className:"py-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[G(l.price,r==null?void 0:r.currency)," ×"," ",l.quantity]})]}),e.jsx("p",{className:"font-medium",children:G(l.price*l.quantity,r==null?void 0:r.currency)})]},l.id))}),e.jsxs("div",{className:"border-t dark:border-gray-700 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:G(a.total,r==null?void 0:r.currency)})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t dark:border-gray-700 p-4",children:e.jsx(C,{onClick:t,className:"w-full",children:n("common:close")})})]})}):null}function Ds({orders:a,itemsPerPage:t}){const{t:r,i18n:n}=P("order"),i=n.language,{settings:s}=ee(),[l,o]=h.useState(1),[c,d]=h.useState(null),m=Math.ceil(a.length/t),u=(l-1)*t,p=a.slice(u,u+t),x={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",preparing:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",delivered:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[p.map((g,f)=>e.jsxs(O.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},onClick:()=>d(g),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors text-left",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[r("order-number")," ",g.id.slice(0,8)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:va(g.createdAt,i)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:G(g.total,s==null?void 0:s.currency)}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${x[g.status]}`,children:r(`order-status-${g.status}`)})]})]},g.id)),m>1&&e.jsx(da,{currentPage:l,totalPages:m,onPageChange:o})]}),e.jsx(re,{children:c&&e.jsx(Td,{order:c,onClose:()=>d(null)})})]})}function Od({orders:a,dateRange:t}){const{t:r}=P("dashboard"),{settings:n}=ee(),i=a.filter(d=>d.status==="delivered").reduce((d,m)=>d+Number(m.subtotal),0),s=a.length>0?Number(i)/a.length:0,l=a.length,o=ae.useMemo(()=>{if(!(t!=null&&t.startDate)||!(t!=null&&t.endDate))return 0;const d=Math.max(1,Math.ceil((t.endDate.getTime()-t.startDate.getTime())/(1e3*60*60*24)));return Number(i)/d},[t,i]),c=[{label:r("total-income"),value:G(Number(i),n==null?void 0:n.currency),icon:ca,color:"text-green-600 dark:text-green-400"},{label:r("average-order-value"),value:G(Number(s),n==null?void 0:n.currency),icon:Ua,color:"text-blue-600 dark:text-blue-400"},{label:r("orders-count"),value:l.toString(),icon:ea,color:"text-purple-600 dark:text-purple-400"},{label:r("daily-income"),value:G(o,n==null?void 0:n.currency),icon:Xe,color:"text-orange-600 dark:text-orange-400"}];return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((d,m)=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-opacity-20 ${d.color.replace("text","bg")}`,children:e.jsx(d.icon,{className:`w-5 h-5 ${d.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.label}),e.jsx("p",{className:"text-xl font-semibold",children:d.value})]})]})},d.label))})}const Ss=({orders:a})=>{const{t}=P("dashboard"),{settings:r}=ee(),n=h.useMemo(()=>{const s=a.reduce((l,o)=>{var d;const c=t(`order:payment-method-names.${((d=o==null?void 0:o.paymentMethod)==null?void 0:d.name)||"dine-in"}`);return l[c]=(l[c]||0)+Number(o.amountPaid||o.total||0),l},{});return Object.entries(s).map(([l,o])=>({name:l,total:Number(o).toFixed(2),percentage:(o/a.reduce((c,d)=>c+Number(d.amountPaid||d.total||0),0)*100).toFixed(1)})).sort((l,o)=>Number(o.total)-Number(l.total))},[a]),i=h.useMemo(()=>a.reduce((s,l)=>s+Number(l.amountPaid||l.total||0),0).toFixed(2),[a]);return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[t("settingData:payment-methods")||"Payment Methods"," ",e.jsx("br",{})," ",e.jsx("span",{className:"text-sm",children:t("common:all-taxes-included")})]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-3 py-1 rounded-full",children:[e.jsx(ca,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:G(i,r==null?void 0:r.currency)})]})]}),n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(sr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:t("dashboard:no-payment-data")||"No payment data available"})]}):e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:G(s.total,r==null?void 0:r.currency)})]}),e.jsx("div",{className:"w-full h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${s.percentage}%`}})})]},s.name))})]})};function Pd(){const a=In(),[t,r]=h.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),{orders:n,isLoading:i,error:s}=ur(),{t:l}=P("dashboard"),o=h.useMemo(()=>!n||n.length===0?[]:n.filter(m=>{if(!m.createdAt||!m.createdAt.seconds)return!1;try{const u=new Date(m.createdAt.seconds*1e3);return u>=t.startDate&&u<=t.endDate}catch(u){return console.error("Error parsing order date:",u,m),!1}}),[n,t]),c=h.useMemo(()=>o.filter(m=>m.status==="delivered"),[o]),d=h.useMemo(()=>{const m=Math.max(1,Math.ceil((t.endDate.getTime()-t.startDate.getTime())/864e5)),u=c.length/m;return{totalRevenue:c.reduce((p,x)=>p+Number(x.subtotal||0),0),totalOrders:c.length,uniqueCustomers:new Set(c.filter(p=>p.customerEmail||p.customerPhone).map(p=>p.customerEmail||p.customerPhone)).size,dailyOrderRate:Math.round(u*10)/10}},[c,t]);return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx(sc,{className:"w-10 h-10 mx-auto text-blue-500 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l("loading-orders")})]})}):s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center bg-red-50 dark:bg-red-900/20 p-6 rounded-xl max-w-md",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-800/30 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"⚠️"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2 text-red-700 dark:text-red-400",children:l("error-loading-orders")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:s.message||l("unknown-error")}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:l("try-again")})]})}):a?e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx(ad,{className:"w-12 h-12 mx-auto text-blue-500 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:l("limit-view-on-mobile")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:l("best-experience")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l("recent-orders")}),e.jsx(Ds,{orders:c,itemsPerPage:5})]}),e.jsx(ks,{...d}),e.jsx(Cs,{orders:c}),e.jsx(Ss,{orders:c})]}):e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:l("dashboard")}),e.jsx(Da,{startDate:t.startDate,endDate:t.endDate,onDateChange:(m,u)=>r({startDate:m,endDate:u})})]}),o.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"📊"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:l("no-orders-found")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l("try-different-date-range")})]}):e.jsxs(e.Fragment,{children:[e.jsx(ks,{...d}),e.jsx(Cs,{orders:c}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l("income")}),e.jsx(Od,{orders:c,dateRange:t})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l("order-status")}),e.jsx(Ed,{data:c.reduce((m,u)=>{const p=u.status||"unknown";return m[p]=(m[p]||0)+1,m},{})})]})]}),e.jsx("div",{children:e.jsx(Ss,{orders:c})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm lg:col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l("recent-orders")}),e.jsx(Ds,{orders:c,itemsPerPage:5})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm lg:col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:l("best-customer")}),e.jsx(Md,{orders:c.filter(m=>!!m.customerPhone),itemsPerPage:5})]})]})]})]})}function Ld(a){const{category:t,onSave:r,onCancel:n,isLoading:i}=a,{t:s}=P(),{register:l,handleSubmit:o,formState:{errors:c,isDirty:d}}=Ze({defaultValues:t||{name:"",description:"",order:0}});return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700/80",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s(t?"category:update-category":"category:new-category")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s(t?"category:update-category-details":"category:add-new-category")})]}),e.jsx("button",{onClick:n,className:"absolute right-4 top-4 p-2 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/60 transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m=>{m.stopPropagation(),o(r)(m)},className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(ol,{className:"w-4 h-4"}),s("common:name")]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...l("name",{required:"Le nom est requis"}),className:`
                  w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5 pl-4
                  border border-gray-200 dark:border-gray-700
                  text-gray-900 dark:text-white
                  placeholder:text-gray-400 dark:placeholder:text-gray-500
                  focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                  transition-shadow
                  ${c.name?"border-red-500 dark:border-red-500":""}
                `,placeholder:"Ex: Entrées"}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:c.name.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(Gc,{className:"w-4 h-4"}),s("common:description")]}),e.jsx("textarea",{...l("description"),rows:3,className:`
                w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5
                border border-gray-200 dark:border-gray-700
                text-gray-900 dark:text-white
                placeholder:text-gray-400 dark:placeholder:text-gray-500
                focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                transition-shadow resize-none
              `,placeholder:s("category:description-placeholder")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(rl,{className:"w-4 h-4"}),s("category:display-order")]}),e.jsx("input",{type:"number",...l("order",{valueAsNumber:!0,min:{value:0,message:"L'ordre doit être positif"}}),className:`
                w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5
                border border-gray-200 dark:border-gray-700
                text-gray-900 dark:text-white
                placeholder:text-gray-400 dark:placeholder:text-gray-500
                focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                transition-shadow
              `,placeholder:"0"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:n,className:"px-4",children:s("common:cancel")}),e.jsx(C,{type:"submit",disabled:!d||i,className:"px-6 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600",children:s(t?"common:update":"common:add")})]})]})]})})}function Ha(a){const{t}=P(),{isOpen:r,onClose:n,onConfirm:i,title:s,message:l}=a;return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s}),e.jsx("button",{onClick:n,children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l})}),e.jsxs("div",{className:"flex justify-end gap-4 p-6 border-t dark:border-gray-700",children:[e.jsx(C,{variant:"secondary",onClick:n,children:t("common:cancel")}),e.jsx(C,{variant:"danger",onClick:i,children:t("common:delete")})]})]})}):null}const ul=({title:a,description:t})=>e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:a}),t&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t})]});function Rd(){const{categories:a,isLoading:t,hasMore:r,loadMoreCategories:n,searchCategories:i,addCategory:s,updateCategory:l,deleteCategory:o,refreshCategories:c}=mt(),[d,m]=h.useState(null),[u,p]=h.useState(!1),[x,g]=h.useState(!1),[f,v]=h.useState(""),[b,y]=h.useState([]),[w,j]=h.useState(!1),[D,N]=h.useState(!1),[I,T]=h.useState({isOpen:!1}),[k,M]=h.useState("asc"),{t:A}=P();h.useEffect(()=>{const Y=setTimeout(()=>{f.trim()!==""?W(f):(j(!1),y([]))},500);return()=>clearTimeout(Y)},[f]);const W=async Y=>{if(!(Y.trim().length<2)){N(!0),j(!0);try{const ce=await i(Y);y(ce)}catch(ce){console.error("Error searching categories:",ce)}finally{N(!1)}}},z=()=>{v(""),j(!1),y([])},R=async Y=>{try{g(!0),d?(await l(d.id,Y),L.success(A("category:category-updated"))):(await s(Y),L.success(A("category:category-created"))),p(!1),m(null),w&&f.trim()!==""&&W(f)}catch(ce){console.error("Error saving category:",ce),L.error(A("category:category-error"))}finally{g(!1)}},B=Y=>{m(Y),p(!0)},E=Y=>{T({isOpen:!0,categoryId:Y.id,categoryName:Y.name})},q=async()=>{if(I.categoryId)try{await o(I.categoryId),L.success(A("category:category-deleted")),w&&f.trim()!==""&&W(f)}catch(Y){console.error("Error deleting category:",Y),L.error(A("category:category-error"))}finally{T({isOpen:!1})}},$=[...w?b:a].sort((Y,ce)=>{const ve=k==="asc"?1:-1;return(Y.order-ce.order)*ve}),Z=!w&&r&&!t,_=w?D:t,K=!_&&$.length===0;return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(Wt,{className:"w-6 h-6 text-blue-500"}),A("category:category-title")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:A("category:category-description")})]}),e.jsxs(C,{onClick:()=>p(!0),type:"button",children:[e.jsx("span",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx(me,{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-300"}),e.jsx("span",{className:"relative",children:A("category:new-category")})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:A("category:search-placeholder"),value:f,onChange:Y=>v(Y.target.value),className:"w-full pl-10 pr-10 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 transition-shadow"}),e.jsx(He,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),f&&e.jsx("button",{onClick:z,className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ie,{className:"h-5 w-5"})})]}),e.jsxs(C,{variant:"secondary",onClick:()=>M(Y=>Y==="asc"?"desc":"asc"),className:"min-w-[140px]",children:[e.jsx(Zi,{className:"w-4 h-4 mr-2"}),A(k==="asc"?"common:ascending":"common:descending")]})]}),w&&e.jsx("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:D?e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ce,{className:"w-3 h-3 mr-2 animate-spin"}),A("category:searching")]}):e.jsx("span",{children:A("common:search-results",{count:b.length})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:_&&$.length===0?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:A("common:category-loading")})]})}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(re,{mode:"popLayout",children:K?e.jsx(ul,{title:A("category:no-category-found-title"),description:A(w?"category:no-category-found":"category:no-category-description")}):$.map(Y=>e.jsx(O.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium",children:Y.order}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:Y.name}),Y.description&&e.jsx("p",{className:"mt-0.5 text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:Y.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(C,{variant:"ghost",onClick:()=>B(Y),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:A("common:edit")}),e.jsx(C,{variant:"ghost",onClick:()=>E(Y),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:A("common:delete")})]})]})},Y.id))})})}),Z&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs(C,{onClick:n,className:"px-4 py-2",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),A("common:load-more")]})}),!w&&t&&a.length>0&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("div",{className:"animate-spin",children:e.jsx(Ce,{className:"w-6 h-6 text-blue-500"})})}),u&&e.jsx(Ld,{isLoading:x,category:d,onSave:R,onCancel:()=>{p(!1),m(null)}}),e.jsx(Ha,{isOpen:I.isOpen,onClose:()=>T({isOpen:!1}),onConfirm:q,title:A("category:delete-category"),message:A("category:delete-category-message",{categoryName:I.categoryName})})]})}function ml({files:a,isLoading:t,onDelete:r,onSelect:n,selectedFiles:i=new Set,onToggleSelect:s}){return t?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((l,o)=>e.jsx("div",{className:"aspect-square animate-pulse bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-lg overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Vt,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 animate-pulse"})})},o))}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Vt,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun fichier trouvé"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:e.jsx(re,{mode:"popLayout",children:a.map(l=>e.jsxs(O.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s==null?void 0:s(l.id),className:`
              group relative aspect-square bg-gradient-to-br from-gray-100 to-gray-200 
              dark:from-gray-800 dark:to-gray-700 rounded-lg overflow-hidden shadow-sm 
              hover:shadow-md transition-all duration-200 cursor-pointer
              ${i.has(l.id)?"ring-2 ring-blue-500 dark:ring-blue-400":""}
            `,children:[e.jsx("img",{src:l.url,alt:l.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4",children:[e.jsx("p",{className:"text-white font-medium truncate mb-1",children:l.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-300",children:new Date(l.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[n?e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),n(l.url)},className:"bg-white/20 hover:bg-white/30",children:e.jsx(Ht,{className:"w-4 h-4 text-white"})}):e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),window.open(l.url,"_blank")},className:"bg-white/20 hover:bg-white/30",children:e.jsx(dn,{className:"w-4 h-4 text-white"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:o=>{o.stopPropagation(),r(l.id)},className:"bg-red-500/80 hover:bg-red-500",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})]})})]},l.id))})})}const Fd=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Ra(a,t,r){const n=Bd(a),{webkitRelativePath:i}=a,s=typeof t=="string"?t:typeof i=="string"&&i.length>0?i:`./${a.name}`;return typeof n.path!="string"&&As(n,"path",s),As(n,"relativePath",s),n}function Bd(a){const{name:t}=a;if(t&&t.lastIndexOf(".")!==-1&&!a.type){const n=t.split(".").pop().toLowerCase(),i=Fd.get(n);i&&Object.defineProperty(a,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return a}function As(a,t,r){Object.defineProperty(a,t,{value:r,writable:!1,configurable:!1,enumerable:!0})}const Gd=[".DS_Store","Thumbs.db"];function qd(a){return ka(this,void 0,void 0,function*(){return _t(a)&&$d(a.dataTransfer)?Vd(a.dataTransfer,a.type):zd(a)?Ud(a):Array.isArray(a)&&a.every(t=>"getFile"in t&&typeof t.getFile=="function")?Hd(a):[]})}function $d(a){return _t(a)}function zd(a){return _t(a)&&_t(a.target)}function _t(a){return typeof a=="object"&&a!==null}function Ud(a){return vn(a.target.files).map(t=>Ra(t))}function Hd(a){return ka(this,void 0,void 0,function*(){return(yield Promise.all(a.map(r=>r.getFile()))).map(r=>Ra(r))})}function Vd(a,t){return ka(this,void 0,void 0,function*(){if(a.items){const r=vn(a.items).filter(i=>i.kind==="file");if(t!=="drop")return r;const n=yield Promise.all(r.map(Wd));return Is(pl(n))}return Is(vn(a.files).map(r=>Ra(r)))})}function Is(a){return a.filter(t=>Gd.indexOf(t.name)===-1)}function vn(a){if(a===null)return[];const t=[];for(let r=0;r<a.length;r++){const n=a[r];t.push(n)}return t}function Wd(a){if(typeof a.webkitGetAsEntry!="function")return Es(a);const t=a.webkitGetAsEntry();return t&&t.isDirectory?xl(t):Es(a,t)}function pl(a){return a.reduce((t,r)=>[...t,...Array.isArray(r)?pl(r):[r]],[])}function Es(a,t){return ka(this,void 0,void 0,function*(){var r;if(globalThis.isSecureContext&&typeof a.getAsFileSystemHandle=="function"){const s=yield a.getAsFileSystemHandle();if(s===null)throw new Error(`${a} is not a File`);if(s!==void 0){const l=yield s.getFile();return l.handle=s,Ra(l)}}const n=a.getAsFile();if(!n)throw new Error(`${a} is not a File`);return Ra(n,(r=t==null?void 0:t.fullPath)!==null&&r!==void 0?r:void 0)})}function _d(a){return ka(this,void 0,void 0,function*(){return a.isDirectory?xl(a):Kd(a)})}function xl(a){const t=a.createReader();return new Promise((r,n)=>{const i=[];function s(){t.readEntries(l=>ka(this,void 0,void 0,function*(){if(l.length){const o=Promise.all(l.map(_d));i.push(o),s()}else try{const o=yield Promise.all(i);r(o)}catch(o){n(o)}}),l=>{n(l)})}s()})}function Kd(a){return ka(this,void 0,void 0,function*(){return new Promise((t,r)=>{a.file(n=>{const i=Ra(n,a.fullPath);t(i)},n=>{r(n)})})})}var Gr=function(a,t){if(a&&t){var r=Array.isArray(t)?t:t.split(",");if(r.length===0)return!0;var n=a.name||"",i=(a.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return r.some(function(l){var o=l.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):i===o})}return!0};function Ms(a){return Jd(a)||Qd(a)||hl(a)||Yd()}function Yd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qd(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Jd(a){if(Array.isArray(a))return bn(a)}function Ts(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,n)}return r}function Os(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ts(Object(r),!0).forEach(function(n){gl(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ts(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function gl(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function nt(a,t){return eu(a)||Zd(a,t)||hl(a,t)||Xd()}function Xd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hl(a,t){if(a){if(typeof a=="string")return bn(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bn(a,t)}}function bn(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=a[r];return n}function Zd(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,l,o;try{for(r=r.call(a);!(i=(l=r.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(c){s=!0,o=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw o}}return n}}function eu(a){if(Array.isArray(a))return a}var au=typeof Gr=="function"?Gr:Gr.default,tu="file-invalid-type",ru="file-too-large",nu="file-too-small",su="too-many-files",iu=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split(","),n=r.length>1?"one of ".concat(r.join(", ")):r[0];return{code:tu,message:"File type must be ".concat(n)}},Ps=function(t){return{code:ru,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Ls=function(t){return{code:nu,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},lu={code:su,message:"Too many files"};function fl(a,t){var r=a.type==="application/x-moz-file"||au(a,t);return[r,r?null:iu(t)]}function vl(a,t,r){if(ha(a.size))if(ha(t)&&ha(r)){if(a.size>r)return[!1,Ps(r)];if(a.size<t)return[!1,Ls(t)]}else{if(ha(t)&&a.size<t)return[!1,Ls(t)];if(ha(r)&&a.size>r)return[!1,Ps(r)]}return[!0,null]}function ha(a){return a!=null}function ou(a){var t=a.files,r=a.accept,n=a.minSize,i=a.maxSize,s=a.multiple,l=a.maxFiles,o=a.validator;return!s&&t.length>1||s&&l>=1&&t.length>l?!1:t.every(function(c){var d=fl(c,r),m=nt(d,1),u=m[0],p=vl(c,n,i),x=nt(p,1),g=x[0],f=o?o(c):null;return u&&g&&!f})}function Kt(a){return typeof a.isPropagationStopped=="function"?a.isPropagationStopped():typeof a.cancelBubble<"u"?a.cancelBubble:!1}function Ot(a){return a.dataTransfer?Array.prototype.some.call(a.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!a.target&&!!a.target.files}function Rs(a){a.preventDefault()}function cu(a){return a.indexOf("MSIE")!==-1||a.indexOf("Trident/")!==-1}function du(a){return a.indexOf("Edge/")!==-1}function uu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return cu(a)||du(a)}function Qe(){for(var a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),l=1;l<i;l++)s[l-1]=arguments[l];return t.some(function(o){return!Kt(n)&&o&&o.apply(void 0,[n].concat(s)),Kt(n)})}}function mu(){return"showOpenFilePicker"in window}function pu(a){if(ha(a)){var t=Object.entries(a).filter(function(r){var n=nt(r,2),i=n[0],s=n[1],l=!0;return bl(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(s)||!s.every(yl))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(r,n){var i=nt(n,2),s=i[0],l=i[1];return Os(Os({},r),{},gl({},s,l))},{});return[{description:"Files",accept:t}]}return a}function xu(a){if(ha(a))return Object.entries(a).reduce(function(t,r){var n=nt(r,2),i=n[0],s=n[1];return[].concat(Ms(t),[i],Ms(s))},[]).filter(function(t){return bl(t)||yl(t)}).join(",")}function gu(a){return a instanceof DOMException&&(a.name==="AbortError"||a.code===a.ABORT_ERR)}function hu(a){return a instanceof DOMException&&(a.name==="SecurityError"||a.code===a.SECURITY_ERR)}function bl(a){return a==="audio/*"||a==="video/*"||a==="image/*"||a==="text/*"||a==="application/*"||/\w+\/[-+.\w]+/g.test(a)}function yl(a){return/^.*\.[\w]+$/.test(a)}var fu=["children"],vu=["open"],bu=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],yu=["refKey","onChange","onClick"];function ju(a){return ku(a)||Nu(a)||jl(a)||wu()}function wu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nu(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ku(a){if(Array.isArray(a))return yn(a)}function qr(a,t){return Su(a)||Du(a,t)||jl(a,t)||Cu()}function Cu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jl(a,t){if(a){if(typeof a=="string")return yn(a,t);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yn(a,t)}}function yn(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=a[r];return n}function Du(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var n=[],i=!0,s=!1,l,o;try{for(r=r.call(a);!(i=(l=r.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(c){s=!0,o=c}finally{try{!i&&r.return!=null&&r.return()}finally{if(s)throw o}}return n}}function Su(a){if(Array.isArray(a))return a}function Fs(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,n)}return r}function ue(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fs(Object(r),!0).forEach(function(n){jn(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Fs(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function jn(a,t,r){return t in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}function Yt(a,t){if(a==null)return{};var r=Au(a,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(r[n]=a[n])}return r}function Au(a,t){if(a==null)return{};var r={},n=Object.keys(a),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=a[i]);return r}var Rn=h.forwardRef(function(a,t){var r=a.children,n=Yt(a,fu),i=Fn(n),s=i.open,l=Yt(i,vu);return h.useImperativeHandle(t,function(){return{open:s}},[s]),ae.createElement(h.Fragment,null,r(ue(ue({},l),{},{open:s})))});Rn.displayName="Dropzone";var wl={disabled:!1,getFilesFromEvent:qd,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Rn.defaultProps=wl;Rn.propTypes={children:le.func,accept:le.objectOf(le.arrayOf(le.string)),multiple:le.bool,preventDropOnDocument:le.bool,noClick:le.bool,noKeyboard:le.bool,noDrag:le.bool,noDragEventsBubbling:le.bool,minSize:le.number,maxSize:le.number,maxFiles:le.number,disabled:le.bool,getFilesFromEvent:le.func,onFileDialogCancel:le.func,onFileDialogOpen:le.func,useFsAccessApi:le.bool,autoFocus:le.bool,onDragEnter:le.func,onDragLeave:le.func,onDragOver:le.func,onDrop:le.func,onDropAccepted:le.func,onDropRejected:le.func,onError:le.func,validator:le.func};var wn={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Fn(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ue(ue({},wl),a),r=t.accept,n=t.disabled,i=t.getFilesFromEvent,s=t.maxSize,l=t.minSize,o=t.multiple,c=t.maxFiles,d=t.onDragEnter,m=t.onDragLeave,u=t.onDragOver,p=t.onDrop,x=t.onDropAccepted,g=t.onDropRejected,f=t.onFileDialogCancel,v=t.onFileDialogOpen,b=t.useFsAccessApi,y=t.autoFocus,w=t.preventDropOnDocument,j=t.noClick,D=t.noKeyboard,N=t.noDrag,I=t.noDragEventsBubbling,T=t.onError,k=t.validator,M=h.useMemo(function(){return xu(r)},[r]),A=h.useMemo(function(){return pu(r)},[r]),W=h.useMemo(function(){return typeof v=="function"?v:Bs},[v]),z=h.useMemo(function(){return typeof f=="function"?f:Bs},[f]),R=h.useRef(null),B=h.useRef(null),E=h.useReducer(Iu,wn),q=qr(E,2),S=q[0],$=q[1],Z=S.isFocused,_=S.isFileDialogActive,K=h.useRef(typeof window<"u"&&window.isSecureContext&&b&&mu()),Y=function(){!K.current&&_&&setTimeout(function(){if(B.current){var X=B.current.files;X.length||($({type:"closeDialog"}),z())}},300)};h.useEffect(function(){return window.addEventListener("focus",Y,!1),function(){window.removeEventListener("focus",Y,!1)}},[B,_,z,K]);var ce=h.useRef([]),ve=function(X){R.current&&R.current.contains(X.target)||(X.preventDefault(),ce.current=[])};h.useEffect(function(){return w&&(document.addEventListener("dragover",Rs,!1),document.addEventListener("drop",ve,!1)),function(){w&&(document.removeEventListener("dragover",Rs),document.removeEventListener("drop",ve))}},[R,w]),h.useEffect(function(){return!n&&y&&R.current&&R.current.focus(),function(){}},[R,y,n]);var De=h.useCallback(function(U){T?T(U):console.error(U)},[T]),We=h.useCallback(function(U){U.preventDefault(),U.persist(),ta(U),ce.current=[].concat(ju(ce.current),[U.target]),Ot(U)&&Promise.resolve(i(U)).then(function(X){if(!(Kt(U)&&!I)){var pe=X.length,xe=pe>0&&ou({files:X,accept:M,minSize:l,maxSize:s,multiple:o,maxFiles:c,validator:k}),Me=pe>0&&!xe;$({isDragAccept:xe,isDragReject:Me,isDragActive:!0,type:"setDraggedFiles"}),d&&d(U)}}).catch(function(X){return De(X)})},[i,d,De,I,M,l,s,o,c,k]),_e=h.useCallback(function(U){U.preventDefault(),U.persist(),ta(U);var X=Ot(U);if(X&&U.dataTransfer)try{U.dataTransfer.dropEffect="copy"}catch{}return X&&u&&u(U),!1},[u,I]),J=h.useCallback(function(U){U.preventDefault(),U.persist(),ta(U);var X=ce.current.filter(function(xe){return R.current&&R.current.contains(xe)}),pe=X.indexOf(U.target);pe!==-1&&X.splice(pe,1),ce.current=X,!(X.length>0)&&($({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ot(U)&&m&&m(U))},[R,m,I]),ne=h.useCallback(function(U,X){var pe=[],xe=[];U.forEach(function(Me){var Qa=fl(Me,M),Ia=qr(Qa,2),Mr=Ia[0],Tr=Ia[1],Or=vl(Me,l,s),St=qr(Or,2),Pr=St[0],Lr=St[1],Rr=k?k(Me):null;if(Mr&&Pr&&!Rr)pe.push(Me);else{var Fr=[Tr,Lr];Rr&&(Fr=Fr.concat(Rr)),xe.push({file:Me,errors:Fr.filter(function(Qo){return Qo})})}}),(!o&&pe.length>1||o&&c>=1&&pe.length>c)&&(pe.forEach(function(Me){xe.push({file:Me,errors:[lu]})}),pe.splice(0)),$({acceptedFiles:pe,fileRejections:xe,isDragReject:xe.length>0,type:"setFiles"}),p&&p(pe,xe,X),xe.length>0&&g&&g(xe,X),pe.length>0&&x&&x(pe,X)},[$,o,M,l,s,c,p,x,g,k]),Ne=h.useCallback(function(U){U.preventDefault(),U.persist(),ta(U),ce.current=[],Ot(U)&&Promise.resolve(i(U)).then(function(X){Kt(U)&&!I||ne(X,U)}).catch(function(X){return De(X)}),$({type:"reset"})},[i,ne,De,I]),Ee=h.useCallback(function(){if(K.current){$({type:"openDialog"}),W();var U={multiple:o,types:A};window.showOpenFilePicker(U).then(function(X){return i(X)}).then(function(X){ne(X,null),$({type:"closeDialog"})}).catch(function(X){gu(X)?(z(X),$({type:"closeDialog"})):hu(X)?(K.current=!1,B.current?(B.current.value=null,B.current.click()):De(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):De(X)});return}B.current&&($({type:"openDialog"}),W(),B.current.value=null,B.current.click())},[$,W,z,b,ne,De,A,o]),Sa=h.useCallback(function(U){!R.current||!R.current.isEqualNode(U.target)||(U.key===" "||U.key==="Enter"||U.keyCode===32||U.keyCode===13)&&(U.preventDefault(),Ee())},[R,Ee]),ma=h.useCallback(function(){$({type:"focus"})},[]),Ka=h.useCallback(function(){$({type:"blur"})},[]),Aa=h.useCallback(function(){j||(uu()?setTimeout(Ee,0):Ee())},[j,Ee]),Ke=function(X){return n?null:X},Ya=function(X){return D?null:Ke(X)},Ye=function(X){return N?null:Ke(X)},ta=function(X){I&&X.stopPropagation()},_o=h.useMemo(function(){return function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=U.refKey,pe=X===void 0?"ref":X,xe=U.role,Me=U.onKeyDown,Qa=U.onFocus,Ia=U.onBlur,Mr=U.onClick,Tr=U.onDragEnter,Or=U.onDragOver,St=U.onDragLeave,Pr=U.onDrop,Lr=Yt(U,bu);return ue(ue(jn({onKeyDown:Ya(Qe(Me,Sa)),onFocus:Ya(Qe(Qa,ma)),onBlur:Ya(Qe(Ia,Ka)),onClick:Ke(Qe(Mr,Aa)),onDragEnter:Ye(Qe(Tr,We)),onDragOver:Ye(Qe(Or,_e)),onDragLeave:Ye(Qe(St,J)),onDrop:Ye(Qe(Pr,Ne)),role:typeof xe=="string"&&xe!==""?xe:"presentation"},pe,R),!n&&!D?{tabIndex:0}:{}),Lr)}},[R,Sa,ma,Ka,Aa,We,_e,J,Ne,D,N,n]),Ko=h.useCallback(function(U){U.stopPropagation()},[]),Yo=h.useMemo(function(){return function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=U.refKey,pe=X===void 0?"ref":X,xe=U.onChange,Me=U.onClick,Qa=Yt(U,yu),Ia=jn({accept:M,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ke(Qe(xe,Ne)),onClick:Ke(Qe(Me,Ko)),tabIndex:-1},pe,B);return ue(ue({},Ia),Qa)}},[B,r,o,Ne,n]);return ue(ue({},S),{},{isFocused:Z&&!n,getRootProps:_o,getInputProps:Yo,rootRef:R,inputRef:B,open:Ke(Ee)})}function Iu(a,t){switch(t.type){case"focus":return ue(ue({},a),{},{isFocused:!0});case"blur":return ue(ue({},a),{},{isFocused:!1});case"openDialog":return ue(ue({},wn),{},{isFileDialogActive:!0});case"closeDialog":return ue(ue({},a),{},{isFileDialogActive:!1});case"setDraggedFiles":return ue(ue({},a),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ue(ue({},a),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return ue({},wn);default:return a}}function Bs(){}function Nl({progress:a,isComplete:t}){return e.jsxs("div",{className:"relative h-2 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:[e.jsx(O.div,{initial:{scaleX:0},animate:{scaleX:a/100},transition:{type:"spring",stiffness:200,damping:20},className:`absolute inset-0 origin-left ${t?"bg-green-500 dark:bg-green-400":"bg-blue-500 dark:bg-blue-400"}`}),!t&&a>0&&a<100&&e.jsx(O.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"}),t&&e.jsx(O.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:"absolute inset-0 bg-green-500/20"})]})}function Eu({onClose:a,onUpload:t,maxSizeMB:r=5,acceptedFileTypes:n=[".png",".jpg",".jpeg",".gif"]}){const[i,s]=h.useState(null),l=i!==null,o=i===100,c=h.useCallback(async p=>{const x=p[0];if(x)try{s(0),await t(x),s(100),setTimeout(()=>{a()},1500)}catch(g){console.error("Upload error:",g),s(null)}},[t,a]),{getRootProps:d,getInputProps:m,isDragActive:u}=Fn({onDrop:c,accept:{"image/*":n},maxSize:r*1024*1024,multiple:!1});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative w-full max-w-lg rounded-xl bg-white p-6 shadow-xl dark:bg-gray-800",children:[e.jsx("button",{onClick:a,disabled:l&&!o,className:"absolute right-4 top-4 rounded-full p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-900 dark:text-white",children:"Ajouter un média"}),e.jsxs("div",{...d(),className:`
            relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8
            transition-all
            ${u?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":o?"border-green-500 bg-green-50 dark:border-green-400 dark:bg-green-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}
          `,children:[e.jsx("input",{...m()}),l?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx(re,{mode:"wait",children:e.jsx(O.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-gray-900 dark:text-gray-100 font-medium",children:o?"Téléchargement terminé!":"Ajout d'image en cours..."},o?"complete":"uploading")}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[i,"%"]})]}),e.jsx(Nl,{progress:i||0,isComplete:o}),o&&e.jsxs(O.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center justify-center text-green-600 dark:text-green-400",children:[e.jsx(Ht,{className:"h-6 w-6 mr-2"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Téléchargement terminé!"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:`h-12 w-12 mb-4 ${u?"text-blue-500 dark:text-blue-400":"text-gray-400"}`}),e.jsx("p",{className:"text-center text-gray-900 dark:text-gray-100",children:u?"Déposez le fichier ici...":e.jsxs(e.Fragment,{children:["Glissez et déposez un fichier ici, ou",e.jsx("br",{}),e.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"cliquez pour sélectionner"})]})}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["PNG, JPG, GIF jusqu'à ",r,"MB"]})]})]})]})})}const $r=12;function Mu(a){const{t}=P(),{onSelect:r,onClose:n,files:i,onUpload:s}=a,[l,o]=h.useState(!0),[c,d]=h.useState(""),[m,u]=h.useState(!1),[p,x]=h.useState(1),g=i.filter(y=>y.name.toLowerCase().includes(c.toLowerCase())),f=Math.ceil(g.length/$r),v=g.slice((p-1)*$r,p*$r),b=async y=>{try{await s(y),u(!1)}catch(w){console.error("Upload error:",w)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-4xl max-h-[80vh] rounded-xl bg-white p-6 shadow-xl dark:bg-gray-800 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("media:media-title")}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.length," ",t("media:media-files")]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`${t("common:search-placeholder")}...`,value:c,onChange:y=>d(y.target.value),className:"w-full rounded-lg border pl-10 pr-4 py-2 dark:border-gray-700 dark:bg-gray-800"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(C,{variant:l?"primary":"secondary",size:"sm",onClick:()=>o(!0),children:e.jsx(tl,{className:"h-4 w-4"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(ml,{files:v,isLoading:!1,onDelete:()=>{},onSelect:r})}),f>1&&e.jsx("div",{className:"mt-6 pt-6 border-t dark:border-gray-700",children:e.jsx(da,{currentPage:p,totalPages:f,onPageChange:x})}),m&&e.jsx(Eu,{onClose:()=>u(!1),onUpload:b})]})})}class Tu{constructor(){Ea(this,"collection","media")}async getAllMedia(){try{const t=Pc(ga(Be,this.collection),Lc("createdAt","desc"));return(await Ta(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error fetching media:",t),new Error("Failed to fetch media files")}}async uploadFile(t,r){var n;try{const i=await et.uploadFile(t,r);return await Rc(Be,async s=>{const l={name:t.name,url:i,size:t.size,type:t.type,createdAt:new Date().toISOString()},o=hs(ga(Be,this.collection));s.set(o,l)}),i}catch(i){if(typeof i=="object"&&i!==null&&"url"in i)try{const s=(n=i.url.split("/").pop())==null?void 0:n.split(".")[0];s&&await et.deleteFile(s)}catch(s){console.error("Error cleaning up Cloudinary file:",s)}throw i}}async deleteFiles(t){try{const r=gn(Be),n=[];for(const i of t){const s=hs(Be,this.collection,i),l=await Fc(s);l.exists()&&(n.push({id:i,...l.data()}),r.delete(s))}await Promise.all(n.map(async i=>{var s;try{const l=(s=i.url.split("/").pop())==null?void 0:s.split(".")[0];l&&await et.deleteFile(l)}catch(l){console.error(`Error deleting file from Cloudinary: ${i.url}`,l)}})),await r.commit()}catch(r){throw console.error("Error deleting files:",r),new Error("Failed to delete files")}}}const Pa=new Tu;function Ou(){const[a,t]=h.useState([]),[r,n]=h.useState(!0);h.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const o=await Pa.getAllMedia();t(o)}catch(o){console.error("Error loading media files:",o),L.error("Failed to load media files")}finally{n(!1)}};return{files:a,isLoading:r,uploadFile:async o=>{try{const c=await Pa.uploadFile(o);return await i(),c}catch(c){throw console.error("Upload error:",c),L.error("Failed to upload file"),c}},deleteFile:async o=>{try{await Pa.deleteFile(o),await i(),L.success("Fichier supprimé avec succès")}catch(c){throw console.error("Delete error:",c),L.error("Impossible de supprimer le fichier"),c}},refreshFiles:i}}function ya(a){const{t}=P(),{value:r,onChange:n,label:i=t("setting:restaurant-logo"),description:s=t("setting:recommanded-format")}=a,[l,o]=h.useState(!1),{files:c,uploadFile:d}=Ou(),m=p=>{n(p),o(!1)},u=p=>{p.preventDefault(),p.stopPropagation(),o(!0)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 dark:text-gray-100",children:i}),e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col md:flex-row items-center gap-6 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("div",{className:`relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-xl 
          border-2 border-dashed 
          ${r?"border-blue-500/30 bg-blue-50/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800"} 
          flex items-center justify-center transition-all duration-300 hover:border-blue-500`,children:e.jsx(re,{mode:"wait",children:r?e.jsx(O.img,{src:r,alt:"Logo preview",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full w-full object-contain p-4",onError:()=>n("")},"logo"):e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center text-center text-gray-400 dark:text-gray-500",children:[e.jsx(Vt,{className:"h-10 w-10 mb-2"}),e.jsx("span",{className:"text-xs text-center px-2",children:t("common:no-logo-placeholder")})]},"placeholder")})}),e.jsxs("div",{className:"w-full md:flex-1 space-y-4",children:[e.jsxs(C,{type:"button",onClick:u,variant:"secondary",className:`w-full flex items-center justify-center gap-2 
              bg-blue-50 dark:bg-blue-900/30 
              text-blue-600 dark:text-blue-400 
              hover:bg-blue-100 dark:hover:bg-blue-900/50 
              border border-blue-100 dark:border-blue-900/40
              transition-all duration-300 
              group`,children:[e.jsx(or,{className:"h-5 w-5 transition-transform group-hover:rotate-6"}),t("common:select-upload-image")]}),e.jsx(re,{children:r&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs(C,{type:"button",variant:"danger",onClick:p=>{p.preventDefault(),p.stopPropagation(),n("")},className:`w-full flex items-center justify-center gap-2 
                    bg-red-50 dark:bg-red-900/30 
                    text-red-600 dark:text-red-400 
                    hover:bg-red-100 dark:hover:bg-red-900/50 
                    border border-red-100 dark:border-red-900/40
                    transition-all duration-300 
                    group`,children:[e.jsx(ie,{className:"h-5 w-5 transition-transform group-hover:rotate-6"}),t("common:remove-image")]})})})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 px-1",children:s}),l&&e.jsx(Mu,{onSelect:m,onClose:()=>o(!1),files:c,onUpload:d})]})}function Bn(a){const{t}=P(),[r,n]=h.useState([]),[i,s]=h.useState(!0);h.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0);const m=await It.getAll(a);n(m)}catch(m){console.error("Error loading inventory items:",m),L.error(t("inventory:failed-to-load-items"))}finally{s(!1)}};return{items:r,isLoading:i,addItem:async m=>{try{const u=await It.create(m);return n(p=>[...p,{...m,id:u}]),L.success(t("inventory:item-added-successfully")),u}catch(u){throw console.error("Error adding inventory item:",u),L.error(t("inventory:failed-to-add-item")),u}},updateItem:async(m,u)=>{try{await It.update(m,u),n(p=>p.map(x=>x.id===m?{...x,...u}:x)),L.success(t("inventory:item-updated-successfully"))}catch(p){throw console.error("Error updating inventory item:",p),L.error(t("inventory:failed-to-update-item")),p}},deleteItem:async m=>{try{await It.delete(m),n(u=>u.filter(p=>p.id!==m)),L.success(t("inventory:item-deleted-successfully"))}catch(u){throw console.error("Error deleting inventory item:",u),L.error(t("inventory:failed-to-delete-item")),u}},refreshItems:l}}function gt({tabs:a,activeTab:t,onChange:r}){return e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:a.map(n=>e.jsxs("button",{onClick:()=>r(n.id),type:"button",className:`relative py-4 px-1 ${t===n.id?"text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[n.label,t===n.id&&e.jsx(O.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},n.id))})})}function Pu(a){const{t}=P(),{variants:r,combination:n,price:i,image:s,onCombinationChange:l,onPriceChange:o,onImageChange:c,onRemove:d}=a,{settings:m}=ee(),u=x=>{c(x)},p=(x,g)=>{const f=g.filter(Boolean).find(v=>v.includes(x.name));return f&&f.split(": ")[1]||""};return e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg space-y-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:r.map((x,g)=>e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:x.name}),e.jsxs("select",{className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",value:p(x,n),onChange:f=>{const v=[...n];v[g]=`${x.name}: ${f.target.value}`,l(v)},children:[e.jsx("option",{value:"null",children:t("variant:select-variant-value")}),x.values.map(f=>e.jsx("option",{value:f,children:f},f))]})]})},x.id))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("common:price")}),e.jsx("input",{type:"number",step:(m==null?void 0:m.currency)==="XOF"?"1":"0.01",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",value:i,onChange:x=>o(parseFloat(x.target.value))})]}),e.jsx("div",{onClick:x=>x.stopPropagation(),children:e.jsx(ya,{value:s||"",onChange:u,label:t("variant:variant-image"),description:t("variant:variant-image-description")})})]}),e.jsx(C,{type:"button",variant:"danger",size:"sm",onClick:x=>d(x),className:"ml-4",children:e.jsx(ie,{className:"w-4 h-4"})})]})})}function Lu(a){const{t}=P(),{variants:r,value:n,onChange:i}=a,s=c=>{c.preventDefault(),c.stopPropagation(),i([{variantCombination:[],price:0,image:""},...n].filter(Boolean))},l=(c,d)=>{d&&(d.preventDefault(),d.stopPropagation()),i(n.filter((m,u)=>u!==c))},o=(c,d)=>{const m=[...n];m[c]={...m[c],variantCombination:d},i(m)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t("variant:variants-combination")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t("variant:variants-combination-description")})]}),e.jsxs(C,{type:"button",onClick:s,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),t("variant:add-combination")]})]}),e.jsx(re,{mode:"popLayout",children:n.length===0?e.jsx(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx(zi,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900 dark:text-white",children:t("variant:no-variant-combination")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t("variant:no-variant-combination-description")})]})}):e.jsx("div",{className:"grid gap-4",children:n.map((c,d)=>e.jsx(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{layout:{duration:.2},opacity:{duration:.2}},children:e.jsx(Pu,{variants:r,combination:c.variantCombination,price:c.price,image:c.image,onCombinationChange:m=>o(d,m),onPriceChange:m=>{const u=[...n];u[d]={...u[d],price:m},i(u)},onImageChange:m=>{const u=[...n];u[d]={...u[d],image:m},i(u)},onRemove:m=>l(d,m)})},d))})})]})}const Ru=h.memo(({selectedCategory:a,variants:t,variantPrices:r,setVariantPrices:n,onVariantChange:i})=>{const{t:s}=P(),l=h.useCallback(o=>{n(o),i()},[n,i]);return e.jsx("div",{children:a&&t.length>0?e.jsx(Lu,{variants:t,value:r,onChange:l}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:s("inventory:select-category-to-add-variants")})})}),Fu=({register:a,watch:t,setValue:r,inventory:n})=>{const{t:i}=P(),[s,l]=h.useState(t("inventoryConnections")||[]);ae.useEffect(()=>{const d=t((m,{name:u})=>{u!=null&&u.startsWith("inventoryConnections")&&l(m.inventoryConnections||[])});return()=>d.unsubscribe()},[t]);const o=h.useCallback(d=>{const m=[...s];m.splice(d,1),r("inventoryConnections",m,{shouldDirty:!0})},[s,r]),c=h.useCallback(()=>{const d={itemId:"",ratio:1};r("inventoryConnections",[...s,d],{shouldDirty:!0,shouldTouch:!0})},[s,r]);return e.jsxs("div",{className:"space-y-4",children:[s.map((d,m)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("variant:product")}),e.jsxs("select",{...a(`inventoryConnections.${m}.itemId`),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"",children:i("variant:select-inventory-product")}),n.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Ratio (1:",t(`inventoryConnections.${m}.ratio`)||"0",")"]}),e.jsx("span",{className:"text-sm",children:i("variant:ratio-description")}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",...a(`inventoryConnections.${m}.ratio`),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Ex: 3 pour 1:3"})]}),e.jsx(C,{type:"button",variant:"ghost",onClick:()=>o(m),className:"mt-6",children:e.jsx(ie,{className:"w-4 h-4"})})]},`connection-${m}`)),e.jsxs(C,{type:"button",variant:"secondary",onClick:c,className:"mt-4",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),i("variant:add-inventory-connection")]})]})},Bu=({register:a,errors:t,watch:r,setValue:n,settings:i,categories:s,selectedCategory:l,handleCategoryChange:o})=>{const{t:c}=P(),[d,m]=h.useState(r("image"));return ae.useEffect(()=>{const u=r((p,{name:x})=>{x!=null&&x.startsWith("image")&&m(p.image||"")});return()=>u.unsubscribe()},[r]),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c("common:name")}),e.jsx("input",{type:"text",...a("name",{required:c("common:name-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c("common:category")}),e.jsxs("select",{...a("categoryId",{required:c("common:category-is-required")}),onChange:o,value:l,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"",children:c("common:select-category")}),s.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),t.categoryId&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.categoryId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c("common:price")}),e.jsx("input",{type:"number",step:(i==null?void 0:i.currency)==="XOF"?"1":"0.01",...a("price",{required:c("common:price-is-required"),min:{value:0,message:c("common:price-must-be-positive")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),t.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.price.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c("common:stock-quantity")}),e.jsx("input",{type:"number",...a("stockQuantity",{required:c("common:stock-quantity-is-required"),min:{value:0,message:"Le stock doit être positif"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),t.stockQuantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.stockQuantity.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:c("common:description")}),e.jsx("textarea",{...a("description",{required:c("common:description-is-required")}),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.description.message})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ya,{value:d,onChange:u=>n("image",u,{shouldDirty:!0}),label:c("common:product-image"),description:c("common:product-image-description")})})]})})};function Gu({item:a,onSave:t,onCancel:r}){const{t:n}=P(),[i,s]=h.useState("product"),{categories:l}=mt(),{settings:o}=ee(),[c,d]=h.useState((a==null?void 0:a.categoryId)||""),{items:m}=Bn(),{variants:u}=Ui(c),[p,x]=h.useState((a==null?void 0:a.variantPrices)||[]),[g,f]=h.useState(!1),v=Ze({defaultValues:{name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||"",price:(a==null?void 0:a.price)||0,image:(a==null?void 0:a.image)||"",categoryId:(a==null?void 0:a.categoryId)||"",stockQuantity:(a==null?void 0:a.stockQuantity)||0,inventoryConnections:(a==null?void 0:a.inventoryConnections)||[]},mode:"onChange"}),{register:b,handleSubmit:y,watch:w,setValue:j,formState:{errors:D}}=v;h.useState(JSON.stringify((a==null?void 0:a.variantPrices)||[]));const N=h.useCallback((R,B)=>{var $;const E=u.find(Z=>Z.name===R);if(!E)return 0;const q=E.values.find(Z=>Z===B);if(!q)return 0;const S=E.values.indexOf(q);return(($=E.prices)==null?void 0:$[S])||0},[u]),I=h.useCallback(R=>R.reduce((B,E)=>{const[q,S]=E.split(": ");return B+N(q,S)},0),[N]),T=h.useCallback(()=>{if(!u.length)return[];const R=[[]];return u.forEach(B=>{const E=[];B.values.forEach(q=>{R.forEach(S=>{E.push([...S,`${B.name}: ${q}`])})}),R.length=0,R.push(...E)}),R},[u]),k=h.useCallback(()=>{f(!0)},[]),M=h.useCallback(R=>{const B=R.target.value;d(B),j("categoryId",B,{shouldDirty:!0}),B!==(a==null?void 0:a.categoryId)&&(x([]),f(!0))},[a==null?void 0:a.categoryId,j]),A=h.useCallback(R=>{T(),Number(R.price);const B={...R,price:Number(R.price),stockQuantity:Number(R.stockQuantity),variantPrices:p.map(E=>({...E,price:Number(E.price)})),defaultVariantPrices:[],inventoryConnections:R.inventoryConnections.filter(E=>E.itemId&&E.ratio).map(E=>({...E,ratio:Number(E.ratio)}))};t(B)},[p,I,T,t]),W=h.useMemo(()=>[{id:"product",label:n("common:base-information")},{id:"variants",label:n("common:variants")},{id:"inventory",label:n("common:inventory")}],[n]),z=h.useCallback(()=>{switch(i){case"product":return e.jsx(Bu,{register:b,errors:D,watch:w,setValue:j,settings:o,categories:l,selectedCategory:c,handleCategoryChange:M});case"inventory":return e.jsx(Fu,{register:b,watch:w,setValue:j,inventory:m});case"variants":return e.jsx(Ru,{selectedCategory:c,variants:u,variantPrices:p,setVariantPrices:x,onVariantChange:k});default:return null}},[i,b,D,w,j,o,l,c,M,m,u,p,k]);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[90vw] max-w-4xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b dark:border-gray-700/80",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:n(a?"inventory:update-product":"inventory:new-product")}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsx(Hi,{...v,children:e.jsxs("form",{onSubmit:y(A),className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden p-2",children:[e.jsx(gt,{tabs:W,activeTab:i,onChange:s}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:z()})]}),e.jsx("div",{className:"p-4 md:p-6 border-t dark:border-gray-700/80 mt-auto",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"ghost",onClick:r,children:n("common:cancel")}),e.jsx(C,{type:"submit",className:`
                    px-6 py-2 rounded-lg font-medium text-white
                    transition-all duration-200
                    bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl
                  `,children:n(a?"common:update":"common:add")})]})})]})})]})})}const kl=h.forwardRef(({item:a,onEdit:t,onDelete:r,currency:n},i)=>{var m;const{t:s}=P(),l=a.stockQuantity===0,o=a,c=ae.useMemo(()=>{var p;if(!((p=o.variantPrices)!=null&&p.length))return{min:a.price,max:a.price};const u=[a.price,...o.variantPrices.map(x=>x.price)];return{min:Math.min(...u),max:Math.max(...u)}},[a,o.variantPrices]),d=((m=o.variantPrices)==null?void 0:m.length)>0;return e.jsxs(O.div,{ref:i,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"group relative flex flex-col overflow-hidden rounded-xl bg-white shadow-md transition-all duration-300 hover:translate-y-[-4px] hover:shadow-xl dark:bg-gray-800",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.name,className:"h-full w-full object-cover transition-transform duration-500 will-change-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),l?e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-red-500/90 px-3 py-1.5 text-sm font-medium text-white shadow-lg",children:"Rupture de stock"}):a.stockQuantity<=5&&e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-amber-500/90 px-3 py-1.5 text-sm font-medium text-white shadow-lg",children:s("common:weak-stock",{quantity:a.stockQuantity})}),e.jsx("div",{className:"absolute right-4 top-4 rounded-full bg-white/95 px-4 py-2 text-sm font-bold text-gray-900 shadow-lg backdrop-blur-sm dark:bg-gray-900/95 dark:text-white",children:d?e.jsxs(e.Fragment,{children:[G(c.min,n),c.max>c.min&&e.jsxs(e.Fragment,{children:[" - ",G(c.max,n)]})]}):G(a.price,n)})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-5",children:[e.jsxs("div",{className:"mb-4 flex-1",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 transition-colors dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 dark:text-gray-300",children:a.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:a.category}),e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx($e,{className:"h-4 w-4"}),a.stockQuantity," ",s("common:in-stock")]})]}),d&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.variantPrices.slice(0,2).filter(u=>{var p;return((p=u==null?void 0:u.variantCombination)==null?void 0:p.length)>0}).map((u,p)=>e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                             bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,children:u.variantCombination[0].split(": ")[1]},p)),o.variantPrices.length>2&&e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                                 bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`,children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),o.variantPrices.length-2]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>t(a),className:"h-9 w-9 rounded-full p-0 text-gray-500 hover:bg-blue-50 hover:text-blue-600 dark:text-gray-400 dark:hover:bg-blue-900/50 dark:hover:text-blue-400",children:[e.jsx(Ca,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Modifier"})]}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>r(a.id),className:"h-9 w-9 rounded-full p-0 text-gray-500 hover:bg-red-50 hover:text-red-600 dark:text-gray-400 dark:hover:bg-red-900/50 dark:hover:text-red-400",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Supprimer"})]})]})]})]})]})});kl.displayName="MenuItemCard";function qu({items:a,onEdit:t,onDelete:r,currency:n}){return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(re,{mode:"popLayout",children:a.map(i=>e.jsx(kl,{item:i,onEdit:t,onDelete:r,currency:n},i.id))})})})}function $u({value:a,onChange:t}){const{t:r}=P();return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:r("search"),value:a,onChange:n=>t(n.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500"}),e.jsx(He,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})}function zu(a){const{selectedCategory:t,onCategoryChange:r}=a,{t:n}=P(),{categories:i}=mt();return e.jsxs("div",{className:"relative w-48",children:[e.jsx("label",{htmlFor:"category-select",className:"sr-only",children:n("Select Category")}),e.jsxs("select",{id:"category-select",value:t,onChange:s=>r(s.target.value),className:"block appearance-none w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 ease-in-out",children:[e.jsx("option",{value:"all",children:n("common:product")}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-200",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.516 7.548a.75.75 0 011.06.02L10 11.292l3.424-3.724a.75.75 0 111.08 1.04l-4 4.344a.75.75 0 01-1.08 0l-4-4.344a.75.75 0 01.02-1.06z"})})})]})}function Uu(){const{t:a}=P(),{settings:t}=ee(),[r,n]=h.useState([]),[i,s]=h.useState(null),[l,o]=h.useState(!1),[c,d]=h.useState(!0),[m,u]=h.useState(!1),[p,x]=h.useState(""),[g,f]=h.useState(!1),[v,b]=h.useState("all"),[y,w]=h.useState({isOpen:!1}),[j,D]=h.useState(null),[N,I]=h.useState(!1),[T]=h.useState(10);h.useEffect(()=>{g||k()},[v,g]),h.useEffect(()=>{const S=setTimeout(()=>{p?A():g&&(f(!1),k())},500);return()=>clearTimeout(S)},[p,v]);const k=async()=>{try{if(d(!0),v!=="all")try{const S=await we.getMenuItemsByCategory(v);n(S.slice(0,T)),I(S.length>T),D(null)}catch(S){console.error("Error loading category items:",S),L.error(a("common:error-loading-items"))}else try{const S=await we.getMenuItemsPaginated(T,null);n(S.items),D(S.lastDoc),I(S.hasMore)}catch(S){console.error("Error loading paginated items:",S);const $=await we.getAll();n($.slice(0,T)),I($.length>T),D(null)}}catch(S){console.error("Error loading menu items:",S),L.error(a("common:error-loading-items"))}finally{d(!1)}},M=async()=>{if(!(!N||m||g))try{if(u(!0),v!=="all"){const S=await we.getMenuItemsByCategory(v),$=r.length,Z=S.slice($,$+T);n(_=>[..._,...Z]),I($+T<S.length)}else{const S=await we.getMenuItemsPaginated(T,j);n($=>[...$,...S.items]),D(S.lastDoc),I(S.hasMore)}}catch(S){console.error("Error loading more menu items:",S),L.error(a("common:error-loading-more-items"))}finally{u(!1)}},A=async()=>{if(p.trim()){d(!0),f(!0);try{let S;v==="all"?S=await we.getAll():S=await we.getMenuItemsByCategory(v);const $=S.filter(Z=>{var _;return Z.name.toLowerCase().includes(p.toLowerCase())||((_=Z.description)==null?void 0:_.toLowerCase().includes(p.toLowerCase()||""))});n($),I(!1),D(null)}catch(S){console.error("Error searching menu items:",S),L.error(a("common:error-searching"))}finally{d(!1)}}},W=()=>{x(""),f(!1),k()},z=S=>{b(S),D(null),I(!1),g&&(x(""),f(!1))},R=async S=>{try{if(i)await we.update(i.id,S),n($=>$.map(Z=>Z.id===i.id?{...S,id:i.id}:Z));else{const $=await we.create(S);n(Z=>[{...S,id:$},...Z])}o(!1),s(null),L.success(a(i?"common:item-updated":"common:item-created"))}catch($){console.error("Error saving menu item:",$),L.error(a("common:error"))}},B=S=>{s(S),o(!0)},E=async S=>{w({isOpen:!0,itemId:S})},q=async()=>{if(y.itemId)try{await we.delete(y.itemId),n(S=>S.filter($=>$.id!==y.itemId)),L.success(a("common:item-deleted"))}catch(S){console.error("Error deleting menu item:",S),L.error(a("common:error-deleting"))}finally{w({isOpen:!1})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex-1 w-full md:w-auto relative",children:[e.jsx($u,{value:p,onChange:x,onClear:W}),g&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400 flex items-center",children:[e.jsx(He,{className:"w-3 h-3 mr-2"}),a("common:search-results",{count:r.length})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 w-full md:w-auto",children:[e.jsx(zu,{selectedCategory:v,onCategoryChange:z}),e.jsxs(C,{onClick:()=>o(!0),children:[e.jsx(me,{className:"w-5 h-5 mr-2"}),a("variant:add-item")]})]})]}),c&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((S,$)=>e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg h-72 animate-pulse"},$))}),!c&&r.length<1&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(ul,{title:a("common:no-items-found")})})}),!c&&r.length>0&&e.jsx(qu,{items:r,onEdit:B,onDelete:E,currency:t==null?void 0:t.currency}),!c&&N&&!g&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs(C,{onClick:M,disabled:m,className:"px-6 py-2",children:[m?e.jsx(Ce,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ce,{className:"w-4 h-4 mr-2"}),a("common:load-more")]})}),e.jsx(re,{children:l&&e.jsx(Gu,{item:i,onSave:R,onCancel:()=>{o(!1),s(null)},currency:t==null?void 0:t.currency})}),e.jsx(Ha,{isOpen:y.isOpen,onClose:()=>w({isOpen:!1}),onConfirm:q,title:a("common:delete-product"),message:a("common:delete-product-message")})]})}function Hu({order:a}){const{settings:t}=ee(),r=a.items.reduce((l,o)=>l+o.quantity,0),{t:n,i18n:i}=P(["order","common"]),s=i.language;return e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[n("order")," #",a.id.slice(0,8)]}),a.diningOption==="dine-in"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-sm font-medium",children:[e.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Table ",a.tableNumber]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-xl bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-sm font-medium",children:[e.jsx(rt,{className:"w-4 h-4 mr-2"}),n("delivery")]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:va(a.createdAt,s)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:G(a.total,t==null?void 0:t.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r," article",r>1?"s":""]})]})]})}function Vu({order:a}){var n,i;const{settings:t}=ee(),{t:r}=P();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:r("common:client-details")}),e.jsxs("div",{className:"text-sm opacity-75 space-y-1",children:[e.jsx("p",{children:a.customerName}),e.jsx("p",{children:a.customerPhone}),a.customerEmail&&e.jsx("p",{children:a.customerEmail}),a.diningOption==="delivery"&&e.jsxs("p",{className:"font-medium",children:[r("order:delivery-address")," : ",a.customerAddress]}),a.delivery&&e.jsxs("p",{className:"font-medium",children:[r("order:delivery-to")," ",a.delivery.name]})]})]}),a.paymentMethod&&e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(sr,{className:"w-4 h-4"}),r("common:payment-method")]}),e.jsx("div",{className:"text-sm opacity-75",children:e.jsx("p",{children:r(`order:payment-method-names.${a.paymentMethod.name}`)})})]}),e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:r("order:product-order")}),e.jsx("div",{className:"space-y-2",children:a.items.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[s.quantity,"x ",s.name]}),e.jsx("span",{children:G(s.price*s.quantity,t==null?void 0:t.currency)})]},s.id))}),(!!a.subtotal||!!(a!=null&&a.taxes)||!!((n=a==null?void 0:a.tip)!=null&&n.percentage))&&e.jsxs("div",{className:"space-y-2  pt-4 mt-4 border-t border-current/10",children:[a.subtotal&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:r("cart:sub-total")}),e.jsx("span",{children:G(a.subtotal,t==null?void 0:t.currency)})]}),((a==null?void 0:a.taxes)||[]).map(s=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-800 dark:text-gray-400",children:[e.jsxs("span",{children:[s.name," (",Wi(s.rate),")"]}),e.jsx("span",{children:G(s.amount,t==null?void 0:t.currency)})]},s.id)),((i=a==null?void 0:a.tip)==null?void 0:i.percentage)&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[r("tip")," (",a.tip.percentage,"%)"]}),e.jsx("span",{children:G(a.tip.amount,t==null?void 0:t.currency)})]},a.tip.amount),(a==null?void 0:a.delivery)&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:r("delivery")}),e.jsx("span",{children:G(Number(a.delivery.price),t==null?void 0:t.currency)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:r("common:total")}),e.jsx("span",{children:G(a.total,t==null?void 0:t.currency)})]})]})]}),a.preference&&e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(la,{})," ",r("order:customer-indication")]}),e.jsx("p",{className:"text-sm",children:a.preference})]})]})}const Cl=ae.forwardRef(({order:a,onStatusChange:t,onCancel:r},n)=>{const{settings:i}=ee(),{t:s,i18n:l}=P("order"),o=l.language,c=["pending","preparing"].includes(a.status),[d,m]=h.useState(!1),u={pending:"bg-yellow-50 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-300",preparing:"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300",ready:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-300",delivered:"bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-300",cancelled:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300"},p=async()=>{var x;try{m(!0);const g=un(s),f=mn(i),v=await pn(a,{...g,paymentMethodName:s(`payment-method-names.${a.diningOption==="dine-in"?"dine-in":(x=a.paymentMethod)==null?void 0:x.name}`)},s,o,f);v.autoPrint(),window.open(v.output("bloburl")),L.success(s("invoice-in-printing"))}catch(g){console.error("Error printing receipt:",g),L.error(s("printing-error"))}finally{m(!1)}};return e.jsx(O.div,{ref:n,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`rounded-lg shadow-sm p-6 ${u[a.status]} ${a.status==="cancelled"?"opacity-75 cursor-not-allowed":""}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Hu,{order:a}),e.jsx($i,{order:a,status:a.status,createdAt:a.createdAt,updatedAt:a.updatedAt}),e.jsx(Vu,{order:a}),e.jsxs("div",{className:"flex justify-between items-center gap-4 pt-4 border-t border-current/10",children:[a.status!=="cancelled"&&a.status!=="delivered"&&e.jsx(C,{onClick:()=>t(a.id,a.status==="pending"?"preparing":"delivered"),className:"flex-1 bg-white/90 hover:bg-white text-current",children:a.status==="pending"?s("mark-in-cooking"):s("mark-as-delivered")}),c&&r&&e.jsx(C,{variant:"danger",onClick:()=>r(a.id),className:"flex-1",children:s("cancel-order")})]}),e.jsxs(C,{onClick:p,disabled:d,className:"bg-white/90 hover:bg-white text-current px-4 py-2 rounded w-full",children:[e.jsx(sl,{className:"h-4 w-4 mr-2"}),s(d?"common:printing":"print-bill")]})]})})});Cl.displayName="OrderCard";function Wu(a){const{orders:t,onStatusChange:r,onCancel:n,isLoading:i=!1,hasMore:s=!1,onLoadMore:l}=a,{t:o}=P("order"),c=h.useRef(null);return h.useEffect(()=>{if(!s||!l)return;const d=new IntersectionObserver(m=>{m[0].isIntersecting&&!i&&l()},{rootMargin:"200px",threshold:.1});return c.current&&d.observe(c.current),()=>{c.current&&d.unobserve(c.current)}},[s,l,i]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(re,{mode:"popLayout",children:t.map(d=>e.jsx(O.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{duration:.3},opacity:{duration:.2}},children:e.jsx(Cl,{order:d,onStatusChange:r,onCancel:n})},d.id))}),i&&t.length===0&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full flex flex-col items-center justify-center py-12",children:[e.jsx(Je,{className:"w-10 h-10 animate-spin text-blue-500"}),e.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:o("loading-orders")})]}),!i&&t.length===0&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:e.jsx("p",{className:"text-lg",children:o("no-order-found")})})]}),s&&l&&e.jsx("div",{ref:c,className:"h-10 w-full","aria-hidden":"true"})]})}function _u(a){const{t}=P("order"),{stats:r}=a,n=[{title:t("common:total-orders"),value:r.total,icon:ea,color:"blue"},{title:t("common:pending"),value:r.pending,icon:En,color:"yellow"},{title:t("common:in-cooking"),value:r.preparing,icon:pt,color:"purple"},{title:t("common:delivered"),value:r.delivered,icon:Mn,color:"green"}],i={blue:"bg-blue-50 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400",yellow:"bg-yellow-50 text-yellow-600 dark:bg-yellow-900/50 dark:text-yellow-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400",green:"bg-green-50 text-green-600 dark:bg-green-900/50 dark:text-green-400"};return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map((s,l)=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${i[s.color]}`,children:e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:s.title}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:s.value})]})]})},s.title))})}function Ku(a){const{currentFilter:t,onFilterChange:r,dateRange:n,onDateRangeChange:i}=a,{t:s}=P("order"),l=[{value:"all",label:s("common:all-orders")},{value:"pending",label:s("common:pending")},{value:"preparing",label:s("common:in-cooking")},{value:"delivered",label:s("common:delivered")},{value:"cancelled",label:s("common:canceled")}],o=[{label:s("common:today"),days:0},{label:s("common:last-week"),days:7},{label:s("common:last-month"),days:30}],c=m=>{const u=new Date,p=new Date;m>0?p.setDate(p.getDate()-m):p.setHours(0,0,0,0),i({from:p,to:u})},d=()=>{i({})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(m=>e.jsx(C,{variant:t===m.value?"primary":"secondary",onClick:()=>r(m.value),size:"sm",children:m.label},m.value))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5 text-gray-500"}),o.map(m=>e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>c(m.days),children:m.label},m.label)),(n.from||n.to)&&e.jsx(C,{variant:"secondary",size:"sm",onClick:d,children:s("common:reset-filter")})]})]})}function Fa(a){const{t}=P(),{isOpen:r,title:n,message:i,confirmLabel:s=t("common:confirm"),cancelLabel:l=t("common:cancel"),onConfirm:o,onCancel:c,isLoading:d}=a;return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-6 border-b dark:border-gray-700",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(la,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i})]}),e.jsx("button",{onClick:c,className:"absolute right-4 top-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 bg-gray-50 dark:bg-gray-800/50",children:[e.jsx(C,{variant:"secondary",onClick:c,disabled:d,children:l}),e.jsx(C,{variant:"danger",onClick:o,disabled:d,children:d?t("common:deleting"):s})]})]})}):null}function Yu(){const{t:a}=P(),{orders:t,isLoading:r,isLoadingMore:n,hasMore:i,loadMoreOrders:s,updateOrderStatus:l,searchOrders:o,refreshOrders:c}=ir(),[d,m]=h.useState("all"),[u,p]=h.useState({}),[x,g]=h.useState({isOpen:!1}),[f,v]=h.useState(""),[b,y]=h.useState([]),[w,j]=h.useState(!1),[D,N]=h.useState(!1),I=h.useRef(new Set),T=h.useRef(!0);h.useEffect(()=>{c()},[]),h.useEffect(()=>{if(r||w||t.length===0)return;if(T.current){t.forEach(E=>{I.current.add(E.id)}),T.current=!1;return}const B=t.filter(E=>!I.current.has(E.id));B.length>0&&(B.filter(E=>E.status==="pending"),B.forEach(E=>{I.current.add(E.id)}))},[t,r,w]),h.useEffect(()=>{const B=setTimeout(()=>{f.trim()!==""?k(f):(j(!1),y([]))},500);return()=>clearTimeout(B)},[f]);const k=async B=>{if(!(B.trim().length<2)){N(!0),j(!0);try{const E=await o(B);y(E)}catch(E){console.error("Error searching orders:",E)}finally{N(!1)}}},M=()=>{v(""),j(!1),y([])},A=h.useMemo(()=>{const B=w?b:t,E=u.from,q=u.to;let S;return q&&(S=new Date(q),S.setHours(23,59,59,999)),B.filter($=>{var Z;if(d==="all"&&!E&&!q)return!0;if(d!=="all"&&$.status!==d)return!1;if(E||S){const _=((Z=$.createdAt)==null?void 0:Z.seconds)||($.createdAt instanceof Date?$.createdAt.getTime()/1e3:new Date($.createdAt).getTime()/1e3),K=new Date(_*1e3);if(E&&K<E||S&&K>S)return!1}return!0}).sort(($,Z)=>{const _=K=>{var Y;return(Y=K.createdAt)!=null&&Y.seconds?K.createdAt.seconds:K.createdAt instanceof Date?K.createdAt.getTime()/1e3:new Date(K.createdAt).getTime()/1e3};return _(Z)-_($)})},[t,b,w,d,u]),W=h.useMemo(()=>({total:A.length,pending:A.filter(B=>B.status==="pending").length,preparing:A.filter(B=>B.status==="preparing").length,delivered:A.filter(B=>B.status==="delivered").length,cancelled:A.filter(B=>B.status==="cancelled").length}),[A]),z=async(B,E)=>{try{await l(B,E),w&&f&&k(f)}catch(q){console.error("Error updating order status:",q)}},R=async()=>{if(x.orderId)try{await l(x.orderId,"cancelled"),g({isOpen:!1}),w&&f&&k(f)}catch(B){console.error("Error cancelling order:",B)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:f,onChange:B=>v(B.target.value),placeholder:a("order:search-orders"),className:`w-full pl-12 pr-10 py-3 rounded-full border border-gray-200 dark:border-gray-700 
                      bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm
                      focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400
                      shadow-sm hover:shadow-md transition-shadow`}),f&&e.jsx("button",{onClick:M,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ie,{className:"h-5 w-5"})})]}),w&&e.jsx("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:D?e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ce,{className:"w-3 h-3 mr-2 animate-spin"}),a("order:searching")]}):e.jsx("span",{children:a("common:search-results",{count:b.length})})})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{c()},className:"flex items-center gap-2 p-2 text-blue-600 hover:bg-blue-50 rounded-full",title:a("common:refresh"),children:e.jsx(Ce,{className:"w-5 h-5"})})})]}),e.jsx(_u,{stats:W}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:e.jsx(Ku,{currentFilter:d,onFilterChange:m,dateRange:u,onDateRangeChange:p})}),e.jsx(Wu,{orders:A,onStatusChange:z,onCancel:B=>g({isOpen:!0,orderId:B}),isLoading:(r||D)&&A.length===0}),!w&&i&&!r&&!n&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("button",{onClick:s,className:`flex items-center gap-2 px-6 py-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-800/30
                      text-blue-600 dark:text-blue-400 rounded-lg transition-colors font-medium`,children:[e.jsx(Ce,{className:"w-4 h-4"}),a("common:load-more")]})}),!w&&n&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("div",{className:"animate-spin text-blue-500",children:e.jsx(Ce,{className:"w-6 h-6"})})}),e.jsx(Fa,{isOpen:x.isOpen,title:a("order:cancel-order"),message:a("order:cancel-order-message"),confirmLabel:a("order:cancel-order"),onConfirm:R,onCancel:()=>g({isOpen:!1})})]})}function Qu(a){const{t}=P(),{customers:r,onViewDetails:n}=a,{settings:i}=ee();return e.jsx("div",{className:"grid gap-4",children:r.map(s=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium text-lg",children:s.name}),e.jsxs("div",{className:"space-y-1",children:[s.email&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[e.jsx(dt,{className:"w-4 h-4 mr-2"}),s.email]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),s.phone]})]})]}),e.jsxs("div",{className:"flex flex-col sm:items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.orderCount," ",t("order:orders")]})]}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:G(s.totalSpent,i==null?void 0:i.currency)}),e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>n(s.id),children:t("client:view-details")})]})]})},s.id))})}function Ju(a){const{t}=P(),{searchTerm:r,onSearchChange:n,sortOrder:i,onSortChange:s,sortBy:l,onSortByChange:o}=a;return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:c=>n(c.target.value),placeholder:t("client:search-customer"),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l,onChange:c=>o(c.target.value),className:"rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-2",children:[e.jsx("option",{value:"spent",children:t("client:sort-by-expenses")}),e.jsx("option",{value:"orders",children:t("client:sort-by-orders")})]}),e.jsx(C,{variant:"secondary",onClick:()=>s(i==="asc"?"desc":"asc"),children:i==="asc"?e.jsx(zc,{className:"w-5 h-5"}):e.jsx($c,{className:"w-5 h-5"})})]})]})}function Xu(a){return h.useMemo(()=>{const t=new Map;return a.forEach(r=>{const n=r.customerEmail||r.customerPhone,i=t.get(n);i?(i.orderCount++,i.totalSpent+=r.total,i.lastOrderDate=new Date(r.createdAt).getTime()>new Date(i.lastOrderDate).getTime()?r.createdAt:i.lastOrderDate):t.set(n,{id:n,name:r.customerName,email:r.customerEmail||null,phone:r.customerPhone,orderCount:1,totalSpent:r.total,firstOrderDate:r.createdAt,lastOrderDate:r.createdAt})}),Array.from(t.values())},[a])}const zr=10;function Zu(){const{t:a}=P(),{orders:t}=ur(),r=Xu(t),[n,i]=h.useState(""),[s,l]=h.useState("desc"),[o,c]=h.useState("spent"),[d,m]=h.useState(null),[u,p]=h.useState(1),x=h.useMemo(()=>r.filter(y=>!!y.phone).filter(y=>{var w;return y.name.toLowerCase().includes(n.toLowerCase())||((w=y.email)==null?void 0:w.toLowerCase().includes(n.toLowerCase()))||y.phone.includes(n)}).sort((y,w)=>{const j=s==="asc"?1:-1;return o==="spent"?(y.totalSpent-w.totalSpent)*j:(y.orderCount-w.orderCount)*j}),[r,n,s,o]),g=Math.ceil(x.length/zr),f=x.slice((u-1)*zr,u*zr),v=h.useMemo(()=>d&&r.find(y=>y.id===d)||null,[d,r]),b=h.useMemo(()=>d?t.filter(y=>y.customerEmail===d||y.customerPhone===d).sort((y,w)=>new Date(w.createdAt).getTime()-new Date(y.createdAt).getTime()):[],[d,t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:a("client:customer")}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[r.length," ",a("client:total-customers")]})]}),e.jsx(Ju,{searchTerm:n,onSearchChange:i,sortOrder:s,onSortChange:l,sortBy:o,onSortByChange:c}),e.jsx(Qu,{customers:f,onViewDetails:m}),g>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(da,{currentPage:u,totalPages:g,onPageChange:p})}),e.jsx(dl,{customer:v?{name:v.name,email:v.email,phone:v.phone}:null,orders:b,onClose:()=>m(null)})]})}function Gs({icon:a,title:t,description:r,value:n,selected:i,onChange:s,register:l}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-6 cursor-pointer transition-all
        ${i?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>s(n),children:[e.jsx("input",{type:"radio",...l("defaultTheme"),value:n,className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 ${n==="light"?"bg-white":"bg-gray-900"} rounded-lg shadow-md`,children:e.jsx(a,{className:`w-8 h-8 ${n==="light"?"text-amber-500":"text-blue-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})]})]})}function qs({icon:a,title:t,description:r,value:n,selected:i,onChange:s,register:l}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-4 cursor-pointer transition-all
        ${i?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>s(n),children:[e.jsx("input",{type:"radio",...l("activeHeader"),value:n,className:"sr-only"}),e.jsx("div",{className:"aspect-video mb-4 rounded-md bg-gray-100 dark:bg-gray-700 p-8 flex items-center justify-center",children:e.jsx(a,{className:"w-24 h-24 text-blue-500 dark:text-blue-400"})}),e.jsx("h3",{className:"font-medium mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})}function Ur({icon:a,title:t,description:r,value:n,selected:i,onChange:s,register:l,imageUrl:o}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-4 cursor-pointer transition-all
        ${i?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>s(n),children:[e.jsx("input",{type:"radio",...l("activeLanding"),value:n,className:"sr-only"}),e.jsx("div",{className:"aspect-video mb-4 rounded-md bg-gray-100 dark:bg-gray-700 overflow-hidden",children:e.jsx("img",{src:o,alt:t,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"font-medium mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r})]})}const em=async a=>(await _i.get(`${Ki.baseUri}/settings/key/${a}/all`)).data.data,am=()=>{const[a,t]=h.useState(!1),[r,n]=h.useState(""),[i,s]=h.useState(null),[l,o]=h.useState([]),c=async()=>{try{t(!0),n("");const d=await em("version"),m=(d||[]).find(u=>u.isLatest);m&&s(m),o(d.filter((u,p)=>p<4))}catch(d){console.log(d),n(d.message||"Une erreur est survenue...")}finally{t(!1)}};return h.useEffect(()=>{c()},[]),{loading:a,errorLoading:r,version:i,refresh:c,versions:l}},tm=async a=>{const t=ic(a,lc.secret);return(await _i.post(`${Ki.baseUri}/deploy/client`,{data:t})).data.data},rm=()=>{const[a,t]=h.useState(!1),[r,n]=h.useState("");return{redeploy:async s=>{try{t(!0),await tm({siteId:"3daf5d53-492e-4596-91aa-b57511226440",version:s})}catch(l){throw console.log(l),n((l==null?void 0:l.message)||"une erruer est survenue..."),l}finally{t(!1)}},isDeploying:a,error:r}},Gt=6*60,La="deploymentCooldown",nm=()=>{try{const a=localStorage.getItem(La);if(!a)return null;const t=JSON.parse(a),r=Date.now();return Math.floor((r-t.timestamp)/1e3)>=Gt||t.version!==ra.version?(localStorage.removeItem(La),null):t}catch(a){return console.error("Error reading deployment cooldown:",a),localStorage.removeItem(La),null}},sm=a=>{try{const t={timestamp:Date.now(),version:a};localStorage.setItem(La,JSON.stringify(t))}catch(t){console.error("Error storing deployment cooldown:",t)}};function im(){const{t:a}=P(),{register:t,watch:r,setValue:n}=aa(),{theme:i,toggleTheme:s}=Fi(),{version:l,loading:o,errorLoading:c,versions:d}=am(),{redeploy:m,isDeploying:u,error:p}=rm(),[x,g]=h.useState(0),[f,v]=h.useState(null);h.useEffect(()=>{const j=nm();if(j){const D=Math.floor((Date.now()-j.timestamp)/1e3),N=Gt-D;N>0&&g(N)}},[]),h.useEffect(()=>{if(d.length>0){const j=d.find(D=>D.value===ra.version);v(j||null)}},[d]),h.useEffect(()=>{let j;return x>0&&(j=setInterval(()=>{g(D=>D<=1?(localStorage.removeItem(La),window.location.reload(),0):D-1)},1e3)),()=>{j&&clearInterval(j)}},[x]),h.useEffect(()=>{const j=D=>{if(D.key===La)if(D.newValue===null)g(0);else{const N=JSON.parse(D.newValue),I=Math.floor((Date.now()-N.timestamp)/1e3),T=Gt-I;T>0?g(T):g(0)}};return window.addEventListener("storage",j),()=>window.removeEventListener("storage",j)},[]);const b=async()=>{try{if(!(l!=null&&l.value)||ra.version===(f==null?void 0:f.value)||(await m(l==null?void 0:l.value),!(f!=null&&f.value)||ra.version===(f==null?void 0:f.value)))return;await m(f.value),sm(ra.version),g(Gt)}catch(j){console.error("Deployment failed:",j)}},y=j=>{const D=Math.floor(j/60),N=j%60;return`${D}:${N.toString().padStart(2,"0")}`},w=async j=>{n("defaultTheme",j,{shouldDirty:!0}),localStorage.removeItem("theme-preference"),i!==j&&s()};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(fs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingAppearence:theme")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Gs,{icon:Gi,title:a("settingAppearence:light-mode"),description:a("settingAppearence:light-mode-description"),value:"light",selected:r("defaultTheme")==="light",onChange:w,register:t}),e.jsx(Gs,{icon:Bi,title:a("settingAppearence:dark-mode"),description:a("settingAppearence:dark-mode-description"),value:"dark",selected:r("defaultTheme")==="dark",onChange:w,register:t})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(sd,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingAppearence:header")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(qs,{icon:nl,title:a("settingAppearence:modern-header"),description:a("settingAppearence:modern-header-description"),value:"modern",selected:r("activeHeader")==="modern",onChange:j=>n("activeHeader",j,{shouldDirty:!0}),register:t}),e.jsx(qs,{icon:td,title:a("settingAppearence:classic-header"),description:a("settingAppearence:classic-header-description"),value:"classic",selected:r("activeHeader")==="classic",onChange:j=>n("activeHeader",j,{shouldDirty:!0}),register:t})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingAppearence:landing-page")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Ur,{icon:od,title:a("settingAppearence:modern"),description:a("settingAppearence:modern-description"),value:"modern",selected:r("activeLanding")==="modern",onChange:j=>n("activeLanding",j,{shouldDirty:!0}),register:t,imageUrl:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?auto=format&fit=crop&w=500&q=60"}),e.jsx(Ur,{icon:Qc,title:a("settingAppearence:minimal"),description:a("settingAppearence:minimal-description"),value:"minimal",selected:r("activeLanding")==="minimal",onChange:j=>n("activeLanding",j,{shouldDirty:!0}),register:t,imageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=500&q=60"}),e.jsx(Ur,{icon:Wt,title:a("settingAppearence:grid"),description:a("settingAppearence:grid-description"),value:"grid",selected:r("activeLanding")==="grid",onChange:j=>n("activeLanding",j,{shouldDirty:!0}),register:t,imageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=500&q=60"})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingAppearence:deployment")})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a("settingAppearence:version")," ",ra.version]}),e.jsxs("select",{value:`${f==null?void 0:f.value}`,className:"rounded-lg border p-2 dark:bg-gray-700",onChange:j=>{const D=d.find(N=>N.value===j.target.value);v(D||null)},children:[e.jsx("option",{value:"",children:a("settingAppearence:select-version")}),d.map(j=>e.jsxs("option",{value:j.value,children:["v",j.value," ",j.isLatest?`(${a("common:latest")})`:j.isStable?`(${a("common:stable")})`:""]},j.id))]}),(l==null?void 0:l.value)&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a("settingAppearence:new-version")," ",l==null?void 0:l.value]}),x>0&&e.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:[a("settingAppearence:deployment-inprogress")," ",y(x)]})]}),p&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[a("settingAppearence:error-during-deployment")," ",p]})}),e.jsx("button",{type:"button",onClick:b,disabled:u||o||!!c||x>0||ra.version===(f==null?void 0:f.value)||!f,className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors
                focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring
                disabled:pointer-events-none disabled:opacity-50
                bg-blue-600 text-white hover:bg-blue-700
                dark:bg-blue-500 dark:hover:bg-blue-600`,children:u?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),a("settingAppearence:re-deployment-inprogress")]}):x>0?`${a("settingAppearence:available-in")} ${y(x)}`:ra.version===(f==null?void 0:f.value)?a("settingAppearence:up-to-date"):a("settingAppearence:re-deploy")})]})]})]})}const lm=[{value:"Africa/Abidjan",label:"Abidjan (GMT+0)"},{value:"Africa/Accra",label:"Accra (GMT+0)"},{value:"Africa/Addis_Ababa",label:"Addis Ababa (GMT+3)"},{value:"Africa/Algiers",label:"Algiers (GMT+1)"},{value:"Africa/Asmara",label:"Asmara (GMT+3)"},{value:"Africa/Bamako",label:"Bamako (GMT+0)"},{value:"Africa/Bangui",label:"Bangui (GMT+1)"},{value:"Africa/Banjul",label:"Banjul (GMT+0)"},{value:"Africa/Bissau",label:"Bissau (GMT+0)"},{value:"Africa/Blantyre",label:"Blantyre (GMT+2)"},{value:"Africa/Brazzaville",label:"Brazzaville (GMT+1)"},{value:"Africa/Bujumbura",label:"Bujumbura (GMT+2)"},{value:"Africa/Cairo",label:"Cairo (GMT+2)"},{value:"Africa/Casablanca",label:"Casablanca (GMT+1)"},{value:"Africa/Ceuta",label:"Ceuta (GMT+1/+2)"},{value:"Africa/Conakry",label:"Conakry (GMT+0)"},{value:"Africa/Dakar",label:"Dakar (GMT+0)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (GMT+3)"},{value:"Africa/Djibouti",label:"Djibouti (GMT+3)"},{value:"Africa/Douala",label:"Douala (GMT+1)"},{value:"Africa/El_Aaiun",label:"El Aaiun (GMT+0/+1)"},{value:"Africa/Freetown",label:"Freetown (GMT+0)"},{value:"Africa/Gaborone",label:"Gaborone (GMT+2)"},{value:"Africa/Harare",label:"Harare (GMT+2)"},{value:"Africa/Johannesburg",label:"Johannesburg (GMT+2)"},{value:"Africa/Juba",label:"Juba (GMT+3)"},{value:"Africa/Kampala",label:"Kampala (GMT+3)"},{value:"Africa/Khartoum",label:"Khartoum (GMT+2)"},{value:"Africa/Kigali",label:"Kigali (GMT+2)"},{value:"Africa/Kinshasa",label:"Kinshasa (GMT+1)"},{value:"Africa/Lagos",label:"Lagos (GMT+1)"},{value:"Africa/Libreville",label:"Libreville (GMT+1)"},{value:"Africa/Lome",label:"Lomé (GMT+0)"},{value:"Africa/Luanda",label:"Luanda (GMT+1)"},{value:"Africa/Lubumbashi",label:"Lubumbashi (GMT+2)"},{value:"Africa/Lusaka",label:"Lusaka (GMT+2)"},{value:"Africa/Malabo",label:"Malabo (GMT+1)"},{value:"Africa/Maputo",label:"Maputo (GMT+2)"},{value:"Africa/Maseru",label:"Maseru (GMT+2)"},{value:"Africa/Mbabane",label:"Mbabane (GMT+2)"},{value:"Africa/Mogadishu",label:"Mogadishu (GMT+3)"},{value:"Africa/Monrovia",label:"Monrovia (GMT+0)"},{value:"Africa/Nairobi",label:"Nairobi (GMT+3)"},{value:"Africa/Ndjamena",label:"Ndjamena (GMT+1)"},{value:"Africa/Niamey",label:"Niamey (GMT+1)"},{value:"Africa/Nouakchott",label:"Nouakchott (GMT+0)"},{value:"Africa/Ouagadougou",label:"Ouagadougou (GMT+0)"},{value:"Africa/Porto-Novo",label:"Porto-Novo (GMT+1)"},{value:"Africa/Sao_Tome",label:"São Tomé (GMT+0)"},{value:"Africa/Tripoli",label:"Tripoli (GMT+2)"},{value:"Africa/Tunis",label:"Tunis (GMT+1)"},{value:"Africa/Windhoek",label:"Windhoek (GMT+2)"},{value:"America/Anchorage",label:"Anchorage (GMT-9/-8)"},{value:"America/Antigua",label:"Antigua (GMT-4)"},{value:"America/Araguaina",label:"Araguaina (GMT-3)"},{value:"America/Argentina/Buenos_Aires",label:"Buenos Aires (GMT-3)"},{value:"America/Asuncion",label:"Asunción (GMT-4/-3)"},{value:"America/Barbados",label:"Barbados (GMT-4)"},{value:"America/Belem",label:"Belém (GMT-3)"},{value:"America/Belize",label:"Belize (GMT-6)"},{value:"America/Boa_Vista",label:"Boa Vista (GMT-4)"},{value:"America/Bogota",label:"Bogota (GMT-5)"},{value:"America/Caracas",label:"Caracas (GMT-4)"},{value:"America/Cayenne",label:"Cayenne (GMT-3)"},{value:"America/Cayman",label:"Cayman Islands (GMT-5)"},{value:"America/Chicago",label:"Chicago (GMT-6/-5)"},{value:"America/Cuiaba",label:"Cuiabá (GMT-4/-3)"},{value:"America/Denver",label:"Denver (GMT-7/-6)"},{value:"America/Dominica",label:"Dominica (GMT-4)"},{value:"America/Edmonton",label:"Edmonton (GMT-7/-6)"},{value:"America/El_Salvador",label:"El Salvador (GMT-6)"},{value:"America/Fortaleza",label:"Fortaleza (GMT-3)"},{value:"America/Glace_Bay",label:"Glace Bay (GMT-4/-3)"},{value:"America/Godthab",label:"Godthåb (GMT-3/-2)"},{value:"America/Goose_Bay",label:"Goose Bay (GMT-4/-3)"},{value:"America/Grand_Turk",label:"Grand Turk (GMT-5/-4)"},{value:"America/Grenada",label:"Grenada (GMT-4)"},{value:"America/Guadeloupe",label:"Guadeloupe (GMT-4)"},{value:"America/Guatemala",label:"Guatemala (GMT-6)"},{value:"America/Guayaquil",label:"Guayaquil (GMT-5)"},{value:"America/Guyana",label:"Guyana (GMT-4)"},{value:"America/Halifax",label:"Halifax (GMT-4/-3)"},{value:"America/Havana",label:"Havana (GMT-5/-4)"},{value:"America/Hermosillo",label:"Hermosillo (GMT-7)"},{value:"America/Indiana/Indianapolis",label:"Indianapolis (GMT-5/-4)"},{value:"America/Jamaica",label:"Jamaica (GMT-5)"},{value:"America/Juneau",label:"Juneau (GMT-9/-8)"},{value:"America/La_Paz",label:"La Paz (GMT-4)"},{value:"America/Lima",label:"Lima (GMT-5)"},{value:"America/Los_Angeles",label:"Los Angeles (GMT-8/-7)"},{value:"America/Maceio",label:"Maceió (GMT-3)"},{value:"America/Managua",label:"Managua (GMT-6)"},{value:"America/Manaus",label:"Manaus (GMT-4)"},{value:"America/Martinique",label:"Martinique (GMT-4)"},{value:"America/Mazatlan",label:"Mazatlán (GMT-7/-6)"},{value:"America/Mexico_City",label:"Mexico City (GMT-6/-5)"},{value:"America/Miquelon",label:"Miquelon (GMT-3/-2)"},{value:"America/Montevideo",label:"Montevideo (GMT-3)"},{value:"America/Montreal",label:"Montreal (GMT-5/-4)"},{value:"America/Nassau",label:"Nassau (GMT-5/-4)"},{value:"America/New_York",label:"New York (GMT-5/-4)"},{value:"America/Nipigon",label:"Nipigon (GMT-5/-4)"},{value:"America/Panama",label:"Panama (GMT-5)"},{value:"America/Paramaribo",label:"Paramaribo (GMT-3)"},{value:"America/Phoenix",label:"Phoenix (GMT-7)"},{value:"America/Port-au-Prince",label:"Port-au-Prince (GMT-5)"},{value:"America/Port_of_Spain",label:"Port of Spain (GMT-4)"},{value:"America/Porto_Velho",label:"Porto Velho (GMT-4)"},{value:"America/Puerto_Rico",label:"Puerto Rico (GMT-4)"},{value:"America/Rainy_River",label:"Rainy River (GMT-6/-5)"},{value:"America/Recife",label:"Recife (GMT-3)"},{value:"America/Regina",label:"Regina (GMT-6)"},{value:"America/Resolute",label:"Resolute (GMT-6/-5)"},{value:"America/Rio_Branco",label:"Rio Branco (GMT-5)"},{value:"America/Sao_Paulo",label:"São Paulo (GMT-3)"},{value:"America/Santarem",label:"Santarém (GMT-3)"},{value:"America/Santo_Domingo",label:"Santo Domingo (GMT-4)"},{value:"America/St_Johns",label:"St. John's (GMT-4/-3)"},{value:"America/St_Kitts",label:"St. Kitts (GMT-4)"},{value:"America/St_Lucia",label:"St. Lucia (GMT-4)"},{value:"America/St_Vincent",label:"St. Vincent (GMT-4)"},{value:"America/Swift_Current",label:"Swift Current (GMT-6)"},{value:"America/Tegucigalpa",label:"Tegucigalpa (GMT-6)"},{value:"America/Thunder_Bay",label:"Thunder Bay (GMT-5/-4)"},{value:"America/Toronto",label:"Toronto (GMT-5/-4)"},{value:"America/Tortola",label:"Tortola (GMT-4)"},{value:"America/Vancouver",label:"Vancouver (GMT-8/-7)"},{value:"America/Whitehorse",label:"Whitehorse (GMT-8/-7)"},{value:"America/Winnipeg",label:"Winnipeg (GMT-6/-5)"},{value:"America/Yakutat",label:"Yakutat (GMT-9/-8)"},{value:"Europe/Amsterdam",label:"Amsterdam (GMT+1/+2)"},{value:"Europe/Andorra",label:"Andorra (GMT+1/+2)"},{value:"Europe/Athens",label:"Athens (GMT+2/+3)"},{value:"Europe/Belgrade",label:"Belgrade (GMT+1/+2)"},{value:"Europe/Berlin",label:"Berlin (GMT+1/+2)"},{value:"Europe/Bratislava",label:"Bratislava (GMT+1/+2)"},{value:"Europe/Brussels",label:"Brussels (GMT+1/+2)"},{value:"Europe/Bucharest",label:"Bucharest (GMT+2/+3)"},{value:"Europe/Budapest",label:"Budapest (GMT+1/+2)"},{value:"Europe/Chisinau",label:"Chișinău (GMT+2/+3)"},{value:"Europe/Copenhagen",label:"Copenhagen (GMT+1/+2)"},{value:"Europe/Dublin",label:"Dublin (GMT+0/+1)"},{value:"Europe/Helsinki",label:"Helsinki (GMT+2/+3)"},{value:"Europe/Istanbul",label:"Istanbul (GMT+3)"},{value:"Europe/Kaliningrad",label:"Kaliningrad (GMT+2)"},{value:"Europe/Kiev",label:"Kyiv (GMT+2/+3)"},{value:"Europe/Lisbon",label:"Lisbon (GMT+0/+1)"},{value:"Europe/Ljubljana",label:"Ljubljana (GMT+1/+2)"},{value:"Europe/London",label:"London (GMT+0/+1)"},{value:"Europe/Luxembourg",label:"Luxembourg (GMT+1/+2)"},{value:"Europe/Madrid",label:"Madrid (GMT+1/+2)"},{value:"Europe/Malta",label:"Malta (GMT+1/+2)"},{value:"Europe/Minsk",label:"Minsk (GMT+3)"},{value:"Europe/Monaco",label:"Monaco (GMT+1/+2)"},{value:"Europe/Moscow",label:"Moscow (GMT+3)"},{value:"Europe/Oslo",label:"Oslo (GMT+1/+2)"},{value:"Europe/Paris",label:"Paris (GMT+1/+2)"},{value:"Europe/Podgorica",label:"Podgorica (GMT+1/+2)"},{value:"Europe/Prague",label:"Prague (GMT+1/+2)"},{value:"Europe/Riga",label:"Riga (GMT+2/+3)"},{value:"Europe/Rome",label:"Rome (GMT+1/+2)"},{value:"Europe/Samara",label:"Samara (GMT+4)"},{value:"Europe/San_Marino",label:"San Marino (GMT+1/+2)"},{value:"Europe/Sarajevo",label:"Sarajevo (GMT+1/+2)"},{value:"Europe/Simferopol",label:"Simferopol (GMT+3)"},{value:"Europe/Skopje",label:"Skopje (GMT+1/+2)"},{value:"Europe/Sofia",label:"Sofia (GMT+2/+3)"},{value:"Europe/Stockholm",label:"Stockholm (GMT+1/+2)"},{value:"Europe/Tallinn",label:"Tallinn (GMT+2/+3)"},{value:"Europe/Tirane",label:"Tirana (GMT+1/+2)"},{value:"Europe/Uzhgorod",label:"Uzhhorod (GMT+2/+3)"},{value:"Europe/Vaduz",label:"Vaduz (GMT+1/+2)"},{value:"Europe/Vatican",label:"Vatican (GMT+1/+2)"}],om=({message:a})=>e.jsx("div",{className:"border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})});function cm(){const{t:a}=P(),{register:t,watch:r,formState:{errors:n},setError:i,clearErrors:s}=aa(),l=r("canDeliver"),o=r("canDineIn"),c=r("hasOpeningHours");h.useEffect(()=>{!l&&!o?i("serviceOptions",{type:"custom",message:"Au moins une option de service doit être activée"}):s("serviceOptions")},[l,o,i,s]);const d=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],m={monday:a("common:days.monday"),tuesday:a("common:days.tuesday"),wednesday:a("common:days.wednesday"),thursday:a("common:days.thursday"),friday:a("common:days.friday"),saturday:a("common:days.saturday"),sunday:a("common:days.sunday")};return e.jsxs("div",{className:"space-y-8",children:[n.serviceOptions&&e.jsx(om,{message:n.serviceOptions.message}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(al,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingBusiness:contact-information")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("common:address")}),e.jsx("input",{type:"text",...t("address",{required:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("common:phone")}),e.jsx("input",{type:"tel",...t("phone",{required:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingBusiness:business-hours")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...t("holidayClosure.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:a("settingBusiness:enable-holiday-closure")})]}),r("holidayClosure.enabled")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingBusiness:start-date")}),e.jsx("input",{type:"date",...t("holidayClosure.startDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingBusiness:end-date")}),e.jsx("input",{type:"date",...t("holidayClosure.endDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingBusiness:reason")}),e.jsx("input",{type:"text",...t("holidayClosure.reason"),placeholder:a("settingBusiness:reason-placeholder"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]})]}),e.jsx("section",{children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("settingBusiness:time-zone")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...t("openingHours.timezone",{required:a("settingBusiness:time-zone-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"",children:a("settingBusiness:select-time-zone")}),lm.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingBusiness:time-zone-description")})]})}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(En,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingBusiness:opening-hours")})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...t("hasOpeningHours"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:c?`(${a("common:Actif")})`:`(${a("common:Inactif")})`})]})]}),c&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-4",children:d.map(u=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"w-32",children:m[u]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...t(`openingHours.${u}.closed`),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:[a("settingBusiness:closed")," "]})]}),!r(`openingHours.${u}.closed`)&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"time",...t(`openingHours.${u}.open`),className:"rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsxs("span",{children:[a("settingBusiness:to")," "]}),e.jsx("input",{type:"time",...t(`openingHours.${u}.close`),className:"rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]},u))})})]}),e.jsxs("div",{className:"space-y-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg",children:a("settingBusiness:service-options")}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...t("canDeliver"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:[a("common:delivery")," ",l?`(${a("common:Actif")})`:`(${a("common:Inactif")})`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...t("canDineIn"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:[a("common:on-site")," ",o?`(${a("common:Actif")})`:`(${a("common:Inactif")})`]})]})]}),o&&e.jsx("div",{className:"flex items-center gap-3 ml-8",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...t("paymentOnDineInActivated"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:[a("settingBusiness:payment-on-dine-in")," "]})]})})]})]})]})}const $s=[{id:"whatsapp",name:"Whatsapp",icon:id},{id:"facebook",name:"Facebook",icon:oc},{id:"instagram",name:"Instagram",icon:cc},{id:"twitter",name:"Twitter",icon:dc},{id:"linkedin",name:"LinkedIn",icon:rd},{id:"youtube",name:"YouTube",icon:uc},{id:"tiktok",name:"Tiktok",icon:rl}];function dm(){const{t:a}=P(),{watch:t,setValue:r}=aa(),n=t("socialMedia")||[],i=o=>{o.preventDefault(),r("socialMedia",[...n,{platform:"whatsapp",url:"",active:!0}],{shouldDirty:!0})},s=(o,c)=>{o.preventDefault(),r("socialMedia",n.filter((d,m)=>m!==c),{shouldDirty:!0})},l=(o,c,d)=>{o.preventDefault();const m=[...n];m[c]={...m[c],...d},r("socialMedia",m,{shouldDirty:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("setting:social-media-profiles")})]}),e.jsxs(C,{type:"button",onClick:i,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("setting:add-profile")]})]}),e.jsxs("div",{className:"space-y-4",children:[n.map((o,c)=>{const d=$s.find(u=>u.id===o.platform),m=(d==null?void 0:d.icon)||Bt;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr,auto] gap-4 items-center",children:[e.jsx("select",{value:o.platform,onChange:u=>l(u,c,{platform:u.target.value}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:$s.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:e.jsx(m,{className:"w-4 h-4 text-gray-400"})}),e.jsx("input",{type:o.platform==="whatsapp"?"text":"url",value:o.url,onChange:u=>l(u,c,{url:u.target.value}),placeholder:o.platform==="whatsapp"?a("common:phone-number"):`https://${o.platform}.com/...`,className:"w-full pl-10 rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{type:"button",variant:o.active?"primary":"secondary",size:"sm",onClick:u=>l(u,c,{active:!o.active}),children:o.active?a("common:Actif"):a("common:Inactif")}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",onClick:u=>s(u,c),className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(ie,{className:"w-4 h-4"})})]})]})},c)}),n.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(Bt,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("setting:no-social-media-profiles")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:a("setting:add-social-media-profiles")})]})]})]})}function um({onLanguageChanged:a,value:t="fr"}){const{t:r,i18n:n}=P(),[i,s]=h.useState(n.language||t);h.useEffect(()=>{n.changeLanguage(i)},[i,n]);const l=o=>{const c=o.target.value;s(c),n.changeLanguage(c),a&&a(c)};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:r("language")}),e.jsxs("select",{name:"language",value:i,onChange:l,className:"w-full rounded-lg border p-2 dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"fr",children:"🇫🇷 Français"}),e.jsx("option",{value:"en",children:"🇬🇧 English"})]})]})}function mm(){var c,d,m,u,p;const{t:a}=P(),{register:t,watch:r,setValue:n,formState:{errors:i}}=aa(),s=(x,g)=>{n(x,g,{shouldDirty:!0,shouldTouch:!0})},l=r("currency"),o=xs.find(x=>x.value===l);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Vc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("setting:general-information")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("setting:restaurant-name")}),e.jsx("input",{type:"text",...t("name",{required:a("setting:restaurant-name-required")}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${i.name?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("setting:restaurant-description")}),e.jsx("textarea",{...t("description",{required:a("setting:restaurant-description-required"),maxLength:{value:250,message:a("description-max-limit",{maxLimit:250})},minLength:{value:10,message:a("description-min-limit",{minLimit:10})}}),rows:3,className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${i.description?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),i.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("common:email")}),e.jsx("input",{type:"email",...t("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:a("common:email-invalid")}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${i.email?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),i.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.email.message})]}),e.jsx("div",{children:e.jsx(ya,{value:r("logo"),onChange:x=>s("logo",x)})}),e.jsx("div",{children:e.jsx(ya,{value:r("coverImage"),onChange:x=>s("coverImage",x),label:a("setting:cover-image"),description:a("setting:image-recommanded-format")})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("setting:currency")}),e.jsx("select",{...t("currency",{required:a("setting:currency-required")}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${i.currency?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`,children:xs.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))}),i.currency&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.currency.message}),e.jsxs("div",{className:"flex mt-4 items-center p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert",children:[e.jsx("svg",{className:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),o&&(((c=o==null?void 0:o.acceptedPaymentMethods)==null?void 0:c.length)<1?e.jsxs("span",{children:[a("setting:available-payment-method")," ",e.jsx("span",{className:"font-semibold",children:a("setting:delivery-and-add-payment-method")})]}):e.jsxs("span",{children:[a("setting:available-payment-method")," ",e.jsxs("span",{className:"font-semibold",children:[o==null?void 0:o.acceptedPaymentMethods.join(", ")," "]})]}))]})]}),e.jsx(um,{value:r("language"),onLanguageChanged:x=>s("language",x)})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ll,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("setting:security-and-rate-limits")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("setting:rate-limit-max-orders")}),e.jsx("input",{type:"number",...t("rateLimits.maxOrders",{required:a("setting:rate-limit-max-orders-required"),min:{value:1,message:a("setting:rate-limit-max-orders-min",{minValue:1})}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${(d=i.rateLimits)!=null&&d.maxOrders?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),((m=i.rateLimits)==null?void 0:m.maxOrders)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.rateLimits.maxOrders.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("setting:rate-limit-max-orders-description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("setting:rate-limit-time-window-hours")}),e.jsx("input",{type:"number",...t("rateLimits.timeWindowHours",{required:a("setting:rate-limit-max-orders-required"),min:{value:1,message:a("setting:rate-limit-time-window-hours-min",{minValue:1})}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${(u=i.rateLimits)!=null&&u.timeWindowHours?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),((p=i.rateLimits)==null?void 0:p.timeWindowHours)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.rateLimits.timeWindowHours.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("setting:rate-limit-time-window-hours-description")})]})]})]}),e.jsx(dm,{})]})}class pm{async requestDevice(){try{if(!navigator.bluetooth)throw new Error("Bluetooth not supported");const t=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["generic_access"]});return{id:t.id,name:t.name||"Unknown Device",status:"disconnected",device:t}}catch(t){throw console.error("Error requesting Bluetooth device:",t),t}}async connectDevice(t){var r;try{const n=await((r=t.gatt)==null?void 0:r.connect());if(!n)throw new Error("Failed to connect to device");await n.getPrimaryService("generic_access")}catch(n){throw console.error("Error connecting to device:",n),n}}async disconnectDevice(t){var r;try{(r=t.gatt)!=null&&r.connected&&t.gatt.disconnect()}catch(n){throw console.error("Error disconnecting device:",n),n}}}const Hr=new pm;function xm(){const[a,t]=h.useState([]),[r,n]=h.useState(!1),i=h.useCallback(async()=>{try{n(!0);const c=await Hr.requestDevice();c&&(t(d=>d.some(u=>u.id===c.id)?d:[...d,c]),L.success("Appareil trouvé"))}catch(c){c.name==="NotFoundError"?L.error("Aucun appareil trouvé"):c.name==="SecurityError"?L.error("Permission refusée"):L.error("Erreur lors de la recherche"),console.error("Bluetooth scan error:",c)}finally{n(!1)}},[]),s=h.useCallback(async c=>{const d=a.find(m=>m.id===c);if(d)try{await Hr.connectDevice(d.device),t(m=>m.map(u=>u.id===c?{...u,status:"connected"}:u)),L.success(`${d.name} connecté`)}catch(m){console.error("Connection error:",m),L.error("Erreur de connexion")}},[a]),l=h.useCallback(async c=>{const d=a.find(m=>m.id===c);if(d)try{await Hr.disconnectDevice(d.device),t(m=>m.map(u=>u.id===c?{...u,status:"disconnected"}:u)),L.success(`${d.name} déconnecté`)}catch(m){console.error("Disconnection error:",m),L.error("Erreur de déconnexion")}},[a]),o=h.useCallback(c=>{t(d=>d.filter(m=>m.id!==c)),L.success("Appareil supprimé")},[]);return{devices:a,isScanning:r,scanForDevices:i,connectDevice:s,disconnectDevice:l,removeDevice:o}}function gm(){const{t:a}=P();aa();const{devices:t,isScanning:r,scanForDevices:n,connectDevice:i,disconnectDevice:s,removeDevice:l}=xm();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingIntegration:bluetooth-title")})]}),e.jsx(C,{onClick:n,disabled:r,className:"relative group",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),a("common:search")]}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),a("settingIntegration:search-device")]})})]}),e.jsxs("div",{className:"space-y-3",children:[t.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:o.name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.status==="connected"?a("settingIntegration:connected"):a("settingIntegration:disconnected")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o.status==="disconnected"?e.jsx(C,{onClick:()=>i(o.id),className:"text-sm",children:a("settingIntegration:connect")}):e.jsx(C,{onClick:()=>s(o.id),variant:"secondary",className:"text-sm",children:a("settingIntegration:disconnect")}),e.jsx(C,{variant:"ghost",onClick:()=>l(o.id),className:"text-red-500 hover:text-red-600",children:e.jsx(ie,{className:"w-4 h-4"})})]})]},o.id)),t.length===0&&!r&&e.jsxs("div",{className:"text-center py-8 px-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(Mt,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("settingIntegration:no-device-found")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:a("settingIntegration:make-sure-device")})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(md,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingIntegration:api-title")})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:a("settingIntegration:api-description")})})]})]})}function hm({value:a,onChange:t}){const{t:r}=P();return e.jsx(ya,{value:a,onChange:t,label:"Favicon",description:r("settingSeo:favicon-description")})}function Dl(a){const{value:t,onChange:r,type:n="text"}=a,{t:i}=P(),[s,l]=ae.useState(""),o=m=>{if(!s.trim())return;const u=s.trim().toLowerCase();t.includes(u)||r([...t,u]),l("")},c=m=>{m.key==="Enter"&&(m.preventDefault(),o())},d=m=>{r(t.filter(u=>u!==m))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:n,value:s,onChange:m=>l(m.target.value),onKeyPress:c,placeholder:i("settingSeo:seo-keywords-placeholder"),className:"flex-1 rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsxs(C,{type:"button",onClick:()=>o(),disabled:!s.trim(),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),i("common:add")]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(re,{mode:"popLayout",children:t.map(m=>e.jsxs(O.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>d(m),className:"p-0.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full",children:e.jsx(ie,{className:"w-3 h-3"})})]},m))})})]})}function fm(a,t){h.useEffect(()=>{if(a&&(document.title=a),t){const r=document.querySelector("link[rel~='icon']");if(r)r.href=t;else{const n=document.createElement("link");n.rel="icon",n.href=t,document.head.appendChild(n)}}},[a,t])}function vm(){const{t:a}=P(),{register:t,watch:r,setValue:n}=aa();return fm(r("seo.title"),r("seo.favicon")),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingSeo:seo-settings-title")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingSeo:seo-title")}),e.jsx("input",{type:"text",...t("seo.title"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:a("settingSeo:seo-title-placeholder")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingSeo:seo-title-description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("common:description")}),e.jsx("textarea",{...t("seo.description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:a("settingSeo:seo-description-placeholder")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingSeo:seo-description-description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingSeo:seo-keywords")}),e.jsx(Dl,{value:r("seo.keywords")||[],onChange:i=>n("seo.keywords",i,{shouldDirty:!0})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingSeo:seo-keywords-description")})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(al,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingSeo:seo-images-title")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(hm,{value:r("seo.favicon"),onChange:i=>n("seo.favicon",i,{shouldDirty:!0})}),e.jsx("div",{children:e.jsx(ya,{value:r("seo.ogImage"),onChange:i=>n("seo.ogImage",i,{shouldDirty:!0}),label:a("settingSeo:seo-og-image"),description:a("settingSeo:seo-og-image-description")})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingSeo:seo-social-title")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingSeo:seo-twitter-handle")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),e.jsx("input",{type:"text",...t("seo.twitterHandle"),className:"w-full rounded-lg border dark:border-gray-600 p-2 pl-8 dark:bg-gray-700",placeholder:"username"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingSeo:seo-twitter-handle-description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("settingSeo:seo-facebook-page")}),e.jsx("input",{type:"text",...t("seo.googleSiteVerification"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:a("settingSeo:seo-facebook-page-placeholder")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("settingSeo:seo-facebook-page-description")})]})]})]})]})}function bm(){const{t:a}=P(),[t,r]=h.useState([]),[n,i]=h.useState(!0),[s,l]=h.useState(null),[o,c]=h.useState(!1),[d,m]=h.useState({isOpen:!1}),[u,p]=h.useState(!1);h.useEffect(()=>{x()},[]);const x=async()=>{try{i(!0);const v=[a("settingData:categories"),a("settingData:menu-items"),a("settingData:orders"),a("settingData:inventory"),a("settingData:stock-history"),a("settingData:media"),a("settingData:variants"),a("settingData:transactions"),a("settingData:payment-methods"),a("settingData:staff"),a("settingData:settings")],b=await Promise.all(v.map(async y=>{const w=await Ta(ga(Be,y));return{name:y,count:w.size}}));r(b)}catch(v){console.error("Error loading collections:",v),L.error(a("settingData:error-loading-collections"))}finally{i(!1)}},g=async()=>{var b;if(!d.collection)return;const v=d.collection;try{if(l(v),v==="media"){const D=(await Ta(ga(Be,"media"))).docs.map(N=>N.data());for(const N of D)try{const I=(b=N.url.split("/").pop())==null?void 0:b.split(".")[0];I&&await et.deleteFile(I)}catch(I){console.error("Error deleting file from Cloudinary:",I)}}const y=await Ta(ga(Be,v)),w=gn(Be);y.docs.forEach(j=>{w.delete(j.ref)}),await w.commit(),await x(),L.success(a("settingData:collection-deleted",{collectionName:v}))}catch(y){console.error("Error deleting collection:",y),L.error(a("settingData:error-deleting-collection"))}finally{l(null),m({isOpen:!1})}},f=async()=>{var v;try{c(!0);for(const{name:b}of t){if(b==="settings"||b==="payment_methods")continue;if(b==="media"){const N=(await Ta(ga(Be,"media"))).docs.map(I=>I.data());for(const I of N)try{const T=(v=I.url.split("/").pop())==null?void 0:v.split(".")[0];T&&await et.deleteFile(T)}catch(T){console.error("Error deleting file from Cloudinary:",T)}}const y=await Ta(ga(Be,b)),w=gn(Be);y.docs.forEach(D=>{w.delete(D.ref)});const j=localStorage.getItem("cookiesAccepted")?localStorage.getItem("cookiesAccepted")==="true":!1;await w.commit(),localStorage.clear(),j&&localStorage.setItem("cookiesAccepted",`${j}`)}await x(),L.success(a("settingData:website-reset"))}catch(b){console.error("Error resetting website:",b),L.error(a("settingData:error-resetting-website"))}finally{c(!1),p(!1)}};return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingData:manage-data")}),e.jsxs("span",{className:"flex gap-2 text-red-800 dark:text-red-400",children:[e.jsx(la,{})," ",a("settingData:danger-zone")]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:t.filter(({name:v})=>v!=="payment_methods").map(({name:v,count:b})=>e.jsxs(O.div,{layout:!0,className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Zc,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium capitalize",children:v}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b," document",b!==1?"s":""]})]})]}),v!=="settings"&&e.jsx(C,{type:"button",variant:"danger",size:"sm",onClick:()=>m({isOpen:!0,collection:v,itemCount:b}),disabled:s===v,className:"flex-shrink-0",children:s===v?e.jsx(Je,{className:"w-4 h-4 animate-spin"}):e.jsx(Ie,{className:"w-4 h-4"})})]},v))})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingData:reset-website")})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-100 mb-4",children:a("settingData:reset-website-warning")}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-6",children:a("settingData:reset-website-warning-desc")}),e.jsx(C,{variant:"danger",onClick:()=>p(!0),disabled:o,className:"w-full sm:w-auto",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4 mr-2 animate-spin"}),a("settingData:resetting-website")]}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),a("settingData:reset-website")]})})]})]}),e.jsx(Fa,{isOpen:d.isOpen,title:a("settingData:delete-collection",{collection:d.collection}),message:a("settingData:delete-collection-desc",{deleteConfirmationCollection:d.collection,deleteConfirmationItemCount:d.itemCount}),confirmLabel:a("common:delete"),onConfirm:g,onCancel:()=>m({isOpen:!1}),isLoading:s===d.collection}),e.jsx(Fa,{isOpen:u,title:a("settingData:reset-website-sub-title"),message:a("settingData:reset-website-desc"),confirmLabel:a("settingData:reset-website"),onConfirm:f,onCancel:()=>p(!1),isLoading:o})]})}function ym(){const{t:a}=P(),{register:t}=aa();return e.jsx("div",{className:"space-y-8",children:e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yi,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("settingLegal:legal-settings-title")})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:a("settingLegal:terms-of-service")}),e.jsx("textarea",{...t("termsOfService"),rows:15,className:"w-full rounded-lg border dark:border-gray-600 p-4 dark:bg-gray-700 font-mono text-sm",placeholder:a("settingLegal:terms-of-service-placeholder")}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:a("settingLegal:terms-of-service-description")})]})})]})})}function Sl(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,fn(a,t)}function Q(){return Q=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},Q.apply(null,arguments)}function zs(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),r.push.apply(r,n)}return r}function Us(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zs(Object(r),!0).forEach(function(n){Bc(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Ae(a){return"Minified Redux error #"+a+"; visit https://redux.js.org/Errors?code="+a+" for the full message or use the non-minified dev environment for full errors. "}var Hs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Vr=function(){return Math.random().toString(36).substring(7).split("").join(".")},Vs={INIT:"@@redux/INIT"+Vr(),REPLACE:"@@redux/REPLACE"+Vr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Vr()}};function jm(a){if(typeof a!="object"||a===null)return!1;for(var t=a;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(a)===t}function Al(a,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ae(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ae(1));return r(Al)(a,t)}if(typeof a!="function")throw new Error(Ae(2));var i=a,s=t,l=[],o=l,c=!1;function d(){o===l&&(o=l.slice())}function m(){if(c)throw new Error(Ae(3));return s}function u(f){if(typeof f!="function")throw new Error(Ae(4));if(c)throw new Error(Ae(5));var v=!0;return d(),o.push(f),function(){if(v){if(c)throw new Error(Ae(6));v=!1,d();var y=o.indexOf(f);o.splice(y,1),l=null}}}function p(f){if(!jm(f))throw new Error(Ae(7));if(typeof f.type>"u")throw new Error(Ae(8));if(c)throw new Error(Ae(9));try{c=!0,s=i(s,f)}finally{c=!1}for(var v=l=o,b=0;b<v.length;b++){var y=v[b];y()}return f}function x(f){if(typeof f!="function")throw new Error(Ae(10));i=f,p({type:Vs.REPLACE})}function g(){var f,v=u;return f={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Ae(11));function w(){y.next&&y.next(m())}w();var j=v(w);return{unsubscribe:j}}},f[Hs]=function(){return this},f}return p({type:Vs.INIT}),n={dispatch:p,subscribe:u,getState:m,replaceReducer:x},n[Hs]=g,n}function Ws(a,t){return function(){return t(a.apply(this,arguments))}}function _s(a,t){if(typeof a=="function")return Ws(a,t);if(typeof a!="object"||a===null)throw new Error(Ae(16));var r={};for(var n in a){var i=a[n];typeof i=="function"&&(r[n]=Ws(i,t))}return r}function Il(){for(var a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function wm(){for(var a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),s=function(){throw new Error(Ae(15))},l={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},o=t.map(function(c){return c(l)});return s=Il.apply(void 0,o)(i.dispatch),Us(Us({},i),{},{dispatch:s})}}}var El=ae.createContext(null);function Nm(a){a()}var Ml=Nm,km=function(t){return Ml=t},Cm=function(){return Ml};function Dm(){var a=Cm(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){a(function(){for(var i=t;i;)i.callback(),i=i.next})},get:function(){for(var i=[],s=t;s;)i.push(s),s=s.next;return i},subscribe:function(i){var s=!0,l=r={callback:i,next:null,prev:r};return l.prev?l.prev.next=l:t=l,function(){!s||t===null||(s=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}var Ks={notify:function(){},get:function(){return[]}};function Tl(a,t){var r,n=Ks;function i(u){return c(),n.subscribe(u)}function s(){n.notify()}function l(){m.onStateChange&&m.onStateChange()}function o(){return!!r}function c(){r||(r=t?t.addNestedSub(l):a.subscribe(l),n=Dm())}function d(){r&&(r(),r=void 0,n.clear(),n=Ks)}var m={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:l,isSubscribed:o,trySubscribe:c,tryUnsubscribe:d,getListeners:function(){return n}};return m}var Ol=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect;function Sm(a){var t=a.store,r=a.context,n=a.children,i=h.useMemo(function(){var o=Tl(t);return{store:t,subscription:o}},[t]),s=h.useMemo(function(){return t.getState()},[t]);Ol(function(){var o=i.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),s!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[i,s]);var l=r||El;return ae.createElement(l.Provider,{value:i},n)}function Qt(a,t){if(a==null)return{};var r={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(t.includes(n))continue;r[n]=a[n]}return r}var Pl={exports:{}},se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fe=typeof Symbol=="function"&&Symbol.for,Gn=fe?Symbol.for("react.element"):60103,qn=fe?Symbol.for("react.portal"):60106,mr=fe?Symbol.for("react.fragment"):60107,pr=fe?Symbol.for("react.strict_mode"):60108,xr=fe?Symbol.for("react.profiler"):60114,gr=fe?Symbol.for("react.provider"):60109,hr=fe?Symbol.for("react.context"):60110,$n=fe?Symbol.for("react.async_mode"):60111,fr=fe?Symbol.for("react.concurrent_mode"):60111,vr=fe?Symbol.for("react.forward_ref"):60112,br=fe?Symbol.for("react.suspense"):60113,Am=fe?Symbol.for("react.suspense_list"):60120,yr=fe?Symbol.for("react.memo"):60115,jr=fe?Symbol.for("react.lazy"):60116,Im=fe?Symbol.for("react.block"):60121,Em=fe?Symbol.for("react.fundamental"):60117,Mm=fe?Symbol.for("react.responder"):60118,Tm=fe?Symbol.for("react.scope"):60119;function Le(a){if(typeof a=="object"&&a!==null){var t=a.$$typeof;switch(t){case Gn:switch(a=a.type,a){case $n:case fr:case mr:case xr:case pr:case br:return a;default:switch(a=a&&a.$$typeof,a){case hr:case vr:case jr:case yr:case gr:return a;default:return t}}case qn:return t}}}function Ll(a){return Le(a)===fr}se.AsyncMode=$n;se.ConcurrentMode=fr;se.ContextConsumer=hr;se.ContextProvider=gr;se.Element=Gn;se.ForwardRef=vr;se.Fragment=mr;se.Lazy=jr;se.Memo=yr;se.Portal=qn;se.Profiler=xr;se.StrictMode=pr;se.Suspense=br;se.isAsyncMode=function(a){return Ll(a)||Le(a)===$n};se.isConcurrentMode=Ll;se.isContextConsumer=function(a){return Le(a)===hr};se.isContextProvider=function(a){return Le(a)===gr};se.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===Gn};se.isForwardRef=function(a){return Le(a)===vr};se.isFragment=function(a){return Le(a)===mr};se.isLazy=function(a){return Le(a)===jr};se.isMemo=function(a){return Le(a)===yr};se.isPortal=function(a){return Le(a)===qn};se.isProfiler=function(a){return Le(a)===xr};se.isStrictMode=function(a){return Le(a)===pr};se.isSuspense=function(a){return Le(a)===br};se.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===mr||a===fr||a===xr||a===pr||a===br||a===Am||typeof a=="object"&&a!==null&&(a.$$typeof===jr||a.$$typeof===yr||a.$$typeof===gr||a.$$typeof===hr||a.$$typeof===vr||a.$$typeof===Em||a.$$typeof===Mm||a.$$typeof===Tm||a.$$typeof===Im)};se.typeOf=Le;Pl.exports=se;var Om=Pl.exports,zn=Om,Pm={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Lm={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Rm={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rl={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Un={};Un[zn.ForwardRef]=Rm;Un[zn.Memo]=Rl;function Ys(a){return zn.isMemo(a)?Rl:Un[a.$$typeof]||Pm}var Fm=Object.defineProperty,Bm=Object.getOwnPropertyNames,Qs=Object.getOwnPropertySymbols,Gm=Object.getOwnPropertyDescriptor,qm=Object.getPrototypeOf,Js=Object.prototype;function Fl(a,t,r){if(typeof t!="string"){if(Js){var n=qm(t);n&&n!==Js&&Fl(a,n,r)}var i=Bm(t);Qs&&(i=i.concat(Qs(t)));for(var s=Ys(a),l=Ys(t),o=0;o<i.length;++o){var c=i[o];if(!Lm[c]&&!(r&&r[c])&&!(l&&l[c])&&!(s&&s[c])){var d=Gm(t,c);try{Fm(a,c,d)}catch{}}}}return a}var $m=Fl;const Xs=Ec($m);var Bl={exports:{}},oe={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wr=60103,Nr=60106,ht=60107,ft=60108,vt=60114,bt=60109,yt=60110,jt=60112,wt=60113,Hn=60120,Nt=60115,kt=60116,Gl=60121,ql=60122,$l=60117,zl=60129,Ul=60131;if(typeof Symbol=="function"&&Symbol.for){var be=Symbol.for;wr=be("react.element"),Nr=be("react.portal"),ht=be("react.fragment"),ft=be("react.strict_mode"),vt=be("react.profiler"),bt=be("react.provider"),yt=be("react.context"),jt=be("react.forward_ref"),wt=be("react.suspense"),Hn=be("react.suspense_list"),Nt=be("react.memo"),kt=be("react.lazy"),Gl=be("react.block"),ql=be("react.server.block"),$l=be("react.fundamental"),zl=be("react.debug_trace_mode"),Ul=be("react.legacy_hidden")}function Ve(a){if(typeof a=="object"&&a!==null){var t=a.$$typeof;switch(t){case wr:switch(a=a.type,a){case ht:case vt:case ft:case wt:case Hn:return a;default:switch(a=a&&a.$$typeof,a){case yt:case jt:case kt:case Nt:case bt:return a;default:return t}}case Nr:return t}}}var zm=bt,Um=wr,Hm=jt,Vm=ht,Wm=kt,_m=Nt,Km=Nr,Ym=vt,Qm=ft,Jm=wt;oe.ContextConsumer=yt;oe.ContextProvider=zm;oe.Element=Um;oe.ForwardRef=Hm;oe.Fragment=Vm;oe.Lazy=Wm;oe.Memo=_m;oe.Portal=Km;oe.Profiler=Ym;oe.StrictMode=Qm;oe.Suspense=Jm;oe.isAsyncMode=function(){return!1};oe.isConcurrentMode=function(){return!1};oe.isContextConsumer=function(a){return Ve(a)===yt};oe.isContextProvider=function(a){return Ve(a)===bt};oe.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===wr};oe.isForwardRef=function(a){return Ve(a)===jt};oe.isFragment=function(a){return Ve(a)===ht};oe.isLazy=function(a){return Ve(a)===kt};oe.isMemo=function(a){return Ve(a)===Nt};oe.isPortal=function(a){return Ve(a)===Nr};oe.isProfiler=function(a){return Ve(a)===vt};oe.isStrictMode=function(a){return Ve(a)===ft};oe.isSuspense=function(a){return Ve(a)===wt};oe.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===ht||a===vt||a===zl||a===ft||a===wt||a===Hn||a===Ul||typeof a=="object"&&a!==null&&(a.$$typeof===kt||a.$$typeof===Nt||a.$$typeof===bt||a.$$typeof===yt||a.$$typeof===jt||a.$$typeof===$l||a.$$typeof===Gl||a[0]===ql)};oe.typeOf=Ve;Bl.exports=oe;var Xm=Bl.exports,Zm=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ep=["reactReduxForwardedRef"],ap=[],tp=[null,null];function rp(a,t){var r=a[1];return[t.payload,r+1]}function Zs(a,t,r){Ol(function(){return a.apply(void 0,t)},r)}function np(a,t,r,n,i,s,l){a.current=n,t.current=i,r.current=!1,s.current&&(s.current=null,l())}function sp(a,t,r,n,i,s,l,o,c,d){if(a){var m=!1,u=null,p=function(){if(!m){var f=t.getState(),v,b;try{v=n(f,i.current)}catch(y){b=y,u=y}b||(u=null),v===s.current?l.current||c():(s.current=v,o.current=v,l.current=!0,d({type:"STORE_UPDATED",payload:{error:b}}))}};r.onStateChange=p,r.trySubscribe(),p();var x=function(){if(m=!0,r.tryUnsubscribe(),r.onStateChange=null,u)throw u};return x}}var ip=function(){return[null,0]};function lp(a,t){t===void 0&&(t={});var r=t,n=r.getDisplayName,i=n===void 0?function(w){return"ConnectAdvanced("+w+")"}:n,s=r.methodName,l=s===void 0?"connectAdvanced":s,o=r.renderCountProp,c=o===void 0?void 0:o,d=r.shouldHandleStateChanges,m=d===void 0?!0:d,u=r.storeKey,p=u===void 0?"store":u;r.withRef;var x=r.forwardRef,g=x===void 0?!1:x,f=r.context,v=f===void 0?El:f,b=Qt(r,Zm),y=v;return function(j){var D=j.displayName||j.name||"Component",N=i(D),I=Q({},b,{getDisplayName:i,methodName:l,renderCountProp:c,shouldHandleStateChanges:m,storeKey:p,displayName:N,wrappedComponentName:D,WrappedComponent:j}),T=b.pure;function k(R){return a(R.dispatch,I)}var M=T?h.useMemo:function(R){return R()};function A(R){var B=h.useMemo(function(){var Ye=R.reactReduxForwardedRef,ta=Qt(R,ep);return[R.context,Ye,ta]},[R]),E=B[0],q=B[1],S=B[2],$=h.useMemo(function(){return E&&E.Consumer&&Xm.isContextConsumer(ae.createElement(E.Consumer,null))?E:y},[E,y]),Z=h.useContext($),_=!!R.store&&!!R.store.getState&&!!R.store.dispatch;Z&&Z.store;var K=_?R.store:Z.store,Y=h.useMemo(function(){return k(K)},[K]),ce=h.useMemo(function(){if(!m)return tp;var Ye=Tl(K,_?null:Z.subscription),ta=Ye.notifyNestedSubs.bind(Ye);return[Ye,ta]},[K,_,Z]),ve=ce[0],De=ce[1],We=h.useMemo(function(){return _?Z:Q({},Z,{subscription:ve})},[_,Z,ve]),_e=h.useReducer(rp,ap,ip),J=_e[0],ne=J[0],Ne=_e[1];if(ne&&ne.error)throw ne.error;var Ee=h.useRef(),Sa=h.useRef(S),ma=h.useRef(),Ka=h.useRef(!1),Aa=M(function(){return ma.current&&S===Sa.current?ma.current:Y(K.getState(),S)},[K,ne,S]);Zs(np,[Sa,Ee,Ka,S,Aa,ma,De]),Zs(sp,[m,K,ve,Y,Sa,Ee,Ka,ma,De,Ne],[K,ve,Y]);var Ke=h.useMemo(function(){return ae.createElement(j,Q({},Aa,{ref:q}))},[q,j,Aa]),Ya=h.useMemo(function(){return m?ae.createElement($.Provider,{value:We},Ke):Ke},[$,Ke,We]);return Ya}var W=T?ae.memo(A):A;if(W.WrappedComponent=j,W.displayName=A.displayName=N,g){var z=ae.forwardRef(function(B,E){return ae.createElement(W,Q({},B,{reactReduxForwardedRef:E}))});return z.displayName=N,z.WrappedComponent=j,Xs(z,j)}return Xs(W,j)}}function ei(a,t){return a===t?a!==0||t!==0||1/a===1/t:a!==a&&t!==t}function Wr(a,t){if(ei(a,t))return!0;if(typeof a!="object"||a===null||typeof t!="object"||t===null)return!1;var r=Object.keys(a),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!ei(a[r[i]],t[r[i]]))return!1;return!0}function op(a,t){var r={},n=function(l){var o=a[l];typeof o=="function"&&(r[l]=function(){return t(o.apply(void 0,arguments))})};for(var i in a)n(i);return r}function Vn(a){return function(r,n){var i=a(r,n);function s(){return i}return s.dependsOnOwnProps=!1,s}}function ai(a){return a.dependsOnOwnProps!==null&&a.dependsOnOwnProps!==void 0?!!a.dependsOnOwnProps:a.length!==1}function Hl(a,t){return function(n,i){i.displayName;var s=function(o,c){return s.dependsOnOwnProps?s.mapToProps(o,c):s.mapToProps(o)};return s.dependsOnOwnProps=!0,s.mapToProps=function(o,c){s.mapToProps=a,s.dependsOnOwnProps=ai(a);var d=s(o,c);return typeof d=="function"&&(s.mapToProps=d,s.dependsOnOwnProps=ai(d),d=s(o,c)),d},s}}function cp(a){return typeof a=="function"?Hl(a):void 0}function dp(a){return a?void 0:Vn(function(t){return{dispatch:t}})}function up(a){return a&&typeof a=="object"?Vn(function(t){return op(a,t)}):void 0}const mp=[cp,dp,up];function pp(a){return typeof a=="function"?Hl(a):void 0}function xp(a){return a?void 0:Vn(function(){return{}})}const gp=[pp,xp];function hp(a,t,r){return Q({},r,a,t)}function fp(a){return function(r,n){n.displayName;var i=n.pure,s=n.areMergedPropsEqual,l=!1,o;return function(d,m,u){var p=a(d,m,u);return l?(!i||!s(p,o))&&(o=p):(l=!0,o=p),o}}}function vp(a){return typeof a=="function"?fp(a):void 0}function bp(a){return a?void 0:function(){return hp}}const yp=[vp,bp];var jp=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function wp(a,t,r,n){return function(s,l){return r(a(s,l),t(n,l),l)}}function Np(a,t,r,n,i){var s=i.areStatesEqual,l=i.areOwnPropsEqual,o=i.areStatePropsEqual,c=!1,d,m,u,p,x;function g(w,j){return d=w,m=j,u=a(d,m),p=t(n,m),x=r(u,p,m),c=!0,x}function f(){return u=a(d,m),t.dependsOnOwnProps&&(p=t(n,m)),x=r(u,p,m),x}function v(){return a.dependsOnOwnProps&&(u=a(d,m)),t.dependsOnOwnProps&&(p=t(n,m)),x=r(u,p,m),x}function b(){var w=a(d,m),j=!o(w,u);return u=w,j&&(x=r(u,p,m)),x}function y(w,j){var D=!l(j,m),N=!s(w,d,j,m);return d=w,m=j,D&&N?f():D?v():N?b():x}return function(j,D){return c?y(j,D):g(j,D)}}function kp(a,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,i=t.initMergeProps,s=Qt(t,jp),l=r(a,s),o=n(a,s),c=i(a,s),d=s.pure?Np:wp;return d(l,o,c,a,s)}var Cp=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function _r(a,t,r){for(var n=t.length-1;n>=0;n--){var i=t[n](a);if(i)return i}return function(s,l){throw new Error("Invalid value of type "+typeof a+" for "+r+" argument when connecting component "+l.wrappedComponentName+".")}}function Dp(a,t){return a===t}function Sp(a){var t=a===void 0?{}:a,r=t.connectHOC,n=r===void 0?lp:r,i=t.mapStateToPropsFactories,s=i===void 0?gp:i,l=t.mapDispatchToPropsFactories,o=l===void 0?mp:l,c=t.mergePropsFactories,d=c===void 0?yp:c,m=t.selectorFactory,u=m===void 0?kp:m;return function(x,g,f,v){v===void 0&&(v={});var b=v,y=b.pure,w=y===void 0?!0:y,j=b.areStatesEqual,D=j===void 0?Dp:j,N=b.areOwnPropsEqual,I=N===void 0?Wr:N,T=b.areStatePropsEqual,k=T===void 0?Wr:T,M=b.areMergedPropsEqual,A=M===void 0?Wr:M,W=Qt(b,Cp),z=_r(x,s,"mapStateToProps"),R=_r(g,o,"mapDispatchToProps"),B=_r(f,d,"mergeProps");return n(u,Q({methodName:"connect",getDisplayName:function(q){return"Connect("+q+")"},shouldHandleStateChanges:!!x,initMapStateToProps:z,initMapDispatchToProps:R,initMergeProps:B,pure:w,areStatesEqual:D,areOwnPropsEqual:I,areStatePropsEqual:k,areMergedPropsEqual:A},W))}}const Vl=Sp();km(Mc.unstable_batchedUpdates);function Ap(a,t){if(a.length!==t.length)return!1;for(var r=0;r<a.length;r++)if(a[r]!==t[r])return!1;return!0}function Wl(a,t){var r=h.useState(function(){return{inputs:t,result:a()}})[0],n=h.useRef(!0),i=h.useRef(r),s=n.current||!!(t&&i.current.inputs&&Ap(t,i.current.inputs)),l=s?i.current:{inputs:t,result:a()};return h.useEffect(function(){n.current=!1,i.current=l},[l]),l.result}function Ip(a,t){return Wl(function(){return a},t)}var te=Wl,V=Ip,Ep="Invariant failed";function Mp(a,t){throw new Error(Ep)}var Ue=function(t){var r=t.top,n=t.right,i=t.bottom,s=t.left,l=n-s,o=i-r,c={top:r,right:n,bottom:i,left:s,width:l,height:o,x:s,y:r,center:{x:(n+s)/2,y:(i+r)/2}};return c},Wn=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},ti=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Tp=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Kr={top:0,right:0,bottom:0,left:0},_n=function(t){var r=t.borderBox,n=t.margin,i=n===void 0?Kr:n,s=t.border,l=s===void 0?Kr:s,o=t.padding,c=o===void 0?Kr:o,d=Ue(Wn(r,i)),m=Ue(ti(r,l)),u=Ue(ti(m,c));return{marginBox:d,borderBox:Ue(r),paddingBox:m,contentBox:u,margin:i,border:l,padding:c}},Re=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var i=Number(r);return isNaN(i)&&Mp(),i},Op=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Jt=function(t,r){var n=t.borderBox,i=t.border,s=t.margin,l=t.padding,o=Tp(n,r);return _n({borderBox:o,border:i,margin:s,padding:l})},Xt=function(t,r){return r===void 0&&(r=Op()),Jt(t,r)},_l=function(t,r){var n={top:Re(r.marginTop),right:Re(r.marginRight),bottom:Re(r.marginBottom),left:Re(r.marginLeft)},i={top:Re(r.paddingTop),right:Re(r.paddingRight),bottom:Re(r.paddingBottom),left:Re(r.paddingLeft)},s={top:Re(r.borderTopWidth),right:Re(r.borderRightWidth),bottom:Re(r.borderBottomWidth),left:Re(r.borderLeftWidth)};return _n({borderBox:t,margin:n,padding:i,border:s})},Kl=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return _l(r,n)},ri=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Pp(a,t){return!!(a===t||ri(a)&&ri(t))}function Lp(a,t){if(a.length!==t.length)return!1;for(var r=0;r<a.length;r++)if(!Pp(a[r],t[r]))return!1;return!0}function ge(a,t){t===void 0&&(t=Lp);var r,n=[],i,s=!1;function l(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return s&&r===this&&t(o,n)||(i=a.apply(this,o),s=!0,r=this,n=o),i}return l}var st=function(t){var r=[],n=null,i=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];r=o,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};function Yl(a,t){}Yl.bind(null,"warn");Yl.bind(null,"error");function na(){}function Rp(a,t){return Q({},a,{},t)}function Ge(a,t,r){var n=t.map(function(i){var s=Rp(r,i.options);return a.addEventListener(i.eventName,i.fn,s),function(){a.removeEventListener(i.eventName,i.fn,s)}});return function(){n.forEach(function(s){s()})}}var Fp="Invariant failed";function Zt(a){this.message=a}Zt.prototype.toString=function(){return this.message};function F(a,t){throw new Zt(Fp)}var Bp=function(a){Sl(t,a);function t(){for(var n,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=a.call.apply(a,[this].concat(s))||this,n.callbacks=null,n.unbind=na,n.onWindowError=function(o){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var d=o.error;d instanceof Zt&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var r=t.prototype;return r.componentDidMount=function(){this.unbind=Ge(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(i){if(i instanceof Zt){this.setState({});return}throw i},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},t}(ae.Component),Gp=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,er=function(t){return t+1},qp=function(t){return`
  You have lifted an item in position `+er(t.source.index)+`
`},Ql=function(t,r){var n=t.droppableId===r.droppableId,i=er(t.index),s=er(r.index);return n?`
      You have moved the item from position `+i+`
      to position `+s+`
    `:`
    You have moved the item from position `+i+`
    in list `+t.droppableId+`
    to list `+r.droppableId+`
    in position `+s+`
  `},Jl=function(t,r,n){var i=r.droppableId===n.droppableId;return i?`
      The item `+t+`
      has been combined with `+n.draggableId:`
      The item `+t+`
      in list `+r.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},$p=function(t){var r=t.destination;if(r)return Ql(t.source,r);var n=t.combine;return n?Jl(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},ni=function(t){return`
  The item has returned to its starting position
  of `+er(t.index)+`
`},zp=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+ni(t.source)+`
    `;var r=t.destination,n=t.combine;return r?`
      You have dropped the item.
      `+Ql(t.source,r)+`
    `:n?`
      You have dropped the item.
      `+Jl(t.draggableId,t.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+ni(t.source)+`
  `},qt={dragHandleUsageInstructions:Gp,onDragStart:qp,onDragUpdate:$p,onDragEnd:zp},he={x:0,y:0},ye=function(t,r){return{x:t.x+r.x,y:t.y+r.y}},Te=function(t,r){return{x:t.x-r.x,y:t.y-r.y}},sa=function(t,r){return t.x===r.x&&t.y===r.y},Va=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},ja=function(t,r,n){var i;return n===void 0&&(n=0),i={},i[t]=r,i[t==="x"?"y":"x"]=n,i},it=function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},si=function(t,r){return Math.min.apply(Math,r.map(function(n){return it(t,n)}))},Xl=function(t){return function(r){return{x:t(r.x),y:t(r.y)}}},Up=function(a,t){var r=Ue({top:Math.max(t.top,a.top),right:Math.min(t.right,a.right),bottom:Math.min(t.bottom,a.bottom),left:Math.max(t.left,a.left)});return r.width<=0||r.height<=0?null:r},Ct=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},ii=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},Hp={top:0,right:0,bottom:0,left:0},Vp=function(t,r){return r?Ct(t,r.scroll.diff.displacement):t},Wp=function(t,r,n){if(n&&n.increasedBy){var i;return Q({},t,(i={},i[r.end]=t[r.end]+n.increasedBy[r.line],i))}return t},_p=function(t,r){return r&&r.shouldClipSubject?Up(r.pageMarginBox,t):Ue(t)},Ba=function(a){var t=a.page,r=a.withPlaceholder,n=a.axis,i=a.frame,s=Vp(t.marginBox,i),l=Wp(s,n,r),o=_p(l,i);return{page:t,withPlaceholder:r,active:o}},Kn=function(a,t){a.frame||F();var r=a.frame,n=Te(t,r.scroll.initial),i=Va(n),s=Q({},r,{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:i},max:r.scroll.max}}),l=Ba({page:a.subject.page,withPlaceholder:a.subject.withPlaceholder,axis:a.axis,frame:s}),o=Q({},a,{frame:s,subject:l});return o};function ar(a){return Object.values?Object.values(a):Object.keys(a).map(function(t){return a[t]})}function Yn(a,t){if(a.findIndex)return a.findIndex(t);for(var r=0;r<a.length;r++)if(t(a[r]))return r;return-1}function ua(a,t){if(a.find)return a.find(t);var r=Yn(a,t);if(r!==-1)return a[r]}function Zl(a){return Array.prototype.slice.call(a)}var eo=ge(function(a){return a.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),ao=ge(function(a){return a.reduce(function(t,r){return t[r.descriptor.id]=r,t},{})}),kr=ge(function(a){return ar(a)}),Kp=ge(function(a){return ar(a)}),Wa=ge(function(a,t){var r=Kp(t).filter(function(n){return a===n.descriptor.droppableId}).sort(function(n,i){return n.descriptor.index-i.descriptor.index});return r});function Qn(a){return a.at&&a.at.type==="REORDER"?a.at.destination:null}function Cr(a){return a.at&&a.at.type==="COMBINE"?a.at.combine:null}var Dr=ge(function(a,t){return t.filter(function(r){return r.descriptor.id!==a.descriptor.id})}),Yp=function(a){var t=a.isMovingForward,r=a.draggable,n=a.destination,i=a.insideDestination,s=a.previousImpact;if(!n.isCombineEnabled)return null;var l=Qn(s);if(!l)return null;function o(f){var v={type:"COMBINE",combine:{draggableId:f,droppableId:n.descriptor.id}};return Q({},s,{at:v})}var c=s.displaced.all,d=c.length?c[0]:null;if(t)return d?o(d):null;var m=Dr(r,i);if(!d){if(!m.length)return null;var u=m[m.length-1];return o(u.descriptor.id)}var p=Yn(m,function(f){return f.descriptor.id===d});p===-1&&F();var x=p-1;if(x<0)return null;var g=m[x];return o(g.descriptor.id)},_a=function(a,t){return a.descriptor.droppableId===t.descriptor.id},to={point:he,value:0},lt={invisible:{},visible:{},all:[]},Qp={displaced:lt,displacedBy:to,at:null},qe=function(a,t){return function(r){return a<=r&&r<=t}},ro=function(a){var t=qe(a.top,a.bottom),r=qe(a.left,a.right);return function(n){var i=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);if(i)return!0;var s=t(n.top)||t(n.bottom),l=r(n.left)||r(n.right),o=s&&l;if(o)return!0;var c=n.top<a.top&&n.bottom>a.bottom,d=n.left<a.left&&n.right>a.right,m=c&&d;if(m)return!0;var u=c&&l||d&&s;return u}},Jp=function(a){var t=qe(a.top,a.bottom),r=qe(a.left,a.right);return function(n){var i=t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right);return i}},Jn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},no={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Xp=function(a){return function(t){var r=qe(t.top,t.bottom),n=qe(t.left,t.right);return function(i){return a===Jn?r(i.top)&&r(i.bottom):n(i.left)&&n(i.right)}}},Zp=function(t,r){var n=r.frame?r.frame.scroll.diff.displacement:he;return Ct(t,n)},ex=function(t,r,n){return r.subject.active?n(r.subject.active)(t):!1},ax=function(t,r,n){return n(r)(t)},Xn=function(t){var r=t.target,n=t.destination,i=t.viewport,s=t.withDroppableDisplacement,l=t.isVisibleThroughFrameFn,o=s?Zp(r,n):r;return ex(o,n,l)&&ax(o,i,l)},tx=function(t){return Xn(Q({},t,{isVisibleThroughFrameFn:ro}))},so=function(t){return Xn(Q({},t,{isVisibleThroughFrameFn:Jp}))},rx=function(t){return Xn(Q({},t,{isVisibleThroughFrameFn:Xp(t.destination.axis)}))},nx=function(t,r,n){if(typeof n=="boolean")return n;if(!r)return!0;var i=r.invisible,s=r.visible;if(i[t])return!1;var l=s[t];return l?l.shouldAnimate:!0};function sx(a,t){var r=a.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ue(Wn(r,n))}function ot(a){var t=a.afterDragging,r=a.destination,n=a.displacedBy,i=a.viewport,s=a.forceShouldAnimate,l=a.last;return t.reduce(function(c,d){var m=sx(d,n),u=d.descriptor.id;c.all.push(u);var p=tx({target:m,destination:r,viewport:i,withDroppableDisplacement:!0});if(!p)return c.invisible[d.descriptor.id]=!0,c;var x=nx(u,l,s),g={draggableId:u,shouldAnimate:x};return c.visible[u]=g,c},{all:[],visible:{},invisible:{}})}function ix(a,t){if(!a.length)return 0;var r=a[a.length-1].descriptor.index;return t.inHomeList?r:r+1}function li(a){var t=a.insideDestination,r=a.inHomeList,n=a.displacedBy,i=a.destination,s=ix(t,{inHomeList:r});return{displaced:lt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:s}}}}function tr(a){var t=a.draggable,r=a.insideDestination,n=a.destination,i=a.viewport,s=a.displacedBy,l=a.last,o=a.index,c=a.forceShouldAnimate,d=_a(t,n);if(o==null)return li({insideDestination:r,inHomeList:d,displacedBy:s,destination:n});var m=ua(r,function(f){return f.descriptor.index===o});if(!m)return li({insideDestination:r,inHomeList:d,displacedBy:s,destination:n});var u=Dr(t,r),p=r.indexOf(m),x=u.slice(p),g=ot({afterDragging:x,destination:n,displacedBy:s,last:l,viewport:i.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function oa(a,t){return!!t.effected[a]}var lx=function(a){var t=a.isMovingForward,r=a.destination,n=a.draggables,i=a.combine,s=a.afterCritical;if(!r.isCombineEnabled)return null;var l=i.draggableId,o=n[l],c=o.descriptor.index,d=oa(l,s);return d?t?c:c-1:t?c+1:c},ox=function(a){var t=a.isMovingForward,r=a.isInHomeList,n=a.insideDestination,i=a.location;if(!n.length)return null;var s=i.index,l=t?s+1:s-1,o=n[0].descriptor.index,c=n[n.length-1].descriptor.index,d=r?c:c+1;return l<o||l>d?null:l},cx=function(a){var t=a.isMovingForward,r=a.isInHomeList,n=a.draggable,i=a.draggables,s=a.destination,l=a.insideDestination,o=a.previousImpact,c=a.viewport,d=a.afterCritical,m=o.at;if(m||F(),m.type==="REORDER"){var u=ox({isMovingForward:t,isInHomeList:r,location:m.destination,insideDestination:l});return u==null?null:tr({draggable:n,insideDestination:l,destination:s,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:u})}var p=lx({isMovingForward:t,destination:s,displaced:o.displaced,draggables:i,combine:m.combine,afterCritical:d});return p==null?null:tr({draggable:n,insideDestination:l,destination:s,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:p})},dx=function(a){var t=a.displaced,r=a.afterCritical,n=a.combineWith,i=a.displacedBy,s=!!(t.visible[n]||t.invisible[n]);return oa(n,r)?s?he:Va(i.point):s?i.point:he},ux=function(a){var t=a.afterCritical,r=a.impact,n=a.draggables,i=Cr(r);i||F();var s=i.draggableId,l=n[s].page.borderBox.center,o=dx({displaced:r.displaced,afterCritical:t,combineWith:s,displacedBy:r.displacedBy});return ye(l,o)},io=function(t,r){return r.margin[t.start]+r.borderBox[t.size]/2},mx=function(t,r){return r.margin[t.end]+r.borderBox[t.size]/2},Zn=function(t,r,n){return r[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2},oi=function(t){var r=t.axis,n=t.moveRelativeTo,i=t.isMoving;return ja(r.line,n.marginBox[r.end]+io(r,i),Zn(r,n.marginBox,i))},ci=function(t){var r=t.axis,n=t.moveRelativeTo,i=t.isMoving;return ja(r.line,n.marginBox[r.start]-mx(r,i),Zn(r,n.marginBox,i))},px=function(t){var r=t.axis,n=t.moveInto,i=t.isMoving;return ja(r.line,n.contentBox[r.start]+io(r,i),Zn(r,n.contentBox,i))},xx=function(a){var t=a.impact,r=a.draggable,n=a.draggables,i=a.droppable,s=a.afterCritical,l=Wa(i.descriptor.id,n),o=r.page,c=i.axis;if(!l.length)return px({axis:c,moveInto:i.page,isMoving:o});var d=t.displaced,m=t.displacedBy,u=d.all[0];if(u){var p=n[u];if(oa(u,s))return ci({axis:c,moveRelativeTo:p.page,isMoving:o});var x=Jt(p.page,m.point);return ci({axis:c,moveRelativeTo:x,isMoving:o})}var g=l[l.length-1];if(g.descriptor.id===r.descriptor.id)return o.borderBox.center;if(oa(g.descriptor.id,s)){var f=Jt(g.page,Va(s.displacedBy.point));return oi({axis:c,moveRelativeTo:f,isMoving:o})}return oi({axis:c,moveRelativeTo:g.page,isMoving:o})},Nn=function(a,t){var r=a.frame;return r?ye(t,r.scroll.diff.displacement):t},gx=function(t){var r=t.impact,n=t.draggable,i=t.droppable,s=t.draggables,l=t.afterCritical,o=n.page.borderBox.center,c=r.at;return!i||!c?o:c.type==="REORDER"?xx({impact:r,draggable:n,draggables:s,droppable:i,afterCritical:l}):ux({impact:r,draggables:s,afterCritical:l})},Sr=function(a){var t=gx(a),r=a.droppable,n=r?Nn(r,t):t;return n},lo=function(a,t){var r=Te(t,a.scroll.initial),n=Va(r),i=Ue({top:t.y,bottom:t.y+a.frame.height,left:t.x,right:t.x+a.frame.width}),s={frame:i,scroll:{initial:a.scroll.initial,max:a.scroll.max,current:t,diff:{value:r,displacement:n}}};return s};function di(a,t){return a.map(function(r){return t[r]})}function hx(a,t){for(var r=0;r<t.length;r++){var n=t[r].visible[a];if(n)return n}return null}var fx=function(a){var t=a.impact,r=a.viewport,n=a.destination,i=a.draggables,s=a.maxScrollChange,l=lo(r,ye(r.scroll.current,s)),o=n.frame?Kn(n,ye(n.frame.scroll.current,s)):n,c=t.displaced,d=ot({afterDragging:di(c.all,i),destination:n,displacedBy:t.displacedBy,viewport:l.frame,last:c,forceShouldAnimate:!1}),m=ot({afterDragging:di(c.all,i),destination:o,displacedBy:t.displacedBy,viewport:r.frame,last:c,forceShouldAnimate:!1}),u={},p={},x=[c,d,m];c.all.forEach(function(f){var v=hx(f,x);if(v){p[f]=v;return}u[f]=!0});var g=Q({},t,{displaced:{all:c.all,invisible:u,visible:p}});return g},vx=function(a,t){return ye(a.scroll.diff.displacement,t)},es=function(a){var t=a.pageBorderBoxCenter,r=a.draggable,n=a.viewport,i=vx(n,t),s=Te(i,r.page.borderBox.center);return ye(r.client.borderBox.center,s)},oo=function(a){var t=a.draggable,r=a.destination,n=a.newPageBorderBoxCenter,i=a.viewport,s=a.withDroppableDisplacement,l=a.onlyOnMainAxis,o=l===void 0?!1:l,c=Te(n,t.page.borderBox.center),d=Ct(t.page.borderBox,c),m={target:d,destination:r,withDroppableDisplacement:s,viewport:i};return o?rx(m):so(m)},bx=function(a){var t=a.isMovingForward,r=a.draggable,n=a.destination,i=a.draggables,s=a.previousImpact,l=a.viewport,o=a.previousPageBorderBoxCenter,c=a.previousClientSelection,d=a.afterCritical;if(!n.isEnabled)return null;var m=Wa(n.descriptor.id,i),u=_a(r,n),p=Yp({isMovingForward:t,draggable:r,destination:n,insideDestination:m,previousImpact:s})||cx({isMovingForward:t,isInHomeList:u,draggable:r,draggables:i,destination:n,insideDestination:m,previousImpact:s,viewport:l,afterCritical:d});if(!p)return null;var x=Sr({impact:p,draggable:r,droppable:n,draggables:i,afterCritical:d}),g=oo({draggable:r,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var f=es({pageBorderBoxCenter:x,draggable:r,viewport:l});return{clientSelection:f,impact:p,scrollJumpRequest:null}}var v=Te(x,o),b=fx({impact:p,viewport:l,destination:n,draggables:i,maxScrollChange:v});return{clientSelection:c,impact:b,scrollJumpRequest:v}},ke=function(t){var r=t.subject.active;return r||F(),r},yx=function(a){var t=a.isMovingForward,r=a.pageBorderBoxCenter,n=a.source,i=a.droppables,s=a.viewport,l=n.subject.active;if(!l)return null;var o=n.axis,c=qe(l[o.start],l[o.end]),d=kr(i).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return ro(s.frame)(ke(u))}).filter(function(u){var p=ke(u);return t?l[o.crossAxisEnd]<p[o.crossAxisEnd]:p[o.crossAxisStart]<l[o.crossAxisStart]}).filter(function(u){var p=ke(u),x=qe(p[o.start],p[o.end]);return c(p[o.start])||c(p[o.end])||x(l[o.start])||x(l[o.end])}).sort(function(u,p){var x=ke(u)[o.crossAxisStart],g=ke(p)[o.crossAxisStart];return t?x-g:g-x}).filter(function(u,p,x){return ke(u)[o.crossAxisStart]===ke(x[0])[o.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var m=d.filter(function(u){var p=qe(ke(u)[o.start],ke(u)[o.end]);return p(r[o.line])});return m.length===1?m[0]:m.length>1?m.sort(function(u,p){return ke(u)[o.start]-ke(p)[o.start]})[0]:d.sort(function(u,p){var x=si(r,ii(ke(u))),g=si(r,ii(ke(p)));return x!==g?x-g:ke(u)[o.start]-ke(p)[o.start]})[0]},ui=function(t,r){var n=t.page.borderBox.center;return oa(t.descriptor.id,r)?Te(n,r.displacedBy.point):n},jx=function(t,r){var n=t.page.borderBox;return oa(t.descriptor.id,r)?Ct(n,Va(r.displacedBy.point)):n},wx=function(a){var t=a.pageBorderBoxCenter,r=a.viewport,n=a.destination,i=a.insideDestination,s=a.afterCritical,l=i.filter(function(o){return so({target:jx(o,s),destination:n,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var d=it(t,Nn(n,ui(o,s))),m=it(t,Nn(n,ui(c,s)));return d<m?-1:m<d?1:o.descriptor.index-c.descriptor.index});return l[0]||null},Dt=ge(function(t,r){var n=r[t.line];return{value:n,point:ja(t.line,n)}}),Nx=function(t,r,n){var i=t.axis;if(t.descriptor.mode==="virtual")return ja(i.line,r[i.line]);var s=t.subject.page.contentBox[i.size],l=Wa(t.descriptor.id,n),o=l.reduce(function(m,u){return m+u.client.marginBox[i.size]},0),c=o+r[i.line],d=c-s;return d<=0?null:ja(i.line,d)},co=function(t,r){return Q({},t,{scroll:Q({},t.scroll,{max:r})})},uo=function(t,r,n){var i=t.frame;_a(r,t)&&F(),t.subject.withPlaceholder&&F();var s=Dt(t.axis,r.displaceBy).point,l=Nx(t,s,n),o={placeholderSize:s,increasedBy:l,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!i){var c=Ba({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return Q({},t,{subject:c})}var d=l?ye(i.scroll.max,l):i.scroll.max,m=co(i,d),u=Ba({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:m});return Q({},t,{subject:u,frame:m})},kx=function(t){var r=t.subject.withPlaceholder;r||F();var n=t.frame;if(!n){var i=Ba({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return Q({},t,{subject:i})}var s=r.oldFrameMaxScroll;s||F();var l=co(n,s),o=Ba({page:t.subject.page,axis:t.axis,frame:l,withPlaceholder:null});return Q({},t,{subject:o,frame:l})},Cx=function(a){var t=a.previousPageBorderBoxCenter,r=a.moveRelativeTo,n=a.insideDestination,i=a.draggable,s=a.draggables,l=a.destination,o=a.viewport,c=a.afterCritical;if(!r){if(n.length)return null;var d={displaced:lt,displacedBy:to,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},m=Sr({impact:d,draggable:i,droppable:l,draggables:s,afterCritical:c}),u=_a(i,l)?l:uo(l,i,s),p=oo({draggable:i,destination:u,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?d:null}var x=t[l.axis.line]<=r.page.borderBox.center[l.axis.line],g=function(){var v=r.descriptor.index;return r.descriptor.id===i.descriptor.id||x?v:v+1}(),f=Dt(l.axis,i.displaceBy);return tr({draggable:i,insideDestination:n,destination:l,viewport:o,displacedBy:f,last:lt,index:g})},Dx=function(a){var t=a.isMovingForward,r=a.previousPageBorderBoxCenter,n=a.draggable,i=a.isOver,s=a.draggables,l=a.droppables,o=a.viewport,c=a.afterCritical,d=yx({isMovingForward:t,pageBorderBoxCenter:r,source:i,droppables:l,viewport:o});if(!d)return null;var m=Wa(d.descriptor.id,s),u=wx({pageBorderBoxCenter:r,viewport:o,destination:d,insideDestination:m,afterCritical:c}),p=Cx({previousPageBorderBoxCenter:r,destination:d,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:m,viewport:o,afterCritical:c});if(!p)return null;var x=Sr({impact:p,draggable:n,droppable:d,draggables:s,afterCritical:c}),g=es({pageBorderBoxCenter:x,draggable:n,viewport:o});return{clientSelection:g,impact:p,scrollJumpRequest:null}},Oe=function(a){var t=a.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},Sx=function(t,r){var n=Oe(t);return n?r[n]:null},Ax=function(a){var t=a.state,r=a.type,n=Sx(t.impact,t.dimensions.droppables),i=!!n,s=t.dimensions.droppables[t.critical.droppable.id],l=n||s,o=l.axis.direction,c=o==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||o==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(c&&!i)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",m=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,p=t.dimensions,x=p.draggables,g=p.droppables;return c?bx({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:m,destination:l,draggables:x,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Dx({isMovingForward:d,previousPageBorderBoxCenter:u,draggable:m,isOver:l,draggables:x,droppables:g,viewport:t.viewport,afterCritical:t.afterCritical})};function xa(a){return a.phase==="DRAGGING"||a.phase==="COLLECTING"}function mo(a){var t=qe(a.top,a.bottom),r=qe(a.left,a.right);return function(i){return t(i.y)&&r(i.x)}}function Ix(a,t){return a.left<t.right&&a.right>t.left&&a.top<t.bottom&&a.bottom>t.top}function Ex(a){var t=a.pageBorderBox,r=a.draggable,n=a.candidates,i=r.page.borderBox.center,s=n.map(function(l){var o=l.axis,c=ja(l.axis.line,t.center[o.line],l.page.borderBox.center[o.crossAxisLine]);return{id:l.descriptor.id,distance:it(i,c)}}).sort(function(l,o){return o.distance-l.distance});return s[0]?s[0].id:null}function Mx(a){var t=a.pageBorderBox,r=a.draggable,n=a.droppables,i=kr(n).filter(function(s){if(!s.isEnabled)return!1;var l=s.subject.active;if(!l||!Ix(t,l))return!1;if(mo(l)(t.center))return!0;var o=s.axis,c=l.center[o.crossAxisLine],d=t[o.crossAxisStart],m=t[o.crossAxisEnd],u=qe(l[o.crossAxisStart],l[o.crossAxisEnd]),p=u(d),x=u(m);return!p&&!x?!0:p?d<c:m>c});return i.length?i.length===1?i[0].descriptor.id:Ex({pageBorderBox:t,draggable:r,candidates:i}):null}var po=function(t,r){return Ue(Ct(t,r))},Tx=function(a,t){var r=a.frame;return r?po(t,r.scroll.diff.value):t};function xo(a){var t=a.displaced,r=a.id;return!!(t.visible[r]||t.invisible[r])}function Ox(a){var t=a.draggable,r=a.closest,n=a.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Px=function(a){var t=a.pageBorderBoxWithDroppableScroll,r=a.draggable,n=a.destination,i=a.insideDestination,s=a.last,l=a.viewport,o=a.afterCritical,c=n.axis,d=Dt(n.axis,r.displaceBy),m=d.value,u=t[c.start],p=t[c.end],x=Dr(r,i),g=ua(x,function(v){var b=v.descriptor.id,y=v.page.borderBox.center[c.line],w=oa(b,o),j=xo({displaced:s,id:b});return w?j?p<=y:u<y-m:j?p<=y+m:u<y}),f=Ox({draggable:r,closest:g,inHomeList:_a(r,n)});return tr({draggable:r,insideDestination:i,destination:n,viewport:l,last:s,displacedBy:d,index:f})},Lx=4,Rx=function(a){var t=a.draggable,r=a.pageBorderBoxWithDroppableScroll,n=a.previousImpact,i=a.destination,s=a.insideDestination,l=a.afterCritical;if(!i.isCombineEnabled)return null;var o=i.axis,c=Dt(i.axis,t.displaceBy),d=c.value,m=r[o.start],u=r[o.end],p=Dr(t,s),x=ua(p,function(f){var v=f.descriptor.id,b=f.page.borderBox,y=b[o.size],w=y/Lx,j=oa(v,l),D=xo({displaced:n.displaced,id:v});return j?D?u>b[o.start]+w&&u<b[o.end]-w:m>b[o.start]-d+w&&m<b[o.end]-d-w:D?u>b[o.start]+d+w&&u<b[o.end]+d-w:m>b[o.start]+w&&m<b[o.end]-w});if(!x)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:i.descriptor.id}}};return g},go=function(a){var t=a.pageOffset,r=a.draggable,n=a.draggables,i=a.droppables,s=a.previousImpact,l=a.viewport,o=a.afterCritical,c=po(r.page.borderBox,t),d=Mx({pageBorderBox:c,draggable:r,droppables:i});if(!d)return Qp;var m=i[d],u=Wa(m.descriptor.id,n),p=Tx(m,c);return Rx({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:s,destination:m,insideDestination:u,afterCritical:o})||Px({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:m,insideDestination:u,last:s.displaced,viewport:l,afterCritical:o})},as=function(a,t){var r;return Q({},a,(r={},r[t.descriptor.id]=t,r))},Fx=function(t){var r=t.previousImpact,n=t.impact,i=t.droppables,s=Oe(r),l=Oe(n);if(!s||s===l)return i;var o=i[s];if(!o.subject.withPlaceholder)return i;var c=kx(o);return as(i,c)},Bx=function(a){var t=a.draggable,r=a.draggables,n=a.droppables,i=a.previousImpact,s=a.impact,l=Fx({previousImpact:i,impact:s,droppables:n}),o=Oe(s);if(!o)return l;var c=n[o];if(_a(t,c)||c.subject.withPlaceholder)return l;var d=uo(c,t,r);return as(l,d)},at=function(a){var t=a.state,r=a.clientSelection,n=a.dimensions,i=a.viewport,s=a.impact,l=a.scrollJumpRequest,o=i||t.viewport,c=n||t.dimensions,d=r||t.current.client.selection,m=Te(d,t.initial.client.selection),u={offset:m,selection:d,borderBoxCenter:ye(t.initial.client.borderBoxCenter,m)},p={selection:ye(u.selection,o.scroll.current),borderBoxCenter:ye(u.borderBoxCenter,o.scroll.current),offset:ye(u.offset,o.scroll.diff.value)},x={client:u,page:p};if(t.phase==="COLLECTING")return Q({phase:"COLLECTING"},t,{dimensions:c,viewport:o,current:x});var g=c.draggables[t.critical.draggable.id],f=s||go({pageOffset:p.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),v=Bx({draggable:g,impact:f,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),b=Q({},t,{current:x,dimensions:{draggables:c.draggables,droppables:v},impact:f,viewport:o,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null});return b};function Gx(a,t){return a.map(function(r){return t[r]})}var ho=function(a){var t=a.impact,r=a.viewport,n=a.draggables,i=a.destination,s=a.forceShouldAnimate,l=t.displaced,o=Gx(l.all,n),c=ot({afterDragging:o,destination:i,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:s,last:l});return Q({},t,{displaced:c})},fo=function(a){var t=a.impact,r=a.draggable,n=a.droppable,i=a.draggables,s=a.viewport,l=a.afterCritical,o=Sr({impact:t,draggable:r,draggables:i,droppable:n,afterCritical:l});return es({pageBorderBoxCenter:o,draggable:r,viewport:s})},vo=function(a){var t=a.state,r=a.dimensions,n=a.viewport;t.movementMode!=="SNAP"&&F();var i=t.impact,s=n||t.viewport,l=r||t.dimensions,o=l.draggables,c=l.droppables,d=o[t.critical.draggable.id],m=Oe(i);m||F();var u=c[m],p=ho({impact:i,viewport:s,destination:u,draggables:o}),x=fo({impact:p,draggable:d,droppable:u,draggables:o,viewport:s,afterCritical:t.afterCritical});return at({impact:p,clientSelection:x,state:t,dimensions:l,viewport:s})},qx=function(a){return{index:a.index,droppableId:a.droppableId}},bo=function(a){var t=a.draggable,r=a.home,n=a.draggables,i=a.viewport,s=Dt(r.axis,t.displaceBy),l=Wa(r.descriptor.id,n),o=l.indexOf(t);o===-1&&F();var c=l.slice(o+1),d=c.reduce(function(x,g){return x[g.descriptor.id]=!0,x},{}),m={inVirtualList:r.descriptor.mode==="virtual",displacedBy:s,effected:d},u=ot({afterDragging:c,destination:r,displacedBy:s,last:null,viewport:i.frame,forceShouldAnimate:!1}),p={displaced:u,displacedBy:s,at:{type:"REORDER",destination:qx(t.descriptor)}};return{impact:p,afterCritical:m}},$x=function(a,t){return{draggables:a.draggables,droppables:as(a.droppables,t)}},zx=function(a){var t=a.draggable,r=a.offset,n=a.initialWindowScroll,i=Jt(t.client,r),s=Xt(i,n),l=Q({},t,{placeholder:Q({},t.placeholder,{client:i}),client:i,page:s});return l},Ux=function(a){var t=a.frame;return t||F(),t},Hx=function(a){var t=a.additions,r=a.updatedDroppables,n=a.viewport,i=n.scroll.diff.value;return t.map(function(s){var l=s.descriptor.droppableId,o=r[l],c=Ux(o),d=c.scroll.diff.value,m=ye(i,d),u=zx({draggable:s,offset:m,initialWindowScroll:n.scroll.initial});return u})},Vx=function(a){var t=a.state,r=a.published,n=r.modified.map(function(w){var j=t.dimensions.droppables[w.droppableId],D=Kn(j,w.scroll);return D}),i=Q({},t.dimensions.droppables,{},eo(n)),s=ao(Hx({additions:r.additions,updatedDroppables:i,viewport:t.viewport})),l=Q({},t.dimensions.draggables,{},s);r.removals.forEach(function(w){delete l[w]});var o={droppables:i,draggables:l},c=Oe(t.impact),d=c?o.droppables[c]:null,m=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],p=bo({draggable:m,home:u,draggables:l,viewport:t.viewport}),x=p.impact,g=p.afterCritical,f=d&&d.isCombineEnabled?t.impact:x,v=go({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:f,viewport:t.viewport,afterCritical:g}),b=Q({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:x,dimensions:o,afterCritical:g,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return b;var y=Q({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return y},kn=function(t){return t.movementMode==="SNAP"},Yr=function(t,r,n){var i=$x(t.dimensions,r);return!kn(t)||n?at({state:t,dimensions:i}):vo({state:t,dimensions:i})};function Qr(a){return a.isDragging&&a.movementMode==="SNAP"?Q({phase:"DRAGGING"},a,{scrollJumpRequest:null}):a}var mi={phase:"IDLE",completed:null,shouldFlush:!1},Wx=function(a,t){if(a===void 0&&(a=mi),t.type==="FLUSH")return Q({},mi,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){a.phase!=="IDLE"&&F();var r=t.payload,n=r.critical,i=r.clientSelection,s=r.viewport,l=r.dimensions,o=r.movementMode,c=l.draggables[n.draggable.id],d=l.droppables[n.droppable.id],m={selection:i,borderBoxCenter:c.client.borderBox.center,offset:he},u={client:m,page:{selection:ye(m.selection,s.scroll.initial),borderBoxCenter:ye(m.selection,s.scroll.initial),offset:ye(m.selection,s.scroll.diff.value)}},p=kr(l.droppables).every(function(Ne){return!Ne.isFixedOnPage}),x=bo({draggable:c,home:d,draggables:l.draggables,viewport:s}),g=x.impact,f=x.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:l,initial:u,current:u,isWindowScrollAllowed:p,impact:g,afterCritical:f,onLiftImpact:g,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(t.type==="COLLECTION_STARTING"){if(a.phase==="COLLECTING"||a.phase==="DROP_PENDING")return a;a.phase!=="DRAGGING"&&F();var b=Q({phase:"COLLECTING"},a,{phase:"COLLECTING"});return b}if(t.type==="PUBLISH_WHILE_DRAGGING")return a.phase==="COLLECTING"||a.phase==="DROP_PENDING"||F(),Vx({state:a,published:t.payload});if(t.type==="MOVE"){if(a.phase==="DROP_PENDING")return a;xa(a)||F();var y=t.payload.client;return sa(y,a.current.client.selection)?a:at({state:a,clientSelection:y,impact:kn(a)?a.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(a.phase==="DROP_PENDING"||a.phase==="COLLECTING")return Qr(a);xa(a)||F();var w=t.payload,j=w.id,D=w.newScroll,N=a.dimensions.droppables[j];if(!N)return a;var I=Kn(N,D);return Yr(a,I,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(a.phase==="DROP_PENDING")return a;xa(a)||F();var T=t.payload,k=T.id,M=T.isEnabled,A=a.dimensions.droppables[k];A||F(),A.isEnabled===M&&F();var W=Q({},A,{isEnabled:M});return Yr(a,W,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(a.phase==="DROP_PENDING")return a;xa(a)||F();var z=t.payload,R=z.id,B=z.isCombineEnabled,E=a.dimensions.droppables[R];E||F(),E.isCombineEnabled===B&&F();var q=Q({},E,{isCombineEnabled:B});return Yr(a,q,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(a.phase==="DROP_PENDING"||a.phase==="DROP_ANIMATING")return a;xa(a)||F(),a.isWindowScrollAllowed||F();var S=t.payload.newScroll;if(sa(a.viewport.scroll.current,S))return Qr(a);var $=lo(a.viewport,S);return kn(a)?vo({state:a,viewport:$}):at({state:a,viewport:$})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!xa(a))return a;var Z=t.payload.maxScroll;if(sa(Z,a.viewport.scroll.max))return a;var _=Q({},a.viewport,{scroll:Q({},a.viewport.scroll,{max:Z})});return Q({phase:"DRAGGING"},a,{viewport:_})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(a.phase==="COLLECTING"||a.phase==="DROP_PENDING")return a;a.phase!=="DRAGGING"&&F();var K=Ax({state:a,type:t.type});return K?at({state:a,impact:K.impact,clientSelection:K.clientSelection,scrollJumpRequest:K.scrollJumpRequest}):a}if(t.type==="DROP_PENDING"){var Y=t.payload.reason;a.phase!=="COLLECTING"&&F();var ce=Q({phase:"DROP_PENDING"},a,{phase:"DROP_PENDING",isWaiting:!0,reason:Y});return ce}if(t.type==="DROP_ANIMATE"){var ve=t.payload,De=ve.completed,We=ve.dropDuration,_e=ve.newHomeClientOffset;a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||F();var J={phase:"DROP_ANIMATING",completed:De,dropDuration:We,newHomeClientOffset:_e,dimensions:a.dimensions};return J}if(t.type==="DROP_COMPLETE"){var ne=t.payload.completed;return{phase:"IDLE",completed:ne,shouldFlush:!1}}return a},_x=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},Kx=function(t){return{type:"LIFT",payload:t}},Yx=function(t){return{type:"INITIAL_PUBLISH",payload:t}},Qx=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},Jx=function(){return{type:"COLLECTION_STARTING",payload:null}},Xx=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},Zx=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},eg=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},yo=function(t){return{type:"MOVE",payload:t}},ag=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},tg=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},rg=function(){return{type:"MOVE_UP",payload:null}},ng=function(){return{type:"MOVE_DOWN",payload:null}},sg=function(){return{type:"MOVE_RIGHT",payload:null}},ig=function(){return{type:"MOVE_LEFT",payload:null}},ts=function(){return{type:"FLUSH",payload:null}},lg=function(t){return{type:"DROP_ANIMATE",payload:t}},rs=function(t){return{type:"DROP_COMPLETE",payload:t}},jo=function(t){return{type:"DROP",payload:t}},og=function(t){return{type:"DROP_PENDING",payload:t}},wo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},cg=function(a){return function(t){var r=t.getState,n=t.dispatch;return function(i){return function(s){if(s.type!=="LIFT"){i(s);return}var l=s.payload,o=l.id,c=l.clientSelection,d=l.movementMode,m=r();m.phase==="DROP_ANIMATING"&&n(rs({completed:m.completed})),r().phase!=="IDLE"&&F(),n(ts()),n(_x({draggableId:o,movementMode:d}));var u={shouldPublishImmediately:d==="SNAP"},p={draggableId:o,scrollOptions:u},x=a.startPublishing(p),g=x.critical,f=x.dimensions,v=x.viewport;n(Yx({critical:g,dimensions:f,clientSelection:c,movementMode:d,viewport:v}))}}}},dg=function(a){return function(){return function(t){return function(r){r.type==="INITIAL_PUBLISH"&&a.dragging(),r.type==="DROP_ANIMATE"&&a.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&a.resting(),t(r)}}}},ns={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ct={opacity:{drop:0,combining:.7},scale:{drop:.75}},ss={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},pa=ss.outOfTheWay+"s "+ns.outOfTheWay,tt={fluid:"opacity "+pa,snap:"transform "+pa+", opacity "+pa,drop:function(t){var r=t+"s "+ns.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+pa,placeholder:"height "+pa+", width "+pa+", margin "+pa},pi=function(t){return sa(t,he)?null:"translate("+t.x+"px, "+t.y+"px)"},Cn={moveTo:pi,drop:function(t,r){var n=pi(t);return n?r?n+" scale("+ct.scale.drop+")":n:null}},Dn=ss.minDropTime,No=ss.maxDropTime,ug=No-Dn,xi=1500,mg=.6,pg=function(a){var t=a.current,r=a.destination,n=a.reason,i=it(t,r);if(i<=0)return Dn;if(i>=xi)return No;var s=i/xi,l=Dn+ug*s,o=n==="CANCEL"?l*mg:l;return Number(o.toFixed(2))},xg=function(a){var t=a.impact,r=a.draggable,n=a.dimensions,i=a.viewport,s=a.afterCritical,l=n.draggables,o=n.droppables,c=Oe(t),d=c?o[c]:null,m=o[r.descriptor.droppableId],u=fo({impact:t,draggable:r,draggables:l,afterCritical:s,droppable:d||m,viewport:i}),p=Te(u,r.client.borderBox.center);return p},gg=function(a){var t=a.draggables,r=a.reason,n=a.lastImpact,i=a.home,s=a.viewport,l=a.onLiftImpact;if(!n.at||r!=="DROP"){var o=ho({draggables:t,impact:l,destination:i,viewport:s,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=Q({},n,{displaced:lt});return{impact:c,didDropInsideDroppable:!0}},hg=function(a){var t=a.getState,r=a.dispatch;return function(n){return function(i){if(i.type!=="DROP"){n(i);return}var s=t(),l=i.payload.reason;if(s.phase==="COLLECTING"){r(og({reason:l}));return}if(s.phase!=="IDLE"){var o=s.phase==="DROP_PENDING"&&s.isWaiting;o&&F(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||F();var c=s.critical,d=s.dimensions,m=d.draggables[s.critical.draggable.id],u=gg({reason:l,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),p=u.impact,x=u.didDropInsideDroppable,g=x?Qn(p):null,f=x?Cr(p):null,v={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:m.descriptor.id,type:m.descriptor.type,source:v,reason:l,mode:s.movementMode,destination:g,combine:f},y=xg({impact:p,draggable:m,dimensions:d,viewport:s.viewport,afterCritical:s.afterCritical}),w={critical:s.critical,afterCritical:s.afterCritical,result:b,impact:p},j=!sa(s.current.client.offset,y)||!!b.combine;if(!j){r(rs({completed:w}));return}var D=pg({current:s.current.client.offset,destination:y,reason:l}),N={newHomeClientOffset:y,dropDuration:D,completed:w};r(lg(N))}}}},ko=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function fg(a){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||a()}}}function vg(a){var t=a.onWindowScroll;function r(){t(ko())}var n=st(r),i=fg(n),s=na;function l(){return s!==na}function o(){l()&&F(),s=Ge(window,[i])}function c(){l()||F(),n.cancel(),s(),s=na}return{start:o,stop:c,isActive:l}}var bg=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},yg=function(a){var t=vg({onWindowScroll:function(n){a.dispatch(ag({newScroll:n}))}});return function(r){return function(n){!t.isActive()&&n.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&bg(n)&&t.stop(),r(n)}}},jg=function(a){var t=!1,r=!1,n=setTimeout(function(){r=!0}),i=function(l){t||r||(t=!0,a(l),clearTimeout(n))};return i.wasCalled=function(){return t},i},wg=function(){var a=[],t=function(s){var l=Yn(a,function(d){return d.timerId===s});l===-1&&F();var o=a.splice(l,1),c=o[0];c.callback()},r=function(s){var l=setTimeout(function(){return t(l)}),o={timerId:l,callback:s};a.push(o)},n=function(){if(a.length){var s=[].concat(a);a.length=0,s.forEach(function(l){clearTimeout(l.timerId),l.callback()})}};return{add:r,flush:n}},Ng=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.droppableId===r.droppableId&&t.index===r.index},kg=function(t,r){return t==null&&r==null?!0:t==null||r==null?!1:t.draggableId===r.draggableId&&t.droppableId===r.droppableId},Cg=function(t,r){if(t===r)return!0;var n=t.draggable.id===r.draggable.id&&t.draggable.droppableId===r.draggable.droppableId&&t.draggable.type===r.draggable.type&&t.draggable.index===r.draggable.index,i=t.droppable.id===r.droppable.id&&t.droppable.type===r.droppable.type;return n&&i},Ja=function(t,r){r()},Pt=function(t,r){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:r}},Jr=function(t,r,n,i){if(!t){n(i(r));return}var s=jg(n),l={announce:s};t(r,l),s.wasCalled()||n(i(r))},Dg=function(a,t){var r=wg(),n=null,i=function(p,x){n&&F(),Ja("onBeforeCapture",function(){var g=a().onBeforeCapture;if(g){var f={draggableId:p,mode:x};g(f)}})},s=function(p,x){n&&F(),Ja("onBeforeDragStart",function(){var g=a().onBeforeDragStart;g&&g(Pt(p,x))})},l=function(p,x){n&&F();var g=Pt(p,x);n={mode:x,lastCritical:p,lastLocation:g.source,lastCombine:null},r.add(function(){Ja("onDragStart",function(){return Jr(a().onDragStart,g,t,qt.onDragStart)})})},o=function(p,x){var g=Qn(x),f=Cr(x);n||F();var v=!Cg(p,n.lastCritical);v&&(n.lastCritical=p);var b=!Ng(n.lastLocation,g);b&&(n.lastLocation=g);var y=!kg(n.lastCombine,f);if(y&&(n.lastCombine=f),!(!v&&!b&&!y)){var w=Q({},Pt(p,n.mode),{combine:f,destination:g});r.add(function(){Ja("onDragUpdate",function(){return Jr(a().onDragUpdate,w,t,qt.onDragUpdate)})})}},c=function(){n||F(),r.flush()},d=function(p){n||F(),n=null,Ja("onDragEnd",function(){return Jr(a().onDragEnd,p,t,qt.onDragEnd)})},m=function(){if(n){var p=Q({},Pt(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});d(p)}};return{beforeCapture:i,beforeStart:s,start:l,update:o,flush:c,drop:d,abort:m}},Sg=function(a,t){var r=Dg(a,t);return function(n){return function(i){return function(s){if(s.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){var l=s.payload.critical;r.beforeStart(l,s.payload.movementMode),i(s),r.start(l,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){var o=s.payload.completed.result;r.flush(),i(s),r.drop(o);return}if(i(s),s.type==="FLUSH"){r.abort();return}var c=n.getState();c.phase==="DRAGGING"&&r.update(c.critical,c.impact)}}}},Ag=function(a){return function(t){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){t(r);return}var n=a.getState();n.phase!=="DROP_ANIMATING"&&F(),a.dispatch(rs({completed:n.completed}))}}},Ig=function(a){var t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return function(i){return function(s){if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&n(),i(s),s.type==="DROP_ANIMATE"){var l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=a.getState();c.phase==="DROP_ANIMATING"&&a.dispatch(wo())}};r=requestAnimationFrame(function(){r=null,t=Ge(window,[l])})}}}},Eg=function(a){return function(){return function(t){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&a.stopPublishing(),t(r)}}}},Mg=function(a){var t=!1;return function(){return function(r){return function(n){if(n.type==="INITIAL_PUBLISH"){t=!0,a.tryRecordFocus(n.payload.critical.draggable.id),r(n),a.tryRestoreFocusRecorded();return}if(r(n),!!t){if(n.type==="FLUSH"){t=!1,a.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){t=!1;var i=n.payload.completed.result;i.combine&&a.tryShiftRecord(i.draggableId,i.combine.draggableId),a.tryRestoreFocusRecorded()}}}}}},Tg=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},Og=function(a){return function(t){return function(r){return function(n){if(Tg(n)){a.stop(),r(n);return}if(n.type==="INITIAL_PUBLISH"){r(n);var i=t.getState();i.phase!=="DRAGGING"&&F(),a.start(i);return}r(n),a.scroll(t.getState())}}}},Pg=function(a){return function(t){return function(r){if(t(r),r.type==="PUBLISH_WHILE_DRAGGING"){var n=a.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||a.dispatch(jo({reason:n.reason})))}}}},Lg=Il,Rg=function(a){var t=a.dimensionMarshal,r=a.focusMarshal,n=a.styleMarshal,i=a.getResponders,s=a.announce,l=a.autoScroller;return Al(Wx,Lg(wm(dg(n),Eg(t),cg(t),hg,Ag,Ig,Pg,Og(l),yg,Mg(r),Sg(i,s))))},Xr=function(){return{additions:{},removals:{},modified:{}}};function Fg(a){var t=a.registry,r=a.callbacks,n=Xr(),i=null,s=function(){i||(r.collectionStarting(),i=requestAnimationFrame(function(){i=null;var m=n,u=m.additions,p=m.removals,x=m.modified,g=Object.keys(u).map(function(b){return t.draggable.getById(b).getDimension(he)}).sort(function(b,y){return b.descriptor.index-y.descriptor.index}),f=Object.keys(x).map(function(b){var y=t.droppable.getById(b),w=y.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:w}}),v={additions:g,removals:Object.keys(p),modified:f};n=Xr(),r.publish(v)}))},l=function(m){var u=m.descriptor.id;n.additions[u]=m,n.modified[m.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],s()},o=function(m){var u=m.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],s()},c=function(){i&&(cancelAnimationFrame(i),i=null,n=Xr())};return{add:l,remove:o,stop:c}}var Co=function(a){var t=a.scrollHeight,r=a.scrollWidth,n=a.height,i=a.width,s=Te({x:r,y:t},{x:i,y:n}),l={x:Math.max(0,s.x),y:Math.max(0,s.y)};return l},Do=function(){var a=document.documentElement;return a||F(),a},So=function(){var a=Do(),t=Co({scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth,width:a.clientWidth,height:a.clientHeight});return t},Bg=function(){var a=ko(),t=So(),r=a.y,n=a.x,i=Do(),s=i.clientWidth,l=i.clientHeight,o=n+s,c=r+l,d=Ue({top:r,left:n,right:o,bottom:c}),m={frame:d,scroll:{initial:a,current:a,max:t,diff:{value:he,displacement:he}}};return m},Gg=function(a){var t=a.critical,r=a.scrollOptions,n=a.registry,i=Bg(),s=i.scroll.current,l=t.droppable,o=n.droppable.getAllByType(l.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(s,r)}),c=n.draggable.getAllByType(t.draggable.type).map(function(u){return u.getDimension(s)}),d={draggables:ao(c),droppables:eo(o)},m={dimensions:d,critical:t,viewport:i};return m};function gi(a,t,r){if(r.descriptor.id===t.id||r.descriptor.type!==t.type)return!1;var n=a.droppable.getById(r.descriptor.droppableId);return n.descriptor.mode==="virtual"}var qg=function(a,t){var r=null,n=Fg({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:a}),i=function(x,g){a.droppable.exists(x)||F(),r&&t.updateDroppableIsEnabled({id:x,isEnabled:g})},s=function(x,g){r&&(a.droppable.exists(x)||F(),t.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:g}))},l=function(x,g){r&&(a.droppable.exists(x)||F(),t.updateDroppableScroll({id:x,newScroll:g}))},o=function(x,g){r&&a.droppable.getById(x).callbacks.scroll(g)},c=function(){if(r){n.stop();var x=r.critical.droppable;a.droppable.getAllByType(x.type).forEach(function(g){return g.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(x){r||F();var g=r.critical.draggable;x.type==="ADDITION"&&gi(a,g,x.value)&&n.add(x.value),x.type==="REMOVAL"&&gi(a,g,x.value)&&n.remove(x.value)},m=function(x){r&&F();var g=a.draggable.getById(x.draggableId),f=a.droppable.getById(g.descriptor.droppableId),v={draggable:g.descriptor,droppable:f.descriptor},b=a.subscribe(d);return r={critical:v,unsubscribe:b},Gg({critical:v,registry:a,scrollOptions:x.scrollOptions})},u={updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:o,updateDroppableScroll:l,startPublishing:m,stopPublishing:c};return u},Ao=function(a,t){return a.phase==="IDLE"?!0:a.phase!=="DROP_ANIMATING"||a.completed.result.draggableId===t?!1:a.completed.result.reason==="DROP"},$g=function(a){window.scrollBy(a.x,a.y)},zg=ge(function(a){return kr(a).filter(function(t){return!(!t.isEnabled||!t.frame)})}),Ug=function(t,r){var n=ua(zg(r),function(i){return i.frame||F(),mo(i.frame.pageMarginBox)(t)});return n},Hg=function(a){var t=a.center,r=a.destination,n=a.droppables;if(r){var i=n[r];return i.frame?i:null}var s=Ug(t,n);return s},ia={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Vg=function(a,t){var r=a[t.size]*ia.startFromPercentage,n=a[t.size]*ia.maxScrollAtPercentage,i={startScrollingFrom:r,maxScrollValueAt:n};return i},Io=function(a){var t=a.startOfRange,r=a.endOfRange,n=a.current,i=r-t;if(i===0)return 0;var s=n-t,l=s/i;return l},is=1,Wg=function(a,t){if(a>t.startScrollingFrom)return 0;if(a<=t.maxScrollValueAt)return ia.maxPixelScroll;if(a===t.startScrollingFrom)return is;var r=Io({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:a}),n=1-r,i=ia.maxPixelScroll*ia.ease(n);return Math.ceil(i)},hi=ia.durationDampening.accelerateAt,fi=ia.durationDampening.stopDampeningAt,_g=function(a,t){var r=t,n=fi,i=Date.now(),s=i-r;if(s>=fi)return a;if(s<hi)return is;var l=Io({startOfRange:hi,endOfRange:n,current:s}),o=a*ia.ease(l);return Math.ceil(o)},vi=function(a){var t=a.distanceToEdge,r=a.thresholds,n=a.dragStartTime,i=a.shouldUseTimeDampening,s=Wg(t,r);return s===0?0:i?Math.max(_g(s,n),is):s},bi=function(a){var t=a.container,r=a.distanceToEdges,n=a.dragStartTime,i=a.axis,s=a.shouldUseTimeDampening,l=Vg(t,i),o=r[i.end]<r[i.start];return o?vi({distanceToEdge:r[i.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s}):-1*vi({distanceToEdge:r[i.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:s})},Kg=function(a){var t=a.container,r=a.subject,n=a.proposedScroll,i=r.height>t.height,s=r.width>t.width;return!s&&!i?n:s&&i?null:{x:s?0:n.x,y:i?0:n.y}},Yg=Xl(function(a){return a===0?0:a}),Eo=function(a){var t=a.dragStartTime,r=a.container,n=a.subject,i=a.center,s=a.shouldUseTimeDampening,l={top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y,left:i.x-r.left},o=bi({container:r,distanceToEdges:l,dragStartTime:t,axis:Jn,shouldUseTimeDampening:s}),c=bi({container:r,distanceToEdges:l,dragStartTime:t,axis:no,shouldUseTimeDampening:s}),d=Yg({x:c,y:o});if(sa(d,he))return null;var m=Kg({container:r,subject:n,proposedScroll:d});return m?sa(m,he)?null:m:null},Qg=Xl(function(a){return a===0?0:a>0?1:-1}),ls=function(){var a=function(r,n){return r<0?r:r>n?r-n:0};return function(t){var r=t.current,n=t.max,i=t.change,s=ye(r,i),l={x:a(s.x,n.x),y:a(s.y,n.y)};return sa(l,he)?null:l}}(),Mo=function(t){var r=t.max,n=t.current,i=t.change,s={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},l=Qg(i),o=ls({max:s,current:n,change:l});return!o||l.x!==0&&o.x===0||l.y!==0&&o.y===0},os=function(t,r){return Mo({current:t.scroll.current,max:t.scroll.max,change:r})},Jg=function(t,r){if(!os(t,r))return null;var n=t.scroll.max,i=t.scroll.current;return ls({current:i,max:n,change:r})},cs=function(t,r){var n=t.frame;return n?Mo({current:n.scroll.current,max:n.scroll.max,change:r}):!1},Xg=function(t,r){var n=t.frame;return!n||!cs(t,r)?null:ls({current:n.scroll.current,max:n.scroll.max,change:r})},Zg=function(a){var t=a.viewport,r=a.subject,n=a.center,i=a.dragStartTime,s=a.shouldUseTimeDampening,l=Eo({dragStartTime:i,container:t.frame,subject:r,center:n,shouldUseTimeDampening:s});return l&&os(t,l)?l:null},eh=function(a){var t=a.droppable,r=a.subject,n=a.center,i=a.dragStartTime,s=a.shouldUseTimeDampening,l=t.frame;if(!l)return null;var o=Eo({dragStartTime:i,container:l.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:s});return o&&cs(t,o)?o:null},yi=function(a){var t=a.state,r=a.dragStartTime,n=a.shouldUseTimeDampening,i=a.scrollWindow,s=a.scrollDroppable,l=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id],c=o.page.marginBox;if(t.isWindowScrollAllowed){var d=t.viewport,m=Zg({dragStartTime:r,viewport:d,subject:c,center:l,shouldUseTimeDampening:n});if(m){i(m);return}}var u=Hg({center:l,destination:Oe(t.impact),droppables:t.dimensions.droppables});if(u){var p=eh({dragStartTime:r,droppable:u,subject:c,center:l,shouldUseTimeDampening:n});p&&s(u.descriptor.id,p)}},ah=function(a){var t=a.scrollWindow,r=a.scrollDroppable,n=st(t),i=st(r),s=null,l=function(m){s||F();var u=s,p=u.shouldUseTimeDampening,x=u.dragStartTime;yi({state:m,scrollWindow:n,scrollDroppable:i,dragStartTime:x,shouldUseTimeDampening:p})},o=function(m){s&&F();var u=Date.now(),p=!1,x=function(){p=!0};yi({state:m,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x}),s={dragStartTime:u,shouldUseTimeDampening:p},p&&l(m)},c=function(){s&&(n.cancel(),i.cancel(),s=null)};return{start:o,stop:c,scroll:l}},th=function(a){var t=a.move,r=a.scrollDroppable,n=a.scrollWindow,i=function(d,m){var u=ye(d.current.client.selection,m);t({client:u})},s=function(d,m){if(!cs(d,m))return m;var u=Xg(d,m);if(!u)return r(d.descriptor.id,m),null;var p=Te(m,u);r(d.descriptor.id,p);var x=Te(m,p);return x},l=function(d,m,u){if(!d||!os(m,u))return u;var p=Jg(m,u);if(!p)return n(u),null;var x=Te(u,p);n(x);var g=Te(u,x);return g},o=function(d){var m=d.scrollJumpRequest;if(m){var u=Oe(d.impact);u||F();var p=s(d.dimensions.droppables[u],m);if(p){var x=d.viewport,g=l(d.isWindowScrollAllowed,x,p);g&&i(d,g)}}};return o},rh=function(a){var t=a.scrollDroppable,r=a.scrollWindow,n=a.move,i=ah({scrollWindow:r,scrollDroppable:t}),s=th({move:n,scrollWindow:r,scrollDroppable:t}),l=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){i.scroll(d);return}d.scrollJumpRequest&&s(d)}},o={scroll:l,start:i.start,stop:i.stop};return o},Ga="data-rbd",qa=function(){var a=Ga+"-drag-handle";return{base:a,draggableId:a+"-draggable-id",contextId:a+"-context-id"}}(),Sn=function(){var a=Ga+"-draggable";return{base:a,contextId:a+"-context-id",id:a+"-id"}}(),nh=function(){var a=Ga+"-droppable";return{base:a,contextId:a+"-context-id",id:a+"-id"}}(),ji={contextId:Ga+"-scroll-container-context-id"},sh=function(t){return function(r){return"["+r+'="'+t+'"]'}},Xa=function(t,r){return t.map(function(n){var i=n.styles[r];return i?n.selector+" { "+i+" }":""}).join(" ")},ih="pointer-events: none;",lh=function(a){var t=sh(a),r=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(qa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:ih,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+tt.outOfTheWay+`;
    `;return{selector:t(Sn.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),i={selector:t(nh.contextId),styles:{always:"overflow-anchor: none;"}},s={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},l=[n,r,i,s];return{always:Xa(l,"always"),resting:Xa(l,"resting"),dragging:Xa(l,"dragging"),dropAnimating:Xa(l,"dropAnimating"),userCancel:Xa(l,"userCancel")}},Pe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,Zr=function(){var t=document.querySelector("head");return t||F(),t},wi=function(t){var r=document.createElement("style");return t&&r.setAttribute("nonce",t),r.type="text/css",r};function oh(a,t){var r=te(function(){return lh(a)},[a]),n=h.useRef(null),i=h.useRef(null),s=V(ge(function(u){var p=i.current;p||F(),p.textContent=u}),[]),l=V(function(u){var p=n.current;p||F(),p.textContent=u},[]);Pe(function(){!n.current&&!i.current||F();var u=wi(t),p=wi(t);return n.current=u,i.current=p,u.setAttribute(Ga+"-always",a),p.setAttribute(Ga+"-dynamic",a),Zr().appendChild(u),Zr().appendChild(p),l(r.always),s(r.resting),function(){var x=function(f){var v=f.current;v||F(),Zr().removeChild(v),f.current=null};x(n),x(i)}},[t,l,s,r.always,r.resting,a]);var o=V(function(){return s(r.dragging)},[s,r.dragging]),c=V(function(u){if(u==="DROP"){s(r.dropAnimating);return}s(r.userCancel)},[s,r.dropAnimating,r.userCancel]),d=V(function(){i.current&&s(r.resting)},[s,r.resting]),m=te(function(){return{dragging:o,dropping:c,resting:d}},[o,c,d]);return m}var To=function(a){return a&&a.ownerDocument?a.ownerDocument.defaultView:window};function Ar(a){return a instanceof To(a).HTMLElement}function ch(a,t){var r="["+qa.contextId+'="'+a+'"]',n=Zl(document.querySelectorAll(r));if(!n.length)return null;var i=ua(n,function(s){return s.getAttribute(qa.draggableId)===t});return!i||!Ar(i)?null:i}function dh(a){var t=h.useRef({}),r=h.useRef(null),n=h.useRef(null),i=h.useRef(!1),s=V(function(p,x){var g={id:p,focus:x};return t.current[p]=g,function(){var v=t.current,b=v[p];b!==g&&delete v[p]}},[]),l=V(function(p){var x=ch(a,p);x&&x!==document.activeElement&&x.focus()},[a]),o=V(function(p,x){r.current===p&&(r.current=x)},[]),c=V(function(){n.current||i.current&&(n.current=requestAnimationFrame(function(){n.current=null;var p=r.current;p&&l(p)}))},[l]),d=V(function(p){r.current=null;var x=document.activeElement;x&&x.getAttribute(qa.draggableId)===p&&(r.current=p)},[]);Pe(function(){return i.current=!0,function(){i.current=!1;var p=n.current;p&&cancelAnimationFrame(p)}},[]);var m=te(function(){return{register:s,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[s,d,c,o]);return m}function uh(){var a={draggables:{},droppables:{}},t=[];function r(u){return t.push(u),function(){var x=t.indexOf(u);x!==-1&&t.splice(x,1)}}function n(u){t.length&&t.forEach(function(p){return p(u)})}function i(u){return a.draggables[u]||null}function s(u){var p=i(u);return p||F(),p}var l={register:function(p){a.draggables[p.descriptor.id]=p,n({type:"ADDITION",value:p})},update:function(p,x){var g=a.draggables[x.descriptor.id];g&&g.uniqueId===p.uniqueId&&(delete a.draggables[x.descriptor.id],a.draggables[p.descriptor.id]=p)},unregister:function(p){var x=p.descriptor.id,g=i(x);g&&p.uniqueId===g.uniqueId&&(delete a.draggables[x],n({type:"REMOVAL",value:p}))},getById:s,findById:i,exists:function(p){return!!i(p)},getAllByType:function(p){return ar(a.draggables).filter(function(x){return x.descriptor.type===p})}};function o(u){return a.droppables[u]||null}function c(u){var p=o(u);return p||F(),p}var d={register:function(p){a.droppables[p.descriptor.id]=p},unregister:function(p){var x=o(p.descriptor.id);x&&p.uniqueId===x.uniqueId&&delete a.droppables[p.descriptor.id]},getById:c,findById:o,exists:function(p){return!!o(p)},getAllByType:function(p){return ar(a.droppables).filter(function(x){return x.descriptor.type===p})}};function m(){a.draggables={},a.droppables={},t.length=0}return{draggable:l,droppable:d,subscribe:r,clean:m}}function mh(){var a=te(uh,[]);return h.useEffect(function(){return function(){requestAnimationFrame(a.clean)}},[a]),a}var ds=ae.createContext(null),rr=function(){var a=document.body;return a||F(),a},ph={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},xh=function(t){return"rbd-announcement-"+t};function gh(a){var t=te(function(){return xh(a)},[a]),r=h.useRef(null);h.useEffect(function(){var s=document.createElement("div");return r.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Q(s.style,ph),rr().appendChild(s),function(){setTimeout(function(){var c=rr();c.contains(s)&&c.removeChild(s),s===r.current&&(r.current=null)})}},[t]);var n=V(function(i){var s=r.current;if(s){s.textContent=i;return}},[]);return n}var hh=0,fh={separator:"::"};function us(a,t){return t===void 0&&(t=fh),te(function(){return""+a+t.separator+hh++},[t.separator,a])}function vh(a){var t=a.contextId,r=a.uniqueId;return"rbd-hidden-text-"+t+"-"+r}function bh(a){var t=a.contextId,r=a.text,n=us("hidden-text",{separator:"-"}),i=te(function(){return vh({contextId:t,uniqueId:n})},[n,t]);return h.useEffect(function(){var l=document.createElement("div");return l.id=i,l.textContent=r,l.style.display="none",rr().appendChild(l),function(){var c=rr();c.contains(l)&&c.removeChild(l)}},[i,r]),i}var Ir=ae.createContext(null);function Oo(a){var t=h.useRef(a);return h.useEffect(function(){t.current=a}),t}function yh(){var a=null;function t(){return!!a}function r(l){return l===a}function n(l){a&&F();var o={abandon:l};return a=o,o}function i(){a||F(),a=null}function s(){a&&(a.abandon(),i())}return{isClaimed:t,isActive:r,claim:n,release:i,tryAbandon:s}}var jh=9,wh=13,ms=27,Po=32,Nh=33,kh=34,Ch=35,Dh=36,Sh=37,Ah=38,Ih=39,Eh=40,Lt,Mh=(Lt={},Lt[wh]=!0,Lt[jh]=!0,Lt),Lo=function(a){Mh[a.keyCode]&&a.preventDefault()},Er=function(){var a="visibilitychange";if(typeof document>"u")return a;var t=[a,"ms"+a,"webkit"+a,"moz"+a,"o"+a],r=ua(t,function(n){return"on"+n in document});return r||a}(),Ro=0,Ni=5;function Th(a,t){return Math.abs(t.x-a.x)>=Ni||Math.abs(t.y-a.y)>=Ni}var ki={type:"IDLE"};function Oh(a){var t=a.cancel,r=a.completed,n=a.getPhase,i=a.setPhase;return[{eventName:"mousemove",fn:function(l){var o=l.button,c=l.clientX,d=l.clientY;if(o===Ro){var m={x:c,y:d},u=n();if(u.type==="DRAGGING"){l.preventDefault(),u.actions.move(m);return}u.type!=="PENDING"&&F();var p=u.point;if(Th(p,m)){l.preventDefault();var x=u.actions.fluidLift(m);i({type:"DRAGGING",actions:x})}}}},{eventName:"mouseup",fn:function(l){var o=n();if(o.type!=="DRAGGING"){t();return}l.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(l){n().type==="DRAGGING"&&l.preventDefault(),t()}},{eventName:"keydown",fn:function(l){var o=n();if(o.type==="PENDING"){t();return}if(l.keyCode===ms){l.preventDefault(),t();return}Lo(l)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(l){var o=n();if(o.type==="IDLE"&&F(),o.actions.shouldRespectForcePress()){t();return}l.preventDefault()}},{eventName:Er,fn:t}]}function Ph(a){var t=h.useRef(ki),r=h.useRef(na),n=te(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===Ro&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var p=a.findClosestDraggableId(u);if(p){var x=a.tryGetLock(p,l,{sourceEvent:u});if(x){u.preventDefault();var g={x:u.clientX,y:u.clientY};r.current(),d(x,g)}}}}}},[a]),i=te(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var p=a.findClosestDraggableId(u);if(p){var x=a.findOptionsForDraggable(p);x&&(x.shouldRespectForcePress||a.canGetLock(p)&&u.preventDefault())}}}}},[a]),s=V(function(){var u={passive:!1,capture:!0};r.current=Ge(window,[i,n],u)},[i,n]),l=V(function(){var m=t.current;m.type!=="IDLE"&&(t.current=ki,r.current(),s())},[s]),o=V(function(){var m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),c=V(function(){var u={capture:!0,passive:!1},p=Oh({cancel:o,completed:l,getPhase:function(){return t.current},setPhase:function(g){t.current=g}});r.current=Ge(window,p,u)},[o,l]),d=V(function(u,p){t.current.type!=="IDLE"&&F(),t.current={type:"PENDING",point:p,actions:u},c()},[c]);Pe(function(){return s(),function(){r.current()}},[s])}var Ma;function Lh(){}var Rh=(Ma={},Ma[kh]=!0,Ma[Nh]=!0,Ma[Dh]=!0,Ma[Ch]=!0,Ma);function Fh(a,t){function r(){t(),a.cancel()}function n(){t(),a.drop()}return[{eventName:"keydown",fn:function(s){if(s.keyCode===ms){s.preventDefault(),r();return}if(s.keyCode===Po){s.preventDefault(),n();return}if(s.keyCode===Eh){s.preventDefault(),a.moveDown();return}if(s.keyCode===Ah){s.preventDefault(),a.moveUp();return}if(s.keyCode===Ih){s.preventDefault(),a.moveRight();return}if(s.keyCode===Sh){s.preventDefault(),a.moveLeft();return}if(Rh[s.keyCode]){s.preventDefault();return}Lo(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Er,fn:r}]}function Bh(a){var t=h.useRef(Lh),r=te(function(){return{eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==Po)return;var l=a.findClosestDraggableId(s);if(!l)return;var o=a.tryGetLock(l,m,{sourceEvent:s});if(!o)return;s.preventDefault();var c=!0,d=o.snapLift();t.current();function m(){c||F(),c=!1,t.current(),n()}t.current=Ge(window,Fh(d,m),{capture:!0,passive:!1})}}},[a]),n=V(function(){var s={passive:!1,capture:!0};t.current=Ge(window,[r],s)},[r]);Pe(function(){return n(),function(){t.current()}},[n])}var en={type:"IDLE"},Gh=120,qh=.15;function $h(a){var t=a.cancel,r=a.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(i){i.preventDefault()}},{eventName:"keydown",fn:function(i){if(r().type!=="DRAGGING"){t();return}i.keyCode===ms&&i.preventDefault(),t()}},{eventName:Er,fn:t}]}function zh(a){var t=a.cancel,r=a.completed,n=a.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(s){var l=n();if(l.type!=="DRAGGING"){t();return}l.hasMoved=!0;var o=s.touches[0],c=o.clientX,d=o.clientY,m={x:c,y:d};s.preventDefault(),l.actions.move(m)}},{eventName:"touchend",fn:function(s){var l=n();if(l.type!=="DRAGGING"){t();return}s.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(s){if(n().type!=="DRAGGING"){t();return}s.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(s){var l=n();l.type==="IDLE"&&F();var o=s.touches[0];if(o){var c=o.force>=qh;if(c){var d=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){d&&t();return}if(d){if(l.hasMoved){s.preventDefault();return}t();return}s.preventDefault()}}}},{eventName:Er,fn:t}]}function Uh(a){var t=h.useRef(en),r=h.useRef(na),n=V(function(){return t.current},[]),i=V(function(x){t.current=x},[]),s=te(function(){return{eventName:"touchstart",fn:function(x){if(!x.defaultPrevented){var g=a.findClosestDraggableId(x);if(g){var f=a.tryGetLock(g,o,{sourceEvent:x});if(f){var v=x.touches[0],b=v.clientX,y=v.clientY,w={x:b,y};r.current(),u(f,w)}}}}}},[a]),l=V(function(){var x={capture:!0,passive:!1};r.current=Ge(window,[s],x)},[s]),o=V(function(){var p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),i(en),r.current(),l())},[l,i]),c=V(function(){var p=t.current;o(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[o]),d=V(function(){var x={capture:!0,passive:!1},g={cancel:c,completed:o,getPhase:n},f=Ge(window,zh(g),x),v=Ge(window,$h(g),x);r.current=function(){f(),v()}},[c,n,o]),m=V(function(){var x=n();x.type!=="PENDING"&&F();var g=x.actions.fluidLift(x.point);i({type:"DRAGGING",actions:g,hasMoved:!1})},[n,i]),u=V(function(x,g){n().type!=="IDLE"&&F();var f=setTimeout(m,Gh);i({type:"PENDING",point:g,actions:x,longPressTimerId:f}),d()},[d,n,i,m]);Pe(function(){return l(),function(){r.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),i(en))}},[n,l,i]),Pe(function(){var x=Ge(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return x},[])}var Hh={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Fo(a,t){if(t==null)return!1;var r=!!Hh[t.tagName.toLowerCase()];if(r)return!0;var n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===a?!1:Fo(a,t.parentElement)}function Vh(a,t){var r=t.target;return Ar(r)?Fo(a,r):!1}var Wh=function(a){return Ue(a.getBoundingClientRect()).center};function _h(a){return a instanceof To(a).Element}var Kh=function(){var a="matches";if(typeof document>"u")return a;var t=[a,"msMatchesSelector","webkitMatchesSelector"],r=ua(t,function(n){return n in Element.prototype});return r||a}();function Bo(a,t){return a==null?null:a[Kh](t)?a:Bo(a.parentElement,t)}function Yh(a,t){return a.closest?a.closest(t):Bo(a,t)}function Qh(a){return"["+qa.contextId+'="'+a+'"]'}function Jh(a,t){var r=t.target;if(!_h(r))return null;var n=Qh(a),i=Yh(r,n);return!i||!Ar(i)?null:i}function Xh(a,t){var r=Jh(a,t);return r?r.getAttribute(qa.draggableId):null}function Zh(a,t){var r="["+Sn.contextId+'="'+a+'"]',n=Zl(document.querySelectorAll(r)),i=ua(n,function(s){return s.getAttribute(Sn.id)===t});return!i||!Ar(i)?null:i}function ef(a){a.preventDefault()}function Rt(a){var t=a.expected,r=a.phase,n=a.isLockActive;return a.shouldWarn,!(!n()||t!==r)}function Go(a){var t=a.lockAPI,r=a.store,n=a.registry,i=a.draggableId;if(t.isClaimed())return!1;var s=n.draggable.findById(i);return!(!s||!s.options.isEnabled||!Ao(r.getState(),i))}function af(a){var t=a.lockAPI,r=a.contextId,n=a.store,i=a.registry,s=a.draggableId,l=a.forceSensorStop,o=a.sourceEvent,c=Go({lockAPI:t,store:n,registry:i,draggableId:s});if(!c)return null;var d=i.draggable.getById(s),m=Zh(r,d.descriptor.id);if(!m||o&&!d.options.canDragInteractiveElements&&Vh(m,o))return null;var u=t.claim(l||na),p="PRE_DRAG";function x(){return d.options.shouldRespectForcePress}function g(){return t.isActive(u)}function f(N,I){Rt({expected:N,phase:p,isLockActive:g,shouldWarn:!0})&&n.dispatch(I())}var v=f.bind(null,"DRAGGING");function b(N){function I(){t.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(I(),p!=="PRE_DRAG"&&F()),n.dispatch(Kx(N.liftActionArgs)),p="DRAGGING";function T(k,M){if(M===void 0&&(M={shouldBlockNextClick:!1}),N.cleanup(),M.shouldBlockNextClick){var A=Ge(window,[{eventName:"click",fn:ef,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}I(),n.dispatch(jo({reason:k}))}return Q({isActive:function(){return Rt({expected:"DRAGGING",phase:p,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:x,drop:function(M){return T("DROP",M)},cancel:function(M){return T("CANCEL",M)}},N.actions)}function y(N){var I=st(function(k){v(function(){return yo({client:k})})}),T=b({liftActionArgs:{id:s,clientSelection:N,movementMode:"FLUID"},cleanup:function(){return I.cancel()},actions:{move:I}});return Q({},T,{move:I})}function w(){var N={moveUp:function(){return v(rg)},moveRight:function(){return v(sg)},moveDown:function(){return v(ng)},moveLeft:function(){return v(ig)}};return b({liftActionArgs:{id:s,clientSelection:Wh(m),movementMode:"SNAP"},cleanup:na,actions:N})}function j(){var N=Rt({expected:"PRE_DRAG",phase:p,isLockActive:g,shouldWarn:!0});N&&t.release()}var D={isActive:function(){return Rt({expected:"PRE_DRAG",phase:p,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:x,fluidLift:y,snapLift:w,abort:j};return D}var tf=[Ph,Bh,Uh];function rf(a){var t=a.contextId,r=a.store,n=a.registry,i=a.customSensors,s=a.enableDefaultSensors,l=[].concat(s?tf:[],i||[]),o=h.useState(function(){return yh()})[0],c=V(function(y,w){y.isDragging&&!w.isDragging&&o.tryAbandon()},[o]);Pe(function(){var y=r.getState(),w=r.subscribe(function(){var j=r.getState();c(y,j),y=j});return w},[o,r,c]),Pe(function(){return o.tryAbandon},[o.tryAbandon]);for(var d=V(function(b){return Go({lockAPI:o,registry:n,store:r,draggableId:b})},[o,n,r]),m=V(function(b,y,w){return af({lockAPI:o,registry:n,contextId:t,store:r,draggableId:b,forceSensorStop:y,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[t,o,n,r]),u=V(function(b){return Xh(t,b)},[t]),p=V(function(b){var y=n.draggable.findById(b);return y?y.options:null},[n.draggable]),x=V(function(){o.isClaimed()&&(o.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(ts()))},[o,r]),g=V(o.isClaimed,[o]),f=te(function(){return{canGetLock:d,tryGetLock:m,findClosestDraggableId:u,findOptionsForDraggable:p,tryReleaseLock:x,isLockClaimed:g}},[d,m,u,p,x,g]),v=0;v<l.length;v++)l[v](f)}var nf=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Za(a){return a.current||F(),a.current}function sf(a){var t=a.contextId,r=a.setCallbacks,n=a.sensors,i=a.nonce,s=a.dragHandleUsageInstructions,l=h.useRef(null),o=Oo(a),c=V(function(){return nf(o.current)},[o]),d=gh(t),m=bh({contextId:t,text:s}),u=oh(t,i),p=V(function(k){Za(l).dispatch(k)},[]),x=te(function(){return _s({publishWhileDragging:Qx,updateDroppableScroll:Xx,updateDroppableIsEnabled:Zx,updateDroppableIsCombineEnabled:eg,collectionStarting:Jx},p)},[p]),g=mh(),f=te(function(){return qg(g,x)},[g,x]),v=te(function(){return rh(Q({scrollWindow:$g,scrollDroppable:f.scrollDroppable},_s({move:yo},p)))},[f.scrollDroppable,p]),b=dh(t),y=te(function(){return Rg({announce:d,autoScroller:v,dimensionMarshal:f,focusMarshal:b,getResponders:c,styleMarshal:u})},[d,v,f,b,c,u]);l.current=y;var w=V(function(){var k=Za(l),M=k.getState();M.phase!=="IDLE"&&k.dispatch(ts())},[]),j=V(function(){var k=Za(l).getState();return k.isDragging||k.phase==="DROP_ANIMATING"},[]),D=te(function(){return{isDragging:j,tryAbort:w}},[j,w]);r(D);var N=V(function(k){return Ao(Za(l).getState(),k)},[]),I=V(function(){return xa(Za(l).getState())},[]),T=te(function(){return{marshal:f,focus:b,contextId:t,canLift:N,isMovementAllowed:I,dragHandleUsageInstructionsId:m,registry:g}},[t,f,m,b,N,I,g]);return rf({contextId:t,store:y,registry:g,customSensors:n,enableDefaultSensors:a.enableDefaultSensors!==!1}),h.useEffect(function(){return w},[w]),ae.createElement(Ir.Provider,{value:T},ae.createElement(Sm,{context:ds,store:y},a.children))}var lf=0;function of(){return te(function(){return""+lf++},[])}function cf(a){var t=of(),r=a.dragHandleUsageInstructions||qt.dragHandleUsageInstructions;return ae.createElement(Bp,null,function(n){return ae.createElement(sf,{nonce:a.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:a.enableDefaultSensors,sensors:a.sensors,onBeforeCapture:a.onBeforeCapture,onBeforeDragStart:a.onBeforeDragStart,onDragStart:a.onDragStart,onDragUpdate:a.onDragUpdate,onDragEnd:a.onDragEnd},a.children)})}var qo=function(t){return function(r){return t===r}},df=qo("scroll"),uf=qo("auto"),Ci=function(t,r){return r(t.overflowX)||r(t.overflowY)},mf=function(t){var r=window.getComputedStyle(t),n={overflowX:r.overflowX,overflowY:r.overflowY};return Ci(n,df)||Ci(n,uf)},pf=function(){return!1},xf=function a(t){return t==null?null:t===document.body?pf()?t:null:t===document.documentElement?null:mf(t)?t:a(t.parentElement)},An=function(a){return{x:a.scrollLeft,y:a.scrollTop}},gf=function a(t){if(!t)return!1;var r=window.getComputedStyle(t);return r.position==="fixed"?!0:a(t.parentElement)},hf=function(a){var t=xf(a),r=gf(a);return{closestScrollable:t,isFixedOnPage:r}},ff=function(a){var t=a.descriptor,r=a.isEnabled,n=a.isCombineEnabled,i=a.isFixedOnPage,s=a.direction,l=a.client,o=a.page,c=a.closest,d=function(){if(!c)return null;var x=c.scrollSize,g=c.client,f=Co({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:x,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:f,diff:{value:he,displacement:he}}}}(),m=s==="vertical"?Jn:no,u=Ba({page:o,withPlaceholder:null,axis:m,frame:d}),p={descriptor:t,isCombineEnabled:n,isFixedOnPage:i,axis:m,isEnabled:r,client:l,page:o,frame:d,subject:u};return p},vf=function(t,r){var n=Kl(t);if(!r||t!==r)return n;var i=n.paddingBox.top-r.scrollTop,s=n.paddingBox.left-r.scrollLeft,l=i+r.scrollHeight,o=s+r.scrollWidth,c={top:i,right:o,bottom:l,left:s},d=Wn(c,n.border),m=_n({borderBox:d,margin:n.margin,border:n.border,padding:n.padding});return m},bf=function(a){var t=a.ref,r=a.descriptor,n=a.env,i=a.windowScroll,s=a.direction,l=a.isDropDisabled,o=a.isCombineEnabled,c=a.shouldClipSubject,d=n.closestScrollable,m=vf(t,d),u=Xt(m,i),p=function(){if(!d)return null;var g=Kl(d),f={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:g,page:Xt(g,i),scroll:An(d),scrollSize:f,shouldClipSubject:c}}(),x=ff({descriptor:r,isEnabled:!l,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:m,page:u,closest:p});return x},yf={passive:!1},jf={passive:!0},Di=function(a){return a.shouldPublishImmediately?yf:jf};function nr(a){var t=h.useContext(a);return t||F(),t}var Ft=function(t){return t&&t.env.closestScrollable||null};function wf(a){var t=h.useRef(null),r=nr(Ir),n=us("droppable"),i=r.registry,s=r.marshal,l=Oo(a),o=te(function(){return{id:a.droppableId,type:a.type,mode:a.mode}},[a.droppableId,a.mode,a.type]),c=h.useRef(o),d=te(function(){return ge(function(j,D){t.current||F();var N={x:j,y:D};s.updateDroppableScroll(o.id,N)})},[o.id,s]),m=V(function(){var j=t.current;return!j||!j.env.closestScrollable?he:An(j.env.closestScrollable)},[]),u=V(function(){var j=m();d(j.x,j.y)},[m,d]),p=te(function(){return st(u)},[u]),x=V(function(){var j=t.current,D=Ft(j);j&&D||F();var N=j.scrollOptions;if(N.shouldPublishImmediately){u();return}p()},[p,u]),g=V(function(j,D){t.current&&F();var N=l.current,I=N.getDroppableRef();I||F();var T=hf(I),k={ref:I,descriptor:o,env:T,scrollOptions:D};t.current=k;var M=bf({ref:I,descriptor:o,env:T,windowScroll:j,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),A=T.closestScrollable;return A&&(A.setAttribute(ji.contextId,r.contextId),A.addEventListener("scroll",x,Di(k.scrollOptions))),M},[r.contextId,o,x,l]),f=V(function(){var j=t.current,D=Ft(j);return j&&D||F(),An(D)},[]),v=V(function(){var j=t.current;j||F();var D=Ft(j);t.current=null,D&&(p.cancel(),D.removeAttribute(ji.contextId),D.removeEventListener("scroll",x,Di(j.scrollOptions)))},[x,p]),b=V(function(j){var D=t.current;D||F();var N=Ft(D);N||F(),N.scrollTop+=j.y,N.scrollLeft+=j.x},[]),y=te(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:f,dragStopped:v,scroll:b}},[v,g,f,b]),w=te(function(){return{uniqueId:n,descriptor:o,callbacks:y}},[y,o,n]);Pe(function(){return c.current=w.descriptor,i.droppable.register(w),function(){t.current&&v(),i.droppable.unregister(w)}},[y,o,v,w,s,i.droppable]),Pe(function(){t.current&&s.updateDroppableIsEnabled(c.current.id,!a.isDropDisabled)},[a.isDropDisabled,s]),Pe(function(){t.current&&s.updateDroppableIsCombineEnabled(c.current.id,a.isCombineEnabled)},[a.isCombineEnabled,s])}function an(){}var Si={width:0,height:0,margin:Hp},Nf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,i=t.animate;return r||i==="close"?Si:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},kf=function(t){var r=t.isAnimatingOpenOnMount,n=t.placeholder,i=t.animate,s=Nf({isAnimatingOpenOnMount:r,placeholder:n,animate:i});return{display:n.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:i!=="none"?tt.placeholder:null}};function Cf(a){var t=h.useRef(null),r=V(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),n=a.animate,i=a.onTransitionEnd,s=a.onClose,l=a.contextId,o=h.useState(a.animate==="open"),c=o[0],d=o[1];h.useEffect(function(){return c?n!=="open"?(r(),d(!1),an):t.current?an:(t.current=setTimeout(function(){t.current=null,d(!1)}),r):an},[n,c,r]);var m=V(function(p){p.propertyName==="height"&&(i(),n==="close"&&s())},[n,s,i]),u=kf({isAnimatingOpenOnMount:c,animate:a.animate,placeholder:a.placeholder});return ae.createElement(a.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":l,onTransitionEnd:m,ref:a.innerRef})}var Df=ae.memo(Cf),ps=ae.createContext(null),Sf=function(a){Sl(t,a);function t(){for(var n,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=a.call.apply(a,[this].concat(s))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}t.getDerivedStateFromProps=function(i,s){return i.shouldAnimate?i.on?{isVisible:!0,data:i.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!i.on,data:i.on,animate:"none"}};var r=t.prototype;return r.render=function(){if(!this.state.isVisible)return null;var i={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(i)},t}(ae.PureComponent),Ai={dragging:5e3,dropAnimating:4500},Af=function(t,r){return r?tt.drop(r.duration):t?tt.snap:tt.fluid},If=function(t,r){return t?r?ct.opacity.drop:ct.opacity.combining:null},Ef=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function Mf(a){var t=a.dimension,r=t.client,n=a.offset,i=a.combineWith,s=a.dropping,l=!!i,o=Ef(a),c=!!s,d=c?Cn.drop(n,l):Cn.moveTo(n),m={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Af(o,s),transform:d,opacity:If(l,c),zIndex:c?Ai.dropAnimating:Ai.dragging,pointerEvents:"none"};return m}function Tf(a){return{transform:Cn.moveTo(a.offset),transition:a.shouldAnimateDisplacement?null:"none"}}function Of(a){return a.type==="DRAGGING"?Mf(a):Tf(a)}function Pf(a,t,r){r===void 0&&(r=he);var n=window.getComputedStyle(t),i=t.getBoundingClientRect(),s=_l(i,n),l=Xt(s,r),o={client:s,tagName:t.tagName.toLowerCase(),display:n.display},c={x:s.marginBox.width,y:s.marginBox.height},d={descriptor:a,placeholder:o,displaceBy:c,client:s,page:l};return d}function Lf(a){var t=us("draggable"),r=a.descriptor,n=a.registry,i=a.getDraggableRef,s=a.canDragInteractiveElements,l=a.shouldRespectForcePress,o=a.isEnabled,c=te(function(){return{canDragInteractiveElements:s,shouldRespectForcePress:l,isEnabled:o}},[s,o,l]),d=V(function(x){var g=i();return g||F(),Pf(r,g,x)},[r,i]),m=te(function(){return{uniqueId:t,descriptor:r,options:c,getDimension:d}},[r,d,c,t]),u=h.useRef(m),p=h.useRef(!0);Pe(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Pe(function(){if(p.current){p.current=!1;return}var x=u.current;u.current=m,n.draggable.update(m,x)},[m,n.draggable])}function Rf(a){a.preventDefault()}function Ff(a){var t=h.useRef(null),r=V(function(k){t.current=k},[]),n=V(function(){return t.current},[]),i=nr(Ir),s=i.contextId,l=i.dragHandleUsageInstructionsId,o=i.registry,c=nr(ps),d=c.type,m=c.droppableId,u=te(function(){return{id:a.draggableId,index:a.index,type:d,droppableId:m}},[a.draggableId,a.index,d,m]),p=a.children,x=a.draggableId,g=a.isEnabled,f=a.shouldRespectForcePress,v=a.canDragInteractiveElements,b=a.isClone,y=a.mapped,w=a.dropAnimationFinished;if(!b){var j=te(function(){return{descriptor:u,registry:o,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:f,isEnabled:g}},[u,o,n,v,f,g]);Lf(j)}var D=te(function(){return g?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":x,"data-rbd-drag-handle-context-id":s,draggable:!1,onDragStart:Rf}:null},[s,l,x,g]),N=V(function(k){y.type==="DRAGGING"&&y.dropping&&k.propertyName==="transform"&&w()},[w,y]),I=te(function(){var k=Of(y),M=y.type==="DRAGGING"&&y.dropping?N:null,A={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":s,"data-rbd-draggable-id":x,style:k,onTransitionEnd:M},dragHandleProps:D};return A},[s,D,x,y,N,r]),T=te(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return p(I,y.snapshot,T)}var $o=function(a,t){return a===t},zo=function(a){var t=a.combine,r=a.destination;return r?r.droppableId:t?t.droppableId:null},Bf=function(t){return t.combine?t.combine.draggableId:null},Gf=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function qf(){var a=ge(function(i,s){return{x:i,y:s}}),t=ge(function(i,s,l,o,c){return{isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:i,draggingOver:l,combineWith:o,combineTargetFor:null}}),r=ge(function(i,s,l,o,c,d,m){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:s,offset:i,dimension:l,forceShouldAnimate:m,snapshot:t(s,o,c,d,null)}}}),n=function(s,l){if(s.isDragging){if(s.critical.draggable.id!==l.draggableId)return null;var o=s.current.client.offset,c=s.dimensions.draggables[l.draggableId],d=Oe(s.impact),m=Gf(s.impact),u=s.forceShouldAnimate;return r(a(o.x,o.y),s.movementMode,c,l.isClone,d,m,u)}if(s.phase==="DROP_ANIMATING"){var p=s.completed;if(p.result.draggableId!==l.draggableId)return null;var x=l.isClone,g=s.dimensions.draggables[l.draggableId],f=p.result,v=f.mode,b=zo(f),y=Bf(f),w=s.dropDuration,j={duration:w,curve:ns.drop,moveTo:s.newHomeClientOffset,opacity:y?ct.opacity.drop:null,scale:y?ct.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:g,dropping:j,draggingOver:b,combineWith:y,mode:v,forceShouldAnimate:null,snapshot:t(v,x,b,y,j)}}}return null};return n}function Uo(a){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:a,combineWith:null}}var $f={mapped:{type:"SECONDARY",offset:he,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Uo(null)}};function zf(){var a=ge(function(l,o){return{x:l,y:o}}),t=ge(Uo),r=ge(function(l,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:t(o)}}}),n=function(o){return o?r(he,o,!0):null},i=function(o,c,d,m){var u=d.displaced.visible[o],p=!!(m.inVirtualList&&m.effected[o]),x=Cr(d),g=x&&x.draggableId===o?c:null;if(!u){if(!p)return n(g);if(d.displaced.invisible[o])return null;var f=Va(m.displacedBy.point),v=a(f.x,f.y);return r(v,g,!0)}if(p)return n(g);var b=d.displacedBy.point,y=a(b.x,b.y);return r(y,g,u.shouldAnimate)},s=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:i(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var d=o.completed;return d.result.draggableId===c.draggableId?null:i(c.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return s}var Uf=function(){var t=qf(),r=zf(),n=function(s,l){return t(s,l)||r(s,l)||$f};return n},Hf={dropAnimationFinished:wo},Vf=Vl(Uf,Hf,null,{context:ds,pure:!0,areStatePropsEqual:$o})(Ff);function Ho(a){var t=nr(ps),r=t.isUsingCloneFor;return r===a.draggableId&&!a.isClone?null:ae.createElement(Vf,a)}function Wf(a){var t=typeof a.isDragDisabled=="boolean"?!a.isDragDisabled:!0,r=!!a.disableInteractiveElementBlocking,n=!!a.shouldRespectForcePress;return ae.createElement(Ho,Q({},a,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function _f(a){var t=h.useContext(Ir);t||F();var r=t.contextId,n=t.isMovementAllowed,i=h.useRef(null),s=h.useRef(null),l=a.children,o=a.droppableId,c=a.type,d=a.mode,m=a.direction,u=a.ignoreContainerClipping,p=a.isDropDisabled,x=a.isCombineEnabled,g=a.snapshot,f=a.useClone,v=a.updateViewportMaxScroll,b=a.getContainerForClone,y=V(function(){return i.current},[]),w=V(function(A){i.current=A},[]);V(function(){return s.current},[]);var j=V(function(A){s.current=A},[]),D=V(function(){n()&&v({maxScroll:So()})},[n,v]);wf({droppableId:o,type:c,mode:d,direction:m,isDropDisabled:p,isCombineEnabled:x,ignoreContainerClipping:u,getDroppableRef:y});var N=ae.createElement(Sf,{on:a.placeholder,shouldAnimate:a.shouldAnimatePlaceholder},function(A){var W=A.onClose,z=A.data,R=A.animate;return ae.createElement(Df,{placeholder:z,onClose:W,innerRef:j,animate:R,contextId:r,onTransitionEnd:D})}),I=te(function(){return{innerRef:w,placeholder:N,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":r}}},[r,o,N,w]),T=f?f.dragging.draggableId:null,k=te(function(){return{droppableId:o,type:c,isUsingCloneFor:T}},[o,T,c]);function M(){if(!f)return null;var A=f.dragging,W=f.render,z=ae.createElement(Ho,{draggableId:A.draggableId,index:A.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(R,B){return W(R,B,A)});return Tc.createPortal(z,b())}return ae.createElement(ps.Provider,{value:k},l(I,g),M())}var tn=function(t,r){return t===r.droppable.type},Ii=function(t,r){return r.draggables[t.draggable.id]},Kf=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Q({},t,{shouldAnimatePlaceholder:!1}),n=ge(function(l){return{draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}}),i=ge(function(l,o,c,d,m,u){var p=m.descriptor.id,x=m.descriptor.droppableId===l;if(x){var g=u?{render:u,dragging:n(m.descriptor)}:null,f={isDraggingOver:c,draggingOverWith:c?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:g}}if(!o)return r;if(!d)return t;var v={isDraggingOver:c,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:m.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),s=function(o,c){var d=c.droppableId,m=c.type,u=!c.isDropDisabled,p=c.renderClone;if(o.isDragging){var x=o.critical;if(!tn(m,x))return r;var g=Ii(x,o.dimensions),f=Oe(o.impact)===d;return i(d,u,f,f,g,p)}if(o.phase==="DROP_ANIMATING"){var v=o.completed;if(!tn(m,v.critical))return r;var b=Ii(v.critical,o.dimensions);return i(d,u,zo(v.result)===d,Oe(v.impact)===d,b,p)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var y=o.completed;if(!tn(m,y.critical))return r;var w=Oe(y.impact)===d,j=!!(y.impact.at&&y.impact.at.type==="COMBINE"),D=y.critical.droppable.id===d;return w?j?t:r:D?t:r}return r};return s},Yf={updateViewportMaxScroll:tg};function Qf(){return document.body||F(),document.body}var Jf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Qf},Vo=Vl(Kf,Yf,null,{context:ds,pure:!0,areStatePropsEqual:$o})(_f);Vo.defaultProps=Jf;function Xf(){const{t:a}=P(),{register:t,watch:r,control:n,setValue:i}=aa(),{fields:s,append:l,remove:o,move:c}=mc({control:n,name:"taxes.rates"}),{categories:d}=mt(),m=r("taxes.enabled"),u=r("tips.enabled"),p=({index:f})=>{const v=r(`taxes.rates.${f}.appliesTo`);return e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("taxAndTips:apply-to")}),e.jsxs("select",{value:v,onChange:b=>i(`taxes.rates.${f}.appliesTo`,b.target.value,{shouldDirty:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"all",children:a("taxAndTips:apply-to-all-categories")}),d==null?void 0:d.map(b=>e.jsx("option",{value:b.id,children:b.name},b.id))]})]})},x=f=>{f.preventDefault(),f.stopPropagation(),l({id:crypto.randomUUID(),name:"",rate:0,enabled:!0,appliesTo:"all",order:s.length})},g=f=>{if(!f.destination)return;const v=f.source.index,b=f.destination.index,y=[...s],[w]=y.splice(v,1);y.splice(b,0,w),y.forEach((j,D)=>{i(`taxes.rates.${D}.order`,D)}),c(v,b)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(il,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Taxes"})]}),m&&e.jsxs(C,{onClick:x,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("taxAndTips:add-tax")]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...t("taxes.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:a("taxAndTips:enable-taxes")})]}),m&&e.jsx(e.Fragment,{children:e.jsx(cf,{onDragEnd:g,children:e.jsx(Vo,{droppableId:"tax-rates",children:f=>e.jsxs("div",{...f.droppableProps,ref:f.innerRef,className:"space-y-4",children:[s.map((v,b)=>e.jsx(Wf,{draggableId:v.id,index:b,children:(y,w)=>e.jsx("div",{ref:y.innerRef,...y.draggableProps,className:`
                                bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-4
                                ${w.isDragging?"shadow-lg ring-2 ring-blue-500":""}
                              `,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...y.dragHandleProps,className:"cursor-move hover:text-blue-500 transition-colors",children:e.jsx(ed,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("taxAndTips:tax-name")}),e.jsx("input",{type:"text",...t(`taxes.rates.${b}.name`),placeholder:"Ex: TVA",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("taxAndTips:tax-rate")}),e.jsx("input",{type:"number",step:"0.001",min:"0",max:"100",...t(`taxes.rates.${b}.rate`),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsx(p,{index:b}),e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...t(`taxes.rates.${b}.enabled`),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:a("taxAndTips:enable-tax")})]}),e.jsx(C,{variant:"ghost",onClick:()=>o(b),className:"text-red-500 hover:text-red-600",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})]})})},v.id)),f.placeholder]})})})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("taxAndTips:tips")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...t("tips.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:a("taxAndTips:enable-tips")})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("taxAndTips:default-tips")}),e.jsx(Dl,{type:"number",value:r("tips.defaultPercentages")||[],onChange:f=>i("tips.defaultPercentages",f,{shouldDirty:!0})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a("taxAndTips:default-tips-description")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:a("taxAndTips:tips-label")}),e.jsx("input",{type:"text",...t("tips.label"),placeholder:a("taxAndTips:tips-placeholder"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]})]})]})}function Zf(a){const{zone:t,onSave:r,onCancel:n,currency:i}=a,{t:s}=P(),{register:l,handleSubmit:o,formState:{errors:c}}=Ze({defaultValues:t||{name:"",description:"",price:0,active:!0}}),d=m=>{r(m)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s(t?"settingDelivery:update-zone":"settingDelivery:add-new-zone")}),e.jsx("button",{onClick:n,children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s("settingDelivery:zone-name")}),e.jsx("input",{type:"text",...l("name",{required:s("common:name-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:s("settingDelivery:zone-name-placeholder")}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s("common:description")}),e.jsx("textarea",{...l("description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:s("settingDelivery:zone-description-placeholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s("settingDelivery:delivery-price")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:i==="XOF"?"1":"0.01",...l("price",{required:s("common:price-required"),min:{value:0,message:s("common:price-min")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:i})]}),c.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.price.message})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:n,children:s("common:cancel")}),e.jsx(C,{type:"button",onClick:o(d),children:s(t?"common:update":"common:add")})]})]})]})})}function e0({zones:a,isLoading:t,currency:r,onEdit:n,onDelete:i,itemsPerPage:s=5}){const[l,o]=h.useState(1),c=h.useMemo(()=>{const u=(l-1)*s,p=u+s;return a.slice(u,p)},[a,l,s]),d=Math.ceil(a.length/s),m=u=>{o(u)};return t?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((u,p)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},p))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(re,{mode:"popLayout",children:[c.map(u=>e.jsx(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(cn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg",children:u.name}),u.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-semibold text-lg",children:G(u.price,r)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"button",variant:"ghost",onClick:()=>n(u),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:e.jsx(Ca,{className:"w-4 h-4"})}),a.length>1&&e.jsx(C,{type:"button",variant:"ghost",onClick:()=>i(u),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})]})},u.id)),a.length===0&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(cn,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune zone de livraison"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Commencez par ajouter une zone de livraison"})]})]}),d>1&&e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",l," sur ",d]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"button",variant:"secondary",size:"sm",onClick:()=>m(l-1),disabled:l===1,className:"px-2",children:e.jsx($a,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex gap-1",children:[...Array(d)].map((u,p)=>{const x=p+1,g=x===l;return e.jsx(C,{type:"button",variant:g?"primary":"secondary",size:"sm",onClick:()=>m(x),className:`w-8 ${g?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 dark:text-gray-300"}`,children:x},x)})}),e.jsx(C,{type:"button",variant:"secondary",size:"sm",onClick:()=>m(l+1),disabled:l===d,className:"px-2",children:e.jsx(wa,{className:"w-4 h-4"})})]})]})]})}function a0(){var y,w;const{t:a}=P(),{watch:t,setValue:r,register:n,formState:{errors:i},trigger:s}=aa(),[l,o]=ae.useState(!1),[c,d]=ae.useState(null),[m,u]=ae.useState({isOpen:!1,zone:null}),p=t("delivery.enabled"),x=t("delivery.zones")||[],g=t("currency");ae.useEffect(()=>{n("delivery.zones",{validate:j=>p&&(!j||j.length===0)?a("settingDelivery:errors-no-zones"):!0})},[n,p]);const f=async j=>{r("delivery.enabled",j.target.checked),await s("delivery.zones")},v=j=>{const D=c?x.map(N=>N.id===c.id?{...N,...j}:N):[...x,{...j,id:crypto.randomUUID()}];r("delivery.zones",D,{shouldDirty:!0,shouldValidate:!0}),o(!1),d(null)},b=()=>{if(!m.zone)return;const j=x.filter(D=>{var N;return D.id!==((N=m.zone)==null?void 0:N.id)});r("delivery.zones",j,{shouldDirty:!0,shouldValidate:!0}),u({isOpen:!1,zone:null})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:a("common:delivery")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...n("delivery.enabled",{onChange:f}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:a("settingDelivery:enable-delivery")})]})]}),p&&e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:a("settingDelivery:delivery-zones")}),e.jsxs(C,{type:"button",onClick:()=>o(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("settingDelivery:add-zone")]})]}),((y=i.delivery)==null?void 0:y.zones)&&e.jsxs("div",{className:"flex items-center gap-2 p-4 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-lg",children:[e.jsx(pt,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:i.delivery.zones.message})]}),e.jsx(e0,{zones:x,isLoading:!1,currency:g,onEdit:j=>{d(j),o(!0)},onDelete:j=>{p&&x.length===1||u({isOpen:!0,zone:j})}})]}),l&&e.jsx(Zf,{zone:c,onSave:v,onCancel:()=>{o(!1),d(null)},currency:g}),e.jsx(Fa,{isOpen:m.isOpen,title:a("settingDelivery:delete-zone"),message:p&&x.length===1?a("settingDelivery:delete-last-zone-warning"):a("settingDelivery:delete-zone-warning",{deleteConfirmation:(w=m.zone)==null?void 0:w.name}),confirmLabel:a("common:delete"),onConfirm:b,onCancel:()=>u({isOpen:!1,zone:null})})]})}function t0(){const{t:a}=P(),{settings:t,updateSettings:r,isLoading:n}=ee(),[i,s]=ae.useState("general"),l=Ze({defaultValues:t||{}}),{handleSubmit:o,formState:{isSubmitting:c,isDirty:d},reset:m}=l,u=[{id:"general",label:a("setting:general")},{id:"appearance",label:a("setting:appearance")},{id:"business",label:a("setting:business")},{id:"tax",label:a("setting:tax")},{id:"delivery",label:a("setting:delivery")},{id:"seo",label:a("setting:seo")},{id:"legal",label:a("setting:legal")},{id:"integrations",label:a("setting:integrations")},{id:"data",label:a("setting:data")}];ae.useEffect(()=>{t&&m(t)},[t,m]);const p=async g=>{try{await r(g),L.success(a("setting:settings-saved")),m(g)}catch(f){console.error("Error saving settings:",f),L.error(a("setting:settings-error"))}},x=()=>{switch(i){case"general":return e.jsx(mm,{});case"appearance":return e.jsx(im,{});case"business":return e.jsx(cm,{});case"seo":return e.jsx(vm,{});case"tax":return e.jsx(Xf,{});case"delivery":return e.jsx(a0,{});case"legal":return e.jsx(ym,{});case"integrations":return e.jsx(gm,{});case"data":return e.jsx(bm,{});default:return null}};return n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx(Hi,{...l,children:e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto space-y-8 px-4 py-8",children:[e.jsx(gt,{tabs:u,activeTab:i,onChange:s}),e.jsxs("form",{onSubmit:o(p),className:"space-y-8",children:[e.jsx("div",{className:"mt-8",children:x()}),i!=="data"&&e.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-gray-700",children:e.jsx("button",{type:"submit",disabled:!d||c,className:`
                  px-6 py-2 rounded-lg font-medium text-white
                  transition-all duration-200
                  ${d&&!c?"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl":"bg-gray-400 cursor-not-allowed"}
                `,children:a(c?"common:saving":"setting:save-settings")})})]})]})})}function r0(a){const{t}=P("common"),{items:r,onAddToCart:n,searchTerm:i,onSearchChange:s,onToggleCart:l}=a,{settings:o}=ee(),[c,d]=h.useState(null);return e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",placeholder:t("search-items"),value:i,onChange:m=>s(m.target.value),className:"w-full pl-4 pr-4 py-2 rounded-lg border dark:border-gray-700"})}),e.jsx(C,{variant:"secondary",className:"lg:hidden",onClick:l,children:e.jsx(ea,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.jsx(re,{mode:"popLayout",children:r.map(m=>e.jsxs(O.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:()=>d(m),className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx("div",{className:"aspect-video mb-3 rounded-lg overflow-hidden",children:e.jsx("img",{src:m.image,alt:m.name,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"font-medium mb-1",children:m.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 line-clamp-2",children:m.description}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:G(m.price,o==null?void 0:o.currency)})})]},m.id))})})}),c&&e.jsx(pc,{item:c,onClose:()=>d(null),onAddToCart:n})]})}function n0(){const{settings:a}=ee(),{t}=P("common"),{cart:r,updateQuantity:n,removeFromCart:i}=lr();return r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ea,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:t("cart-empty")})]}):e.jsx(re,{mode:"popLayout",children:r.map(s=>{var l;return e.jsxs(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex items-start gap-4 py-4 border-b dark:border-gray-700 last:border-0",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.name}),((l=s==null?void 0:s.selectedVariants)==null?void 0:l.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.selectedVariants.map((o,c)=>e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                             bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,children:o.split(": ")[1]},c))}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:G(s.price,a==null?void 0:a.currency)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>n(s.id,s.quantity-1),className:"h-8 w-8 p-0 rounded-full",children:e.jsx(xc,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity}),e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>n(s.id,s.quantity+1),className:"h-8 w-8 p-0 rounded-full",disabled:!!(s.stockQuantity&&s.quantity>=s.stockQuantity),children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>i(s.id),className:"h-8 w-8 p-0 rounded-full ml-2",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},s.id)})})}function s0({customerInfo:a,onChange:t}){const{t:r}=P("common");return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:r("name")}),e.jsx("input",{type:"text",value:a.name||"",onChange:n=>t({...a,name:n.target.value}),placeholder:r("client-name"),className:"w-full rounded-lg border dark:border-gray-700 p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:r("phone-number")}),e.jsx("input",{type:"tel",value:a.phone||"",onChange:n=>t({...a,phone:n.target.value}),placeholder:r("client-phone-number"),className:"w-full rounded-lg border dark:border-gray-700 p-2"})]})]})})}function i0(){var d,m;const{t:a}=P(),{settings:t}=ee(),{subtotal:r,taxes:n,tip:i,total:s,setTipPercentage:l,cart:o}=lr(),c=o.reduce((u,p)=>u+p.quantity,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(il,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:a("common:cart-summary")})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[c," ",c>1?a("common:cart-items"):a("common:cart-item")]}),e.jsx("span",{className:"font-medium",children:G(s,t==null?void 0:t.currency)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:a("cart:sub-total")}),e.jsx("span",{children:G(r,t==null?void 0:t.currency)})]}),n.map(u=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[u.name," (",Wi(u.rate),")"]}),e.jsx("span",{children:G(u.amount,t==null?void 0:t.currency)})]},u.id)),(t==null?void 0:t.tips.enabled)&&e.jsxs("div",{className:"pt-2 border-t dark:border-gray-700",children:[e.jsx("span",{className:"mb-2 block",children:t.tips.label}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[(m=(d=t==null?void 0:t.tips)==null?void 0:d.defaultPercentages.map(Number))==null?void 0:m.map(u=>e.jsxs("button",{onClick:()=>l(u),className:`
                                    px-3 py-1 text-sm rounded-full transition-colors
                                    ${(i==null?void 0:i.percentage)===u?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}
                                  `,children:[u,"%"]},u)),e.jsx("button",{onClick:()=>l(null),className:"px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:a("common:no-tip")})]}),i&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[a("common:total")," ",t.tips.label," (",i.percentage,"%)"]}),e.jsx("span",{children:G(i.amount,t==null?void 0:t.currency)})]})]})]})]})}function l0({total:a,amountPaid:t,onAmountPaidChange:r}){const{t:n}=P("common"),{settings:i}=ee(),s=t-a;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(el,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:n("cart-details")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("amount-received")}),e.jsx("input",{type:"number",onChange:l=>r(parseFloat(l.target.value)||0),className:"w-full rounded-lg border dark:border-gray-700 p-2",min:0,step:gc(i==null?void 0:i.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("amount-due")}),e.jsx("div",{className:`w-full rounded-lg p-2 font-mono text-lg ${s>=0?"!text-green-600":"!text-red-600"}`,children:e.jsx("span",{className:`${s>=0?"text-green-600":"text-red-600"}`,children:G(s<0?0:s,i==null?void 0:i.currency)})})]})]})]})}function Ei(a){const{onClose:t,cart:r,tableNumber:n,setTableNumber:i,customerInfo:s,setCustomerInfo:l,amountPaid:o,setAmountPaid:c,onQuickAmount:d,onCheckout:m,isSubmitting:u}=a,[p]=h.useState(""),[x,g]=h.useState(!1),{settings:f}=ee(),{t:v}=P("common"),{total:b}=lr(),y=async()=>{try{if(o<0||o!==0&&o<b){L.error(v("amount-condition"));return}await m(),L.success(v("order-successfully-created"))}catch(w){console.error("Error creating order:",w),w instanceof Error?L.error(w.message):L.error(v("order-creation-fail"))}};return e.jsxs("div",{className:"h-full flex flex-col",children:[t&&e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold",children:v("cart")}),e.jsx(C,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:v("table-number")}),e.jsx("input",{type:"text",value:n,onChange:w=>i(w.target.value),className:"w-full rounded-lg border dark:border-gray-700 p-2",placeholder:"Ex: 42",min:0})]}),e.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:e.jsx(s0,{customerInfo:s,onChange:l})}),e.jsx("div",{className:"px-4",children:e.jsx(n0,{})})]}),r.length>0&&e.jsxs("div",{className:"dark:border-gray-700 p-4 space-y-4 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold border-t dark:border-gray-700 pt-4",children:[e.jsx("span",{children:v("total")}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:G(b,f==null?void 0:f.currency)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>g(!x),className:"w-full flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:v("tax-and-tips")}),x?e.jsx(_c,{className:"w-4 h-4"}):e.jsx(za,{className:"w-4 h-4"})]}),x&&e.jsx(i0,{items:r,total:b})]}),e.jsx(l0,{total:b,amountPaid:o,onAmountPaidChange:c,onQuickAmount:d}),p&&e.jsx("p",{className:"text-red-500 dark:text-red-400",children:p}),e.jsx(C,{onClick:y,disabled:r.length===0||u,className:`w-full py-3 text-base font-medium bg-blue-600 hover:bg-blue-700 text-white rounded-lg
                     transition-colors duration-200 shadow-sm hover:shadow-md
                     disabled:bg-gray-400 disabled:cursor-not-allowed`,children:v(u?"processing":"validated-order")})]})]})}function o0(a){const{order:t,onClose:r}=a,{t:n,i18n:i}=P("order"),s=i.language,{settings:l}=ee(),[o,c]=h.useState(!1),[d,m]=h.useState(!1),u=async()=>{var x;try{c(!0);const g=un(n),f=mn(l);(await pn(t,{...g,paymentMethodName:n(`payment-method-names.${t.diningOption==="dine-in"?"dine-in":(x=t.paymentMethod)==null?void 0:x.name}`)},n,s,f)).save(`commande-${t.id.slice(0,8)}.pdf`),L.success(n("common:bill-successfully-downloaded"))}catch(g){console.error("Error downloading receipt:",g),L.error(n("common:download-error"))}finally{c(!1)}},p=async()=>{var x;try{m(!0);const g=un(n),f=mn(l),v=await pn(t,{...g,paymentMethodName:n(`payment-method-names.${t.diningOption==="dine-in"?"dine-in":(x=t.paymentMethod)==null?void 0:x.name}`)},n,s,f);v.autoPrint(),window.open(v.output("bloburl")),L.success(n("common:invoice-in-printing"))}catch(g){console.error("Error printing receipt:",g),L.error(n("common:printing-error"))}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-3 rounded-full",children:e.jsx(Mn,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:n("order-confimed")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n("common:order-save-successfully",{orderId:t.id.slice(0,8)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(C,{onClick:p,disabled:d,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(sl,{className:"w-4 h-4 mr-1"}),n(d?"printing":"print-bill")]}),e.jsxs(C,{variant:"secondary",onClick:u,disabled:o,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 mr-1"}),n(o?"common:downloading":"common:download-bill")]}),e.jsx(C,{variant:"ghost",onClick:r,className:"w-full",children:n("common:close")})]})]})})}function c0(){const{t:a}=P(),{settings:t}=ee(),{staffData:r}=xt(),[n,i]=h.useState("all"),[s,l]=h.useState(""),[o,c]=h.useState(""),[d,m]=h.useState(0),[u,p]=h.useState({}),[x,g]=h.useState(!1),[f,v]=h.useState(!1),[b,y]=h.useState(null),[w,j]=h.useState([]),[D,N]=h.useState(!0),[I,T]=h.useState(!1),[k,M]=h.useState(null),[A,W]=h.useState(!1),[z]=h.useState(12),{total:R,addToCart:B,updateQuantity:E,cart:q,clearCart:S,taxTotal:$,taxes:Z,tip:_,subtotal:K}=lr();h.useEffect(()=>{Y()},[n]);const Y=async()=>{try{if(N(!0),M(null),n!=="all")try{const J=await we.getMenuItemsByCategory(n);j(J.slice(0,z)),W(J.length>z),J.length>z?M({id:z.toString()}):M(null)}catch(J){console.error("Error loading category items:",J),L.error(a("common:error-loading-category-items"))}else try{const J=await we.getMenuItemsPaginated(z,null);j(J.items),M(J.lastDoc),W(J.hasMore)}catch(J){console.error("Error loading paginated items:",J);const ne=await we.getAll();j(ne.slice(0,z)),W(ne.length>z),ne.length>z?M({id:z.toString()}):M(null)}}catch(J){console.error("Error loading menu items:",J),L.error(a("common:error-loading-menu-items"))}finally{N(!1)}},ce=async()=>{if(!(!A||I))try{if(T(!0),n!=="all"){const J=await we.getMenuItemsByCategory(n),ne=w.length,Ne=J.slice(ne,ne+z);j(Ee=>[...Ee,...Ne]),W(ne+z<J.length),ne+z<J.length?M({id:(ne+z).toString()}):M(null)}else if(typeof(k==null?void 0:k.id)=="string"&&!isNaN(parseInt(k.id))){const J=await we.getAll(),ne=parseInt(k.id),Ne=J.slice(ne,ne+z);j(Ee=>[...Ee,...Ne]),W(ne+z<J.length),ne+z<J.length?M({id:(ne+z).toString()}):M(null)}else{const J=await we.getMenuItemsPaginated(z,k);j(ne=>[...ne,...J.items]),M(J.lastDoc),W(J.hasMore)}}catch(J){console.error("Error loading more menu items:",J),L.error(a("common:error-loading-more-menu-items"))}finally{T(!1)}},ve=h.useMemo(()=>w.map(J=>({...J,variantPrices:[...J.variantPrices||[],...(J==null?void 0:J.defaultVariantPrices)||[]]})),[w]),De=h.useMemo(()=>s?ve.filter(J=>J.name.toLowerCase().includes(s.toLowerCase())):ve,[ve,s]),We=J=>{m(J)},_e=async()=>{if(q.length!==0)try{g(!0);const J={items:q,status:"pending",total:R,customerName:u.name||`Table ${o}`,customerEmail:u.email||null,customerPhone:u.phone||"",diningOption:"dine-in",tableNumber:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),paymentMethod:{name:"Paiement à la caisse",id:"Paiement à la caisse",active:!0,createdAt:new Date().toDateString(),updatedAt:new Date().toDateString()},subtotal:K,taxes:Z,taxTotal:$,amountPaid:d,change:d-R,tip:_,servedBy:(r==null?void 0:r.name)||"Le gérant",delivery:null},ne=await $t.createOrder({...J,taxRates:(t==null?void 0:t.taxes.rates)||[]}),Ne=await $t.getOrderById(ne);Ne&&(y(Ne),S(),c(""),m(0),p({}),v(!1))}catch(J){console.error("Error creating order:",J),L.error(a("common:error-creating-order"))}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{children:e.jsx(hc,{activeCategory:n,onCategoryChange:i})}),e.jsxs("div",{children:[e.jsx(r0,{items:De,onAddToCart:B,searchTerm:s,onSearchChange:l,onToggleCart:()=>v(!0),isLoading:D}),!D&&A&&!s&&e.jsx("div",{className:"flex justify-center mt-6 mb-6",children:e.jsxs(C,{onClick:ce,disabled:I,className:"px-6 py-2 shadow-md",size:"lg",children:[I?e.jsx(Ce,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(Ce,{className:"w-5 h-5 mr-2"}),a(I?"common:loading":"common:load-more")]})})]})]}),e.jsx(re,{children:f&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-40 lg:hidden",onClick:()=>v(!1)}),e.jsx(O.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed inset-y-0 right-0 w-full sm:w-96 bg-white dark:bg-gray-800 shadow-xl z-50 lg:hidden",children:e.jsx(Ei,{onClose:()=>v(!1),cart:q,tableNumber:o,setTableNumber:c,customerInfo:u,setCustomerInfo:p,amountPaid:d,setAmountPaid:m,total:R,onUpdateQuantity:E,onQuickAmount:We,onCheckout:_e,isSubmitting:x})})]})}),e.jsx("div",{className:"hidden lg:block w-96 bg-white dark:bg-gray-800 rounded-lg p-6 flex flex-col",children:e.jsx(Ei,{cart:q,tableNumber:o,setTableNumber:c,customerInfo:u,setCustomerInfo:p,amountPaid:d,setAmountPaid:m,total:R,onUpdateQuantity:E,onQuickAmount:We,onCheckout:_e,isSubmitting:x})})]}),b&&e.jsx(o0,{order:b,onClose:()=>y(null)})]})}function d0(a){a=a.trim().replace(/\/+$/,""),!a.startsWith("http://")&&!a.startsWith("https://")&&(a="https://"+a);try{const t=new URL(a);return/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,}$/.test(t.hostname)?{isValid:!0,formattedUrl:a}:{isValid:!1,formattedUrl:a}}catch{return{isValid:!1,formattedUrl:a}}}function u0(){const{t:a}=P(),[t,r]=h.useState(""),[n,i]=h.useState(null),[s,l]=h.useState(!1),[o,c]=h.useState(!1),[d,m]=h.useState(null),u=f=>{const v=f.target.value;r(v),m(null)},p=h.useCallback(async()=>{if(!t){L.error(a("qrCode:empty-url"));return}const{isValid:f,formattedUrl:v}=d0(t);if(!f){m(a("qrCode:invalid-url")),L.error(a("qrCode:invalid-url"));return}try{l(!0),m(null);const b=await fc.toDataURL(v,{width:512,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"});i(b),r(v),L.success(a("qrCode:qr-code-generated"))}catch(b){console.error("Erreur lors de la génération du QR code:",b),L.error(a("qrCode:qr-code-generation-failed"))}finally{l(!1)}},[t]),x=async()=>{try{await navigator.clipboard.writeText(t),c(!0),L.success(a("qrCode:copied")),setTimeout(()=>c(!1),2e3)}catch(f){console.error("Erreur lors de la copie:",f),L.error(a("qrCode:copy-failed"))}},g=()=>{if(!n)return;const f=document.createElement("a");f.href=n,f.download=`qr-code-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(f),f.click(),document.body.removeChild(f),L.success(a("qrCode:qr-code-downloaded"))};return e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-3xl space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(O.div,{initial:{scale:0},animate:{scale:1},className:"relative inline-flex h-20 w-20 items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 dark:bg-blue-500/20 rounded-3xl rotate-6"}),e.jsx("div",{className:"absolute inset-0 bg-indigo-500/10 dark:bg-indigo-500/20 rounded-3xl -rotate-6"}),e.jsx("div",{className:"relative bg-gradient-to-br from-blue-500 to-indigo-600 p-4 rounded-2xl shadow-lg",children:e.jsx(zt,{className:"h-8 w-8 text-white"})})]}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:a("qrCode:qr-code-generator")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto text-lg",children:a("qrCode:qr-code-description")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-xl",children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("qrCode:cover-link")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(vc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:t,onChange:u,placeholder:"google.com ou https://google.com",className:`
                    block w-full rounded-xl border pl-10 pr-12 py-3
                    transition-colors
                    ${d?"border-red-300 dark:border-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-200 dark:border-gray-600 dark:bg-gray-700/50"}
                    focus:outline-none focus:ring-2
                    ${d?"focus:ring-red-500 focus:border-red-500":"focus:ring-blue-500 focus:border-blue-500"}
                  `}),e.jsx(re,{children:t&&e.jsx(O.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:x,className:"absolute inset-y-0 right-0 flex items-center pr-3",title:o?"Copié!":"Copier",children:o?e.jsx(Mn,{className:"h-5 w-5 text-green-500"}):e.jsx(Jc,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})})]}),e.jsxs(C,{onClick:p,disabled:!t||s,className:`
                  relative inline-flex items-center justify-center px-6 py-3 
                  text-sm font-medium text-white
                  bg-gradient-to-r from-blue-500 to-indigo-600 
                  hover:from-blue-600 hover:to-indigo-700 
                  rounded-xl shadow-lg hover:shadow-xl 
                  transition-all duration-200 min-w-[140px]
                  disabled:opacity-50 disabled:cursor-not-allowed 
                  transform hover:-translate-y-0.5 active:scale-95
                  [&>*]:text-white [&>span]:text-white
                  disabled:from-gray-400 disabled:to-gray-500
                `,children:[e.jsx(bs,{className:`w-4 h-4 mr-2 text-white ${s?"animate-spin":""}`}),e.jsx("span",{children:a(s?"qrCode:generating":"qrCode:generator")})]})]}),d&&e.jsxs(O.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx(pt,{className:"h-4 w-4"}),d]})]}),e.jsx(re,{mode:"wait",children:n?e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 border-t dark:border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl opacity-20 group-hover:opacity-30 blur transition-opacity"}),e.jsx("div",{className:"relative bg-white rounded-xl p-6 shadow-lg",children:e.jsx("img",{src:n,alt:"QR Code",className:"w-64 h-64"})})]}),e.jsxs(C,{onClick:g,className:`px-6 py-3 bg-gray-900 dark:bg-gray-700 text-white rounded-xl
                             hover:bg-gray-800 dark:hover:bg-gray-600 shadow-lg hover:shadow-xl
                             transition-all duration-200 transform hover:-translate-y-0.5
                             active:scale-95 group flex items-center`,children:[e.jsx(Na,{className:"w-4 h-4 mr-2 transition-transform group-hover:scale-110"}),e.jsx("span",{children:a("qrCode:download-qr-code")})]})]})},"qr-code"):e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-12 border-t dark:border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-700/50 rounded-xl blur-xl"}),e.jsx(zt,{className:"relative w-16 h-16 mb-4"})]}),e.jsx("p",{className:"text-sm mt-4",children:a("qrCode:qr-dont-display")})]})},"placeholder")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20
                       rounded-2xl p-6 backdrop-blur-xl border border-blue-100/50 dark:border-blue-800/50`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 dark:bg-blue-500/20 rounded-lg",children:e.jsx(bc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:a("qrCode:used-direction")})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),a("qrCode:used-1")]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),a("qrCode:used-2")]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),a("qrCode:used-3")]})]})]}),e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50
                       rounded-2xl p-6 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-gray-500/10 dark:bg-gray-500/20 rounded-lg",children:e.jsx(bs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:a("qrCode:applications")})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),a("qrCode:applications-description-1")]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),a("qrCode:applications-description-2")]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),a("qrCode:applications-description-3")]})]})]})]}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("p",{children:[a("qrCode:url-format-accepted")," google.com, www.google.com, https://google.com"]})})]})})}const rn=9;function m0(a){const{items:t,isLoading:r,onEdit:n,onDelete:i}=a,{settings:s}=ee(),[l,o]=h.useState(1),{t:c,i18n:d}=P(),m=d.language,u=Math.ceil(t.length/rn),p=(l-1)*rn,x=t.slice(p,p+rn);return r?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((g,f)=>e.jsx("div",{className:"h-16 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},f))}):t.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-4 bg-gray-100 dark:bg-gray-700 rounded-full",children:e.jsx(ld,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:c("common:no-product-in-stock")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:c("common:no-product-in-stock-description")})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:c("inventory:product")}),e.jsx("th",{className:"px-4 py-3 text-left",children:c("inventory:category")}),e.jsx("th",{className:"px-4 py-3 text-right",children:c("inventory:quantity")}),e.jsx("th",{className:"px-4 py-3 text-right",children:c("inventory:unit-price")}),e.jsx("th",{className:"px-4 py-3 text-left",children:c("inventory:expiry-date")}),e.jsx("th",{className:"px-4 py-3 text-right",children:c("inventory:actions")})]})}),e.jsx("tbody",{children:x.map(g=>{const f=Number(g.quantity)<=Number(g.minQuantity),v=typeof g.price=="string"?parseFloat(g.price):g.price;return e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[f&&e.jsx(la,{className:"h-5 w-5 text-amber-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),g.description&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:g.description})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-sm dark:bg-gray-800",children:c(`common:category-names.${g.category}`)})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-medium ${f?"text-red-500":""}`,children:[ba(Number(Number(g.quantity).toFixed(2)))," ",c(`common:units-name.${g.unit}`)]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:G(v,s==null?void 0:s.currency)}),e.jsx("td",{className:"px-4 py-3",children:g.expiryDate?de(g.expiryDate,!1,m):"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>n(g),children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>i(g.id),children:e.jsx(Ie,{className:"h-4 w-4"})})]})})]},g.id)})})]})}),u>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(da,{currentPage:l,totalPages:u,onPageChange:o})})]})}function p0(a){var m;const{item:t,onSave:r,onCancel:n}=a,{t:i}=P(),{settings:s}=ee(),{register:l,handleSubmit:o,formState:{errors:c,isSubmitting:d}}=Ze({defaultValues:t?{name:t.name,description:t.description||"",quantity:t.quantity,unit:t.unit,minQuantity:t.minQuantity,category:t.category,price:t.price,supplier:t.supplier||"",expiryDate:t.expiryDate||""}:{name:"",description:"",quantity:0,unit:"unités",minQuantity:0,category:"ingredients",price:0,supplier:"",expiryDate:""}});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:i(t?"inventory:update-product":"inventory:new-product")}),e.jsx("button",{onClick:n,className:"hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-full transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("form",{onSubmit:o(r),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("common:name")}),e.jsx("input",{type:"text",...l("name",{required:i("common:name-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:category")}),e.jsxs("select",{...l("category"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"ingredients",children:i("common:ingredients")}),e.jsx("option",{value:"boissons",children:i("common:beverages")}),e.jsx("option",{value:"fournitures",children:i("common:supplies")}),e.jsx("option",{value:"emballages",children:i("common:packaging")}),e.jsx("option",{value:"nettoyage",children:i("common:maintenant-product")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:qte")}),e.jsx("input",{type:"number",...l("quantity",{required:i("inventory:qte-required"),min:{value:0,message:i("inventory:positive-qte-required")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),c.quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.quantity.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:unit")}),e.jsxs("select",{...l("unit"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"unités",children:i("inventory:units")}),e.jsx("option",{value:"kg",children:i("inventory:kg")}),e.jsx("option",{value:"g",children:i("inventory:gramme")}),e.jsx("option",{value:"l",children:i("inventory:litres")}),e.jsx("option",{value:"ml",children:i("inventory:millilitres")}),e.jsx("option",{value:"cartons",children:i("inventory:cartons")}),e.jsx("option",{value:"packs",children:i("inventory:packs")}),e.jsx("option",{value:"lb",children:i("inventory:lb")}),e.jsx("option",{value:"oz",children:i("inventory:oz")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:qte-minmale")}),e.jsx("input",{type:"number",...l("minQuantity",{required:i("inventory:qty-min-required"),min:{value:0,message:i("inventory:qty-min-positive")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),c.minQuantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.minQuantity.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:[i("inventory:unit-price"),s!=null&&s.currency?` (${(m=yc(s==null?void 0:s.currency))==null?void 0:m.display})`:""]}),e.jsx("input",{type:"number",step:(s==null?void 0:s.currency)==="XOF"?"1":"0.01",...l("price",{required:i("inventory:price-required"),min:{value:0,message:i("inventory:price-must-be-positive")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),c.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:c.price.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:supplier")}),e.jsx("input",{type:"text",...l("supplier"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("inventory:expiry-date")}),e.jsx("input",{lang:"fr",type:"date",...l("expiryDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:i("common:description")}),e.jsx("textarea",{...l("description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})}),e.jsx("div",{className:"p-6 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:n,children:i("common:cancel")}),e.jsx(C,{onClick:o(r),disabled:d,children:i(d?"common:saving":t?"common:update":"common:add")})]})})]})})}function x0({items:a}){const{t}=P(),r=a.filter(s=>Number(s.quantity)<=Number(s.minQuantity)),n=a.filter(s=>{if(!s.expiryDate)return!1;const l=new Date(s.expiryDate),o=new Date,c=Math.ceil((l.getTime()-o.getTime())/(1e3*60*60*24));return c<=7&&c>0}),i=a.filter(s=>s.expiryDate?new Date(s.expiryDate)<new Date:!1);return!r.length&&!n.length&&!i.length?null:e.jsxs("div",{className:"space-y-4",children:[r.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-400",children:t("common:low-stock")})]}),e.jsx("div",{className:"mt-2 space-y-1",children:r.map(s=>e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[s.name,": ",s.quantity," ",t(`common:units-name.${s.unit}`)," (Min: ",s.minQuantity,")"]},s.id))})]}),i.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pt,{className:"h-5 w-5 text-red-500"}),e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-400",children:"Produits expirés"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:i.map(s=>e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[s.name," - Expiré le"," ",new Date(s.expiryDate).toLocaleDateString()]},s.id))})]}),n.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-400",children:"Produits bientôt expirés"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:n.map(s=>e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[s.name," - Expire le"," ",new Date(s.expiryDate).toLocaleDateString()]},s.id))})]})]})}function g0(a){const{t,i18n:r}=P(),{updates:n,isLoading:i,currentPage:s,totalPages:l,onPageChange:o,dateRange:c}=a,{settings:d}=ee(),[m,u]=h.useState(!1),p=r.language;if(i)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"p-6 space-y-4",children:[...Array(3)].map((g,f)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-100 dark:bg-gray-700/50 rounded"})]},f))})});if(!n||n.length===0)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center",children:[e.jsx($e,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:t("common:no-history")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("common:no-history-description")})]});const x=async()=>{try{u(!0),await xn.generateHistoryPDF(t,p,c==null?void 0:c.startDate,c==null?void 0:c.endDate,d==null?void 0:d.currency),L.success(t("common:export-success"))}catch(g){console.error("Error exporting history:",g),L.error(t("common:export-error"))}finally{u(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t("inventory:stock-history")}),e.jsxs(C,{onClick:x,disabled:m,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),t(m?"common:downloading-in-progress":"common:export")]})]}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:e.jsx(re,{mode:"wait",children:n.length>0?n.map((g,f)=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:f*.05},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx(Pn,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:g.itemName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:g.reason}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"w-4 h-4"}),de(g.date,!1,p)]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-red-500 dark:text-red-400 font-medium",children:["-",Number(g.quantity).toFixed(2)," ",t("inventory:units")]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-medium",children:G(g.cost,d==null?void 0:d.currency)})]})]})]})})},g.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx($e,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("inventory:no-history-found")})]})})}),l>1&&e.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:e.jsx(da,{currentPage:s,totalPages:l,onPageChange:o})})]})}function h0(a){const{items:t,onSubmit:r,onCancel:n,isSubmitting:i}=a,{t:s}=P(),{settings:l}=ee(),[o,c]=h.useState(""),{register:d,handleSubmit:m,watch:u,formState:{errors:p}}=Ze({defaultValues:{updates:t.map(v=>({itemId:v.id,quantity:0,reason:""}))}}),x=u("updates"),g=t.filter(v=>{var b;return v.name.toLowerCase().includes(o.toLowerCase())||((b=v.description)==null?void 0:b.toLowerCase().includes(o.toLowerCase()))}),f=v=>{const b=v.updates.filter(y=>y.quantity>0);b.length!==0&&r(b)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 sm:p-6 border-b dark:border-gray-700 gap-4 sm:gap-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-2",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2 truncate",children:[e.jsx($e,{className:"w-5 h-5 flex-shrink-0 text-blue-500"}),e.jsx("span",{className:"truncate",children:s("inventory:update-stock")})]}),e.jsx("button",{onClick:n,disabled:i,className:"sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:s("inventory:save-today-used-product")})]}),e.jsx("button",{onClick:n,disabled:i,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 sm:p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:o,onChange:v=>c(v.target.value),placeholder:s("common:search-product"),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700"})]})}),e.jsxs("form",{onSubmit:m(f),className:"flex flex-col flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[g.map(v=>{var y,w,j,D,N,I;const b=t.findIndex(T=>T.id===v.id);return b===-1?null:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg p-4 space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s("common:current-stock",{quantity:v.quantity})," ",s(`common:units-name.${v.unit}`)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("common:unit-price",{unitPrice:G(v.price,l==null?void 0:l.currency)})})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s("inventory:used-qte")}),e.jsx("input",{type:"number",...d(`updates.${b}.quantity`,{min:{value:0,message:s("inventory:positive-qte-required")},max:{value:v.quantity,message:s("inventory:qte-greater-than-stock")}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",disabled:i}),((w=(y=p.updates)==null?void 0:y[b])==null?void 0:w.quantity)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:(j=p.updates[b].quantity)==null?void 0:j.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s("common:reason")}),e.jsx("input",{type:"text",...d(`updates.${b}.reason`,{validate:T=>x[b].quantity>0&&!T?s("inventory:reason-is-required"):!0}),placeholder:"Ex: Service du soir",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",disabled:i}),((N=(D=p.updates)==null?void 0:D[b])==null?void 0:N.reason)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:(I=p.updates[b].reason)==null?void 0:I.message})]})]})]},v.id)}),g.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:s("inventory:no-product-found")})]})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4 sm:p-6 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:n,disabled:i,className:"w-full sm:w-auto order-2 sm:order-1",children:s("common:cancel")}),e.jsx(C,{type:"submit",disabled:i||!x.some(v=>v.quantity>0),className:"w-full sm:w-auto min-w-0 sm:min-w-[200px] relative order-1 sm:order-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx("span",{className:"truncate",children:s("common:update-in-progress")})]}):s("inventory:update-stock-quantity")})]})})]})]})})}function f0(){const{t:a}=P(),[t,r]=h.useState(""),[n,i]=h.useState("all"),[s,l]=h.useState(!1),[o,c]=h.useState(!1),[d,m]=h.useState(null),[u,p]=h.useState({isOpen:!1}),[x,g]=h.useState(!1),[f,v]=h.useState("inventory"),[b,y]=h.useState(1),[w,j]=h.useState(!1),[D,N]=h.useState({updates:[],totalPages:0}),[I,T]=h.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),k=[{id:"inventory",label:a("inventory:inventory")},{id:"history",label:a("inventory:historic")}],{items:M,isLoading:A,addItem:W,updateItem:z,deleteItem:R}=Bn();h.useEffect(()=>{f==="history"&&B()},[f,b,I]);const B=async()=>{try{j(!0);const{updates:_,totalCount:K}=await xn.getHistory({page:b,pageSize:10,startDate:I.startDate,endDate:I.endDate});N({updates:_,totalPages:Math.ceil(K/10)})}catch(_){console.error("Error loading stock history:",_)}finally{j(!1)}},E=async _=>{try{d?await z(d.id,_):await W(_),l(!1),m(null)}catch(K){console.error("Error saving inventory item:",K)}},q=async()=>{if(u.itemId)try{g(!0),await R(u.itemId)}catch(_){console.error("Error deleting inventory item:",_)}finally{g(!1),p({isOpen:!1})}},S=async _=>{try{for(const K of _){const Y=M.find(ce=>ce.id===K.itemId);Y&&(await z(K.itemId,{quantity:Y.quantity-K.quantity}),await xn.addUpdate({itemId:K.itemId,itemName:Y.name,quantity:K.quantity,reason:K.reason,cost:K.quantity*Y.price,date:new Date().toISOString(),type:""}))}c(!1),f==="history"&&B()}catch(K){console.error("Error updating stock:",K)}},$=(_,K)=>{T({startDate:_,endDate:K}),y(1)},Z=M.filter(_=>{var ce;const K=_.name.toLowerCase().includes(t.toLowerCase())||((ce=_.description)==null?void 0:ce.toLowerCase().includes(t.toLowerCase())),Y=n==="all"||_.category===n;return K&&Y});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("inventory:stock-managemnt")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a("inventory:stock-description")})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{onClick:()=>c(!0),children:a("inventory:update-stock")}),e.jsxs(C,{onClick:()=>{m(null),l(!0)},children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("inventory:add-product")]})]})]}),e.jsx(x0,{items:M}),e.jsx(gt,{tabs:k,activeTab:f,onChange:v}),f!=="inventory"&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Xe,{className:"w-5 h-5 text-gray-500"}),e.jsx(Da,{startDate:I.startDate,endDate:I.endDate,onDateChange:$})]}),f==="inventory"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-500 dark:text-gray-400"}),e.jsx("input",{type:"text",placeholder:a("common:search-product"),value:t,onChange:_=>r(_.target.value),className:"w-full rounded-lg border border-gray-300 px-12 py-3 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:focus:border-blue-400 dark:focus:ring-blue-400"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:n,onChange:_=>i(_.target.value),className:"rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-700 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:focus:border-blue-400 dark:focus:ring-blue-400",children:[e.jsx("option",{value:"all",children:a("inventory:all-category")}),e.jsx("option",{value:"ingredients",children:a("common:ingredients")}),e.jsx("option",{value:"boissons",children:a("common:beverages")}),e.jsx("option",{value:"fournitures",children:a("common:supplies")}),e.jsx("option",{value:"emballages",children:a("common:packaging")}),e.jsx("option",{value:"nettoyage",children:a("common:maintenant-product")})]})})]}),e.jsx(m0,{items:Z,isLoading:A,onEdit:_=>{m(_),l(!0)},onDelete:_=>{const K=M.find(Y=>Y.id===_);p({isOpen:!0,itemId:_,itemName:K==null?void 0:K.name})}})]}):e.jsx(g0,{updates:D.updates,isLoading:w,currentPage:b,totalPages:D.totalPages,onPageChange:y,dateRange:I}),s&&e.jsx(p0,{item:d,onSave:E,onCancel:()=>{l(!1),m(null)}}),o&&e.jsx(h0,{items:M,onSubmit:S,onCancel:()=>c(!1),isSubmitting:!1}),e.jsx(Fa,{isOpen:u.isOpen,title:a("common:delete-product"),message:a("inventory:confirm-delete-product",{deleteConfirmationProduct:u.itemName}),confirmLabel:a("common:delete"),onConfirm:q,onCancel:()=>p({isOpen:!1}),isLoading:x})]})}function v0({stats:a,isLoading:t}){const{t:r}=P(),{settings:n}=ee();if(t)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,l)=>e.jsx("div",{className:"h-32 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},l))});const i=[{label:r("comptability:flow"),amount:(a==null?void 0:a.totalDebit)||0,icon:Uc,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{label:r("comptability:credit"),amount:(a==null?void 0:a.totalCredit)||0,icon:qc,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{label:r("comptability:net-amount"),amount:(a==null?void 0:a.netAmount)||0,icon:ca,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map((s,l)=>e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`w-6 h-6 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.label}),e.jsx("p",{className:"text-2xl font-semibold",children:G(s.amount,n==null?void 0:n.currency)})]})]})},s.label))})}function Wo(a){const{t}=P(),{transaction:r,onSave:n,onCancel:i}=a,{settings:s}=ee(),[l,o]=h.useState(!1),{register:c,handleSubmit:d,formState:{errors:m}}=Ze({defaultValues:r||{date:new Date().toISOString().split("T")[0],source:"",description:"",reference:"",debit:0,credit:0}}),u=async p=>{try{o(!0);const x={...p,debit:parseFloat(p.debit)||0,credit:parseFloat(p.credit)||0};await n(x)}catch(x){console.log(x)}finally{o(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:t(r?"comptability:update-transaction":"comptability:add-transaction")}),e.jsx("button",{onClick:i,children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:d(u),className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:date")}),e.jsx("input",{type:"date",...c("date",{required:t("comptability:date-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),m.date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:source")}),e.jsx("input",{type:"text",...c("source",{required:t("comptability:source-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:description")}),e.jsx("input",{type:"text",...c("description",{required:t("comptability:description-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:flow")}),e.jsx("input",{type:"number",step:(s==null?void 0:s.currency)==="XOF"?"1":"0.01",...c("debit",{min:0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:credit")}),e.jsx("input",{type:"number",step:(s==null?void 0:s.currency)==="XOF"?"1":"0.01",...c("credit",{min:0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:t("comptability:references")}),e.jsx("input",{type:"text",...c("reference"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:i,children:t("common:cancel")}),e.jsx(C,{type:"submit",disabled:l,children:t(r?"common:update":"common:add")})]})]})]})})}const b0={orders:"commandes",inventory:"Inventaire"};function y0({transactions:a,isLoading:t,isLoadingMore:r=!1,onUpdate:n,onDelete:i,hasMore:s=!1,onLoadMore:l,displayedCount:o=0,totalCount:c=0}){const{t:d,i18n:m}=P(),u=m.language,{settings:p}=ee(),[x,g]=h.useState(null),[f,v]=h.useState({isOpen:!1});return t&&a.length===0?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((b,y)=>e.jsx("div",{className:"h-16 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},y))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:d("comptability:date")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:d("comptability:source")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:d("comptability:description")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:d("comptability:reference")}),e.jsxs("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase text-right",children:[d("comptability:flow")," (HT)"]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase text-right",children:[d("comptability:credit")," (HT)"]}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx(re,{mode:"wait",initial:!1,children:a.map((b,y)=>e.jsxs(O.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,delay:Math.min(y*.05,.3)},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:de(b.date,!1,u)}),e.jsx("td",{className:"px-6 py-4 text-sm",children:b0[b.source]||b.source}),e.jsx("td",{className:"px-6 py-4 text-sm",children:b.description}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:b.reference||`#${b.id}`.slice(0,6)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:b.debit>0&&e.jsx("span",{className:"text-red-600 dark:text-red-400",children:G(b.debit,p==null?void 0:p.currency)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:b.credit>0&&e.jsx("span",{className:"text-green-600 dark:text-green-400",children:G(b.credit,p==null?void 0:p.currency)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>g(b),className:"text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:e.jsx(Ca,{className:"w-4 h-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>v({isOpen:!0,transactionId:b.id}),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ie,{className:"w-4 h-4"})})]})})]},b.id))}),a.length===0&&!t&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:d("comptability:no-transaction-found")})})]})]})}),(s||r)&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsxs(C,{variant:"outline",onClick:l,disabled:t||r,className:"w-full flex items-center justify-center gap-2",children:[r?e.jsx(Je,{className:"w-4 h-4 animate-spin"}):e.jsx(za,{className:"w-4 h-4"}),e.jsxs("span",{children:[d(r?"common:loading":"common:load-more"),o>0&&c>0&&e.jsxs("span",{className:"ml-1 text-gray-500",children:["(",o,"/",c,")"]})]})]})})]}),x&&e.jsx(Wo,{transaction:x,onSave:async b=>{await n(x.id,b),g(null)},onCancel:()=>g(null)}),e.jsx(Ha,{isOpen:f.isOpen,onClose:()=>v({isOpen:!1}),onConfirm:async()=>{f.transactionId&&(await i(f.transactionId),v({isOpen:!1}))},title:d("comptability:delete-transaction"),message:d("comptability:delete-transaction-confirmation")})]})}function j0(){const{settings:a}=ee(),[t,r]=h.useState([]),n=s=>{const l=(new Date().getTime()-new Date(s.purchaseDate).getTime())/31536e6,o=s.value*(s.depreciationRate/100)*l;return Math.max(0,s.value-o)},i=t.reduce((s,l)=>s+n(l),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Actifs Immobilisés"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Valeur totale: ",G(i,a==null?void 0:a.currency)]})]}),e.jsxs(C,{children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Ajouter un Actif"]})]}),e.jsx("div",{className:"grid gap-4",children:t.map(s=>e.jsx(O.div,{layout:!0,className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Acheté le ",new Date(s.purchaseDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:G(n(s),a==null?void 0:a.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Valeur initiale: ",G(s.value,a==null?void 0:a.currency)]})]})]})},s.id))})]})}function w0(){const{settings:a}=ee(),[t,r]=h.useState([]),n=s=>{const l=(new Date(s.dueDate).getTime()-new Date(s.startDate).getTime())/2592e6,o=s.amount*(s.interestRate/100)*(l/12);return s.amount+o},i=t.reduce((s,l)=>l.status==="active"?s+n(l):s,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Dettes et Emprunts"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total des dettes: ",G(i,a==null?void 0:a.currency)]})]}),e.jsxs(C,{children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Ajouter une Dette"]})]}),e.jsx("div",{className:"grid gap-4",children:t.map(s=>e.jsx(O.div,{layout:!0,className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.creditor}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Échéance: ",new Date(s.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:G(n(s),a==null?void 0:a.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Taux: ",s.interestRate,"%"]})]})]})},s.id))})]})}const Mi=10;function N0(a){const[t,r]=h.useState([]),[n,i]=h.useState(!0),[s,l]=h.useState(!1),[o,c]=h.useState(!0),[d,m]=h.useState(0),u=h.useRef(null),p=h.useMemo(()=>{const v=t.filter(N=>(typeof N.debit=="number"||typeof N.credit=="number")&&!isNaN(N.debit||0)&&!isNaN(N.credit||0)),b=v.reduce((N,I)=>{const T=typeof I.debit=="number"?Math.abs(I.debit):0;return N+T},0),y=v.reduce((N,I)=>{const T=typeof I.credit=="number"?Math.abs(I.credit):0;return N+T},0),w=Math.round(b*100)/100,j=Math.round(y*100)/100,D=Math.round((j-w)*100)/100;return{totalDebit:w,totalCredit:j,netAmount:D,transactionCount:v.length,invalidTransactions:t.length-v.length}},[t]);h.useEffect(()=>{x()},[a]);const x=async()=>{try{i(!0),r([]),u.current=null;const v=await fa.getTransactionsCount(a);m(v);const b=await fa.getPaginatedTransactions(a,Mi);r(b.transactions),u.current=b.lastDoc,c(b.transactions.length<v)}catch(v){console.error("Error loading initial accounting data:",v),L.error("Erreur lors du chargement des données comptables")}finally{i(!1)}},g=async()=>{if(!(s||!o||!u.current))try{l(!0);const v=await fa.getPaginatedTransactions(a,Mi,u.current);v.transactions.length>0?(r(b=>[...b,...v.transactions]),u.current=v.lastDoc,c(t.length+v.transactions.length<d)):c(!1)}catch(v){console.error("Error loading more transactions:",v),L.error("Erreur lors du chargement de transactions supplémentaires")}finally{l(!1)}},f=async()=>{try{return await fa.getTransactions(a)}catch(v){return console.error("Error fetching all transactions:",v),L.error("Erreur lors du chargement complet des transactions"),[]}};return{transactions:t,stats:p,isLoading:n,isLoadingMore:s,refreshData:x,loadMore:g,hasMore:o,displayedCount:t.length,totalCount:d,fetchAllTransactions:f}}function Ti(a){const{t,i18n:r}=P(),n=r.language,{transactions:i,period:s,settings:l}=a,o=i.reduce((d,m)=>({debit:d.debit+(m.debit||0),credit:d.credit+(m.credit||0),net:d.net+((m.credit||0)-(m.debit||0))}),{debit:0,credit:0,net:0}),c=(l==null?void 0:l.currency)||"XOF";return e.jsxs("div",{className:"p-12 bg-white text-black font-sans max-w-4xl mx-auto",children:[e.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-blue-800",children:(l==null?void 0:l.name)||"Restaurant"}),e.jsx("h2",{className:"text-xl font-semibold text-black",children:t("common:financial-statement")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(Wc,{className:"w-12 h-12 text-black mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-black",style:{color:"#000"},children:[t("common:period")," ",de(s.startDate.toISOString(),!1,n)," -"," ",de(s.endDate.toISOString(),!1,n)]})]})]})}),e.jsxs("table",{className:"w-full mb-8 border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-50",children:[e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:date")}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:source")}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:description")}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:reference")}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:debit")}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:credit")}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:t("common:gross")})]})}),e.jsx("tbody",{children:i.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:de(d.date)}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:d.source}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:d.description}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:d.reference}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-semibold	",children:d.debit>0&&G(d.debit,c)}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-semibold",children:d.credit>0&&G(d.credit,c)}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-bold",children:G(d.gross,c)})]},d.id))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Pn,{className:"w-6 h-6 text-red-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:t("common:total-debit")})]}),e.jsx("p",{className:"text-2xl font-bold text-black",style:{color:"#000"},children:G(o.debit,c)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Ua,{className:"w-6 h-6 text-green-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:t("common:total-credit")})]}),e.jsx("p",{className:"text-2xl font-bold text-black",style:{color:"#000"},children:G(o.credit,c)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Yi,{className:"w-6 h-6 text-blue-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:t("common:net-amount")})]}),e.jsx("p",{className:`text-2xl font-bold ${o.net>=0?"text-green-600":"text-red-600"}`,style:{color:"#000"},children:G(o.net,c)})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-6 text-center",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:(l==null?void 0:l.name)||"Restaurant"}),e.jsx("p",{className:"text-xs text-black",style:{color:"#000"},children:(l==null?void 0:l.address)||t("common:address-not-found")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-black",style:{color:"#000"},children:t("common:genereted-date",{date:de(new Date().toISOString(),!1,n)})}),e.jsxs("p",{className:"text-xs text-black",style:{color:"#000"},children:[t("common:all-right-reserved")," ",new Date().getFullYear()]})]})]})})]})}async function k0(a){const{default:t}=await Qi(async()=>{const{default:r}=await import("./index-BQPlt_fh.js").then(n=>n.aQ);return{default:r}},__vite__mapDeps([0,1,2,3]));try{const r=await t(a,{scale:2,backgroundColor:"#ffffff",logging:!1,useCORS:!0,windowWidth:1920,onclone:u=>{const p=u.createElement("style");p.innerHTML=`
          * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
          }
        `,u.head.appendChild(p)}}),n=210,i=297,s=r.height*n/r.width,l=new jc({orientation:s>i?"portrait":"landscape",unit:"mm"});let o=s,c=0,d=1;for(l.addImage(r.toDataURL("image/png"),"PNG",0,c,n,s,"","FAST"),o-=i;o>=0;)c=o-s,l.addPage(),l.addImage(r.toDataURL("image/png"),"PNG",0,c,n,s,"","FAST"),o-=i,d++;const m=new Date().toISOString().split("T")[0];l.save(`etats-financiers-${m}.pdf`)}catch(r){throw console.error("Error exporting to PDF:",r),r}}const nn=10;async function C0(a,t,r,n,i){try{const s=a.sort((x,g)=>x.createdAt-g.createdAt),l=new Map;let o=0,c=0;s.forEach(x=>{o+=x.subtotal,c+=o+x.taxTotal,x.taxes.forEach(g=>{const f=l.get(g.name);f?f.amount+=g.amount:l.set(g.name,{amount:g.amount,rate:g.rate})})});let d="";d+=`${(n==null?void 0:n.name)||"Restaurant"}
`,d+=t("comptability:tax-report")+`
`,d+=`${t("common:period")} ${de(i==null?void 0:i.from)} - ${de(i==null?void 0:i.to)}

`,d+=t("comptability:summary")+`
`,d+=`${t("comptability:total-ht")},${G(o,n==null?void 0:n.currency)}
`,d+=`${t("comptability:total-tax")},${G(c-o,n==null?void 0:n.currency)}
`,d+=`${t("comptability:total-ttc")},${G(c,n==null?void 0:n.currency)}

`,d+=t("comptability:tax-details")+`
`,d+=t("comptability:tax-name")+","+t("comptability:tax-rate")+","+t("comptability:tax-amount")+`
`,Array.from(l.entries()).forEach(([x,g])=>{d+=`${x},${(g.rate*100).toFixed(2)}%,${G(g.amount,n==null?void 0:n.currency)}
`}),d+=`
`,d+=t("comptability:orders-details")+`
`,d+=`${t("common:date")},${t("common:references")},${t("comptability:total-ht")},${t("comptability:tax-details")},${t("comptability:total-tax")},${t("comptability:total-ttc")}
`,s.forEach(x=>{const g=x.taxes.map(f=>`${f.name} (${(f.rate*100).toFixed(2)}%): ${G(f.amount,n==null?void 0:n.currency)}`).join(" | ");d+=[de(x.createdAt),`#${x.id}`,G(x.subtotal,n==null?void 0:n.currency),g,G(x.taxTotal,n==null?void 0:n.currency),G(x.total,n==null?void 0:n.currency)].join(",")+`
`});const m=new Blob(["\uFEFF"+d],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a"),p=URL.createObjectURL(m);u.setAttribute("href",p),u.setAttribute("download",`taxes-${de(i==null?void 0:i.from,!1,r)}-${de(i==null?void 0:i.to,!1,r)}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(s){throw console.error("Error generating tax report CSV:",s),new Error("Failed to generate tax report CSV")}}const D0=()=>{const{t:a,i18n:t}=P(),{settings:r,isLoading:n}=ee(),[i,s]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState(!1),[m,u]=h.useState(!1),[p,x]=h.useState(!1),[g,f]=h.useState(!1),v=t.language,{getDateOrders:b}=ir(),[y,w]=h.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),j=(k,M)=>{w({from:k,to:M})},D=async()=>{d(!0);try{const A=(await b({startDate:y.from,endDate:y.to})).filter(z=>{var R;return((R=z==null?void 0:z.taxes)==null?void 0:R.length)>0}).sort((z,R)=>R.createdAt-z.createdAt);s(A);const W=A.slice(0,nn);o(W),f(A.length>nn)}catch(k){console.error("Error fetching orders:",k)}finally{d(!1)}},N=()=>{if(!(m||!g)){u(!0);try{const k=l.length,M=i.slice(k,k+nn);o(A=>[...A,...M]),f(k+M.length<i.length)}catch(k){console.error("Error loading more orders:",k)}finally{u(!1)}}},I=async()=>{try{x(!0);const k=i.filter(M=>{var A;return((A=M==null?void 0:M.taxes)==null?void 0:A.length)>0});await C0(k,a,v,r,y)}catch(k){console.log(k)}finally{x(!1)}};h.useEffect(()=>{D()},[y]);const T=i.reduce((k,M)=>k+(M.taxTotal||0),0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(ca,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("comptability:total-taxes")}),e.jsx("p",{className:"text-2xl font-semibold",children:G(T,r==null?void 0:r.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Da,{startDate:y.from,endDate:y.to,onDateChange:j}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:n&&!r||p,variant:"secondary",onClick:I,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),a(p?"common:downloading":"comptability:download-taxes")]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:date")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:references")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:taxes")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:tax-total")}),e.jsxs("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:[a("comptability:amount")," (HT)"]}),e.jsxs("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:[a("comptability:amount")," (TTC)"]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(re,{mode:"wait",initial:!1,children:l.map((k,M)=>e.jsxs(O.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,delay:Math.min(M*.05,.3)},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:de(k.createdAt,!1,v)}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",k.id]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:k.taxes.map((A,W)=>e.jsx("div",{children:e.jsxs("p",{children:[A.name," (",A.rate,"%) :"," ",G(A.amount,r==null?void 0:r.currency)]})},W))}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:G(k.taxTotal,r==null?void 0:r.currency)}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:G(k.subtotal,r==null?void 0:r.currency)}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:G(k.subtotal+k.taxTotal,r==null?void 0:r.currency)})]},k.id))})})]})}),!c&&l.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:a("comptability:no-tax-found")})]}),g&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsxs(C,{variant:"outline",onClick:N,disabled:m,className:"w-full flex items-center justify-center gap-2",children:[m?e.jsx(Je,{className:"w-4 h-4 animate-spin"}):e.jsx(za,{className:"w-4 h-4"}),e.jsxs("span",{children:[a(m?"common:loading":"common:load-more"),l.length>0&&i.length>0&&e.jsxs("span",{className:"ml-1 text-gray-500",children:["(",l.length,"/",i.length,")"]})]})]})})]})]})},sn=10,S0=(a,t,r,n,i)=>{const s=a.reduce((g,f)=>{var v;return g+(((v=f.tip)==null?void 0:v.amount)||0)},0),l=s/a.length,o=[n("common:date"),n("common:references"),n("comptability:order-amount"),n("common:tip"),n("comptability:tip-percentage"),n("comptability:customer-name"),n("common:payment-method")].join(","),c=[`${n("common:period")},${de(r.from,t.language||"fr")} - ${de(r.to)}`,`${n("comptability:total-tips")},${G(s,t==null?void 0:t.currency)}`,`${n("comptability:tips-average")},${G(l,t==null?void 0:t.currency)}`,""].join(`
`),d=a.map(g=>{var f,v,b;return[de(g.createdAt,t.language||"fr"),g.id,G(g.total,t==null?void 0:t.currency),G(((f=g.tip)==null?void 0:f.amount)||0,t==null?void 0:t.currency),(v=g.tip)!=null&&v.percentage?`${g.tip.percentage}%`:n("common:personalised"),g.customerName,((b=g.paymentMethod)==null?void 0:b.name)||"-"].join(",")}).join(`
`),m=`${c}
${o}
${d}`,u=new Blob([m],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),x=URL.createObjectURL(u);p.setAttribute("href",x),p.setAttribute("download",`${n("common:tip")}-${de(r.from,!1,i)}-${de(r.to,!1,i)}.csv`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},A0=()=>{const{t:a,i18n:t}=P(),r=t.language,{settings:n,isLoading:i}=ee(),[s,l]=h.useState([]),[o,c]=h.useState([]),[d,m]=h.useState(!1),[u,p]=h.useState(!1),[x,g]=h.useState(!1),[f,v]=h.useState(!1),{getDateOrders:b}=ir(),[y,w]=h.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),j=(k,M)=>{w({from:k,to:M})},D=async()=>{try{g(!0);const k=s.filter(M=>!!(M!=null&&M.tip));S0(k,n,y,a,r)}catch(k){console.error("Error exporting tips:",k)}finally{g(!1)}},N=async()=>{m(!0);try{const A=(await b({startDate:y.from,endDate:y.to})).filter(z=>!!(z!=null&&z.tip)).sort((z,R)=>R.createdAt-z.createdAt);l(A);const W=A.slice(0,sn);c(W),v(A.length>sn)}catch(k){console.error("Error fetching orders:",k)}finally{m(!1)}},I=()=>{if(!(u||!f)){p(!0);try{const k=o.length,M=s.slice(k,k+sn);c(A=>[...A,...M]),v(k+M.length<s.length)}catch(k){console.error("Error loading more orders:",k)}finally{p(!1)}}};h.useEffect(()=>{N()},[y]);const T=s.reduce((k,M)=>{var A;return k+(((A=M.tip)==null?void 0:A.amount)||0)},0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(ca,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("comptability:total-taxes")}),e.jsx("p",{className:"text-2xl font-semibold",children:G(T,n==null?void 0:n.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Da,{startDate:y.from,endDate:y.to,onDateChange:j}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:i&&!n||x,variant:"secondary",onClick:D,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),a(x?"common:downloading":"comptability:download-tip")]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:date")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:references")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:tip")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:customer-name")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:payment-method")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(re,{mode:"wait",initial:!1,children:o.map((k,M)=>{var A,W,z;return e.jsxs(O.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,delay:Math.min(M*.05,.3)},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:de(k.createdAt,!1,(n==null?void 0:n.language)||"fr")}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",k.id]}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:[G((A=k==null?void 0:k.tip)==null?void 0:A.amount,n==null?void 0:n.currency),((W=k==null?void 0:k.tip)==null?void 0:W.percentage)&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",k.tip.percentage,"%)"]})]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:k.customerName}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:((z=k.paymentMethod)==null?void 0:z.name)||"-"})]},k.id)})})})]})}),!d&&o.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:a("comptability:no-tips-found")})]}),f&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsxs(C,{variant:"outline",onClick:I,disabled:u,className:"w-full flex items-center justify-center gap-2",children:[u?e.jsx(Je,{className:"w-4 h-4 animate-spin"}):e.jsx(za,{className:"w-4 h-4"}),e.jsxs("span",{children:[a(u?"common:loading":"common:load-more"),o.length>0&&s.length>0&&e.jsxs("span",{className:"ml-1 text-gray-500",children:["(",o.length,"/",s.length,")"]})]})]})})]})]})},ln=10,I0=(a,t,r,n,i)=>{const s=a.reduce((g,f)=>{var v;return g+Number(((v=f.delivery)==null?void 0:v.price)||0)},0),l=s/a.length,o=[n("common:date"),n("common:references"),n("comptability:order-amount"),n("comptability:delivery-amount"),n("comptability:customer-name"),n("common:payment-method")].join(","),c=[`${n("common:period")},${de(r.from)} - ${de(r.to)}`,`${n("comptability:total-delivery")},${G(s,t==null?void 0:t.currency)}`,`${n("comptability:delivery-average")},${G(l,t==null?void 0:t.currency)}`,""].join(`
`),d=a.map(g=>{var f,v;return[de(g.createdAt),g.id,G(g.total,t==null?void 0:t.currency),G(Number(((f=g.delivery)==null?void 0:f.price)||0),t==null?void 0:t.currency),g.customerName||g.customerPhone||g.customerEmail||"#",((v=g.paymentMethod)==null?void 0:v.name)||"-"].join(",")}).join(`
`),m=`${c}
${o}
${d}`,u=new Blob([m],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),x=URL.createObjectURL(u);p.setAttribute("href",x),p.setAttribute("download",`${n("common:delivery-report")}-${de(r.from,!1,i)}-${de(r.to,!1,i)}.csv`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},E0=()=>{const{t:a,i18n:t}=P(),{settings:r,isLoading:n}=ee(),[i,s]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState(!1),[m,u]=h.useState(!1),[p,x]=h.useState(!1),[g,f]=h.useState(!1),v=t.language,{getDateOrders:b}=ir(),[y,w]=h.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),j=(k,M)=>{w({from:k,to:M})},D=async()=>{try{x(!0);const k=i.filter(M=>{var A;return!!M.delivery&&Number(((A=M.delivery)==null?void 0:A.price)||0)!==0});I0(k,r,y,a,v)}catch(k){console.error("Error exporting delivery data:",k)}finally{x(!1)}},N=async()=>{d(!0);try{const A=(await b({startDate:y.from,endDate:y.to})).filter(z=>{var R;return!!z.delivery&&Number(((R=z.delivery)==null?void 0:R.price)||0)!==0}).sort((z,R)=>new Date(R.createdAt).getTime()-new Date(z.createdAt).getTime());s(A);const W=A.slice(0,ln);o(W),f(A.length>ln)}catch(k){console.error("Error fetching orders:",k)}finally{d(!1)}},I=()=>{if(!(m||!g)){u(!0);try{const k=l.length,M=i.slice(k,k+ln);o(A=>[...A,...M]),f(k+M.length<i.length)}catch(k){console.error("Error loading more orders:",k)}finally{u(!1)}}};h.useEffect(()=>{N()},[y]);const T=i.reduce((k,M)=>{var A;return k+Number(((A=M.delivery)==null?void 0:A.price)||0)},0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(ca,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("comptability:total-delivery")}),e.jsx("p",{className:"text-2xl font-semibold",children:G(T,r==null?void 0:r.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Da,{startDate:y.from,endDate:y.to,onDateChange:j}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:n&&!r||p,variant:"secondary",onClick:D,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),a(p?"common:downloading":"comptability:download-delivery")]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:date")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:references")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("order:delivery")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:customer-name")}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:a("comptability:delivery-zone")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(re,{mode:"wait",initial:!1,children:l.map((k,M)=>{var A,W;return e.jsxs(O.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,delay:Math.min(M*.05,.3)},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:de(k.createdAt,!1,v)}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",k.id]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:G(Number(((A=k.delivery)==null?void 0:A.price)||0),r==null?void 0:r.currency)}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:k.customerName||k.customerPhone||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:((W=k.delivery)==null?void 0:W.name)||"-"})]},k.id)})})})]})}),!c&&l.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:a("comptability:no-delivery-found")})]}),g&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsxs(C,{variant:"outline",onClick:I,disabled:m,className:"w-full flex items-center justify-center gap-2",children:[m?e.jsx(Je,{className:"w-4 h-4 animate-spin"}):e.jsx(za,{className:"w-4 h-4"}),e.jsxs("span",{children:[a(m?"common:loading":"common:load-more"),l.length>0&&i.length>0&&e.jsxs("span",{className:"ml-1 text-gray-500",children:["(",l.length,"/",i.length,")"]})]})]})})]})]})};function M0(){const{t:a}=P(),{settings:t,isLoading:r}=ee(),[n,i]=h.useState("transactions"),[s,l]=h.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),[o,c]=h.useState(!1),[d,m]=h.useState(!1),[u,p]=h.useState([]),x=h.useRef(null),g=[{id:"transactions",label:a("comptability:transaction")},{id:"tax",label:a("comptability:tax")},{id:"tips",label:a("comptability:tip")},{id:"delivery",label:a("comptability:delivery")}],{transactions:f,stats:v,isLoading:b,isLoadingMore:y,refreshData:w,loadMore:j,hasMore:D,displayedCount:N,totalCount:I,fetchAllTransactions:T}=N0(s),k=[...f].sort((E,q)=>{const S=E.createdAt instanceof Date?E.createdAt:new Date(E.createdAt);return(q.createdAt instanceof Date?q.createdAt:new Date(q.createdAt)).getTime()-S.getTime()}),M=(E,q)=>{l({startDate:E,endDate:q})},A=async E=>{try{await fa.createTransaction(E),m(!1),w(),L.success(a("comptability:transaction-successfully-add"))}catch(q){console.error("Error saving transaction:",q),L.error(a("comptability:transaction-saving-error"))}},W=async(E,q)=>{try{await fa.updateTransaction(E,q),w(),L.success(a("comptability:transaction-successfully-update"))}catch(S){console.error("Error updating transaction:",S),L.error(a("comptability:transaction-updating-error"))}},z=async E=>{try{await fa.deleteTransaction(E),w(),L.success(a("comptability:transaction-successfully-deleted"))}catch(q){console.error("Error deleting transaction:",q),L.error(a("comptability:transaction-deleting-error"))}},R=async()=>{if(t)try{c(!0);const E=await T();p(E);const q=e.jsx(Ti,{transactions:E,period:s,settings:t}),S=document.createElement("div");S.style.position="absolute",S.style.left="-9999px",document.body.appendChild(S);const{createRoot:$}=await Qi(async()=>{const{createRoot:_}=await import("./index-BQPlt_fh.js").then(K=>K.c);return{createRoot:_}},__vite__mapDeps([0,1,2,3])),Z=$(S);await new Promise(_=>{Z.render(e.jsx("div",{ref:x,children:q})),setTimeout(_,100)}),await k0(S),document.body.removeChild(S),Z.unmount(),L.success(a("comptability:financial-statements-successfully-export"))}catch(E){console.error("Error exporting statement:",E),L.error(a("comptability:export-error"))}finally{c(!1)}},B=()=>{switch(n){case"assets":return e.jsx(j0,{});case"debts":return e.jsx(w0,{});case"tax":return e.jsx(D0,{});case"tips":return e.jsx(A0,{});case"delivery":return e.jsx(E0,{});default:return e.jsxs(e.Fragment,{children:[e.jsx(v0,{stats:v,isLoading:b}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(Da,{startDate:s.startDate,endDate:s.endDate,onDateChange:M}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{onClick:()=>m(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("comptability:add-transaction")]}),e.jsxs(C,{disabled:r&&!t||o,variant:"secondary",onClick:R,children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),a(o?"common:downloading":"comptability:download-financial-assments")]})]})]}),e.jsx(y0,{transactions:k,isLoading:b,isLoadingMore:y,onUpdate:W,onDelete:z,hasMore:D,onLoadMore:j,displayedCount:N,totalCount:I})]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(gt,{tabs:g,activeTab:n,onChange:i}),B(),d&&e.jsx(Wo,{onSave:A,onCancel:()=>m(!1)}),t&&u.length>0&&e.jsx("div",{className:"hidden",children:e.jsx("div",{ref:x,children:e.jsx(Ti,{transactions:u,period:s,settings:t})})})]})}function T0({variants:a,categories:t,isLoading:r,onEdit:n,onDelete:i}){const s=l=>l.map(o=>{const c=t.find(d=>d.id===o);return c?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 border border-blue-100 dark:border-blue-800",children:c.name},o):null});return r?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((l,o)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700/50"},o))}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"space-y-3",children:e.jsx(re,{mode:"popLayout",children:a.map((l,o)=>e.jsx(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:o*.05},className:"group relative bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700/50 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(dd,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[l.name,e.jsx(wa,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:s(l.categoryIds)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{onClick:()=>n(l),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(Ca,{className:"w-4 h-4"})}),e.jsx(C,{onClick:()=>i(l.id),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:l.values.map((c,d)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:c},d))})]})},l.id))})})})}function O0(a){var R,B;const{t}=P(),{variant:r,categories:n,onSave:i,onCancel:s,loadMoreCategories:l,hasMoreCategories:o=!1}=a,{items:c}=Bn(),[d,m]=h.useState(!1),[u,p]=h.useState(0),x=E=>{if(!E)return null;try{const S=(E.inventory?JSON.parse(E.inventory):E.values.map(()=>[{itemId:"",ratio:1}])).map($=>Array.isArray($)?$:[$]);return{...E,inventory:S}}catch(q){return console.error("Error parsing inventory:",q),{...E,inventory:E.values.map(()=>[{itemId:"",ratio:1}])}}},{register:g,handleSubmit:f,watch:v,setValue:b,formState:{errors:y,isDirty:w}}=Ze({defaultValues:x(r)||{name:"",type:"",values:[""],prices:[0],inventory:[[{itemId:"",ratio:1}]],categoryIds:[],isRequired:!1}}),j=v("values"),D=v("prices"),N=v("inventory"),I=v("categoryIds");h.useEffect(()=>{j.length===0?p(0):u>=j.length&&p(j.length-1)},[j.length,u]);const T=()=>{b("values",[...j,""],{shouldDirty:!0}),b("prices",[...D,0],{shouldDirty:!0}),b("inventory",[...N,[{itemId:"",ratio:1}]],{shouldDirty:!0}),p(j.length)},k=E=>{b("values",j.filter((q,S)=>S!==E),{shouldDirty:!0}),b("prices",D.filter((q,S)=>S!==E),{shouldDirty:!0}),b("inventory",N.filter((q,S)=>S!==E),{shouldDirty:!0})},M=E=>{const q=[...N||[]],S=q[E]||[];q[E]=[...S,{itemId:"",ratio:1}],b("inventory",q,{shouldDirty:!0})},A=(E,q)=>{const S=[...N||[]];S[E]&&(S[E]=S[E].filter(($,Z)=>Z!==q),b("inventory",S,{shouldDirty:!0}))},W=async()=>{if(l&&!d){m(!0);try{await l()}finally{m(!1)}}},z=E=>{const q={...E,inventory:JSON.stringify(E.inventory)};i(q)};return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(hn,{className:"w-5 h-5 text-blue-500"}),t(r?"variant:update-variant":"variant:new-variant")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t(r?"variant:update-variant-option":"variant:add-new-variant")})]}),e.jsx("button",{onClick:s,className:"absolute right-4 top-4 p-2 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f(z),className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(ol,{className:"w-4 h-4"}),t("variant:variant-name")]}),e.jsx("input",{type:"text",...g("name",{required:"Le nom est requis"}),className:"w-full px-4 py-2.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow",placeholder:"ex: Taille, Couleur, Options..."}),y.name&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),y.name.message]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...g("isRequired"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:t("variant:variant-required")})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(On,{className:"w-4 h-4"}),t("variant:variant-category-applicable")]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-48 overflow-y-auto p-1 border rounded-lg dark:border-gray-700",children:n.map(E=>e.jsxs("label",{className:`
                      group flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all duration-200
                      ${I!=null&&I.includes(E.id)?"bg-blue-50 border-blue-500 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
                    `,children:[e.jsx("input",{type:"checkbox",value:E.id,...g("categoryIds",{required:"Sélectionnez au moins une catégorie"}),className:"rounded-md border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:E.name})]},E.id))}),o&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(C,{type:"button",onClick:W,disabled:d,className:"px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/20 flex items-center gap-2",children:[d?e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):e.jsx(za,{className:"w-4 h-4"}),t("common:load-more")]})}),y.categoryIds&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),y.categoryIds.message]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(hn,{className:"w-4 h-4"}),t("variant:variant-and-value")]}),e.jsxs(C,{type:"button",onClick:T,className:"px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),t("common:add")]})]}),e.jsxs("div",{className:"border rounded-lg dark:border-gray-700 overflow-hidden",children:[j.length>0&&e.jsx("div",{className:"flex overflow-x-auto bg-gray-50 dark:bg-gray-800 border-b dark:border-gray-700",children:j.map((E,q)=>e.jsxs("button",{type:"button",onClick:()=>p(q),className:`flex items-center gap-2 px-4 py-2.5 text-sm whitespace-nowrap ${u===q?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[e.jsx("span",{className:"truncate max-w-32",children:E||`Option ${q+1}`}),j.length>1&&e.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),k(q)},className:"p-1 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(ie,{className:"w-3.5 h-3.5"})})]},Math.random()))}),j.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block",children:t("common:value-name")}),e.jsx("input",{value:v(`values.${u}`),...g(`values.${u}`,{required:"La valeur est requise"}),className:"w-full px-4 py-2.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow",placeholder:`Option ${u+1}`}),((R=y.values)==null?void 0:R[u])&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:(B=y.values[u])==null?void 0:B.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block",children:t("common:price-adjustment")}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"+"}),e.jsx("input",{type:"number",value:v(`prices.${u}`),...g(`prices.${u}`,{valueAsNumber:!0}),className:"w-full pl-8 pr-4 py-2.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow",placeholder:"0.00",step:"0.01"})]})]})]}),e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),t("variant:inventory-connections")]}),e.jsxs(C,{type:"button",onClick:()=>M(u),className:"px-3 py-1.5 text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(me,{className:"w-3.5 h-3.5 mr-1"}),t("common:add-article")]})]}),((N==null?void 0:N[u])||[]).length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 border border-dashed rounded-lg dark:border-gray-700",children:[e.jsx($e,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:t("variant:no-inventory-connections")}),e.jsxs(C,{type:"button",onClick:()=>M(u),className:"mt-3 px-3 py-1.5 text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(me,{className:"w-3.5 h-3.5 mr-1"}),t("common:add-article")]})]}):e.jsx("div",{className:"space-y-3 border rounded-lg p-3 dark:border-gray-700",children:((N==null?void 0:N[u])||[]).map((E,q)=>e.jsx("div",{className:"flex gap-2 items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-7",children:e.jsxs("select",{value:v(`inventory.${u}.${q}.itemId`),...g(`inventory.${u}.${q}.itemId`),className:"w-full px-3 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow text-sm",children:[e.jsx("option",{value:"",children:t("common:select-items")}),c.map(S=>e.jsxs("option",{value:S.id,children:[S.name," (",S.quantity," ",S.unit,")"]},S.id))]})}),e.jsx("div",{className:"col-span-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"×"}),e.jsx("input",{type:"number",value:v(`inventory.${u}.${q}.ratio`),...g(`inventory.${u}.${q}.ratio`,{valueAsNumber:!0,min:.01}),className:"w-full pl-7 pr-2 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow text-sm",placeholder:"1.00",step:"0.01"})]})}),e.jsx("div",{className:"col-span-1 flex justify-end",children:N[u].length>1&&e.jsx("button",{type:"button",onClick:()=>A(u,q),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:e.jsx(Ie,{className:"w-4 h-4"})})})]})},q))})]})]}),j.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[e.jsx(Zi,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-3"}),e.jsx("h3",{className:"text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("variant:no-values-yet")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4",children:t("variant:add-values-description")}),e.jsxs(C,{type:"button",onClick:T,className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 dark:bg-blue-900/30 dark:hover:bg-blue-900/40 dark:text-blue-300",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),t("variant:add-first-value")]})]})]}),y.values&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),t("variant:variant-value-required")]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(C,{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:t("common:cancel")}),e.jsx(C,{type:"submit",disabled:!w,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white shadow-sm disabled:opacity-50",children:t(r?"common:update":"common:add")})]})})]})]})})}function P0(){const{t:a}=P(),{variants:t,isLoading:r,hasMore:n,loadMoreVariants:i,addVariant:s,updateVariant:l,deleteVariant:o,refreshVariants:c}=Ui(),{categories:d,loadMoreCategories:m,hasMore:u}=mt(),[p,x]=h.useState(!1),[g,f]=h.useState(null),[v,b]=h.useState({isOpen:!1,variantId:null}),[y,w]=h.useState(""),[j,D]=h.useState([]),[N,I]=h.useState(!1),[T,k]=h.useState(!1);h.useEffect(()=>{const S=setTimeout(()=>{y.trim()!==""?M(y):(I(!1),D([]))},500);return()=>clearTimeout(S)},[y]);const M=async S=>{if(!(S.trim().length<2)){k(!0),I(!0);try{const $=await wc.searchVariants(S);D($)}catch($){console.error("Error searching variants:",$)}finally{k(!1)}}},A=()=>{w(""),I(!1),D([])},W=async S=>{try{g?await l(g.id,S):await s(S),x(!1),f(null),N&&y.trim()!==""&&M(y)}catch($){console.error("Error saving variant:",$)}},z=async()=>{v.variantId&&(await o(v.variantId),b({isOpen:!1,variantId:null}),N&&y.trim()!==""&&M(y))},R=()=>{!N&&n&&!r&&i()},B=N?j:t,E=!N&&n&&!r,q=N?T:r;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("variant:variant-title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("variant:variant-description")})]}),e.jsxs(C,{onClick:()=>x(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("variant:add-variant")]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:y,onChange:S=>w(S.target.value),placeholder:a("variant:search-placeholder"),className:"w-full pl-10 pr-10 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow"}),y&&e.jsx("button",{onClick:A,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(ie,{className:"h-5 w-5"})})]}),N&&e.jsx("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:T?e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ce,{className:"w-3 h-3 mr-2 animate-spin"}),a("variant:searching")]}):e.jsx("span",{children:a("common:search-results",{count:j.length})})})]}),e.jsx(T0,{variants:B,categories:d,isLoading:q&&B.length===0,onEdit:f,onDelete:S=>b({isOpen:!0,variantId:S})}),N&&!T&&j.length===0&&e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("common:no-search-results")}),e.jsx(C,{variant:"outline",onClick:A,className:"mt-4",children:a("variant:clear-search")})]}),E&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs(C,{onClick:R,className:"px-4 py-2",children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),a("common:load-more")]})}),!N&&r&&t.length>0&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("div",{className:"animate-spin",children:e.jsx(Ce,{className:"w-6 h-6 text-blue-500"})})}),(p||g)&&e.jsx(O0,{variant:g,categories:d,loadMoreCategories:m,hasMoreCategories:u,onSave:W,onCancel:()=>{x(!1),f(null)}}),e.jsx(Ha,{isOpen:v.isOpen,onClose:()=>b({isOpen:!1,variantId:null}),onConfirm:z,title:a("variant:delete-variant"),message:a("variant:confirm-delete-variant")})]})}function L0(a){if(a===0)return"0 B";const t=1024,r=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(a)/Math.log(t));return`${parseFloat((a/Math.pow(t,n)).toFixed(2))} ${r[n]}`}const R0={en:"en-US",fr:"fr-FR"};function F0(a,t="fr-FR"){return new Date(a).toLocaleDateString(t,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function B0({files:a,isLoading:t,onDelete:r,onSelect:n,selectedFiles:i,onToggleSelect:s}){return t?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((l,o)=>e.jsx("div",{className:"h-20 animate-pulse rounded-xl bg-gray-100 dark:bg-gray-800"},o))}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(dn,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Aucun fichier"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Commencez par ajouter des fichiers"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(re,{mode:"popLayout",children:a.map(l=>e.jsx(O.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},onClick:()=>s(l.id),className:`
              group relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden
              border border-gray-200 dark:border-gray-700
              transition-all duration-200
              hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600
              cursor-pointer
              ${i.has(l.id)?"ring-2 ring-blue-500 dark:ring-blue-400":""}
            `,children:e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx("div",{className:`
                w-6 h-6 rounded-full border-2 mr-4
                transition-colors duration-200 
                ${i.has(l.id)?"border-blue-500 bg-blue-500 dark:border-blue-400 dark:bg-blue-400":"border-gray-300 dark:border-gray-600"}
                flex items-center justify-center
              `,children:i.has(l.id)&&e.jsx(Ht,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"h-16 w-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100 dark:bg-gray-700",children:e.jsx("img",{src:l.url,alt:l.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs("div",{className:"flex-1 min-w-0 ml-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:l.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:L0(l.size)}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:F0(l.createdAt,R0[Nc.language])})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n?e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),n(l.url)},className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white dark:bg-gray-700/90 dark:hover:bg-gray-700",children:e.jsx(Ht,{className:"h-4 w-4"})}):e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),window.open(l.url,"_blank")},className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white dark:bg-gray-700/90 dark:hover:bg-gray-700",children:e.jsx(dn,{className:"h-4 w-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:o=>{o.stopPropagation(),r(l.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ie,{className:"h-4 w-4"})})]})]})},l.id))})})}function G0(a){const{t}=P(),{onClose:r,onUpload:n,maxSizeMB:i=10,acceptedFileTypes:s=["image/*"]}=a,[l,o]=h.useState({}),[c,d]=h.useState(!1),m=h.useCallback(async g=>{if(g.length===0)return;d(!0);const f={};g.forEach(v=>{f[v.name]={progress:0}}),o(f);try{const v=g.map(async b=>{const y=setInterval(()=>{o(w=>{var D;const j=((D=w[b.name])==null?void 0:D.progress)||0;return j<90?{...w,[b.name]:{...w[b.name],progress:Math.min(j+10,90)}}:w})},500);try{await n([b]),clearInterval(y),o(w=>({...w,[b.name]:{progress:100,complete:!0}}))}catch{clearInterval(y),o(j=>({...j,[b.name]:{progress:0,error:"Failed to upload file"}}))}});await Promise.all(v),setTimeout(r,1500)}catch(v){console.error("Upload error:",v)}finally{d(!1)}},[n,r]),{getRootProps:u,getInputProps:p,isDragActive:x}=Fn({onDrop:m,accept:{"image/*":s},maxSize:i*1024*1024,disabled:c});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-xl p-6 shadow-xl",children:[e.jsx("button",{onClick:r,disabled:c,className:"absolute right-4 top-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-xl font-semibold mb-6",children:t("media:add-media")}),e.jsxs("div",{...u(),className:`
            relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8
            transition-all
            ${x?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}
            ${c?"opacity-50 cursor-not-allowed":""}
          `,children:[e.jsx("input",{...p()}),e.jsx(or,{className:`h-12 w-12 mb-4 ${x?"text-blue-500 dark:text-blue-400":"text-gray-400"}`}),e.jsx("p",{className:"text-center text-gray-900 dark:text-gray-100",children:x?"Déposez les fichiers ici...":e.jsxs(e.Fragment,{children:[t("media:dnd-descrption"),e.jsx("br",{}),e.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:t("media:select-files")})]})}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-bold",children:t("media:file-type",{maxSize:i})})]}),e.jsx(re,{children:Object.entries(l).length>0&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 space-y-4 overflow-hidden",children:Object.entries(l).map(([g,f])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300 truncate",children:g}),f.error?e.jsxs("span",{className:"text-red-500 flex items-center",children:[e.jsx(pt,{className:"w-4 h-4 mr-1"}),f.error]}):e.jsxs("span",{className:"text-gray-500",children:[f.progress,"%"]})]}),e.jsx(Nl,{progress:f.progress,isComplete:f.complete})]},g))})})]})})}function q0(a){const{t,i18n:r}=P(),{selectedCount:n,onUpload:i,onDelete:s,onClearSelection:l}=a;return r.language,n===0?e.jsxs(C,{onClick:i,children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),t("media:add-media")]}):e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n," ",t("commont:element"),n>1?"s":""," ",t("common:selected"),n>1?"s":""]}),e.jsxs(C,{variant:"danger",onClick:s,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),t("common:delete")]}),e.jsx(C,{variant:"secondary",onClick:l,children:t("common:cancel")})]})}function $0(a=12){const[t,r]=h.useState([]),[n,i]=h.useState(!0),[s,l]=h.useState(1),[o,c]=h.useState({});h.useEffect(()=>{d()},[]);const d=async()=>{try{i(!0);const g=await Pa.getAllMedia();r(g)}catch(g){console.error("Error loading media files:",g),L.error("Erreur chargement gallerie")}finally{i(!1)}},m=async g=>{try{const f=g.map(v=>Pa.uploadFile(v,b=>{c(y=>({...y,[v.name]:b}))}));return await Promise.all(f),await d(),l(1),c({}),!0}catch(f){throw console.error("Upload error:",f),c({}),f}},u=async g=>{try{await Pa.deleteFiles(g),await d();const f=Math.ceil((t.length-g.length)/a);s>f&&l(Math.max(1,f))}catch(f){throw console.error("Delete error:",f),f}},p=Math.ceil(t.length/a);return{files:t.slice((s-1)*a,s*a),totalFiles:t.length,currentPage:s,totalPages:p,setCurrentPage:l,isLoading:n,uploadFiles:m,deleteFiles:u,uploadProgress:o,refreshFiles:d}}const z0=12;function U0(){var I;const{t:a}=P(),[t,r]=h.useState(!0),[n,i]=h.useState(""),[s,l]=h.useState(!1),[o,c]=h.useState(new Set),[d,m]=h.useState({isOpen:!1,isBulk:!1}),{files:u,totalFiles:p,currentPage:x,totalPages:g,setCurrentPage:f,isLoading:v,uploadFiles:b,deleteFiles:y}=$0(z0),w=u.filter(T=>T.name.toLowerCase().includes(n.toLowerCase())),j=async T=>{try{await b(T),l(!1)}catch(k){console.error("Upload error:",k)}},D=async()=>{var T;if((T=d.fileIds)!=null&&T.length)try{await y(d.fileIds),c(new Set),L.success(d.isBulk?a("media:files-deleted"):a("media:file-deleted"))}catch(k){console.error("Delete error:",k)}finally{m({isOpen:!1,isBulk:!1})}},N=T=>{const k=new Set(o);k.has(T)?k.delete(T):k.add(T),c(k)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("media:media-title")}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p," ",a("media:media-files")]})]}),e.jsx(q0,{selectedCount:o.size,onUpload:()=>l(!0),onDelete:()=>m({isOpen:!0,isBulk:!0,fileIds:Array.from(o)}),onClearSelection:()=>c(new Set)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(He,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a("common:search"),value:n,onChange:T=>i(T.target.value),className:"w-full rounded-lg border pl-10 pr-4 py-2 dark:border-gray-700 dark:bg-gray-800"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:`p-2 rounded-lg ${t?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(tl,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(!1),className:`p-2 rounded-lg ${t?"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"}`,children:e.jsx(On,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[t?e.jsx(ml,{files:w,isLoading:v,onDelete:T=>m({isOpen:!0,isBulk:!1,fileIds:[T]}),selectedFiles:o,onToggleSelect:N}):e.jsx(B0,{files:w,isLoading:v,onDelete:T=>m({isOpen:!0,isBulk:!1,fileIds:[T]}),selectedFiles:o,onToggleSelect:N}),g>1&&e.jsx("div",{className:"mt-6 pt-6 border-t dark:border-gray-700",children:e.jsx(da,{currentPage:x,totalPages:g,onPageChange:f})})]}),s&&e.jsx(G0,{onClose:()=>l(!1),onUpload:j,maxSizeMB:5,acceptedFileTypes:[".png",".jpg",".jpeg",".gif"]}),e.jsx(Fa,{isOpen:d.isOpen,title:d.isBulk?a("media:delete-files"):a("media:delete-file"),message:d.isBulk?a("media:deleting-files-confirmation",{count:(I=d.fileIds)==null?void 0:I.length}):a("media:deleting-confirmation"),confirmLabel:a("common:delete"),onConfirm:D,onCancel:()=>m({isOpen:!1,isBulk:!1})})]})}function H0({staff:a,isLoading:t,onEdit:r,onDelete:n}){const{user:i}=dr(),{isStaff:s,staffData:l}=xt(),{t:o}=P("common");return t?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((c,d)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},d))}):e.jsx("div",{className:"space-y-4",children:e.jsx(re,{mode:"popLayout",children:a.map(c=>e.jsx(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Kc,{className:"w-10 h-10 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:c.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(dt,{className:"w-4 h-4 mr-1"}),c.email]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(gs,{variant:c.role==="admin"?"success":"default",children:c.role==="admin"?o("Admin"):o("Staff")}),e.jsx(gs,{variant:c.active?"success":"warning",children:c.active?o("Actif"):o("Inactif")}),e.jsxs("div",{className:"flex gap-2",children:[(s&&(l==null?void 0:l.role)==="admin"||!s)&&e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>r(c),children:e.jsx(Ca,{className:"w-4 h-4"})}),(i==null?void 0:i.email)===c.email&&e.jsx(C,{variant:"danger",size:"sm",onClick:()=>n(c),children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})]})},c.id))})})}function V0({staff:a,onSave:t,onCancel:r}){const{t:n}=P(),{register:i,handleSubmit:s,formState:{errors:l,isSubmitting:o}}=Ze({defaultValues:a?{name:a.name,email:a.email,role:a.role}:{role:"staff"}});return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n(a?"personal:update-menber":"personal:new-personal")}),e.jsx("button",{onClick:r,children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:s(t),className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:n("personal:personal-name")}),e.jsxs("div",{className:"relative",children:[e.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",...i("name",{required:n("personal:name-required"),minLength:{value:2,message:n("personal:name-min-length")}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"John Doe"})]}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:n("personal:personal-email")}),e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"email",...i("email",{required:n("personal:email-required"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"john@example.com",disabled:!!a})]}),l.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.email.message})]}),!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:n("personal:personal-password")}),e.jsxs("div",{className:"relative",children:[e.jsx(kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"password",...i("password",{required:n("personal:password-required"),minLength:{value:6,message:n("personal:min-password-length")}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"••••••••"})]}),l.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:n("personal:personal-role")}),e.jsxs("div",{className:"relative",children:[e.jsx(ll,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsxs("select",{...i("role"),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700 appearance-none",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-6 pt-4 border-t dark:border-gray-700",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:r,children:n("common:cancel")}),e.jsx(C,{type:"submit",disabled:o,children:n(o?"common:saving":a?"common:update":"personal:create-account")})]})]})]})})}function W0(){const[a,t]=h.useState([]),[r,n]=h.useState(!0);h.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const c=await Oa.getAll();t(c)}catch(c){console.error("Error loading staff:",c)}finally{n(!1)}};return{staff:a,isLoading:r,createStaff:async c=>{try{await Oa.createStaffMember(c.email,c.password,{name:c.name,role:c.role,active:!0,createdAt:new Date().toDateString(),updatedAt:new Date().toDateString(),permissions:[]}),await i()}catch(d){throw console.error("Error creating staff:",d),d}},updateStaff:async(c,d)=>{try{await Oa.updateStaffMember(c,d),await i()}catch(m){throw console.error("Error updating staff:",m),m}},deleteStaff:async c=>{try{await Oa.deleteStaffMember(c),await i()}catch(d){throw console.error("Error deleting staff:",d),d}},refreshStaff:i}}function _0(){var b;const{t:a}=P(),{staff:t,isLoading:r,createStaff:n,updateStaff:i,deleteStaff:s}=W0(),{isStaff:l,staffData:o}=xt(),[c,d]=h.useState(!1),[m,u]=h.useState(null),[p,x]=h.useState({isOpen:!1,member:null}),g=async y=>{try{await n(y),d(!1),L.success(a("personal:menber-create-successfully"))}catch(w){if(w!=null&&w.code)switch(w.code){case"auth/email-already-in-use":L.error(a("personal:email-already-in-use"));break;case"auth/invalid-email":L.error(a("personal:invalid-email"));break;case"auth/weak-password":L.error(a("personal:weak-password"));break;case"auth/operation-not-allowed":L.error(a("personal:operation-not-allowed"));break;case"auth/network-request-failed":L.error(a("personal:network-request-failed"));break;default:L.error(a("personal:an-error-occurred")),console.error("Firebase Auth Error:",w)}else L.error((w==null?void 0:w.message)||a("personal:an-error-occurred")),console.error("Error creating staff:",w)}},f=async y=>{if(m)try{await i(m.id,y),u(null),d(!1),L.success(a("personal:menber-successfully-update"))}catch(w){console.error("Error updating staff:",w),L.error(a("personal:error-during-updating"))}},v=async()=>{if(p.member)try{await s(p.member.id),L.success(a("personal:perosnal-menber-successfully-deleted"))}catch(y){console.error("Error deleting staff:",y),L.error(a("personal:error-during-deleting"))}finally{x({isOpen:!1,member:null})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("personal:human-resources-management")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("personal:human-resources-management-description")})]}),(l&&(o==null?void 0:o.role)==="admin"||!l)&&e.jsxs(C,{onClick:()=>d(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("personal:add-staff")]})]}),e.jsx(H0,{staff:t,isLoading:r,onEdit:y=>{u(y),d(!0)},onDelete:y=>x({isOpen:!0,member:y})}),(l&&(o==null?void 0:o.role)==="admin"||!l)&&t.length>0&&e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(la,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-400",children:a("personal:warning-title")})]}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-bold",children:a("personal:warning-description")})})]}),c&&e.jsx(V0,{staff:m,onSave:m?f:g,onCancel:()=>{d(!1),u(null)}}),e.jsx(Ha,{isOpen:p.isOpen,onClose:()=>x({isOpen:!1,member:null}),onConfirm:v,title:"Supprimer le membre",message:`Êtes-vous sûr de vouloir supprimer ${(b=p.member)==null?void 0:b.name} ? Cette action est irréversible.`})]})}const Oi=new Set(["Wave","PayTech","Stripe","Paiement à la livraison","CinetPay","Money Fusion","Paiement à la caisse"]),K0=({value:a,onChange:t,disabled:r,t:n})=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium",children:n("payment:payment-type")}),e.jsx("select",{value:a,onChange:i=>t(i.target.value),disabled:r,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:["Paiement à la livraison","CinetPay","PayTech","Stripe","Wave","Money Fusion","Paiement à la caisse","Autres"].map(i=>e.jsx("option",{value:i,children:n(`order:payment-method-names.${i}`)},i))})]});function Y0({method:a,onSave:t,onCancel:r}){const{t:n}=P(),i=a!=null&&a.name&&Oi.has(a.name)?a.name:"Autres",[s,l]=h.useState(i),{control:o,register:c,handleSubmit:d,formState:{errors:m,isSubmitting:u}}=Ze({defaultValues:{name:(a==null?void 0:a.name)||"",qrCode:(a==null?void 0:a.qrCode)||"",url:(a==null?void 0:a.url)||"",isDefault:(a==null?void 0:a.isDefault)||!1,apiKey:(a==null?void 0:a.apiKey)||"",apiSecret:(a==null?void 0:a.apiSecret)||"",instruction:(a==null?void 0:a.instruction)||""}}),p=h.useMemo(()=>!!(a!=null&&a.name),[a==null?void 0:a.name]),x=async f=>{try{const v=await Cc.getActivePaymentMethods(),b={...f,name:Oi.has(s)?s:f.name.trim()};if(!b.name){L.error(n("payment:name-is-required"));return}if(v.some(w=>w.name.toLowerCase()===b.name.toLowerCase()&&w.id!==(a==null?void 0:a.id))){L.error(n("payment:payment-methode-with-same-name-already-exist"));return}await t(b)}catch(v){v.code==="payment/duplicate-name"?L.error(n("payment:methode-with-same-name-already-exist")):L.error(n("payment:an-error-occur"))}},g=()=>{switch(s){case"Money Fusion":return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"API URL"}),e.jsx("input",{type:"url",...c("url",{required:"L'URL de l'API est requise"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"https://api.moneyfusion.com/v1"}),m.url&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.url.message})]})});case"Wave":return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("payment:wave-payment-link")}),e.jsx("input",{type:"url",...c("url",{required:n("payment:wave-link-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"https://pay.wave.com/m/xxxxxxxxxxxxxx/c/sn/"}),m.url&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.url.message}),e.jsx("small",{className:"text-red-800 dark:text-red-400",children:n("payment:past-merchand-wavepayment-link")})]})});case"PayTech":case"Stripe":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s==="Stripe"?"PUBLIC KEY":"API KEY"}),e.jsx("input",{type:"text",...c("apiKey",{required:"API key obligatoire"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:s==="Stripe"?"pk_live_VePHdqKTYQjKNInc7u56JBrQ":"1afac858d4fa5ec74e3e3734c3829793eb6bd5f4602c84ac4a5069369812915e"}),m.apiKey&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.apiKey.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:s==="Stripe"?"SECRET KEY":"API SECRET"}),e.jsx("input",{type:"text",...c("apiSecret",{required:n("common:filed-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:s==="Stripe"?"sk_live_VePHdqKTYQjKNInc7u56JBrQ":"96bc36c11560f2151c4b43eee310cefabc2e9e9000f7e315c3ca3d279e3f98ac"}),m.apiSecret&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.apiSecret.message})]})]});case"CinetPay":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("payment:site-id")}),e.jsx("input",{type:"text",...c("apiSecret",{required:n("common:filed-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"96bc36c11560f2151c4b43eee310cefabc2e9e9000f7e315c3ca3d279e3f98ac"}),m.apiSecret&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.apiSecret.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("payment:api-key")}),e.jsx("input",{type:"text",...c("apiKey",{required:n("common:api-key-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"1afac858d4fa5ec74e3e3734c3829793eb6bd5f4602c84ac4a5069369812915e"}),m.apiKey&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.apiKey.message})]})]});case"Autres":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("payment:methode-name")}),e.jsx("input",{type:"text",...c("name",{required:n("payment:name-is-required")}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),m.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:m.name.message})]}),e.jsx(Dc,{name:"qrCode",control:o,render:({field:f})=>e.jsx(ya,{value:f.value,onChange:f.onChange,label:n("payment:payment-qr-code-title"),description:n("payment:recommended-format")})})]});default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[90vw] max-w-2xl h-[75vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:n(a?"payment:update-payment-method":"payment:new-payment-method")}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:d(x),className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:[e.jsx(K0,{value:s,onChange:l,disabled:p,t:n}),g(),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n("payment:instruction-to-user")}),e.jsx("textarea",{...c("instruction"),rows:2,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:n("payment:instruction-placeholder")})]})]}),e.jsx("div",{className:"p-4 md:p-6 border-t dark:border-gray-700 mt-auto",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:r,children:n("common:cancel")}),e.jsx(C,{type:"submit",disabled:u,children:n(u?"common:saving":a?"common:update":"common:add")})]})})]})]})})}function Q0(a){const{t}=P(),{methods:r,isLoading:n,onEdit:i,onDelete:s}=a;return n?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((l,o)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},o))}):e.jsx("div",{className:"space-y-4",children:e.jsx(re,{mode:"popLayout",children:r.map(l=>e.jsxs(O.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[l.qrCode?e.jsx("img",{src:l.qrCode,alt:`QR Code for ${l.name}`,className:"w-16 h-16 object-contain rounded-lg bg-gray-50 dark:bg-gray-700 p-2"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center rounded-lg bg-gray-50 dark:bg-gray-700",children:e.jsx(zt,{className:"w-8 h-8 text-gray-400"})}),e.jsx("div",{children:e.jsxs("h3",{className:"font-medium text-lg",children:[t(`order:payment-method-names.${l.name}`)===`order:payment-method-names.${l.name}`?t(`order:payment-method-names.${l.name}`):l.name,l.isDefault&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:t("common:payment-method-default")})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>i(l),disabled:l.isDefault,children:e.jsx(Ca,{className:"w-4 h-4"})}),r.length>1&&e.jsx(C,{variant:"danger",size:"sm",onClick:()=>s(l.id),disabled:r.length<2,children:e.jsx(Ie,{className:"w-4 h-4"})})]})]},l.id))})})}function J0(){const{t:a}=P(),{paymentMethods:t,isLoading:r,addPaymentMethod:n,updatePaymentMethod:i,deletePaymentMethod:s}=Sc(),[l,o]=h.useState(!1),[c,d]=h.useState(null),[m,u]=h.useState({isOpen:!1}),p=async g=>{try{c?await i(c.id,g):await n(g),o(!1),d(null)}catch(f){console.error("Error saving payment method:",f)}},x=async()=>{if(m.methodId)try{await s(m.methodId)}catch(g){console.error("Error deleting payment method:",g)}finally{u({isOpen:!1})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("common:payment-method")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("payment:payment-method-managment")})]}),e.jsxs(C,{onClick:()=>o(!0),children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),a("payment:add-payment-method")]})]}),e.jsx(Q0,{methods:t,isLoading:r,onEdit:g=>{d(g),o(!0)},onDelete:g=>u({isOpen:!0,methodId:g})}),l&&e.jsx(Y0,{method:c,onSave:p,onCancel:()=>{o(!1),d(null)}}),e.jsx(Ha,{isOpen:m.isOpen,onClose:()=>u({isOpen:!1}),onConfirm:x,title:a("payment:delete-payment-method"),message:a("payment:delete-payment-method-confirmation")})]})}function X0(a,t){return h.useMemo(()=>{const r=t?a.filter(m=>{const u=new Date(m.createdAt.seconds*1e3);return u>=t.start&&u<=t.end}):a,n=r.filter(m=>m.diningOption==="dine-in").length,i=r.filter(m=>m.diningOption==="delivery").length,s=r.filter(m=>m.status==="cancelled").length,l=r.filter(m=>m.status==="delivered").length,o=r.filter(m=>m.status==="pending").length,c=new Map;r.forEach(m=>{m.status!=="cancelled"&&m.items.forEach(u=>{const p=c.get(u.id)||{name:u.name,quantity:0,revenue:0};p.quantity+=u.quantity,p.revenue+=u.price*u.quantity,c.set(u.id,p)})});const d=Array.from(c.entries()).map(([m,u])=>({id:m,...u})).sort((m,u)=>u.quantity-m.quantity).slice(0,5);return{totalOrders:r.length,dineInOrders:n,deliveryOrders:i,canceledOrders:s,fulfilledOrders:l,bestSellers:d,pendingOrders:o}},[a,t])}function Z0({orders:a,currentPage:t,onPageChange:r,itemsPerPage:n=10}){const{settings:i}=ee(),{t:s,i18n:l}=P("common"),o=l.language,c=a.filter(x=>x.rating),d=c.length>0?c.reduce((x,g)=>{var f;return x+(((f=g.rating)==null?void 0:f.rating)||0)},0)/c.length:0,m=c.reduce((x,g)=>{var v;const f=((v=g.rating)==null?void 0:v.rating)||0;return x[f]=(x[f]||0)+1,x},{}),u=Math.ceil(c.length/n),p=c.slice((t-1)*n,t*n);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:e.jsx(Et,{className:"w-6 h-6 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("average-rate")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-semibold",children:ba(Number(d.toFixed(2)))}),e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(x=>e.jsx(Et,{className:`w-4 h-4 ${x<=Math.round(d)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},x))})]})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(vs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("common:total-note")}),e.jsx("p",{className:"text-2xl font-semibold",children:c.length})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(cr,{className:"w-6 h-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("common:notification-rate")}),e.jsx("p",{className:"text-2xl font-semibold",children:a.length>0?`${ba(Number((c.length/a.length*100).toFixed(1)))}%`:"0%"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("common:note-dispatching")}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(x=>{const g=m[x]||0,f=c.length>0?g/c.length*100:0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-20",children:[e.jsx(Et,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:x})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(O.div,{initial:{width:0},animate:{width:`${f}%`},className:"h-full bg-yellow-400"})})}),e.jsx("div",{className:"w-20 text-right",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[g," (",f.toFixed(1),"%)"]})})]},x)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold",children:s("analyse:client-note")})}),e.jsxs("div",{className:"divide-y dark:divide-gray-700",children:[p.map(x=>{var g,f;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:x.customerName}),e.jsxs("span",{className:"text-sm text-gray-500",children:["• ",s("order:order")," #",x.id.slice(0,8)]})]}),x.customerPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx(ut,{className:"w-4 h-4"}),x.customerPhone]}),e.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(v=>{var b;return e.jsx(Et,{className:`w-4 h-4 ${v<=(((b=x.rating)==null?void 0:b.rating)||0)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},v)})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:va(((g=x.rating)==null?void 0:g.createdAt)||x.createdAt,o)}),e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:G(x.total,i==null?void 0:i.currency)})]})]}),((f=x.rating)==null?void 0:f.feedback)&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:x.rating.feedback})]},x.id)}),c.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(vs,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:s("analyse:no-client-feedback")})]})]}),u>1&&e.jsx("div",{className:"p-6 border-t dark:border-gray-700",children:e.jsx(da,{currentPage:t,totalPages:u,onPageChange:r})})]})]})}function ev(){const{t:a}=P("analyse"),{orders:t}=ur(),{settings:r}=ee(),[n,i]=h.useState("overview"),[s,l]=h.useState({start:new Date(new Date().setHours(0,0,0,0)),end:new Date}),[o,c]=h.useState(1),d=X0(t,s),m=[{id:"overview",label:a("dashboard:overview")},{id:"feedback",label:a("client-note")}],u=h.useMemo(()=>{const x=t.filter(N=>{const I=new Date(N.createdAt.seconds*1e3);return N.status==="delivered"&&I>=s.start&&I<=s.end}),g=x.reduce((N,I)=>I.status==="delivered"?N+Number(I.subtotal):N,0),f=x.length>0?g/x.length:0,v=t.filter(N=>N.status==="cancelled"),b=x.length>0?v.length/t.length*100:0,y=x.filter(N=>N.diningOption==="dine-in"),w=x.filter(N=>N.diningOption==="delivery"),j=x.length>0?y.length/x.length*100:0,D=new Set(x.map(N=>N.customerEmail||N.customerPhone)).size;return{totalRevenue:g,averageOrderValue:f,canceledOrders:v.length,cancelRate:b,dineInOrders:y.length,deliveryOrders:w.length,dineInRate:j,uniqueCustomers:D}},[t,s]),p=(x,g)=>{l({start:x,end:g}),c(1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("trafic-title")}),e.jsx(Da,{startDate:s.start,endDate:s.end,onDateChange:p})]}),e.jsx(gt,{tabs:m,activeTab:n,onChange:i}),n==="overview"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(ca,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:tota-income")}),e.jsx("p",{className:"text-2xl font-semibold",children:G(u.totalRevenue,r==null?void 0:r.currency)})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(Ua,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("average-order")}),e.jsx("p",{className:"text-2xl font-semibold",children:G(u.averageOrderValue,r==null?void 0:r.currency)})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(Ln,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:unique-customers")}),e.jsx("p",{className:"text-2xl font-semibold",children:u.uniqueCustomers})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx(zi,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:cancellation-rate")}),e.jsxs("p",{className:"text-2xl font-semibold",children:[ba(Number(u.cancelRate.toFixed(2))),"%"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:e.jsx(En,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:pending")}),e.jsx("p",{className:"text-2xl font-semibold",children:d.pendingOrders})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:e.jsx(rt,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:delivery")}),e.jsx("p",{className:"text-2xl font-semibold",children:u.deliveryOrders})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(Vi,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:on-site")}),e.jsxs("p",{className:"text-2xl font-semibold",children:[u.dineInOrders," (",ba(Number(u.dineInRate.toFixed(2))),"%)"]})]})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg",children:e.jsx(Pn,{className:"w-6 h-6 text-rose-600 dark:text-rose-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("common:order-cancel")}),e.jsx("p",{className:"text-2xl font-semibold",children:u.canceledOrders})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:a("best-selling")}),e.jsxs("div",{className:"space-y-4",children:[d.bestSellers.map((x,g)=>e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg font-medium",children:["#",g+1]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:x.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x.quantity," ",a("sell")]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium text-green-600 dark:text-green-400",children:G(x.revenue,r==null?void 0:r.currency)})})]},x.id)),d.bestSellers.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:a("common:no-data-available")})]})]})]}):e.jsx(Z0,{orders:t,currentPage:o,onPageChange:c})]})}const av=["pos","orders","qr-code"];function Fe({element:a,route:t,isStaff:r,staffData:n,settings:i}){const s=(i==null?void 0:i.staffPermissions)||[];return!r||(n==null?void 0:n.role)==="admin"||av.includes(t)||s.filter(l=>r&&(n==null?void 0:n.role)!=="admin"&&l!=="dashboard").includes(t)?a:e.jsx(Xi,{to:"/dashboard/pos",replace:!0})}const Pi=({children:a})=>e.jsx(Se,{children:a});function tv({isStaff:a,staffData:t,settings:r}){return e.jsxs(Oc,{children:[e.jsx(je,{path:"/",element:e.jsx(Fe,{settings:r,route:"dashboard",element:e.jsx(Pi,{children:e.jsx(Pd,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/orders",element:e.jsx(Pi,{children:e.jsx(Yu,{})})}),e.jsx(je,{path:"/pos",element:e.jsx(Se,{children:e.jsx(c0,{})})}),e.jsx(je,{path:"/traffic",element:e.jsx(Fe,{settings:r,route:"traffic",element:e.jsx(Se,{children:e.jsx(ev,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/menu",element:e.jsx(Fe,{settings:r,route:"menu",element:e.jsx(Se,{children:e.jsx(Uu,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/categories",element:e.jsx(Fe,{settings:r,route:"categories",element:e.jsx(Se,{children:e.jsx(Rd,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/variants",element:e.jsx(Fe,{settings:r,route:"variants",element:e.jsx(Se,{children:e.jsx(P0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/inventory",element:e.jsx(Fe,{settings:r,route:"inventory",element:e.jsx(Se,{children:e.jsx(f0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/accounting",element:e.jsx(Fe,{settings:r,route:"accounting",element:e.jsx(Se,{children:e.jsx(M0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/payments",element:e.jsx(Fe,{settings:r,route:"payments",element:e.jsx(Se,{children:e.jsx(J0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/customers",element:e.jsx(Fe,{settings:r,route:"customers",element:e.jsx(Se,{children:e.jsx(Zu,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/qr-code",element:e.jsx(Se,{children:e.jsx(u0,{})})}),e.jsx(je,{path:"/staff",element:e.jsx(Fe,{settings:r,route:"staff",element:e.jsx(Se,{children:e.jsx(_0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/media",element:e.jsx(Fe,{settings:r,route:"media",element:e.jsx(Se,{children:e.jsx(U0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"/settings",element:e.jsx(Fe,{settings:r,route:"settings",element:e.jsx(Se,{children:e.jsx(t0,{})}),isStaff:a,staffData:t})}),e.jsx(je,{path:"*",element:e.jsx(Xi,{to:"/dashboard",replace:!0})})]})}function ov(){const{logout:a}=Ac(),{isStaff:t,staffData:r,isLoading:n}=xt(),{isLoading:i,settings:s}=ee(),{isLoading:l}=Id(),o=h.useRef(null),c=h.useRef(null),d=h.useRef(0),m=h.useRef(!1),u=h.useCallback(()=>{if(!o.current){console.log("[Audio] Audio ref not initialized");return}const p=Date.now();if(p-d.current<1e3){console.log("[Audio] Debouncing sound, too soon since last play");return}if(m.current){console.log("[Audio] Already playing, skipping");return}try{console.log("[Audio] Starting playback"),m.current=!0,o.current.currentTime=0;const x=o.current.play();x!==void 0&&x.then(()=>{var g;console.log("[Audio] Playback started successfully"),d.current=p,(g=o.current)==null||g.addEventListener("ended",()=>{console.log("[Audio] Playback ended"),m.current=!1},{once:!0})}).catch(g=>{console.warn("[Audio] Playback prevented:",g),m.current=!1})}catch(x){console.error("[Audio] Playback error:",x),m.current=!1}},[]);return h.useEffect(()=>(console.log("[Init] Setting up audio and subscription"),o.current=new Audio("/notification.mp3"),o.current.volume=.7,c.current=$t.subscribeToRecentOrders(p=>{console.log("[Order] New order received:",p.id),u()},p=>{console.error("[Order] Subscription error:",p)}),()=>{console.log("[Cleanup] Removing subscription and audio"),c.current&&c.current(),o.current&&(o.current.pause(),o.current=null)}),[u]),l||n||i?e.jsx(Ic,{isLoading:!0}):e.jsx(Ad,{onLogout:a,settings:s,isStaff:t,staffData:r,children:e.jsx(tv,{isStaff:t,staffData:r,settings:s})})}export{ov as default};
