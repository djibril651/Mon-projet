const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B3rSoFKX.js","assets/vendor-DO0iH4nS.js","assets/firebase-DmC1RuBf.js","assets/index-CTxq3-1N.css"])))=>i.map(i=>d[i]);
var Ko=Object.defineProperty;var Qo=(a,r,t)=>r in a?Ko(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;var ka=(a,r,t)=>Qo(a,typeof r!="symbol"?r+"":r,t);import{a as T,r as Ti,t as Yo,b as Oi,d as Jo,s as Aa,e as kr,u as ke,j as e,B as C,A as Xo,o as on,_ as E,f as q,m as D,S as We,g as I,h as _,C as ir,i as Ra,k as Li,M as Ri,l as Fi,U as Zo,n as En,Q as Br,p as ec,q as In,v as cn,w as dn,x as $e,y as pa,z as lr,P as or,X,D as ua,E as ge,O as Bi,F as un,G as Ve,H as cr,I as ce,J as _e,K as Gr,L as pn,N as Q,R as Ie,T as Gi,V as Cr,W as zi,Y as Dr,Z as qi,$ as Za,a0 as $i,a1 as aa,a2 as mn,a3 as Mn,a4 as dr,a5 as Pn,a6 as et,a7 as Ui,a8 as Vi,a9 as ac,aa as rc,ab as Ke,ac as Da,ad as tc,ae as nc,af as sc,ag as ic,ah as xs,ai as Hi,aj as lc,ak as oc,al as cc,am as at,an as Wi,ao as dc,ap as ga,aq as uc,ar as pc,as as mc,at as xc,au as gc,av as J,aw as hc,ax as xn,ay as Ka,az as _i,aA as fc,aB as gs,aC as vc,aD as bc,aE as yc,aF as jc,aG as Sr,aH as wc,aI as Nc}from"./index-B3rSoFKX.js";import{r as f,u as Tn,c as Ki,R as $,e as kc,a as Cc,i as Dc,N as Qi,f as Sc,h as xe}from"./vendor-DO0iH4nS.js";import{_ as ha,q as Ac,h as ca,j as Ec,k as Sa,y as Ic,l as hs,D as gn,m as Mc}from"./firebase-DmC1RuBf.js";import{_ as Pc}from"./defineProperty-CQRzcMKf.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=T("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=T("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=T("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=T("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=T("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=T("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=T("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=T("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=T("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=T("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=T("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=T("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=T("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=T("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=T("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=T("Columns",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"12",x2:"12",y1:"3",y2:"21",key:"1efggb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=T("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=T("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=T("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=T("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=T("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=T("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=T("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=T("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=T("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=T("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=T("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=T("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=T("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=T("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=T("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=T("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=T("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=T("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=T("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=T("MenuSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 8h10",key:"1jw688"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=T("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=T("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=T("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=T("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=T("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=T("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=T("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=T("Rows",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=T("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=T("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=T("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=T("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=T("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=T("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=T("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=T("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=T("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=T("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=T("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);function sl(a,r){Ti(2,arguments);var t=Yo(a),n=Oi(r);if(isNaN(n))return new Date(NaN);if(!n)return t;var s=t.getDate(),i=new Date(t.getTime());i.setMonth(t.getMonth()+n+1,0);var l=i.getDate();return s>=l?i:(t.setFullYear(i.getFullYear(),i.getMonth(),s),t)}function fn(a,r){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},fn(a,r)}function ud(a,r){Ti(2,arguments);var t=Oi(r);return sl(a,-t)}function nt(){const[a,r]=f.useState(null),[t,n]=f.useState(null),[s,i]=f.useState(!0);return f.useEffect(()=>{const l=Jo.onAuthStateChanged(async o=>{if(r(o),o)try{const c=await Aa.getStaffByEmail(o.email);n(c)}catch(c){console.error("Error fetching staff data:",c),n(null)}else n(null);i(!1)});return()=>l()},[]),{user:a,staffData:t,loading:s,isAuthenticated:!!a}}function pd(a){if(!a)throw new Error("No file provided");if(!a.type.startsWith("image/"))throw new Error("Only image files are allowed");if(a.size>5*1024*1024)throw new Error("File size must be less than 5MB")}function md(a){if(!(a!=null&&a.secure_url))throw new Error("Invalid response from Cloudinary")}class Re extends Error{constructor(r,t){super(r),this.code=t,this.name="CloudinaryError"}}class xd{constructor(){ka(this,"CLOUD_NAME",kr.cloudName);ka(this,"UPLOAD_PRESET",kr.uploadPreset);ka(this,"API_KEY",kr.apiKey);ka(this,"API_SECRET",kr.apiSecret)}async uploadFile(r,t){try{pd(r),t==null||t(0);const n=new FormData;return n.append("file",r),n.append("upload_preset",this.UPLOAD_PRESET),n.append("folder","restaurant"),new Promise((s,i)=>{const l=new XMLHttpRequest;l.upload.onprogress=o=>{if(o.lengthComputable&&t){const c=Math.min(98,Math.round(o.loaded/o.total*100));t(c)}},l.onload=()=>{var o;if(l.status===200)try{const c=JSON.parse(l.responseText);md(c),t==null||t(100),s(c.secure_url)}catch{i(new Re("Invalid response format","INVALID_RESPONSE"))}else try{const c=JSON.parse(l.responseText);i(new Re(((o=c.error)==null?void 0:o.message)||"Upload failed","UPLOAD_FAILED"))}catch{i(new Re(`Upload failed with status: ${l.status}`,"UPLOAD_FAILED"))}},l.onerror=()=>i(new Re("Network error during upload","NETWORK_ERROR")),l.onabort=()=>i(new Re("Upload was aborted","UPLOAD_ABORTED")),l.ontimeout=()=>i(new Re("Upload timed out","TIMEOUT")),l.open("POST",`https://api.cloudinary.com/v1_1/${this.CLOUD_NAME}/image/upload`),l.timeout=3e4,l.send(n)})}catch(n){throw console.error("Upload error:",n),t==null||t(0),n}}async deleteFile(r){var t;try{const n=Math.round(new Date().getTime()/1e3),s=await this.generateSignature(r,n),i=new FormData;i.append("public_id",`restaurant/${r}`),i.append("api_key",this.API_KEY),i.append("timestamp",n.toString()),i.append("signature",s);const l=await fetch(`https://api.cloudinary.com/v1_1/${this.CLOUD_NAME}/image/destroy`,{method:"POST",body:i,headers:{Accept:"application/json"}});if(!l.ok)throw new Re(`Delete failed with status: ${l.status}`,"DELETE_FAILED");const o=await l.json();if(o.result!=="ok")throw new Re(((t=o.error)==null?void 0:t.message)||"Delete failed","DELETE_FAILED")}catch(n){throw console.error("Delete error:",n),n instanceof Re?n:new Re("Failed to delete file","DELETE_FAILED")}}async generateSignature(r,t){try{const n=`public_id=restaurant/${r}&timestamp=${t}${this.API_SECRET}`,s=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-1",s);return Array.from(new Uint8Array(i)).map(o=>o.toString(16).padStart(2,"0")).join("")}catch(n){throw console.error("Signature generation error:",n),new Re("Failed to generate signature","SIGNATURE_ERROR")}}}const Ya=new xd;function gd(){const a=Tn(),{t:r}=ke("common");return e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>a("/"),children:[e.jsx(Xo,{className:"w-4 h-4 mr-2"}),r("go-back")]})}function st(){const[a,r]=f.useState([]),[t,n]=f.useState(!0),[s,i]=f.useState(null);return f.useEffect(()=>{n(!0);const l=on.subscribeToOrders(o=>{const c=o.map(p=>({...p,total:Number(p.total),subtotal:p.subtotal?Number(p.subtotal):p.total,taxTotal:p.taxTotal?Number(p.taxTotal):0,amountPaid:p.amountPaid?Number(p.amountPaid):0,change:p.change?Number(p.change):0}));r(c),n(!1),i(null)},o=>{console.error("Error in orders subscription:",o),i(o),n(!1),E.error("Erreur de chargement des commandes")});return()=>{l()}},[]),{orders:a,isLoading:t,error:s,isError:!!s}}const ys=10;function hd(){const[a,r]=f.useState([]),{orders:t}=st(),n=f.useRef(null),s=f.useRef([]);f.useEffect(()=>{if(n.current===null&&t.length>0){n.current=t,s.current=t;return}if(n.current===null)return;const o=t.filter(c=>!s.current.some(p=>p.id===c.id));o.length>0&&(new Audio("/notification.mp3").play().catch(p=>{console.error("Error playing notification sound:",p)}),r(p=>[...o.map(d=>({id:crypto.randomUUID(),order:d,read:!1})),...p].slice(0,ys))),s.current=t},[t]);const i=o=>{r(c=>c.filter(p=>p.id!==o))},l=a.some(o=>!o.read);return{notifications:a.slice(0,ys),clearNotification:i,hasUnread:l}}function fd(a){return a&&typeof a.seconds=="number"&&typeof a.nanoseconds=="number"}function vd(a){if(!a||!fd(a))return"";try{const r=new Date,t=new Date(a.seconds*1e3),n=Math.floor((r.getTime()-t.getTime())/1e3);if(n<60)return"à l'instant";if(n<3600){const s=Math.floor(n/60);return`il y a ${s} minute${s>1?"s":""}`}else if(n<86400){const s=Math.floor(n/3600);return`il y a ${s} heure${s>1?"s":""}`}else if(n<604800){const s=Math.floor(n/86400);return`il y a ${s} jour${s>1?"s":""}`}else return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(t)}catch(r){return console.error("Error formatting timestamp:",r),""}}function bd({order:a,onClose:r}){const t=Tn(),{settings:n}=q(),s=()=>{t("/dashboard/orders"),r()},i=vd(a.createdAt);return e.jsx(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},onClick:s,className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/50 p-2 rounded-lg",children:e.jsx(We,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Nouvelle commande #",a.id.slice(0,8)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:[a.customerName," • ",I(a.total,n==null?void 0:n.currency)]}),i&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Commande reçue ",i]})]})]})})}const Tt=5;function yd(){const{notifications:a,clearNotification:r,hasUnread:t}=hd(),[n,s]=f.useState(!1),[i,l]=f.useState(1),o=[...a].sort((g,h)=>new Date(h.order.createdAt).getTime()-new Date(g.order.createdAt).getTime()),c=Math.ceil(o.length/Tt),p=(i-1)*Tt,d=p+Tt,u=o.slice(p,d);f.useEffect(()=>{n&&l(1)},[n]),f.useEffect(()=>{const g=h=>{n&&!h.defaultPrevented&&s(!1)};return document.addEventListener("click",g),()=>{document.removeEventListener("click",g)}},[n]);const m=g=>{g.stopPropagation(),i>1&&l(h=>h-1)},x=g=>{g.stopPropagation(),i<c&&l(h=>h+1)};return e.jsxs("div",{className:"relative",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:g=>{g.stopPropagation(),s(!n)},className:"relative h-10 w-10 rounded-full p-0",children:[e.jsx(zc,{className:"h-5 w-5"}),t&&e.jsx(D.div,{initial:{scale:0},animate:{scale:1},className:"absolute -right-1 -top-1 h-3 w-3 rounded-full bg-red-500"})]}),e.jsx(_,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsx(D.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 z-50 mt-2 w-80 rounded-lg bg-white p-4 shadow-xl dark:bg-gray-800",onClick:g=>g.stopPropagation(),children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-500 dark:text-gray-400",children:[a.length," notification",a.length>1?"s":""]}),e.jsx("div",{className:"space-y-2",children:e.jsx(_,{mode:"wait",children:u.map(g=>e.jsx(bd,{order:g.order,onClose:()=>{r(g.id),u.length===1&&i>1&&l(h=>h-1)}},g.id))})}),c>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 pt-3",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:m,disabled:i===1,className:"p-1",children:e.jsx(ir,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",i," sur ",c]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:x,disabled:i===c,className:"p-1",children:e.jsx(Ra,{className:"h-4 w-4"})})]})]}):e.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-4",children:"Aucune notification"})})]})})]})}function jd(){const{theme:a,toggleTheme:r}=Li(),{t}=ke();return e.jsx(C,{variant:"ghost",size:"sm",onClick:r,className:"h-10 w-10 rounded-full p-0",children:a==="light"?e.jsx(Ri,{size:20,title:t("common.darkMode")}):e.jsx(Fi,{size:20,title:t("common.lightMode")})})}function wd({onLogout:a}){const{t:r}=ke();return e.jsxs(C,{variant:"secondary",size:"sm",onClick:a,children:[e.jsx(ad,{className:"w-4 h-4 mr-2"}),r("logout")]})}function ur(){const{user:a}=nt(),[r,t]=f.useState(!1),[n,s]=f.useState(null),[i,l]=f.useState(!0);return f.useEffect(()=>{async function o(){if(!(a!=null&&a.email)){t(!1),s(null),l(!1);return}try{const c=await Aa.getStaffByEmail(a.email);t(!!c),s(c)}catch(c){console.error("Error checking staff status:",c),t(!1),s(null)}finally{l(!1)}}o()},[a==null?void 0:a.email]),{isStaff:r,staffData:n,isLoading:i}}function Nd(){const{user:a}=nt(),{isStaff:r,isLoading:t,staffData:n}=ur();return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:a==null?void 0:a.email}),e.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),t?e.jsx("span",{className:"text-gray-400",children:"Loading..."}):e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium capitalize",children:r&&(n==null?void 0:n.role)!=="admin"?"Staff":"Admin"})]})]})}function kd({onLogout:a}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Nd,{}),e.jsx(yd,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jd,{}),e.jsx(wd,{onLogout:a})]})]})}function Cd({onLogout:a}){const{t:r}=ke("dashboard");return e.jsx("header",{className:"h-16 bg-white dark:bg-gray-800 border-b border:gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(gd,{}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r("dashboard")})]}),e.jsx(kd,{onLogout:a})]})})}function js({currentPage:a,isStaff:r,settings:t,staffData:n}){const{t:s}=ke("dashboard"),i=Tn(),[l,o]=f.useState(!1),c=[{id:"dashboard",icon:el,label:s("dashboard")},{id:"orders",icon:We,label:s("orders")},{id:"pos",icon:ld,label:s("pos")},{id:"traffic",icon:Gc,label:"Analyses"},{id:"menu",icon:Zo,label:s("menu")},{id:"categories",icon:On,label:s("categories")},{id:"variants",icon:hn,label:"Variantes"},{id:"inventory",icon:Ue,label:"Inventaire"},{id:"payments",icon:En,label:"Paiements"},{id:"accounting",icon:Yi,label:"Comptabilité"},{id:"customers",icon:Rn,label:s("costumer-title")},{id:"qr-code",icon:Br,label:"QR Code"},{id:"staff",icon:cd,label:"Personnel"},{id:"media",icon:zr,label:"Bibliothèque"},{id:"settings",icon:ec,label:s("settings")}];return e.jsxs(D.aside,{initial:!1,animate:{width:l?"5rem":"16rem"},className:"relative h-full bg-white dark:bg-gray-800 flex flex-col shadow-sm",children:[e.jsx("button",{onClick:()=>o(!l),className:"absolute -right-3 top-3 z-20 rounded-full border bg-white p-1.5 shadow-sm hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700",children:l?e.jsx(Ra,{className:"h-4 w-4"}):e.jsx(ir,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-thumb-gray-200 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent",children:e.jsx("nav",{className:"p-3 pt-8",children:c.filter(p=>!r||(n==null?void 0:n.role)==="admin"?!0:n!=null&&n.active?(t==null?void 0:t.staffPermissions.includes(p.id))&&p.id!=="dashboard":!1).map(p=>e.jsxs(D.div,{className:"relative my-1",initial:!1,children:[e.jsx(D.button,{whileHover:{x:l?0:4},whileTap:{scale:.98},onClick:()=>i(`/dashboard/${p.id}`),className:`
                  w-full flex items-center space-x-3 
                  ${l?"justify-center px-3 py-3":"px-4 py-3"}
                  rounded-lg transition-colors relative group
                  ${a===p.id?"bg-blue-50 text-white dark:bg-blue-900/20":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}
                `,children:e.jsxs("div",{className:`
                  relative z-10 flex items-center 
                  ${l?"w-full justify-center":""}
                `,children:[e.jsx(p.icon,{className:`
                    relative z-10 transition-transform duration-200
                    ${l?"w-6 h-6 group-hover:scale-110":"w-5 h-5"}
                  `}),e.jsx(_,{mode:"wait",children:!l&&e.jsx(D.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"relative z-10 whitespace-nowrap overflow-hidden ml-3",children:p.label})})]})}),l&&e.jsx("div",{className:`
                  absolute left-full top-1/2 -translate-y-1/2 ml-3 
                  bg-gray-800 text-white text-xs 
                  px-3 py-2 rounded-md 
                  opacity-0 invisible
                  group-hover:opacity-100 group-hover:visible
                  transition-all duration-200
                  pointer-events-none
                  z-50
                  shadow-lg
                `,children:p.label})]},p.id))})})]})}function Dd({children:a,onLogout:r,settings:t,isStaff:n,staffData:s}){const i=Ki(),l=i.pathname.split("/dashboard/")[1]||"",[o,c]=f.useState(!1),p=In();return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 dark:bg-gray-900 overflow-hidden",children:[!p&&e.jsx("div",{className:"flex-none",children:e.jsx(Cd,{onLogout:r,onMenuClick:()=>c(!o)})}),e.jsxs("div",{className:"flex-1 flex min-h-0",children:[!p&&e.jsx("div",{className:"flex-none",children:e.jsx(js,{currentPage:l,onClose:()=>c(!1),isStaff:n,staffData:s,settings:t})}),e.jsx(_,{children:p&&o&&e.jsxs(e.Fragment,{children:[e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>c(!1)}),e.jsx(D.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 left-0 w-64 z-50",children:e.jsx(js,{currentPage:l,onClose:()=>c(!1),isStaff:n,staffData:s,settings:t})})]})}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto p-4 md:p-6",children:e.jsx(_,{mode:"wait",children:e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"container mx-auto max-w-7xl",children:a},i.pathname)})})})]})]})}function ws(a,r){const[t,n]=f.useState(()=>{try{const i=localStorage.getItem(a);return i?JSON.parse(i):r}catch(i){return console.error("Error reading from localStorage:",i),r}}),s=f.useCallback(i=>{try{const l=i instanceof Function?i(t):i;n(l),localStorage.setItem(a,JSON.stringify(l))}catch(l){console.error("Error writing to localStorage:",l)}},[a,t]);return[t,s]}function Sd(){const[a,r]=f.useState(!0),{loading:t}=nt(),n=Ki(),[s,i]=ws("hasShownInitialLoad",!1),[l,o]=ws("initialDashboardLoad",!0);return f.useEffect(()=>{if(!t)if(n.pathname.startsWith("/dashboard"))if(l){const p=setTimeout(()=>{r(!1),o(!1)},1500);return()=>clearTimeout(p)}else r(!1);else if(s)r(!1);else{const p=setTimeout(()=>{r(!1),i(!0)},1500);return()=>clearTimeout(p)}},[t,n.pathname,s,l,i,o]),{isLoading:a||t}}function ve({children:a}){return e.jsx("div",{className:"py-6 md:py-8",children:a})}function Ns({date:a,onSelect:r,isOpen:t,onClose:n,position:s="bottom"}){const[i,l]=f.useState(a),o=new Date,c=f.useRef(null),p=i.getMonth(),d=i.getFullYear(),u=new Date(d,p+1,0).getDate(),m=new Date(d,p,1).getDay(),x=Array.from({length:u},(h,v)=>v+1),g=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"];return f.useEffect(()=>{const h=v=>{c.current&&!c.current.contains(v.target)&&n()};if(t)return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[t,n]),t?e.jsx("div",{className:` ${s==="bottom"?"top-full mt-1":"bottom-full mb-1"} left-0 z-50`,style:{minWidth:"max-content"},children:e.jsxs(D.div,{ref:c,initial:{opacity:0,y:s==="bottom"?10:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:s==="bottom"?10:-10},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b dark:border-gray-700",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>l(ud(i,1)),className:"h-8 w-8 p-0",children:e.jsx(ir,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-sm font-medium",children:cn(i,"MMMM yyyy",{locale:dn})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>l(sl(i,1)),className:"h-8 w-8 p-0",children:e.jsx(Ra,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:g.map(h=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1",children:h},h))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:m}).map((h,v)=>e.jsx("div",{},`empty-${v}`)),x.map(h=>{const v=new Date(d,p,h),b=v.toDateString()===o.toDateString(),j=v.toDateString()===a.toDateString();return e.jsx("button",{onClick:()=>{r(v),n()},className:`
                    flex h-8 w-8 items-center justify-center rounded-lg text-sm transition-all
                    hover:bg-gray-100 dark:hover:bg-gray-700
                    ${j?"bg-blue-600 text-white hover:bg-blue-700":b?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":""}
                  `,children:h},h)})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-2",children:e.jsx(C,{variant:"ghost",size:"sm",className:"w-full justify-center text-sm",onClick:()=>{r(new Date),n()},children:"Aujourd'hui"})})]})}):null}function ba({startDate:a,endDate:r,onDateChange:t}){const[n,s]=f.useState(!1),[i,l]=f.useState(!1),o=In(),c=[{label:"Aujourd'hui",days:0},{label:o?"7j":"7 derniers jours",days:7},{label:o?"30j":"30 derniers jours",days:30}],p=d=>{const u=new Date,m=new Date;d>0?m.setDate(m.getDate()-d):m.setHours(0,0,0,0),t(m,u)};return e.jsx("div",{className:"w-full sm:w-auto relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2 order-2 sm:order-1",children:c.map(d=>e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>p(d.days),className:"flex-1 sm:flex-initial text-xs sm:text-sm px-2 sm:px-3",children:d.label},d.days))}),e.jsxs("div",{className:"flex items-center gap-2 order-1 sm:order-2",children:[e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>{l(!1),s(!0)},className:"w-full sm:w-[140px] justify-start text-xs sm:text-sm",children:[e.jsx($e,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500"}),cn(a,"dd MMM yyyy",{locale:dn})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl p-4 max-w-fit mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 -mt-2",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"✕"})}),e.jsx(Ns,{date:a,onSelect:d=>{t(d,r),s(!1)},isOpen:n,onClose:()=>s(!1),position:"center"})]})})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"à"}),e.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[e.jsxs(C,{variant:"secondary",size:"sm",onClick:()=>{s(!1),l(!0)},className:"w-full sm:w-[140px] justify-start text-xs sm:text-sm",children:[e.jsx($e,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4 text-gray-500"}),cn(r,"dd MMM yyyy",{locale:dn})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-center justify-center",children:e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl p-4 max-w-fit mx-auto",children:[e.jsx("div",{className:"flex justify-end mb-4 -mt-2",children:e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:" top-2 right-2",children:"✕"})}),e.jsx(Ns,{date:r,onSelect:d=>{t(a,d),l(!1)},isOpen:i,onClose:()=>l(!1),position:"center"})]})})]})]})]})})}function ks({totalRevenue:a,totalOrders:r,uniqueCustomers:t,dailyOrderRate:n}){const{settings:s}=q(),i=[{title:"Revenu Total (HT) (Sans Livraison)",value:I(Number(a),s==null?void 0:s.currency),icon:fa,color:"green"},{title:"Commandes",value:r.toString(),icon:Fa,color:"blue"},{title:"Clients Uniques",value:t.toString(),icon:Rn,color:"purple"},{title:"Commandes/Jour",value:pa(Number(n.toFixed(1))),icon:$e,color:"orange"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:i.map((l,o)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-md hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center ${l.color==="green"?"bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-400":l.color==="blue"?"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400":l.color==="purple"?"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400":"bg-orange-100 text-orange-600 dark:bg-orange-900/50 dark:text-orange-400"}`,children:e.jsx(l.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:l.title}),e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white truncate",children:l.value})]})]})},l.title))})}function Ad({data:a}){const r=Object.values(a).reduce((s,i)=>s+i,0),t={pending:"bg-yellow-500",preparing:"bg-blue-500",ready:"bg-green-500",delivered:"bg-purple-500",cancelled:"bg-red-500"},n={pending:"En attente",preparing:"En cours de préparation",ready:"Prêt",delivered:"Livré",cancelled:"annulé"};return e.jsx("div",{className:"space-y-4",children:Object.entries(a).map(([s,i])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"capitalize",children:n[`${s}`]}),e.jsx("span",{className:"font-medium",children:i})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(D.div,{initial:{width:0},animate:{width:`${i/r*100}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full ${t[s]}`})})]},s))})}const Er=5;function Cs({orders:a}){const{settings:r}=q(),[t,n]=f.useState(1),s=f.useMemo(()=>{const c=new Map;return a.filter(d=>d.status==="delivered").forEach(d=>{d.items.forEach(u=>{const m=c.get(u.id);m?(m.quantity+=Number(u.quantity),m.revenue+=Number(u.price)*Number(u.quantity)):c.set(u.id,{id:u.id,name:u.name,quantity:Number(u.quantity),revenue:Number(u.price)*Number(u.quantity)})})}),Array.from(c.values()).sort((d,u)=>u.quantity-d.quantity)},[a]),i=s.reduce((c,p)=>c+p.quantity,0);s.reduce((c,p)=>c+p.revenue,0);const l=Math.ceil(s.length/Er),o=s.slice((t-1)*Er,t*Er);return e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 shadow-sm",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Ue,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:"Ventes par Produit"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[s.length," produits vendus"]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{mode:"wait",children:o.map((c,p)=>e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:p*.1},className:"flex items-center justify-between p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs sm:text-sm font-medium",children:["#",(t-1)*Er+p+1]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base text-gray-900 dark:text-white",children:c.name}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[pa(Number((c.quantity/i*100).toFixed(2))),"% des ventes"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-sm sm:text-base text-gray-900 dark:text-white",children:[c.quantity," vendus"]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:I(c.revenue,r==null?void 0:r.currency)})]})]},c.id))}),l>1&&e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t dark:border-gray-700",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>n(c=>Math.max(1,c-1)),disabled:t===1,className:"text-gray-500 dark:text-gray-400",children:e.jsx(ir,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Page ",t," sur ",l]}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>n(c=>Math.min(l,c+1)),disabled:t===l,className:"text-gray-500 dark:text-gray-400",children:e.jsx(Ra,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),s.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fa,{className:"w-8 h-8 sm:w-12 sm:h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-500 dark:text-gray-400",children:"Aucune vente enregistrée pour le moment"})]})]})]})}function il({customer:a,orders:r,onClose:t}){const{t:n}=ke(["dashboard","common"]),{settings:s}=q(),i=$.useMemo(()=>{if(!r.length)return null;const l=r.reduce((d,u)=>d+u.total,0),o=l/r.length,c=r[r.length-1],p=r[0];return{totalSpent:l,averageOrder:o,ordersCount:r.length,firstOrder:c,lastOrder:p}},[r]);return!a||!i?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b dark:border-gray-700",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-bold",children:n(a.name)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.email&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(lr,{className:"w-4 h-4 mr-1"}),a.email]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(or,{className:"w-4 h-4 mr-1"}),a.phone]})]})]}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(En,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("costumer-total-spent")})]}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:I(i.totalSpent,s==null?void 0:s.currency)})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(We,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("orders")})]}),e.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:i.ordersCount})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Fa,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("average-order-value")})]}),e.jsx("p",{className:"text-lg font-semibold text-purple-600 dark:text-purple-400",children:I(i.averageOrder,s==null?void 0:s.currency)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3 text-gray-900 dark:text-white",children:n("costumer-history")}),e.jsx("div",{className:"space-y-2",children:r.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm",children:["#",l.id.slice(0,8)]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:ua(l.createdAt)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-sm",children:I(l.total,s==null?void 0:s.currency)}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[l.items.length," ",n("orders-items")]})]})]},l.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($e,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("first-order")})]}),e.jsx("p",{className:"text-sm font-medium",children:ua(i.firstOrder.createdAt)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($e,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:n("last-order")})]}),e.jsx("p",{className:"text-sm font-medium",children:ua(i.lastOrder.createdAt)})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4",children:e.jsx(C,{onClick:t,className:"w-full",children:n("close")})})]})})}function Ed({orders:a,itemsPerPage:r}){const{settings:t}=q(),[n,s]=f.useState(1),[i,l]=f.useState(null),o=f.useMemo(()=>{const m=a.reduce((x,g)=>{const h=g.customerPhone,v=x.get(h);return v?(v.totalOrders++,v.totalSpent+=g.total,v.orders.push(g)):x.set(h,{name:g.customerName,email:g.customerEmail,phone:g.customerPhone,totalOrders:1,totalSpent:g.total,orders:[g]}),x},new Map);return Array.from(m.values()).sort((x,g)=>g.totalSpent-x.totalSpent)},[a]),c=Math.ceil(o.length/r),p=(n-1)*r,d=o.slice(p,p+r),u=f.useMemo(()=>i?a.filter(m=>m.customerPhone===i.phone).sort((m,x)=>new Date(x.createdAt).getTime()-new Date(m.createdAt).getTime()):[],[i,a]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[d.map((m,x)=>e.jsxs(D.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},onClick:()=>l({name:m.name,email:m.email,phone:m.phone}),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors text-left",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.jsxs("span",{className:"flex items-center ",children:[e.jsx(tt,{className:"w-4 h-4 mr-1"})," ",m.name]})}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(or,{className:"w-4 h-4 mr-1"}),m.phone]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.totalOrders," commandes"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:I(m.totalSpent,t==null?void 0:t.currency)})})]},m.email||m.phone)),c>1&&e.jsx(ge,{currentPage:n,totalPages:c,onPageChange:s})]}),e.jsx(il,{customer:i,orders:u,onClose:()=>l(null)})]})}function Id({order:a,onClose:r}){const{settings:t}=q();return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-500"}),"Commande #",a.id.slice(0,8)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ua(a.createdAt)})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"overflow-y-auto p-4 space-y-6",children:[e.jsx(Bi,{order:a,status:a.status,createdAt:a.createdAt,updatedAt:a.updatedAt}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"font-medium",children:"Détails Client"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(or,{className:"w-4 h-4"}),a.customerPhone]}),a.customerEmail&&e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(lr,{className:"w-4 h-4"}),a.customerEmail]}),a.diningOption==="delivery"&&a.customerAddress&&e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(un,{className:"w-4 h-4"}),a.customerAddress]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Articles Commandés"}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:a.items.map(n=>e.jsxs("div",{className:"py-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[I(n.price,t==null?void 0:t.currency)," ×"," ",n.quantity]})]}),e.jsx("p",{className:"font-medium",children:I(n.price*n.quantity,t==null?void 0:t.currency)})]},n.id))}),e.jsxs("div",{className:"border-t dark:border-gray-700 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:I(a.total,t==null?void 0:t.currency)})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t dark:border-gray-700 p-4",children:e.jsx(C,{onClick:r,className:"w-full",children:"Fermer"})})]})}):null}function Ds({orders:a,itemsPerPage:r}){const{t}=ke(),{settings:n}=q(),[s,i]=f.useState(1),[l,o]=f.useState(null),c=Math.ceil(a.length/r),p=(s-1)*r,d=a.slice(p,p+r),u={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",preparing:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",delivered:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[d.map((m,x)=>e.jsxs(D.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},onClick:()=>o(m),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600/50 transition-colors text-left",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[t("orders.orderNumber")," ",m.id.slice(0,8)]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ua(m.createdAt)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:I(m.total,n==null?void 0:n.currency)}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${u[m.status]}`,children:t(`orders.status.${m.status}`)})]})]},m.id)),c>1&&e.jsx(ge,{currentPage:s,totalPages:c,onPageChange:i})]}),e.jsx(_,{children:l&&e.jsx(Id,{order:l,onClose:()=>o(null)})})]})}function Md({orders:a,dateRange:r}){const{t}=ke("dashboard"),{settings:n}=q(),s=a.filter(p=>p.status==="delivered").reduce((p,d)=>p+Number(d.subtotal),0),i=a.length>0?Number(s)/a.length:0,l=a.length,o=$.useMemo(()=>{if(!(r!=null&&r.startDate)||!(r!=null&&r.endDate))return 0;const p=Math.max(1,Math.ceil((r.endDate.getTime()-r.startDate.getTime())/(1e3*60*60*24)));return Number(s)/p},[r,s]),c=[{label:t("total-income"),value:I(Number(s),n==null?void 0:n.currency),icon:fa,color:"text-green-600 dark:text-green-400"},{label:t("average-order-value"),value:I(Number(i),n==null?void 0:n.currency),icon:Fa,color:"text-blue-600 dark:text-blue-400"},{label:t("orders-count"),value:l.toString(),icon:We,color:"text-purple-600 dark:text-purple-400"},{label:t("daily-income"),value:I(o,n==null?void 0:n.currency),icon:$e,color:"text-orange-600 dark:text-orange-400"}];return e.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((p,d)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-opacity-20 ${p.color.replace("text","bg")}`,children:e.jsx(p.icon,{className:`w-5 h-5 ${p.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p.label}),e.jsx("p",{className:"text-xl font-semibold",children:p.value})]})]})},p.label))})}function Pd(){const a=In(),[r,t]=f.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),{orders:n}=st(),{t:s}=ke("dashboard"),i=f.useMemo(()=>n.filter(c=>{const p=new Date(c.createdAt.seconds*1e3);return p>=r.startDate&&p<=r.endDate}),[n,r]),l=f.useMemo(()=>i.filter(c=>c.status==="delivered"),[i]),o=f.useMemo(()=>{const c=Math.max(1,Math.ceil((r.endDate.getTime()-r.startDate.getTime())/864e5)),p=l.length/c;return{totalRevenue:l.reduce((d,u)=>d+Number(u.subtotal||0),0),totalOrders:l.length,uniqueCustomers:new Set(l.map(d=>d.customerEmail||d.customerPhone)).size,dailyOrderRate:Math.round(p*10)/10}},[i,l,r]);return a?e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx(Xc,{className:"w-12 h-12 mx-auto text-blue-500 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vue limitée sur mobile"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Pour une meilleure expérience et accéder à toutes les fonctionnalités, veuillez utiliser un écran plus large."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Commandes Récentes"}),e.jsx(Ds,{orders:l,itemsPerPage:5})]}),e.jsx(ks,{...o}),e.jsx(Cs,{orders:l})]}):e.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:s("dashboard")}),e.jsx(ba,{startDate:r.startDate,endDate:r.endDate,onDateChange:(c,p)=>t({startDate:c,endDate:p})})]}),e.jsx(ks,{...o}),e.jsx(Cs,{orders:l}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("income")}),e.jsx(Md,{orders:l,dateRange:r})]}),e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"État des commandes"}),e.jsx(Ad,{data:l.reduce((c,p)=>(c[p.status]=(c[p.status]||0)+1,c),{})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("recent-orders")}),e.jsx(Ds,{orders:l,itemsPerPage:5})]}),e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Meilleurs clients"}),e.jsx(Ed,{orders:l.filter(c=>!!c.customerPhone),itemsPerPage:5})]})]})]})}function Td({category:a,onSave:r,onCancel:t,isLoading:n}){const{register:s,handleSubmit:i,formState:{errors:l,isDirty:o}}=Ve({defaultValues:a||{name:"",description:"",order:0}});return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700/80",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"Modifier la catégorie":"Nouvelle catégorie"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a?"Modifier les détails de la catégorie":"Ajouter une nouvelle catégorie au menu"})]}),e.jsx("button",{onClick:t,className:"absolute right-4 top-4 p-2 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700/60 transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:c=>{c.stopPropagation(),i(r)(c)},className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(nl,{className:"w-4 h-4"}),"Nom"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...s("name",{required:"Le nom est requis"}),className:`
                  w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5 pl-4
                  border border-gray-200 dark:border-gray-700
                  text-gray-900 dark:text-white
                  placeholder:text-gray-400 dark:placeholder:text-gray-500
                  focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                  transition-shadow
                  ${l.name?"border-red-500 dark:border-red-500":""}
                `,placeholder:"Ex: Entrées"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500 dark:text-red-400",children:l.name.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(Tc,{className:"w-4 h-4"}),"Description"]}),e.jsx("textarea",{...s("description"),rows:3,className:`
                w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5
                border border-gray-200 dark:border-gray-700
                text-gray-900 dark:text-white
                placeholder:text-gray-400 dark:placeholder:text-gray-500
                focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                transition-shadow resize-none
              `,placeholder:"Description de la catégorie (optionnel)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(Zi,{className:"w-4 h-4"}),"Ordre d'affichage"]}),e.jsx("input",{type:"number",...s("order",{valueAsNumber:!0,min:{value:0,message:"L'ordre doit être positif"}}),className:`
                w-full rounded-lg bg-gray-50 dark:bg-gray-700/50 p-2.5
                border border-gray-200 dark:border-gray-700
                text-gray-900 dark:text-white
                placeholder:text-gray-400 dark:placeholder:text-gray-500
                focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-500
                transition-shadow
              `,placeholder:"0"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,className:"px-4",children:"Annuler"}),e.jsx(C,{type:"submit",disabled:!o||n,className:"px-6 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600",children:a?"Mettre à jour":"Ajouter"})]})]})]})})}function Ba({isOpen:a,onClose:r,onConfirm:t,title:n,message:s}){const{t:i}=ke();return a?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-semibold",children:n}),e.jsx("button",{onClick:r,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:s})}),e.jsxs("div",{className:"flex justify-end gap-4 p-6 border-t dark:border-gray-700",children:[e.jsx(C,{variant:"secondary",onClick:r,children:i("common.cancel")}),e.jsx(C,{variant:"danger",onClick:t,children:i("common.delete")})]})]})}):null}const ll=({title:a,description:r})=>e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(qr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:a}),r&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r})]});function Od(){const{categories:a,isLoading:r,addCategory:t,updateCategory:n,deleteCategory:s}=cr(),[i,l]=f.useState(null),[o,c]=f.useState(!1),[p,d]=f.useState(!1),[u,m]=f.useState(""),[x,g]=f.useState({isOpen:!1}),[h,v]=f.useState("asc"),b=async w=>{try{d(!0),i?(await n(i.id,w),E.success("Catégorie mise à jour avec succès")):(await t(w),E.success("Catégorie créée avec succès")),c(!1),l(null)}catch(S){console.error("Error saving category:",S),E.error("Une erreur est survenue")}finally{d(!1)}},j=w=>{l(w),c(!0)},N=w=>{g({isOpen:!0,categoryId:w.id,categoryName:w.name})},y=async()=>{if(x.categoryId)try{await s(x.categoryId),E.success("Catégorie supprimée avec succès")}catch(w){console.error("Error deleting category:",w),E.error("Une erreur est survenue")}finally{g({isOpen:!1})}},k=a.filter(w=>{var S;return w.name.toLowerCase().includes(u.toLowerCase())||((S=w.description)==null?void 0:S.toLowerCase().includes(u.toLowerCase()))}).sort((w,S)=>{const P=h==="asc"?1:-1;return(w.order-S.order)*P});return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 md:space-y-0 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(qr,{className:"w-6 h-6 text-blue-500"}),"Catégories"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gérez les catégories de votre menu"})]}),e.jsxs(C,{onClick:()=>c(!0),type:"button",children:[e.jsx("span",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx(ce,{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-300"}),e.jsx("span",{className:"relative",children:"Nouvelle catégorie"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Rechercher une catégorie...",value:u,onChange:w=>m(w.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 transition-shadow"}),e.jsx(_e,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs(C,{variant:"secondary",onClick:()=>v(w=>w==="asc"?"desc":"asc"),className:"min-w-[140px]",children:[e.jsx(Rc,{className:"w-4 h-4 mr-2"}),h==="asc"?"Croissant":"Décroissant"]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:r?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Qa,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Chargement des catégories..."})]})}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(_,{mode:"popLayout",children:k.length===0?e.jsx(ll,{title:"Aucune catégorie trouvée",description:u?"Essayez d'autres termes de recherche":"Commencez par créer une catégorie"}):k.map((w,S)=>e.jsx(D.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium",children:w.order}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:w.name}),w.description&&e.jsx("p",{className:"mt-0.5 text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:w.description})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(C,{variant:"ghost",onClick:()=>j(w),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:"Modifier"}),e.jsx(C,{variant:"ghost",onClick:()=>N(w),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Supprimer"})]})]})},w.id))})})}),o&&e.jsx(Td,{isLoading:p,category:i,onSave:b,onCancel:()=>{c(!1),l(null)}}),e.jsx(Ba,{isOpen:x.isOpen,onClose:()=>g({isOpen:!1}),onConfirm:y,title:"Supprimer la catégorie ?",message:`Êtes-vous sûr de vouloir supprimer la catégorie "${x.categoryName}" ?`})]})}function ol({files:a,isLoading:r,onDelete:t,onSelect:n,selectedFiles:s=new Set,onToggleSelect:i}){return r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((l,o)=>e.jsx("div",{className:"aspect-square animate-pulse bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-lg overflow-hidden",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(zr,{className:"w-8 h-8 text-gray-400 dark:text-gray-600 animate-pulse"})})},o))}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(zr,{className:"w-12 h-12 text-gray-400 dark:text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun fichier trouvé"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:e.jsx(_,{mode:"popLayout",children:a.map(l=>e.jsxs(D.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i==null?void 0:i(l.id),className:`
              group relative aspect-square bg-gradient-to-br from-gray-100 to-gray-200 
              dark:from-gray-800 dark:to-gray-700 rounded-lg overflow-hidden shadow-sm 
              hover:shadow-md transition-all duration-200 cursor-pointer
              ${s.has(l.id)?"ring-2 ring-blue-500 dark:ring-blue-400":""}
            `,children:[e.jsx("img",{src:l.url,alt:l.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-4",children:[e.jsx("p",{className:"text-white font-medium truncate mb-1",children:l.name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-300",children:new Date(l.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[n?e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),n(l.url)},className:"bg-white/20 hover:bg-white/30",children:e.jsx(Gr,{className:"w-4 h-4 text-white"})}):e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),window.open(l.url,"_blank")},className:"bg-white/20 hover:bg-white/30",children:e.jsx(pn,{className:"w-4 h-4 text-white"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:o=>{o.stopPropagation(),t(l.id)},className:"bg-red-500/80 hover:bg-red-500",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})]})})]},l.id))})})}const Ld=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Ma(a,r,t){const n=Rd(a),{webkitRelativePath:s}=a,i=typeof r=="string"?r:typeof s=="string"&&s.length>0?s:`./${a.name}`;return typeof n.path!="string"&&Ss(n,"path",i),Ss(n,"relativePath",i),n}function Rd(a){const{name:r}=a;if(r&&r.lastIndexOf(".")!==-1&&!a.type){const n=r.split(".").pop().toLowerCase(),s=Ld.get(n);s&&Object.defineProperty(a,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return a}function Ss(a,r,t){Object.defineProperty(a,r,{value:t,writable:!1,configurable:!1,enumerable:!0})}const Fd=[".DS_Store","Thumbs.db"];function Bd(a){return ha(this,void 0,void 0,function*(){return $r(a)&&Gd(a.dataTransfer)?Ud(a.dataTransfer,a.type):zd(a)?qd(a):Array.isArray(a)&&a.every(r=>"getFile"in r&&typeof r.getFile=="function")?$d(a):[]})}function Gd(a){return $r(a)}function zd(a){return $r(a)&&$r(a.target)}function $r(a){return typeof a=="object"&&a!==null}function qd(a){return vn(a.target.files).map(r=>Ma(r))}function $d(a){return ha(this,void 0,void 0,function*(){return(yield Promise.all(a.map(t=>t.getFile()))).map(t=>Ma(t))})}function Ud(a,r){return ha(this,void 0,void 0,function*(){if(a.items){const t=vn(a.items).filter(s=>s.kind==="file");if(r!=="drop")return t;const n=yield Promise.all(t.map(Vd));return As(cl(n))}return As(vn(a.files).map(t=>Ma(t)))})}function As(a){return a.filter(r=>Fd.indexOf(r.name)===-1)}function vn(a){if(a===null)return[];const r=[];for(let t=0;t<a.length;t++){const n=a[t];r.push(n)}return r}function Vd(a){if(typeof a.webkitGetAsEntry!="function")return Es(a);const r=a.webkitGetAsEntry();return r&&r.isDirectory?dl(r):Es(a,r)}function cl(a){return a.reduce((r,t)=>[...r,...Array.isArray(t)?cl(t):[t]],[])}function Es(a,r){return ha(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof a.getAsFileSystemHandle=="function"){const i=yield a.getAsFileSystemHandle();if(i===null)throw new Error(`${a} is not a File`);if(i!==void 0){const l=yield i.getFile();return l.handle=i,Ma(l)}}const n=a.getAsFile();if(!n)throw new Error(`${a} is not a File`);return Ma(n,(t=r==null?void 0:r.fullPath)!==null&&t!==void 0?t:void 0)})}function Hd(a){return ha(this,void 0,void 0,function*(){return a.isDirectory?dl(a):Wd(a)})}function dl(a){const r=a.createReader();return new Promise((t,n)=>{const s=[];function i(){r.readEntries(l=>ha(this,void 0,void 0,function*(){if(l.length){const o=Promise.all(l.map(Hd));s.push(o),i()}else try{const o=yield Promise.all(s);t(o)}catch(o){n(o)}}),l=>{n(l)})}i()})}function Wd(a){return ha(this,void 0,void 0,function*(){return new Promise((r,t)=>{a.file(n=>{const s=Ma(n,a.fullPath);r(s)},n=>{t(n)})})})}var Ot=function(a,r){if(a&&r){var t=Array.isArray(r)?r:r.split(",");if(t.length===0)return!0;var n=a.name||"",s=(a.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return t.some(function(l){var o=l.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?i===o.replace(/\/.*$/,""):s===o})}return!0};function Is(a){return Qd(a)||Kd(a)||pl(a)||_d()}function _d(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kd(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Qd(a){if(Array.isArray(a))return bn(a)}function Ms(a,r){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function Ps(a){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ms(Object(t),!0).forEach(function(n){ul(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Ms(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function ul(a,r,t){return r in a?Object.defineProperty(a,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[r]=t,a}function er(a,r){return Xd(a)||Jd(a,r)||pl(a,r)||Yd()}function Yd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pl(a,r){if(a){if(typeof a=="string")return bn(a,r);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bn(a,r)}}function bn(a,r){(r==null||r>a.length)&&(r=a.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=a[t];return n}function Jd(a,r){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n=[],s=!0,i=!1,l,o;try{for(t=t.call(a);!(s=(l=t.next()).done)&&(n.push(l.value),!(r&&n.length===r));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw o}}return n}}function Xd(a){if(Array.isArray(a))return a}var Zd=typeof Ot=="function"?Ot:Ot.default,eu="file-invalid-type",au="file-too-large",ru="file-too-small",tu="too-many-files",nu=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=r.split(","),n=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:eu,message:"File type must be ".concat(n)}},Ts=function(r){return{code:au,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Os=function(r){return{code:ru,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},su={code:tu,message:"Too many files"};function ml(a,r){var t=a.type==="application/x-moz-file"||Zd(a,r);return[t,t?null:nu(r)]}function xl(a,r,t){if(da(a.size))if(da(r)&&da(t)){if(a.size>t)return[!1,Ts(t)];if(a.size<r)return[!1,Os(r)]}else{if(da(r)&&a.size<r)return[!1,Os(r)];if(da(t)&&a.size>t)return[!1,Ts(t)]}return[!0,null]}function da(a){return a!=null}function iu(a){var r=a.files,t=a.accept,n=a.minSize,s=a.maxSize,i=a.multiple,l=a.maxFiles,o=a.validator;return!i&&r.length>1||i&&l>=1&&r.length>l?!1:r.every(function(c){var p=ml(c,t),d=er(p,1),u=d[0],m=xl(c,n,s),x=er(m,1),g=x[0],h=o?o(c):null;return u&&g&&!h})}function Ur(a){return typeof a.isPropagationStopped=="function"?a.isPropagationStopped():typeof a.cancelBubble<"u"?a.cancelBubble:!1}function Ir(a){return a.dataTransfer?Array.prototype.some.call(a.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!a.target&&!!a.target.files}function Ls(a){a.preventDefault()}function lu(a){return a.indexOf("MSIE")!==-1||a.indexOf("Trident/")!==-1}function ou(a){return a.indexOf("Edge/")!==-1}function cu(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return lu(a)||ou(a)}function qe(){for(var a=arguments.length,r=new Array(a),t=0;t<a;t++)r[t]=arguments[t];return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),l=1;l<s;l++)i[l-1]=arguments[l];return r.some(function(o){return!Ur(n)&&o&&o.apply(void 0,[n].concat(i)),Ur(n)})}}function du(){return"showOpenFilePicker"in window}function uu(a){if(da(a)){var r=Object.entries(a).filter(function(t){var n=er(t,2),s=n[0],i=n[1],l=!0;return gl(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(i)||!i.every(hl))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(t,n){var s=er(n,2),i=s[0],l=s[1];return Ps(Ps({},t),{},ul({},i,l))},{});return[{description:"Files",accept:r}]}return a}function pu(a){if(da(a))return Object.entries(a).reduce(function(r,t){var n=er(t,2),s=n[0],i=n[1];return[].concat(Is(r),[s],Is(i))},[]).filter(function(r){return gl(r)||hl(r)}).join(",")}function mu(a){return a instanceof DOMException&&(a.name==="AbortError"||a.code===a.ABORT_ERR)}function xu(a){return a instanceof DOMException&&(a.name==="SecurityError"||a.code===a.SECURITY_ERR)}function gl(a){return a==="audio/*"||a==="video/*"||a==="image/*"||a==="text/*"||a==="application/*"||/\w+\/[-+.\w]+/g.test(a)}function hl(a){return/^.*\.[\w]+$/.test(a)}var gu=["children"],hu=["open"],fu=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vu=["refKey","onChange","onClick"];function bu(a){return wu(a)||ju(a)||fl(a)||yu()}function yu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ju(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function wu(a){if(Array.isArray(a))return yn(a)}function Lt(a,r){return Cu(a)||ku(a,r)||fl(a,r)||Nu()}function Nu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fl(a,r){if(a){if(typeof a=="string")return yn(a,r);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yn(a,r)}}function yn(a,r){(r==null||r>a.length)&&(r=a.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=a[t];return n}function ku(a,r){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n=[],s=!0,i=!1,l,o;try{for(t=t.call(a);!(s=(l=t.next()).done)&&(n.push(l.value),!(r&&n.length===r));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&t.return!=null&&t.return()}finally{if(i)throw o}}return n}}function Cu(a){if(Array.isArray(a))return a}function Rs(a,r){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function ae(a){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Rs(Object(t),!0).forEach(function(n){jn(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Rs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function jn(a,r,t){return r in a?Object.defineProperty(a,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[r]=t,a}function Vr(a,r){if(a==null)return{};var t=Du(a,r),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(s=0;s<i.length;s++)n=i[s],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}function Du(a,r){if(a==null)return{};var t={},n=Object.keys(a),s,i;for(i=0;i<n.length;i++)s=n[i],!(r.indexOf(s)>=0)&&(t[s]=a[s]);return t}var Fn=f.forwardRef(function(a,r){var t=a.children,n=Vr(a,gu),s=Bn(n),i=s.open,l=Vr(s,hu);return f.useImperativeHandle(r,function(){return{open:i}},[i]),$.createElement(f.Fragment,null,t(ae(ae({},l),{},{open:i})))});Fn.displayName="Dropzone";var vl={disabled:!1,getFilesFromEvent:Bd,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Fn.defaultProps=vl;Fn.propTypes={children:Q.func,accept:Q.objectOf(Q.arrayOf(Q.string)),multiple:Q.bool,preventDropOnDocument:Q.bool,noClick:Q.bool,noKeyboard:Q.bool,noDrag:Q.bool,noDragEventsBubbling:Q.bool,minSize:Q.number,maxSize:Q.number,maxFiles:Q.number,disabled:Q.bool,getFilesFromEvent:Q.func,onFileDialogCancel:Q.func,onFileDialogOpen:Q.func,useFsAccessApi:Q.bool,autoFocus:Q.bool,onDragEnter:Q.func,onDragLeave:Q.func,onDragOver:Q.func,onDrop:Q.func,onDropAccepted:Q.func,onDropRejected:Q.func,onError:Q.func,validator:Q.func};var wn={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Bn(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=ae(ae({},vl),a),t=r.accept,n=r.disabled,s=r.getFilesFromEvent,i=r.maxSize,l=r.minSize,o=r.multiple,c=r.maxFiles,p=r.onDragEnter,d=r.onDragLeave,u=r.onDragOver,m=r.onDrop,x=r.onDropAccepted,g=r.onDropRejected,h=r.onFileDialogCancel,v=r.onFileDialogOpen,b=r.useFsAccessApi,j=r.autoFocus,N=r.preventDropOnDocument,y=r.noClick,k=r.noKeyboard,w=r.noDrag,S=r.noDragEventsBubbling,P=r.onError,O=r.validator,U=f.useMemo(function(){return pu(t)},[t]),z=f.useMemo(function(){return uu(t)},[t]),re=f.useMemo(function(){return typeof v=="function"?v:Fs},[v]),Z=f.useMemo(function(){return typeof h=="function"?h:Fs},[h]),G=f.useRef(null),V=f.useRef(null),te=f.useReducer(Su,wn),me=Lt(te,2),fe=me[0],B=me[1],H=fe.isFocused,se=fe.isFileDialogActive,ee=f.useRef(typeof window<"u"&&window.isSecureContext&&b&&du()),Qe=function(){!ee.current&&se&&setTimeout(function(){if(V.current){var F=V.current.files;F.length||(B({type:"closeDialog"}),Z())}},300)};f.useEffect(function(){return window.addEventListener("focus",Qe,!1),function(){window.removeEventListener("focus",Qe,!1)}},[V,se,Z,ee]);var Te=f.useRef([]),Oe=function(F){G.current&&G.current.contains(F.target)||(F.preventDefault(),Te.current=[])};f.useEffect(function(){return N&&(document.addEventListener("dragover",Ls,!1),document.addEventListener("drop",Oe,!1)),function(){N&&(document.removeEventListener("dragover",Ls),document.removeEventListener("drop",Oe))}},[G,N]),f.useEffect(function(){return!n&&j&&G.current&&G.current.focus(),function(){}},[G,j,n]);var Se=f.useCallback(function(M){P?P(M):console.error(M)},[P]),na=f.useCallback(function(M){M.preventDefault(),M.persist(),Je(M),Te.current=[].concat(bu(Te.current),[M.target]),Ir(M)&&Promise.resolve(s(M)).then(function(F){if(!(Ur(M)&&!S)){var ne=F.length,ie=ne>0&&iu({files:F,accept:U,minSize:l,maxSize:i,multiple:o,maxFiles:c,validator:O}),ye=ne>0&&!ie;B({isDragAccept:ie,isDragReject:ye,isDragActive:!0,type:"setDraggedFiles"}),p&&p(M)}}).catch(function(F){return Se(F)})},[s,p,Se,S,U,l,i,o,c,O]),sa=f.useCallback(function(M){M.preventDefault(),M.persist(),Je(M);var F=Ir(M);if(F&&M.dataTransfer)try{M.dataTransfer.dropEffect="copy"}catch{}return F&&u&&u(M),!1},[u,S]),ya=f.useCallback(function(M){M.preventDefault(),M.persist(),Je(M);var F=Te.current.filter(function(ie){return G.current&&G.current.contains(ie)}),ne=F.indexOf(M.target);ne!==-1&&F.splice(ne,1),Te.current=F,!(F.length>0)&&(B({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ir(M)&&d&&d(M))},[G,d,S]),Le=f.useCallback(function(M,F){var ne=[],ie=[];M.forEach(function(ye){var Va=ml(ye,U),Na=Lt(Va,2),Dt=Na[0],St=Na[1],At=xl(ye,l,i),Nr=Lt(At,2),Et=Nr[0],It=Nr[1],Mt=O?O(ye):null;if(Dt&&Et&&!Mt)ne.push(ye);else{var Pt=[St,It];Mt&&(Pt=Pt.concat(Mt)),ie.push({file:ye,errors:Pt.filter(function(_o){return _o})})}}),(!o&&ne.length>1||o&&c>=1&&ne.length>c)&&(ne.forEach(function(ye){ie.push({file:ye,errors:[su]})}),ne.splice(0)),B({acceptedFiles:ne,fileRejections:ie,isDragReject:ie.length>0,type:"setFiles"}),m&&m(ne,ie,F),ie.length>0&&g&&g(ie,F),ne.length>0&&x&&x(ne,F)},[B,o,U,l,i,c,m,x,g,O]),Ye=f.useCallback(function(M){M.preventDefault(),M.persist(),Je(M),Te.current=[],Ir(M)&&Promise.resolve(s(M)).then(function(F){Ur(M)&&!S||Le(F,M)}).catch(function(F){return Se(F)}),B({type:"reset"})},[s,Le,Se,S]),He=f.useCallback(function(){if(ee.current){B({type:"openDialog"}),re();var M={multiple:o,types:z};window.showOpenFilePicker(M).then(function(F){return s(F)}).then(function(F){Le(F,null),B({type:"closeDialog"})}).catch(function(F){mu(F)?(Z(F),B({type:"closeDialog"})):xu(F)?(ee.current=!1,V.current?(V.current.value=null,V.current.click()):Se(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Se(F)});return}V.current&&(B({type:"openDialog"}),re(),V.current.value=null,V.current.click())},[B,re,Z,b,Le,Se,z,o]),ja=f.useCallback(function(M){!G.current||!G.current.isEqualNode(M.target)||(M.key===" "||M.key==="Enter"||M.keyCode===32||M.keyCode===13)&&(M.preventDefault(),He())},[G,He]),ia=f.useCallback(function(){B({type:"focus"})},[]),$a=f.useCallback(function(){B({type:"blur"})},[]),wa=f.useCallback(function(){y||(cu()?setTimeout(He,0):He())},[y,He]),Ge=function(F){return n?null:F},Ua=function(F){return k?null:Ge(F)},ze=function(F){return w?null:Ge(F)},Je=function(F){S&&F.stopPropagation()},Vo=f.useMemo(function(){return function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=M.refKey,ne=F===void 0?"ref":F,ie=M.role,ye=M.onKeyDown,Va=M.onFocus,Na=M.onBlur,Dt=M.onClick,St=M.onDragEnter,At=M.onDragOver,Nr=M.onDragLeave,Et=M.onDrop,It=Vr(M,fu);return ae(ae(jn({onKeyDown:Ua(qe(ye,ja)),onFocus:Ua(qe(Va,ia)),onBlur:Ua(qe(Na,$a)),onClick:Ge(qe(Dt,wa)),onDragEnter:ze(qe(St,na)),onDragOver:ze(qe(At,sa)),onDragLeave:ze(qe(Nr,ya)),onDrop:ze(qe(Et,Ye)),role:typeof ie=="string"&&ie!==""?ie:"presentation"},ne,G),!n&&!k?{tabIndex:0}:{}),It)}},[G,ja,ia,$a,wa,na,sa,ya,Ye,k,w,n]),Ho=f.useCallback(function(M){M.stopPropagation()},[]),Wo=f.useMemo(function(){return function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=M.refKey,ne=F===void 0?"ref":F,ie=M.onChange,ye=M.onClick,Va=Vr(M,vu),Na=jn({accept:U,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ge(qe(ie,Ye)),onClick:Ge(qe(ye,Ho)),tabIndex:-1},ne,V);return ae(ae({},Na),Va)}},[V,t,o,Ye,n]);return ae(ae({},fe),{},{isFocused:H&&!n,getRootProps:Vo,getInputProps:Wo,rootRef:G,inputRef:V,open:Ge(He)})}function Su(a,r){switch(r.type){case"focus":return ae(ae({},a),{},{isFocused:!0});case"blur":return ae(ae({},a),{},{isFocused:!1});case"openDialog":return ae(ae({},wn),{},{isFileDialogActive:!0});case"closeDialog":return ae(ae({},a),{},{isFileDialogActive:!1});case"setDraggedFiles":return ae(ae({},a),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return ae(ae({},a),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections,isDragReject:r.isDragReject});case"reset":return ae({},wn);default:return a}}function Fs(){}function bl({progress:a,isComplete:r}){return e.jsxs("div",{className:"relative h-2 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700",children:[e.jsx(D.div,{initial:{scaleX:0},animate:{scaleX:a/100},transition:{type:"spring",stiffness:200,damping:20},className:`absolute inset-0 origin-left ${r?"bg-green-500 dark:bg-green-400":"bg-blue-500 dark:bg-blue-400"}`}),!r&&a>0&&a<100&&e.jsx(D.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"}),r&&e.jsx(D.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},className:"absolute inset-0 bg-green-500/20"})]})}function Au({onClose:a,onUpload:r,maxSizeMB:t=5,acceptedFileTypes:n=[".png",".jpg",".jpeg",".gif"]}){const[s,i]=f.useState(null),l=s!==null,o=s===100,c=f.useCallback(async m=>{const x=m[0];if(x)try{i(0),await r(x),i(100),setTimeout(()=>{a()},1500)}catch(g){console.error("Upload error:",g),i(null)}},[r,a]),{getRootProps:p,getInputProps:d,isDragActive:u}=Bn({onDrop:c,accept:{"image/*":n},maxSize:t*1024*1024,multiple:!1});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative w-full max-w-lg rounded-xl bg-white p-6 shadow-xl dark:bg-gray-800",children:[e.jsx("button",{onClick:a,disabled:l&&!o,className:"absolute right-4 top-4 rounded-full p-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 disabled:opacity-50",children:e.jsx(X,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-900 dark:text-white",children:"Ajouter un média"}),e.jsxs("div",{...p(),className:`
            relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8
            transition-all
            ${u?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":o?"border-green-500 bg-green-50 dark:border-green-400 dark:bg-green-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}
          `,children:[e.jsx("input",{...d()}),l?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx(_,{mode:"wait",children:e.jsx(D.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-gray-900 dark:text-gray-100 font-medium",children:o?"Téléchargement terminé!":"Ajout d'image en cours..."},o?"complete":"uploading")}),e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[s,"%"]})]}),e.jsx(bl,{progress:s||0,isComplete:o}),o&&e.jsxs(D.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center justify-center text-green-600 dark:text-green-400",children:[e.jsx(Gr,{className:"h-6 w-6 mr-2"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Téléchargement terminé!"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:`h-12 w-12 mb-4 ${u?"text-blue-500 dark:text-blue-400":"text-gray-400"}`}),e.jsx("p",{className:"text-center text-gray-900 dark:text-gray-100",children:u?"Déposez le fichier ici...":e.jsxs(e.Fragment,{children:["Glissez et déposez un fichier ici, ou",e.jsx("br",{}),e.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"cliquez pour sélectionner"})]})}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["PNG, JPG, GIF jusqu'à ",t,"MB"]})]})]})]})})}const Rt=12;function Eu({onSelect:a,onClose:r,files:t,onUpload:n}){const[s,i]=f.useState(!0),[l,o]=f.useState(""),[c,p]=f.useState(!1),[d,u]=f.useState(1),m=t.filter(v=>v.name.toLowerCase().includes(l.toLowerCase())),x=Math.ceil(m.length/Rt),g=m.slice((d-1)*Rt,d*Rt),h=async v=>{try{await n(v),p(!1)}catch(b){console.error("Upload error:",b)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-4xl max-h-[80vh] rounded-xl bg-white p-6 shadow-xl dark:bg-gray-800 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bibliothèque Média"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," fichiers au total"]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher...",value:l,onChange:v=>o(v.target.value),className:"w-full rounded-lg border pl-10 pr-4 py-2 dark:border-gray-700 dark:bg-gray-800"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(C,{variant:s?"primary":"secondary",size:"sm",onClick:()=>i(!0),children:e.jsx(Xi,{className:"h-4 w-4"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(ol,{files:g,isLoading:!1,onDelete:()=>{},onSelect:a})}),x>1&&e.jsx("div",{className:"mt-6 pt-6 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:d,totalPages:x,onPageChange:u})}),c&&e.jsx(Au,{onClose:()=>p(!1),onUpload:h})]})})}class Iu{constructor(){ka(this,"collection","media")}async getAllMedia(){try{const r=Ac(ca(Ie,this.collection),Ec("createdAt","desc"));return(await Sa(r)).docs.map(n=>({id:n.id,...n.data()}))}catch(r){throw console.error("Error fetching media:",r),new Error("Failed to fetch media files")}}async uploadFile(r,t){var n;try{const s=await Ya.uploadFile(r,t);return await Ic(Ie,async i=>{const l={name:r.name,url:s,size:r.size,type:r.type,createdAt:new Date().toISOString()},o=hs(ca(Ie,this.collection));i.set(o,l)}),s}catch(s){if(typeof s=="object"&&s!==null&&"url"in s)try{const i=(n=s.url.split("/").pop())==null?void 0:n.split(".")[0];i&&await Ya.deleteFile(i)}catch(i){console.error("Error cleaning up Cloudinary file:",i)}throw s}}async deleteFiles(r){try{const t=gn(Ie),n=[];for(const s of r){const i=hs(Ie,this.collection,s),l=await Mc(i);l.exists()&&(n.push({id:s,...l.data()}),t.delete(i))}await Promise.all(n.map(async s=>{var i;try{const l=(i=s.url.split("/").pop())==null?void 0:i.split(".")[0];l&&await Ya.deleteFile(l)}catch(l){console.error(`Error deleting file from Cloudinary: ${s.url}`,l)}})),await t.commit()}catch(t){throw console.error("Error deleting files:",t),new Error("Failed to delete files")}}}const Ea=new Iu;function Mu(){const[a,r]=f.useState([]),[t,n]=f.useState(!0);f.useEffect(()=>{s()},[]);const s=async()=>{try{n(!0);const o=await Ea.getAllMedia();r(o)}catch(o){console.error("Error loading media files:",o),E.error("Failed to load media files")}finally{n(!1)}};return{files:a,isLoading:t,uploadFile:async o=>{try{const c=await Ea.uploadFile(o);return await s(),c}catch(c){throw console.error("Upload error:",c),E.error("Failed to upload file"),c}},deleteFile:async o=>{try{await Ea.deleteFile(o),await s(),E.success("Fichier supprimé avec succès")}catch(c){throw console.error("Delete error:",c),E.error("Impossible de supprimer le fichier"),c}},refreshFiles:s}}function ma({value:a,onChange:r,label:t="Logo du Restaurant",description:n="Format recommandé: PNG ou SVG avec fond transparent"}){const[s,i]=f.useState(!1),{files:l,uploadFile:o}=Mu(),c=d=>{r(d),i(!1)},p=d=>{d.preventDefault(),d.stopPropagation(),i(!0)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-base font-semibold text-gray-900 dark:text-gray-100",children:t}),e.jsxs(D.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col md:flex-row items-center gap-6 bg-white dark:bg-gray-900 p-6 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("div",{className:`relative h-32 w-32 flex-shrink-0 overflow-hidden rounded-xl 
          border-2 border-dashed 
          ${a?"border-blue-500/30 bg-blue-50/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800"} 
          flex items-center justify-center transition-all duration-300 hover:border-blue-500`,children:e.jsx(_,{mode:"wait",children:a?e.jsx(D.img,{src:a,alt:"Logo preview",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full w-full object-contain p-4",onError:()=>r("")},"logo"):e.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex flex-col items-center justify-center text-center text-gray-400 dark:text-gray-500",children:[e.jsx(zr,{className:"h-10 w-10 mb-2"}),e.jsx("span",{className:"text-xs text-center px-2",children:"Aucun logo"})]},"placeholder")})}),e.jsxs("div",{className:"w-full md:flex-1 space-y-4",children:[e.jsxs(C,{type:"button",onClick:p,variant:"secondary",className:`w-full flex items-center justify-center gap-2 
              bg-blue-50 dark:bg-blue-900/30 
              text-blue-600 dark:text-blue-400 
              hover:bg-blue-100 dark:hover:bg-blue-900/50 
              border border-blue-100 dark:border-blue-900/40
              transition-all duration-300 
              group`,children:[e.jsx(rt,{className:"h-5 w-5 transition-transform group-hover:rotate-6"}),"Choisir depuis la bibliothèque"]}),e.jsx(_,{children:a&&e.jsx(D.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs(C,{type:"button",variant:"danger",onClick:d=>{d.preventDefault(),d.stopPropagation(),r("")},className:`w-full flex items-center justify-center gap-2 
                    bg-red-50 dark:bg-red-900/30 
                    text-red-600 dark:text-red-400 
                    hover:bg-red-100 dark:hover:bg-red-900/50 
                    border border-red-100 dark:border-red-900/40
                    transition-all duration-300 
                    group`,children:[e.jsx(X,{className:"h-5 w-5 transition-transform group-hover:rotate-6"}),"Supprimer l'image"]})})})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 px-1",children:n}),s&&e.jsx(Eu,{onSelect:c,onClose:()=>i(!1),files:l,onUpload:o})]})}function Pu({variants:a,combination:r,price:t,image:n,onCombinationChange:s,onPriceChange:i,onImageChange:l,onRemove:o}){const{settings:c}=q(),p=u=>{l(u)},d=(u,m)=>{const x=m.filter(Boolean).find(g=>g.includes(u.name));return x&&x.split(": ")[1]||""};return e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg space-y-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("div",{className:"grid gap-4",children:a.map((u,m)=>e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:u.name}),e.jsxs("select",{className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",value:d(u,r),onChange:x=>{const g=[...r];g[m]=`${u.name}: ${x.target.value}`,s(g)},children:[e.jsx("option",{value:"null",children:"Sélectionner une valeur"}),u.values.map(x=>e.jsx("option",{value:x,children:x},x))]})]})},u.id))}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prix"}),e.jsx("input",{type:"number",step:(c==null?void 0:c.currency)==="XOF"?"1":"0.01",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",value:t,onChange:u=>i(parseFloat(u.target.value))})]}),e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(ma,{value:n||"",onChange:p,label:"Image de la variante",description:"Image spécifique pour cette combinaison (optionnel)"})})]}),e.jsx(C,{type:"button",variant:"danger",size:"sm",onClick:u=>o(u),className:"ml-4",children:e.jsx(X,{className:"w-4 h-4"})})]})})}function Tu({variants:a,value:r,onChange:t}){const n=l=>{l.preventDefault(),l.stopPropagation(),t([{variantCombination:[],price:0,image:""},...r].filter(Boolean))},s=(l,o)=>{o&&(o.preventDefault(),o.stopPropagation()),t(r.filter((c,p)=>p!==l))},i=(l,o)=>{const c=[...r];c[l]={...c[l],variantCombination:o},t(c)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Combinaisons de variantes"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gérez les différentes combinaisons de variantes et leurs prix"})]}),e.jsxs(C,{type:"button",onClick:n,children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une combinaison"]})]}),e.jsx(_,{mode:"popLayout",children:r.length===0?e.jsx(D.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx(Gi,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900 dark:text-white",children:"Aucune combinaison"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Commencez par ajouter une combinaison de variantes"})]})}):e.jsx("div",{className:"grid gap-4",children:r.map((l,o)=>e.jsx(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{layout:{duration:.2},opacity:{duration:.2}},children:e.jsx(Pu,{variants:a,combination:l.variantCombination,price:l.price,image:l.image,onCombinationChange:c=>i(o,c),onPriceChange:c=>{const p=[...r];p[o]={...p[o],price:c},t(p)},onImageChange:c=>{const p=[...r];p[o]={...p[o],image:c},t(p)},onRemove:c=>s(o,c)})},o))})})]})}function yl(a){const[r,t]=f.useState([]),[n,s]=f.useState(!0);f.useEffect(()=>{i()},[]);const i=async()=>{try{s(!0);const p=await Cr.getAll(a);t(p)}catch(p){console.error("Error loading inventory items:",p),E.error("Erreur lors du chargement de l'inventaire")}finally{s(!1)}};return{items:r,isLoading:n,addItem:async p=>{try{const d=await Cr.create(p);return t(u=>[...u,{...p,id:d}]),E.success("Produit ajouté avec succès"),d}catch(d){throw console.error("Error adding inventory item:",d),E.error("Erreur lors de l'ajout du produit"),d}},updateItem:async(p,d)=>{try{await Cr.update(p,d),t(u=>u.map(m=>m.id===p?{...m,...d}:m)),E.success("Produit mis à jour avec succès")}catch(u){throw console.error("Error updating inventory item:",u),E.error("Erreur lors de la mise à jour du produit"),u}},deleteItem:async p=>{try{await Cr.delete(p),t(d=>d.filter(u=>u.id!==p)),E.success("Produit supprimé avec succès")}catch(d){throw console.error("Error deleting inventory item:",d),E.error("Erreur lors de la suppression du produit"),d}},refreshItems:i}}function Ou({item:a,onSave:r,onCancel:t}){var N;const{categories:n}=cr(),{settings:s}=q(),[i,l]=f.useState((a==null?void 0:a.categoryId)||""),{items:o}=yl(),{variants:c}=zi(i),[p,d]=f.useState((a==null?void 0:a.variantPrices)||[]),{register:u,handleSubmit:m,watch:x,setValue:g,formState:{errors:h}}=Ve({defaultValues:{name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||"",price:(a==null?void 0:a.price)||0,image:(a==null?void 0:a.image)||"",categoryId:(a==null?void 0:a.categoryId)||"",stockQuantity:(a==null?void 0:a.stockQuantity)||0,inventoryConnections:(a==null?void 0:a.inventoryConnections)||[]}});f.useEffect(()=>{a!=null&&a.categoryId&&(l(a.categoryId),g("categoryId",a.categoryId))},[a==null?void 0:a.categoryId,g]);const v=y=>{const k=p.map(S=>({...S,variantCombination:S.variantCombination.filter(Boolean)})),w={...y,price:Number(y.price),stockQuantity:Number(y.stockQuantity),variantPrices:k.map(S=>({...S,price:Number(S.price)})),inventoryConnections:y.inventoryConnections.filter(S=>S.itemId&&S.ratio).map(S=>({...S,ratio:Number(S.ratio)}))};r(w)},b=y=>{const k=y.target.value;l(k),g("categoryId",k,{shouldDirty:!0}),k!==(a==null?void 0:a.categoryId)&&d([])},j=({index:y})=>{const k=x(`inventoryConnections.${y}.itemId`);return e.jsxs("div",{className:"grid grid-cols-[1fr,1fr,auto] gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Produit d'inventaire"}),e.jsxs("select",{value:k,...u(`inventoryConnections.${y}.itemId`),className:"w-full rounded-lg border dark:border-gray-600 p-2.5 dark:bg-gray-700 h-10",children:[e.jsx("option",{value:"",children:"Sélectionner un produit"}),o.map(w=>e.jsx("option",{value:w.id,children:w.name},w.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("label",{className:"block text-sm font-medium",children:["Ratio (1:",x(`inventoryConnections.${y}.ratio`)||"0",")"]})}),e.jsx("input",{type:"number",step:"0.1",min:"1",...u(`inventoryConnections.${y}.ratio`),className:"w-full rounded-lg border dark:border-gray-600 p-2.5 dark:bg-gray-700 h-10",placeholder:"Ex: 3 pour 1:3"}),e.jsx("span",{className:"text-xs mt-1 text-gray-500 dark:text-gray-400",children:"Le ratio est une règle de proportion simple entre le produit d'inventaire et le produit du menu"})]}),e.jsx(C,{type:"button",variant:"ghost",onClick:()=>{const w=x("inventoryConnections");g("inventoryConnections",w.filter((S,P)=>P!==y),{shouldDirty:!0})},className:"self-center mb-0.5",children:e.jsx(X,{className:"w-4 h-4"})})]},y)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[90vw] max-w-4xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-900 dark:text-white",children:a?"Modifier le produit":"Nouveau produit"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m(v),className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nom"}),e.jsx("input",{type:"text",...u("name",{required:"Le nom est requis"}),className:`w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 
                            bg-white dark:bg-gray-700 
                            focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                            dark:text-white dark:placeholder-gray-400
                            transition-colors`,placeholder:"Nom du produit"}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Catégorie"}),e.jsxs("select",{...u("categoryId",{required:"La catégorie est requise"}),value:i,onChange:b,className:`w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 
                            bg-white dark:bg-gray-700 
                            focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                            dark:text-white
                            transition-colors`,children:[e.jsx("option",{value:"",children:"Sélectionner une catégorie"}),n.map(y=>e.jsx("option",{value:y.id,children:y.name},y.id))]}),h.categoryId&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.categoryId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prix"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:(s==null?void 0:s.currency)==="XOF"?"1":"0.01",...u("price",{required:"Le prix est requis",min:{value:0,message:"Le prix doit être positif"}}),className:`w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 
                              bg-white dark:bg-gray-700 
                              focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                              dark:text-white
                              transition-colors pr-12`,placeholder:"0.00"}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-500 dark:text-gray-400",children:s==null?void 0:s.currency})]}),h.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.price.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stock"}),e.jsx("input",{type:"number",...u("stockQuantity",{required:"Le stock est requis",min:{value:0,message:"Le stock doit être positif"}}),className:`w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 
                            bg-white dark:bg-gray-700 
                            focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                            dark:text-white
                            transition-colors`,placeholder:"0"}),h.stockQuantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.stockQuantity.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{...u("description",{required:"La description est requise"}),rows:3,className:`w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2.5 
                            bg-white dark:bg-gray-700 
                            focus:ring-2 focus:ring-blue-500 focus:border-blue-500 
                            dark:text-white
                            transition-colors`,placeholder:"Description du produit"}),h.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.description.message})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ma,{value:x("image"),onChange:y=>g("image",y,{shouldDirty:!0}),label:"Image du produit",description:"Format recommandé: JPG ou PNG en haute résolution (1920x1080px minimum)"})})]}),e.jsxs("div",{className:"border-t dark:border-gray-700 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Connexions à l'inventaire"}),e.jsxs("div",{className:"space-y-4",children:[(N=x("inventoryConnections"))==null?void 0:N.map((y,k)=>e.jsx(j,{index:k},k)),e.jsxs(C,{type:"button",variant:"secondary",onClick:()=>{const y=x("inventoryConnections")||[];g("inventoryConnections",[...y,{itemId:"",ratio:1}],{shouldDirty:!0})},children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une connexion"]})]})]}),i&&c.length>0&&e.jsx("div",{className:"border-t dark:border-gray-700 pt-6",children:e.jsx(Tu,{variants:c,value:p,onChange:d})})]})}),e.jsx("div",{className:"p-4 md:p-6 border-t dark:border-gray-700 mt-auto",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"ghost",onClick:t,className:`px-6 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 
                dark:hover:bg-gray-700 transition-all duration-200 rounded-lg
                hover:shadow-sm active:scale-95`,children:"Annuler"}),e.jsxs(C,{type:"submit",className:`px-8 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 
                hover:from-blue-600 hover:to-indigo-700 text-white font-medium 
                rounded-lg shadow-sm hover:shadow-md transition-all duration-200 
                active:scale-95 relative overflow-hidden group`,children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center",children:a?"Mettre à jour":"Ajouter"}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-700 
                      opacity-0 group-hover:opacity-100 transition-opacity duration-200`})]})]})})]})]})})}const jl=f.forwardRef(({item:a,onEdit:r,onDelete:t,currency:n},s)=>{var p;const i=a.stockQuantity===0,l=a,o=$.useMemo(()=>{var u;if(!((u=l.variantPrices)!=null&&u.length))return{min:a.price,max:a.price};const d=[a.price,...l.variantPrices.map(m=>m.price)];return{min:Math.min(...d),max:Math.max(...d)}},[a,l.variantPrices]),c=((p=l.variantPrices)==null?void 0:p.length)>0;return e.jsxs(D.div,{ref:s,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"group relative flex flex-col overflow-hidden rounded-xl bg-white shadow-md transition-all duration-300 hover:translate-y-[-4px] hover:shadow-xl dark:bg-gray-800",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:a.image,alt:a.name,className:"h-full w-full object-cover transition-transform duration-500 will-change-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),i?e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-red-500/90 px-3 py-1.5 text-sm font-medium text-white shadow-lg",children:"Rupture de stock"}):a.stockQuantity<=5&&e.jsxs("div",{className:"absolute left-4 top-4 rounded-full bg-amber-500/90 px-3 py-1.5 text-sm font-medium text-white shadow-lg",children:["Stock faible: ",a.stockQuantity]}),e.jsx("div",{className:"absolute right-4 top-4 rounded-full bg-white/95 px-4 py-2 text-sm font-bold text-gray-900 shadow-lg backdrop-blur-sm dark:bg-gray-900/95 dark:text-white",children:c?e.jsxs(e.Fragment,{children:[I(o.min,n),o.max>o.min&&e.jsxs(e.Fragment,{children:[" - ",I(o.max,n)]})]}):I(a.price,n)})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-5",children:[e.jsxs("div",{className:"mb-4 flex-1",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-900 transition-colors dark:text-white",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 dark:text-gray-300",children:a.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-3",children:[e.jsx("span",{className:"inline-flex rounded-full bg-gray-100 px-3 py-1 text-sm font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-200",children:a.category}),e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ue,{className:"h-4 w-4"}),a.stockQuantity," en stock"]})]}),c&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.variantPrices.slice(0,2).filter(d=>{var u;return((u=d==null?void 0:d.variantCombination)==null?void 0:u.length)>0}).map((d,u)=>e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                             bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,children:d.variantCombination[0].split(": ")[1]},u)),l.variantPrices.length>2&&e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                                 bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`,children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),l.variantPrices.length-2]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>r(a),className:"h-9 w-9 rounded-full p-0 text-gray-500 hover:bg-blue-50 hover:text-blue-600 dark:text-gray-400 dark:hover:bg-blue-900/50 dark:hover:text-blue-400",children:[e.jsx(va,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Modifier"})]}),e.jsxs(C,{variant:"ghost",size:"sm",onClick:()=>t(a.id),className:"h-9 w-9 rounded-full p-0 text-gray-500 hover:bg-red-50 hover:text-red-600 dark:text-gray-400 dark:hover:bg-red-900/50 dark:hover:text-red-400",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Supprimer"})]})]})]})]})]})});jl.displayName="MenuItemCard";const Ft=9;function Lu({items:a,onEdit:r,onDelete:t,currency:n}){const[s,i]=f.useState(1),l=Math.ceil(a.length/Ft),o=(s-1)*Ft,c=a.slice(o,o+Ft);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(_,{mode:"popLayout",children:c.map(p=>e.jsx(jl,{item:p,onEdit:r,onDelete:t,currency:n},p.id))})}),l>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(ge,{currentPage:s,totalPages:l,onPageChange:i})})]})}function Ru({value:a,onChange:r}){const{t}=ke();return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:t("search"),value:a,onChange:n=>r(n.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500"}),e.jsx(_e,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})}function Fu({selectedCategory:a,onCategoryChange:r}){const{t}=ke(),{categories:n}=cr();return e.jsxs("div",{className:"relative w-48",children:[e.jsx("label",{htmlFor:"category-select",className:"sr-only",children:t("Select Category")}),e.jsxs("select",{id:"category-select",value:a,onChange:s=>r(s.target.value),className:"block appearance-none w-full bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 ease-in-out",children:[e.jsx("option",{value:"all",children:"Produits"}),n.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-200",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M5.516 7.548a.75.75 0 011.06.02L10 11.292l3.424-3.724a.75.75 0 111.08 1.04l-4 4.344a.75.75 0 01-1.08 0l-4-4.344a.75.75 0 01.02-1.06z"})})})]})}function Bu(){const{t:a}=ke(),{settings:r}=q(),[t,n]=f.useState([]),[s,i]=f.useState(null),[l,o]=f.useState(!1),[c,p]=f.useState(!0),[d,u]=f.useState(""),[m,x]=f.useState("all"),[g,h]=f.useState({isOpen:!1});$.useEffect(()=>{v()},[]);const v=async()=>{try{p(!0);const w=await Dr.getMenuItems();n(w)}catch(w){console.error("Error loading menu items:",w)}finally{p(!1)}},b=async w=>{try{if(s)await Dr.update(s.id,w),n(S=>S.map(P=>P.id===s.id?{...w,id:s.id}:P));else{const S=await Dr.create(w);n(P=>[...P,{...w,id:S}])}o(!1),i(null)}catch(S){console.error("Error saving menu item:",S),E.error(a("common.error"))}},j=w=>{i(w),o(!0)},N=async w=>{h({isOpen:!0,itemId:w})},y=async()=>{if(g.itemId)try{await Dr.delete(g.itemId),n(w=>w.filter(S=>S.id!==g.itemId))}catch(w){console.error("Error deleting menu item:",w)}finally{h({isOpen:!1})}},k=t.filter((w,S)=>{const P=w.name.toLowerCase().includes(d.toLowerCase())||w.description.toLowerCase().includes(d.toLowerCase()),O=m==="all"||w.categoryId===m;return P&&O});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("div",{className:"flex-1 w-full md:w-auto",children:e.jsx(Ru,{value:d,onChange:u})}),e.jsxs("div",{className:"flex items-center space-x-4 w-full md:w-auto",children:[e.jsx(Fu,{selectedCategory:m,onCategoryChange:x}),e.jsxs(C,{onClick:()=>o(!0),children:[e.jsx(ce,{className:"w-5 h-5 mr-2"}),"Ajouter un Item"]})]})]}),c&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((w,S)=>e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg h-72 animate-pulse"},S))}),!c&&k.length<1&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(ll,{title:"Aucun menu trouvé"})})}),!c&&k.length>0&&e.jsx(Lu,{items:k,onEdit:j,onDelete:N,currency:r==null?void 0:r.currency}),e.jsx(_,{children:l&&e.jsx(Ou,{item:s,onSave:b,onCancel:()=>{o(!1),i(null)},currency:r==null?void 0:r.currency})}),e.jsx(Ba,{isOpen:g.isOpen,onClose:()=>h({isOpen:!1}),onConfirm:y,title:"Supprimer le produit",message:"Voulez-vous vraiment supprimer ce produit ?"})]})}function Gu({order:a}){const{settings:r}=q(),t=a.items.reduce((n,s)=>n+s.quantity,0);return e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Commande #",a.id.slice(0,8)]}),a.diningOption==="dine-in"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 text-sm font-medium",children:[e.jsx(qi,{className:"w-4 h-4 mr-2"}),"Table ",a.tableNumber]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-xl bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 text-sm font-medium",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),"Livraison"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ua(a.createdAt)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:I(a.total,r==null?void 0:r.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," article",t>1?"s":""]})]})]})}function zu({order:a}){var t,n;const{settings:r}=q();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Détails client"}),e.jsxs("div",{className:"text-sm opacity-75 space-y-1",children:[e.jsx("p",{children:a.customerName}),e.jsx("p",{children:a.customerPhone}),a.customerEmail&&e.jsx("p",{children:a.customerEmail}),a.diningOption==="delivery"&&e.jsxs("p",{className:"font-medium",children:["Adresse de livraison : ",a.customerAddress]}),a.delivery&&e.jsxs("p",{className:"font-medium",children:["Livraison à ",a.delivery.name]})]})]}),a.paymentMethod&&e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(En,{className:"w-4 h-4"}),"Mode de paiement"]}),e.jsx("div",{className:"text-sm opacity-75",children:e.jsx("p",{children:a.paymentMethod.name})})]}),e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Produits commandés"}),e.jsx("div",{className:"space-y-2",children:a.items.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[s.quantity,"x ",s.name]}),e.jsx("span",{children:I(s.price*s.quantity,r==null?void 0:r.currency)})]},s.id))}),(!!a.subtotal||!!(a!=null&&a.taxes)||!!((t=a==null?void 0:a.tip)!=null&&t.percentage))&&e.jsxs("div",{className:"space-y-2  pt-4 mt-4 border-t border-current/10",children:[a.subtotal&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Sous-total"}),e.jsx("span",{children:I(a.subtotal,r==null?void 0:r.currency)})]}),((a==null?void 0:a.taxes)||[]).map((s,i)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-800 dark:text-gray-400",children:[e.jsxs("span",{children:[s.name," (",$i(s.rate),")"]}),e.jsx("span",{children:I(s.amount,r==null?void 0:r.currency)})]},s.id)),((n=a==null?void 0:a.tip)==null?void 0:n.percentage)&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Pourboire (",a.tip.percentage,"%)"]}),e.jsx("span",{children:I(a.tip.amount,r==null?void 0:r.currency)})]},a.tip.amount),(a==null?void 0:a.delivery)&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Livraison"}),e.jsx("span",{children:I(Number(a.delivery.price),r==null?void 0:r.currency)})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:I(a.total,r==null?void 0:r.currency)})]})]})]}),a.preference&&e.jsxs("div",{className:"border-t border-current/10 pt-4",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(aa,{})," Indications du client"]}),e.jsx("p",{className:"text-sm",children:a.preference})]})]})}const wl=$.forwardRef(({order:a,onStatusChange:r,onCancel:t},n)=>{const{settings:s}=q(),i=["pending","preparing"].includes(a.status),[l,o]=f.useState(!1),c={pending:"bg-yellow-50 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-300",preparing:"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300",ready:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-300",delivered:"bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-300",cancelled:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300"},p=async()=>{try{o(!0);const d=await mn(a,s);d.autoPrint(),window.open(d.output("bloburl")),E.success("Ticket envoyé à l'impression")}catch(d){console.error("Error printing receipt:",d),E.error("Erreur lors de l'impression")}finally{o(!1)}};return e.jsx(D.div,{ref:n,layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`rounded-lg shadow-sm p-6 ${c[a.status]} ${a.status==="cancelled"?"opacity-75 cursor-not-allowed":""}`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Gu,{order:a}),e.jsx(Bi,{order:a,status:a.status,createdAt:a.createdAt,updatedAt:a.updatedAt}),e.jsx(zu,{order:a}),e.jsxs("div",{className:"flex justify-between items-center gap-4 pt-4 border-t border-current/10",children:[a.status!=="cancelled"&&a.status!=="delivered"&&e.jsx(C,{onClick:()=>r(a.id,a.status==="pending"?"preparing":"delivered"),className:"flex-1 bg-white/90 hover:bg-white text-current",children:a.status==="pending"?"Marquer en préparation":"Marquer comme livré"}),i&&t&&e.jsx(C,{variant:"danger",onClick:()=>t(a.id),className:"flex-1",children:"Annuler la commande"})]}),e.jsxs(C,{onClick:p,disabled:l,className:"bg-white/90 hover:bg-white text-current px-4 py-2 rounded w-full",children:[e.jsx(al,{className:"h-4 w-4 mr-2"}),l?"Impression...":"Imprimer le ticket"]})]})})});wl.displayName="OrderCard";const Bt=8;function qu({orders:a,onStatusChange:r,onCancel:t}){const[n,s]=f.useState(1),i=Math.ceil(a.length/Bt),l=(n-1)*Bt,o=a.slice(l,l+Bt);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(_,{mode:"popLayout",children:o.map(c=>e.jsx(D.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{layout:{duration:.3},opacity:{duration:.2}},children:e.jsx(wl,{order:c,onStatusChange:r,onCancel:t})},c.id))}),a.length===0&&e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-full flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:e.jsx("p",{className:"text-lg",children:"Aucune commande trouvée"})})]}),i>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(ge,{currentPage:n,totalPages:i,onPageChange:s})})]})}function $u({stats:a}){const r=[{title:"Total Commandes",value:a.total,icon:We,color:"blue"},{title:"En Attente",value:a.pending,icon:Mn,color:"yellow"},{title:"En Préparation",value:a.preparing,icon:dr,color:"purple"},{title:"Livrées",value:a.delivered,icon:Pn,color:"green"}],t={blue:"bg-blue-50 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400",yellow:"bg-yellow-50 text-yellow-600 dark:bg-yellow-900/50 dark:text-yellow-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400",green:"bg-green-50 text-green-600 dark:bg-green-900/50 dark:text-green-400"};return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((n,s)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t[n.color]}`,children:e.jsx(n.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:n.title}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:n.value})]})]})},n.title))})}function Uu({currentFilter:a,onFilterChange:r,dateRange:t,onDateRangeChange:n}){const s=[{value:"all",label:"Toutes les commandes"},{value:"pending",label:"En Attente"},{value:"preparing",label:"En Préparation"},{value:"delivered",label:"Livré"},{value:"cancelled",label:"Annulé"}],i=[{label:"Ce Jour",days:0},{label:"7 Derniers Jours",days:7},{label:"30 Derniers Jours",days:30}],l=c=>{const p=new Date,d=new Date;c>0?d.setDate(d.getDate()-c):d.setHours(0,0,0,0),n({from:d,to:p})},o=()=>{n({})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(c=>e.jsx(C,{variant:a===c.value?"primary":"secondary",onClick:()=>r(c.value),size:"sm",children:c.label},c.value))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5 text-gray-500"}),i.map(c=>e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>l(c.days),children:c.label},c.label)),(t.from||t.to)&&e.jsx(C,{variant:"secondary",size:"sm",onClick:o,children:"Réinitialiser le filtre"})]})]})}function Pa({isOpen:a,title:r,message:t,confirmLabel:n="Confirmer",cancelLabel:s="Annuler",onConfirm:i,onCancel:l,isLoading:o=!1}){return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-md bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-6 border-b dark:border-gray-700",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(aa,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]}),e.jsx("button",{onClick:l,className:"absolute right-4 top-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 bg-gray-50 dark:bg-gray-800/50",children:[e.jsx(C,{variant:"secondary",onClick:l,disabled:o,children:s}),e.jsx(C,{variant:"danger",onClick:i,disabled:o,children:o?"Suppression...":n})]})]})}):null}function Vu(){const{orders:a,updateOrderStatus:r}=et(),[t,n]=f.useState("all"),[s,i]=f.useState({}),[l,o]=f.useState({isOpen:!1}),[c,p]=f.useState(""),d=h=>{const v=h.target.value;p(v)},u=f.useMemo(()=>a.filter(h=>{var v,b,j;if(t!=="all"&&h.status!==t)return!1;if(s.from||s.to){const N=new Date(h.createdAt.seconds*1e3);if(s.from&&N<s.from||s.to&&N>s.to)return!1}return c.length>0?h.id.includes(c)||((v=h.customerName)==null?void 0:v.toLowerCase().includes(c.toLowerCase()))||((b=h.customerEmail)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))||((j=h.customerPhone)==null?void 0:j.toLowerCase().includes(c.toLowerCase())):!0}).sort((h,v)=>new Date(v.createdAt).getTime()-new Date(h.createdAt).getTime()),[a,t,s,c]),m=f.useMemo(()=>({total:u.length,pending:u.filter(h=>h.status==="pending").length,preparing:u.filter(h=>h.status==="preparing").length,delivered:u.filter(h=>h.status==="delivered").length}),[u]),x=async(h,v)=>{try{await r(h,v)}catch(b){console.error("Error updating order status:",b)}},g=async()=>{if(l.orderId)try{await r(l.orderId,"cancelled"),o({isOpen:!1})}catch(h){console.error("Error cancelling order:",h)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:c,onChange:d,placeholder:"Lancer une recherche...",className:`w-full pl-12 pr-10 py-3 rounded-full border border-gray-200 dark:border-gray-700 
                   bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm
                   focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400
                   shadow-sm hover:shadow-md transition-shadow`})}),e.jsx($u,{stats:m}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6",children:e.jsx(Uu,{currentFilter:t,onFilterChange:n,dateRange:s,onDateRangeChange:i})}),e.jsx(qu,{orders:u,onStatusChange:x,onCancel:h=>o({isOpen:!0,orderId:h})}),e.jsx(Pa,{isOpen:l.isOpen,title:"Annuler la commande",message:"Êtes-vous sûr de vouloir annuler cette commande ? Cette action est irréversible.",confirmLabel:"Annuler la commande",onConfirm:g,onCancel:()=>o({isOpen:!1})})]})}function Hu({customers:a,onViewDetails:r}){const{settings:t}=q();return e.jsx("div",{className:"grid gap-4",children:a.map(n=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium text-lg",children:n.name}),e.jsxs("div",{className:"space-y-1",children:[n.email&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[e.jsx(lr,{className:"w-4 h-4 mr-2"}),n.email]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[e.jsx(or,{className:"w-4 h-4 mr-2"}),n.phone]})]})]}),e.jsxs("div",{className:"flex flex-col sm:items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{className:"text-sm font-medium",children:[n.orderCount," commande",n.orderCount>1?"s":""]})]}),e.jsx("p",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:I(n.totalSpent,t==null?void 0:t.currency)}),e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>r(n.id),children:"Voir détails"})]})]})},n.id))})}function Wu({searchTerm:a,onSearchChange:r,sortOrder:t,onSortChange:n,sortBy:s,onSortByChange:i}){return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:a,onChange:l=>r(l.target.value),placeholder:"Rechercher un client...",className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:s,onChange:l=>i(l.target.value),className:"rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 px-4 py-2",children:[e.jsx("option",{value:"spent",children:"Trier par dépenses"}),e.jsx("option",{value:"orders",children:"Trier par commandes"})]}),e.jsx(C,{variant:"secondary",onClick:()=>n(t==="asc"?"desc":"asc"),children:t==="asc"?e.jsx(Fc,{className:"w-5 h-5"}):e.jsx(Lc,{className:"w-5 h-5"})})]})]})}function _u(a){return f.useMemo(()=>{const r=new Map;return a.forEach(t=>{const n=t.customerEmail||t.customerPhone,s=r.get(n);s?(s.orderCount++,s.totalSpent+=t.total,s.lastOrderDate=new Date(t.createdAt).getTime()>new Date(s.lastOrderDate).getTime()?t.createdAt:s.lastOrderDate):r.set(n,{id:n,name:t.customerName,email:t.customerEmail||null,phone:t.customerPhone,orderCount:1,totalSpent:t.total,firstOrderDate:t.createdAt,lastOrderDate:t.createdAt})}),Array.from(r.values())},[a])}const Gt=10;function Ku(){const{orders:a}=st(),r=_u(a),[t,n]=f.useState(""),[s,i]=f.useState("desc"),[l,o]=f.useState("spent"),[c,p]=f.useState(null),[d,u]=f.useState(1),m=f.useMemo(()=>r.filter(b=>!!b.phone).filter(b=>{var j;return b.name.toLowerCase().includes(t.toLowerCase())||((j=b.email)==null?void 0:j.toLowerCase().includes(t.toLowerCase()))||b.phone.includes(t)}).sort((b,j)=>{const N=s==="asc"?1:-1;return l==="spent"?(b.totalSpent-j.totalSpent)*N:(b.orderCount-j.orderCount)*N}),[r,t,s,l]),x=Math.ceil(m.length/Gt),g=m.slice((d-1)*Gt,d*Gt),h=f.useMemo(()=>c&&r.find(b=>b.id===c)||null,[c,r]),v=f.useMemo(()=>c?a.filter(b=>b.customerEmail===c||b.customerPhone===c).sort((b,j)=>new Date(j.createdAt).getTime()-new Date(b.createdAt).getTime()):[],[c,a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Clients"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[r.length," client",r.length>1?"s":""," au total"]})]}),e.jsx(Wu,{searchTerm:t,onSearchChange:n,sortOrder:s,onSortChange:i,sortBy:l,onSortByChange:o}),e.jsx(Hu,{customers:g,onViewDetails:p}),x>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(ge,{currentPage:d,totalPages:x,onPageChange:u})}),e.jsx(il,{customer:h?{name:h.name,email:h.email,phone:h.phone}:null,orders:v,onClose:()=>p(null)})]})}function it({tabs:a,activeTab:r,onChange:t}){return e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:a.map(n=>e.jsxs("button",{onClick:()=>t(n.id),className:`relative py-4 px-1 ${r===n.id?"text-blue-600 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[n.label,r===n.id&&e.jsx(D.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},n.id))})})}function Bs({icon:a,title:r,description:t,value:n,selected:s,onChange:i,register:l}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-6 cursor-pointer transition-all
        ${s?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>i(n),children:[e.jsx("input",{type:"radio",...l("defaultTheme"),value:n,className:"sr-only"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 ${n==="light"?"bg-white":"bg-gray-900"} rounded-lg shadow-md`,children:e.jsx(a,{className:`w-8 h-8 ${n==="light"?"text-amber-500":"text-blue-400"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-1",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]})]})]})}function Gs({icon:a,title:r,description:t,value:n,selected:s,onChange:i,register:l}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-4 cursor-pointer transition-all
        ${s?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>i(n),children:[e.jsx("input",{type:"radio",...l("activeHeader"),value:n,className:"sr-only"}),e.jsx("div",{className:"aspect-video mb-4 rounded-md bg-gray-100 dark:bg-gray-700 p-8 flex items-center justify-center",children:e.jsx(a,{className:"w-24 h-24 text-blue-500 dark:text-blue-400"})}),e.jsx("h3",{className:"font-medium mb-1",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]})}function zt({icon:a,title:r,description:t,value:n,selected:s,onChange:i,register:l,imageUrl:o}){return e.jsxs("div",{className:`
        relative rounded-lg border-2 p-4 cursor-pointer transition-all
        ${s?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
      `,onClick:()=>i(n),children:[e.jsx("input",{type:"radio",...l("activeLanding"),value:n,className:"sr-only"}),e.jsx("div",{className:"aspect-video mb-4 rounded-md bg-gray-100 dark:bg-gray-700 overflow-hidden",children:e.jsx("img",{src:o,alt:r,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"font-medium mb-1",children:r}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]})}const Qu=async a=>(await Ui.get(`${Vi.baseUri}/settings/key/${a}`)).data.data,Yu=()=>{const[a,r]=f.useState(!1),[t,n]=f.useState(""),[s,i]=f.useState(null),l=async()=>{try{r(!0),n("");const o=await Qu("version");i(o)}catch(o){console.log(o),n(o.message||"Une erreur est survenue...")}finally{r(!1)}};return f.useEffect(()=>{l()},[]),{loading:a,errorLoading:t,version:s,refresh:l}},Ju=async a=>{const r=ac(a,rc.secret);return(await Ui.post(`${Vi.baseUri}/deploy/client`,{data:r})).data.data},Xu=()=>{const[a,r]=f.useState(!1),[t,n]=f.useState("");return{redeploy:async i=>{try{r(!0),await Ju({siteId:"3daf5d53-492e-4596-91aa-b57511226440",version:i})}catch(l){console.log(l),n((l==null?void 0:l.message)||"une erruer est survenue...")}finally{r(!1)}},isDeploying:a,error:t}},Rr=6*60,Ia="deploymentCooldown",Zu=()=>{try{const a=localStorage.getItem(Ia);if(!a)return null;const r=JSON.parse(a),t=Date.now();return Math.floor((t-r.timestamp)/1e3)>=Rr||r.version!==Da.version?(localStorage.removeItem(Ia),null):r}catch(a){return console.error("Error reading deployment cooldown:",a),localStorage.removeItem(Ia),null}},ep=a=>{try{const r={timestamp:Date.now(),version:a};localStorage.setItem(Ia,JSON.stringify(r))}catch(r){console.error("Error storing deployment cooldown:",r)}};function ap(){const{register:a,watch:r,setValue:t}=Ke(),{theme:n,toggleTheme:s}=Li(),{version:i,loading:l,errorLoading:o,refresh:c}=Yu(),{redeploy:p,isDeploying:d,error:u}=Xu(),[m,x]=f.useState(0);f.useEffect(()=>{const b=Zu();if(b){const j=Math.floor((Date.now()-b.timestamp)/1e3),N=Rr-j;N>0&&x(N)}},[]),f.useEffect(()=>{let b;return m>0&&(b=setInterval(()=>{x(j=>j<=1?(localStorage.removeItem(Ia),window.location.reload(),0):j-1)},1e3)),()=>{b&&clearInterval(b)}},[m]),f.useEffect(()=>{const b=j=>{if(j.key===Ia)if(j.newValue===null)x(0);else{const N=JSON.parse(j.newValue),y=Math.floor((Date.now()-N.timestamp)/1e3),k=Rr-y;k>0?x(k):x(0)}};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const g=async()=>{try{if(!(i!=null&&i.value)||Da.version===(i==null?void 0:i.value))return;await p(i==null?void 0:i.value),ep(Da.version),x(Rr)}catch(b){console.error("Deployment failed:",b)}},h=b=>{const j=Math.floor(b/60),N=b%60;return`${j}:${N.toString().padStart(2,"0")}`},v=async b=>{t("defaultTheme",b,{shouldDirty:!0}),localStorage.removeItem("theme-preference"),n!==b&&s()};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(fs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Thème par défaut"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Bs,{icon:Fi,title:"Mode Clair",description:"Interface lumineuse avec un contraste optimal",value:"light",selected:r("defaultTheme")==="light",onChange:v,register:a}),e.jsx(Bs,{icon:Ri,title:"Mode Sombre",description:"Interface sombre pour une meilleure visibilité nocturne",value:"dark",selected:r("defaultTheme")==="dark",onChange:v,register:a})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rd,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Style d'en-tête"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Gs,{icon:el,title:"En-tête Moderne",description:"Design moderne avec une mise en page élégante",value:"modern",selected:r("activeHeader")==="modern",onChange:b=>t("activeHeader",b,{shouldDirty:!0}),register:a}),e.jsx(Gs,{icon:Zc,title:"En-tête Classique",description:"Design traditionnel avec navigation simple",value:"classic",selected:r("activeHeader")==="classic",onChange:b=>t("activeHeader",b,{shouldDirty:!0}),register:a})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(qr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Template de Page d'Accueil"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(zt,{icon:id,title:"Modern",description:"Design moderne avec une grande image d'en-tête",value:"modern",selected:r("activeLanding")==="modern",onChange:b=>t("activeLanding",b,{shouldDirty:!0}),register:a,imageUrl:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?auto=format&fit=crop&w=500&q=60"}),e.jsx(zt,{icon:_c,title:"Minimal",description:"Design épuré et minimaliste",value:"minimal",selected:r("activeLanding")==="minimal",onChange:b=>t("activeLanding",b,{shouldDirty:!0}),register:a,imageUrl:"https://images.unsplash.com/photo-1466978913421-dad2ebd01d17?auto=format&fit=crop&w=500&q=60"}),e.jsx(zt,{icon:qr,title:"Grid",description:"Mise en page en grille avec images",value:"grid",selected:r("activeLanding")==="grid",onChange:b=>t("activeLanding",b,{shouldDirty:!0}),register:a,imageUrl:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&w=500&q=60"})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Mise à jour du site"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Version actuelle: ",Da.version]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Nouvelle version: ",i==null?void 0:i.value]}),m>0&&e.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:["Déploiement en cours, rafraichissez votre site dans exactement:"," ",h(m)]})]}),u&&e.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["Erreur lors du redéploiement: ",u]})}),e.jsx("button",{onClick:g,disabled:d||l||!!o||m>0||Da.version===(i==null?void 0:i.value),className:`inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors
                focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring
                disabled:pointer-events-none disabled:opacity-50
                bg-blue-600 text-white hover:bg-blue-700
                dark:bg-blue-500 dark:hover:bg-blue-600`,children:d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Redéploiement en cours..."]}):m>0?`Disponible dans ${h(m)}`:Da.version===(i==null?void 0:i.value)?"Votre site est à jour":"Mettre à jour le site"})]})]})]})}const rp=[{value:"Africa/Abidjan",label:"Abidjan (GMT+0)"},{value:"Africa/Accra",label:"Accra (GMT+0)"},{value:"Africa/Addis_Ababa",label:"Addis Ababa (GMT+3)"},{value:"Africa/Algiers",label:"Algiers (GMT+1)"},{value:"Africa/Asmara",label:"Asmara (GMT+3)"},{value:"Africa/Bamako",label:"Bamako (GMT+0)"},{value:"Africa/Bangui",label:"Bangui (GMT+1)"},{value:"Africa/Banjul",label:"Banjul (GMT+0)"},{value:"Africa/Bissau",label:"Bissau (GMT+0)"},{value:"Africa/Blantyre",label:"Blantyre (GMT+2)"},{value:"Africa/Brazzaville",label:"Brazzaville (GMT+1)"},{value:"Africa/Bujumbura",label:"Bujumbura (GMT+2)"},{value:"Africa/Cairo",label:"Cairo (GMT+2)"},{value:"Africa/Casablanca",label:"Casablanca (GMT+1)"},{value:"Africa/Ceuta",label:"Ceuta (GMT+1/+2)"},{value:"Africa/Conakry",label:"Conakry (GMT+0)"},{value:"Africa/Dakar",label:"Dakar (GMT+0)"},{value:"Africa/Dar_es_Salaam",label:"Dar es Salaam (GMT+3)"},{value:"Africa/Djibouti",label:"Djibouti (GMT+3)"},{value:"Africa/Douala",label:"Douala (GMT+1)"},{value:"Africa/El_Aaiun",label:"El Aaiun (GMT+0/+1)"},{value:"Africa/Freetown",label:"Freetown (GMT+0)"},{value:"Africa/Gaborone",label:"Gaborone (GMT+2)"},{value:"Africa/Harare",label:"Harare (GMT+2)"},{value:"Africa/Johannesburg",label:"Johannesburg (GMT+2)"},{value:"Africa/Juba",label:"Juba (GMT+3)"},{value:"Africa/Kampala",label:"Kampala (GMT+3)"},{value:"Africa/Khartoum",label:"Khartoum (GMT+2)"},{value:"Africa/Kigali",label:"Kigali (GMT+2)"},{value:"Africa/Kinshasa",label:"Kinshasa (GMT+1)"},{value:"Africa/Lagos",label:"Lagos (GMT+1)"},{value:"Africa/Libreville",label:"Libreville (GMT+1)"},{value:"Africa/Lome",label:"Lomé (GMT+0)"},{value:"Africa/Luanda",label:"Luanda (GMT+1)"},{value:"Africa/Lubumbashi",label:"Lubumbashi (GMT+2)"},{value:"Africa/Lusaka",label:"Lusaka (GMT+2)"},{value:"Africa/Malabo",label:"Malabo (GMT+1)"},{value:"Africa/Maputo",label:"Maputo (GMT+2)"},{value:"Africa/Maseru",label:"Maseru (GMT+2)"},{value:"Africa/Mbabane",label:"Mbabane (GMT+2)"},{value:"Africa/Mogadishu",label:"Mogadishu (GMT+3)"},{value:"Africa/Monrovia",label:"Monrovia (GMT+0)"},{value:"Africa/Nairobi",label:"Nairobi (GMT+3)"},{value:"Africa/Ndjamena",label:"Ndjamena (GMT+1)"},{value:"Africa/Niamey",label:"Niamey (GMT+1)"},{value:"Africa/Nouakchott",label:"Nouakchott (GMT+0)"},{value:"Africa/Ouagadougou",label:"Ouagadougou (GMT+0)"},{value:"Africa/Porto-Novo",label:"Porto-Novo (GMT+1)"},{value:"Africa/Sao_Tome",label:"São Tomé (GMT+0)"},{value:"Africa/Tripoli",label:"Tripoli (GMT+2)"},{value:"Africa/Tunis",label:"Tunis (GMT+1)"},{value:"Africa/Windhoek",label:"Windhoek (GMT+2)"},{value:"America/Anchorage",label:"Anchorage (GMT-9/-8)"},{value:"America/Antigua",label:"Antigua (GMT-4)"},{value:"America/Araguaina",label:"Araguaina (GMT-3)"},{value:"America/Argentina/Buenos_Aires",label:"Buenos Aires (GMT-3)"},{value:"America/Asuncion",label:"Asunción (GMT-4/-3)"},{value:"America/Barbados",label:"Barbados (GMT-4)"},{value:"America/Belem",label:"Belém (GMT-3)"},{value:"America/Belize",label:"Belize (GMT-6)"},{value:"America/Boa_Vista",label:"Boa Vista (GMT-4)"},{value:"America/Bogota",label:"Bogota (GMT-5)"},{value:"America/Caracas",label:"Caracas (GMT-4)"},{value:"America/Cayenne",label:"Cayenne (GMT-3)"},{value:"America/Cayman",label:"Cayman Islands (GMT-5)"},{value:"America/Chicago",label:"Chicago (GMT-6/-5)"},{value:"America/Cuiaba",label:"Cuiabá (GMT-4/-3)"},{value:"America/Denver",label:"Denver (GMT-7/-6)"},{value:"America/Dominica",label:"Dominica (GMT-4)"},{value:"America/Edmonton",label:"Edmonton (GMT-7/-6)"},{value:"America/El_Salvador",label:"El Salvador (GMT-6)"},{value:"America/Fortaleza",label:"Fortaleza (GMT-3)"},{value:"America/Glace_Bay",label:"Glace Bay (GMT-4/-3)"},{value:"America/Godthab",label:"Godthåb (GMT-3/-2)"},{value:"America/Goose_Bay",label:"Goose Bay (GMT-4/-3)"},{value:"America/Grand_Turk",label:"Grand Turk (GMT-5/-4)"},{value:"America/Grenada",label:"Grenada (GMT-4)"},{value:"America/Guadeloupe",label:"Guadeloupe (GMT-4)"},{value:"America/Guatemala",label:"Guatemala (GMT-6)"},{value:"America/Guayaquil",label:"Guayaquil (GMT-5)"},{value:"America/Guyana",label:"Guyana (GMT-4)"},{value:"America/Halifax",label:"Halifax (GMT-4/-3)"},{value:"America/Havana",label:"Havana (GMT-5/-4)"},{value:"America/Hermosillo",label:"Hermosillo (GMT-7)"},{value:"America/Indiana/Indianapolis",label:"Indianapolis (GMT-5/-4)"},{value:"America/Jamaica",label:"Jamaica (GMT-5)"},{value:"America/Juneau",label:"Juneau (GMT-9/-8)"},{value:"America/La_Paz",label:"La Paz (GMT-4)"},{value:"America/Lima",label:"Lima (GMT-5)"},{value:"America/Los_Angeles",label:"Los Angeles (GMT-8/-7)"},{value:"America/Maceio",label:"Maceió (GMT-3)"},{value:"America/Managua",label:"Managua (GMT-6)"},{value:"America/Manaus",label:"Manaus (GMT-4)"},{value:"America/Martinique",label:"Martinique (GMT-4)"},{value:"America/Mazatlan",label:"Mazatlán (GMT-7/-6)"},{value:"America/Mexico_City",label:"Mexico City (GMT-6/-5)"},{value:"America/Miquelon",label:"Miquelon (GMT-3/-2)"},{value:"America/Montevideo",label:"Montevideo (GMT-3)"},{value:"America/Montreal",label:"Montreal (GMT-5/-4)"},{value:"America/Nassau",label:"Nassau (GMT-5/-4)"},{value:"America/New_York",label:"New York (GMT-5/-4)"},{value:"America/Nipigon",label:"Nipigon (GMT-5/-4)"},{value:"America/Panama",label:"Panama (GMT-5)"},{value:"America/Paramaribo",label:"Paramaribo (GMT-3)"},{value:"America/Phoenix",label:"Phoenix (GMT-7)"},{value:"America/Port-au-Prince",label:"Port-au-Prince (GMT-5)"},{value:"America/Port_of_Spain",label:"Port of Spain (GMT-4)"},{value:"America/Porto_Velho",label:"Porto Velho (GMT-4)"},{value:"America/Puerto_Rico",label:"Puerto Rico (GMT-4)"},{value:"America/Rainy_River",label:"Rainy River (GMT-6/-5)"},{value:"America/Recife",label:"Recife (GMT-3)"},{value:"America/Regina",label:"Regina (GMT-6)"},{value:"America/Resolute",label:"Resolute (GMT-6/-5)"},{value:"America/Rio_Branco",label:"Rio Branco (GMT-5)"},{value:"America/Sao_Paulo",label:"São Paulo (GMT-3)"},{value:"America/Santarem",label:"Santarém (GMT-3)"},{value:"America/Santo_Domingo",label:"Santo Domingo (GMT-4)"},{value:"America/St_Johns",label:"St. John's (GMT-4/-3)"},{value:"America/St_Kitts",label:"St. Kitts (GMT-4)"},{value:"America/St_Lucia",label:"St. Lucia (GMT-4)"},{value:"America/St_Vincent",label:"St. Vincent (GMT-4)"},{value:"America/Swift_Current",label:"Swift Current (GMT-6)"},{value:"America/Tegucigalpa",label:"Tegucigalpa (GMT-6)"},{value:"America/Thunder_Bay",label:"Thunder Bay (GMT-5/-4)"},{value:"America/Toronto",label:"Toronto (GMT-5/-4)"},{value:"America/Tortola",label:"Tortola (GMT-4)"},{value:"America/Vancouver",label:"Vancouver (GMT-8/-7)"},{value:"America/Whitehorse",label:"Whitehorse (GMT-8/-7)"},{value:"America/Winnipeg",label:"Winnipeg (GMT-6/-5)"},{value:"America/Yakutat",label:"Yakutat (GMT-9/-8)"},{value:"Europe/Amsterdam",label:"Amsterdam (GMT+1/+2)"},{value:"Europe/Andorra",label:"Andorra (GMT+1/+2)"},{value:"Europe/Athens",label:"Athens (GMT+2/+3)"},{value:"Europe/Belgrade",label:"Belgrade (GMT+1/+2)"},{value:"Europe/Berlin",label:"Berlin (GMT+1/+2)"},{value:"Europe/Bratislava",label:"Bratislava (GMT+1/+2)"},{value:"Europe/Brussels",label:"Brussels (GMT+1/+2)"},{value:"Europe/Bucharest",label:"Bucharest (GMT+2/+3)"},{value:"Europe/Budapest",label:"Budapest (GMT+1/+2)"},{value:"Europe/Chisinau",label:"Chișinău (GMT+2/+3)"},{value:"Europe/Copenhagen",label:"Copenhagen (GMT+1/+2)"},{value:"Europe/Dublin",label:"Dublin (GMT+0/+1)"},{value:"Europe/Helsinki",label:"Helsinki (GMT+2/+3)"},{value:"Europe/Istanbul",label:"Istanbul (GMT+3)"},{value:"Europe/Kaliningrad",label:"Kaliningrad (GMT+2)"},{value:"Europe/Kiev",label:"Kyiv (GMT+2/+3)"},{value:"Europe/Lisbon",label:"Lisbon (GMT+0/+1)"},{value:"Europe/Ljubljana",label:"Ljubljana (GMT+1/+2)"},{value:"Europe/London",label:"London (GMT+0/+1)"},{value:"Europe/Luxembourg",label:"Luxembourg (GMT+1/+2)"},{value:"Europe/Madrid",label:"Madrid (GMT+1/+2)"},{value:"Europe/Malta",label:"Malta (GMT+1/+2)"},{value:"Europe/Minsk",label:"Minsk (GMT+3)"},{value:"Europe/Monaco",label:"Monaco (GMT+1/+2)"},{value:"Europe/Moscow",label:"Moscow (GMT+3)"},{value:"Europe/Oslo",label:"Oslo (GMT+1/+2)"},{value:"Europe/Paris",label:"Paris (GMT+1/+2)"},{value:"Europe/Podgorica",label:"Podgorica (GMT+1/+2)"},{value:"Europe/Prague",label:"Prague (GMT+1/+2)"},{value:"Europe/Riga",label:"Riga (GMT+2/+3)"},{value:"Europe/Rome",label:"Rome (GMT+1/+2)"},{value:"Europe/Samara",label:"Samara (GMT+4)"},{value:"Europe/San_Marino",label:"San Marino (GMT+1/+2)"},{value:"Europe/Sarajevo",label:"Sarajevo (GMT+1/+2)"},{value:"Europe/Simferopol",label:"Simferopol (GMT+3)"},{value:"Europe/Skopje",label:"Skopje (GMT+1/+2)"},{value:"Europe/Sofia",label:"Sofia (GMT+2/+3)"},{value:"Europe/Stockholm",label:"Stockholm (GMT+1/+2)"},{value:"Europe/Tallinn",label:"Tallinn (GMT+2/+3)"},{value:"Europe/Tirane",label:"Tirana (GMT+1/+2)"},{value:"Europe/Uzhgorod",label:"Uzhhorod (GMT+2/+3)"},{value:"Europe/Vaduz",label:"Vaduz (GMT+1/+2)"},{value:"Europe/Vatican",label:"Vatican (GMT+1/+2)"}],tp=({message:a})=>e.jsx("div",{className:"border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})});function np(){const{register:a,watch:r,formState:{errors:t},setError:n,clearErrors:s}=Ke(),i=r("canDeliver"),l=r("canDineIn"),o=r("hasOpeningHours");f.useEffect(()=>{!i&&!l?n("serviceOptions",{type:"custom",message:"Au moins une option de service doit être activée"}):s("serviceOptions")},[i,l,n,s]);const c=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],p={monday:"Lundi",tuesday:"Mardi",wednesday:"Mercredi",thursday:"Jeudi",friday:"Vendredi",saturday:"Samedi",sunday:"Dimanche"};return e.jsxs("div",{className:"space-y-8",children:[t.serviceOptions&&e.jsx(tp,{message:t.serviceOptions.message}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Ji,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Contact & Emplacement"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Adresse"}),e.jsx("input",{type:"text",...a("address",{required:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Téléphone"}),e.jsx("input",{type:"tel",...a("phone",{required:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Fermeture exceptionnelle"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...a("holidayClosure.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:"Activer la fermeture exceptionnelle"})]}),r("holidayClosure.enabled")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date de début"}),e.jsx("input",{type:"date",...a("holidayClosure.startDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date de fin"}),e.jsx("input",{type:"date",...a("holidayClosure.endDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Raison (optionnel)"}),e.jsx("input",{type:"text",...a("holidayClosure.reason"),placeholder:"Ex: Fermeture annuelle",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]})]}),e.jsx("section",{children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Fuseau horaire ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...a("openingHours.timezone",{required:"Le fuseau horaire est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"Sélectionner un fuseau horaire"}),rp.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ce fuseau horaire sera utilisé pour tous les horaires d'ouverture"})]})}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mn,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Horaires d'Ouverture"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...a("hasOpeningHours"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:o?"Actif":"Inactif"})]})]}),o&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-4",children:c.map(d=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"w-32",children:p[d]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...a(`openingHours.${d}.closed`),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:"Fermé"})]}),!r(`openingHours.${d}.closed`)&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"time",...a(`openingHours.${d}.open`),className:"rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsx("span",{children:"à"}),e.jsx("input",{type:"time",...a(`openingHours.${d}.close`),className:"rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]},d))})})]}),e.jsxs("div",{className:"space-y-6 p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg",children:"Options de Service"}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Za,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...a("canDeliver"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:["Livraison ",i?"(Actif)":"(Inactif)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Za,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...a("canDineIn"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsxs("span",{children:["Sur place ",l?"(Actif)":"(Inactif)"]})]})]}),l&&e.jsx("div",{className:"flex items-center gap-3 ml-8",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...a("paymentOnDineInActivated"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:"Activer le paiement sur place"})]})})]})]})]})}const zs=[{id:"whatsapp",name:"Whatsapp",icon:td},{id:"facebook",name:"Facebook",icon:tc},{id:"instagram",name:"Instagram",icon:nc},{id:"twitter",name:"Twitter",icon:sc},{id:"linkedin",name:"LinkedIn",icon:ed},{id:"youtube",name:"YouTube",icon:ic},{id:"tiktok",name:"Tiktok",icon:Zi}];function sp(){const{watch:a,setValue:r}=Ke(),t=a("socialMedia")||[],n=l=>{l.preventDefault(),r("socialMedia",[...t,{platform:"whatsapp",url:"",active:!0}],{shouldDirty:!0})},s=(l,o)=>{l.preventDefault(),r("socialMedia",t.filter((c,p)=>p!==o),{shouldDirty:!0})},i=(l,o,c)=>{l.preventDefault();const p=[...t];p[o]={...p[o],...c},r("socialMedia",p,{shouldDirty:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Réseaux Sociaux"})]}),e.jsxs(C,{type:"button",onClick:n,children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter un profil"]})]}),e.jsxs("div",{className:"space-y-4",children:[t.map((l,o)=>{const c=zs.find(d=>d.id===l.platform),p=(c==null?void 0:c.icon)||Lr;return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[200px,1fr,auto] gap-4 items-center",children:[e.jsx("select",{value:l.platform,onChange:d=>i(d,o,{platform:d.target.value}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:zs.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:e.jsx(p,{className:"w-4 h-4 text-gray-400"})}),e.jsx("input",{type:l.platform==="whatsapp"?"text":"url",value:l.url,onChange:d=>i(d,o,{url:d.target.value}),placeholder:l.platform==="whatsapp"?"Numéro de téléphone":`https://${l.platform}.com/...`,className:"w-full pl-10 rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{type:"button",variant:l.active?"primary":"secondary",size:"sm",onClick:d=>i(d,o,{active:!l.active}),children:l.active?"Actif":"Inactif"}),e.jsx(C,{type:"button",variant:"ghost",size:"sm",onClick:d=>s(d,o),className:"text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(X,{className:"w-4 h-4"})})]})]})},o)}),t.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(Lr,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun profil social ajouté"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:'Cliquez sur "Ajouter un profil" pour commencer'})]})]})]})}function ip(){var o,c,p,d,u;const{register:a,watch:r,setValue:t,formState:{errors:n}}=Ke(),s=(m,x)=>{t(m,x,{shouldDirty:!0,shouldTouch:!0})},i=r("currency"),l=xs.find(m=>m.value===i);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(qc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Informations Générales"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom du Restaurant"}),e.jsx("input",{type:"text",...a("name",{required:"Le nom du restaurant est requis"}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${n.name?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),n.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{...a("description",{required:"La description est requise",maxLength:{value:150,message:"La description ne peut pas dépasser 150 caractères"},minLength:{value:10,message:"La description doit contenir au moins 10 caractères"}}),rows:3,className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${n.description?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),n.description&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",...a("email",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${n.email?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.email.message})]}),e.jsx("div",{children:e.jsx(ma,{value:r("logo"),onChange:m=>s("logo",m)})}),e.jsx("div",{children:e.jsx(ma,{value:r("coverImage"),onChange:m=>s("coverImage",m),label:"Image de Couverture",description:"Format recommandé: JPG ou PNG en haute résolution (1920x1080px minimum)"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Devise"}),e.jsx("select",{...a("currency",{required:"La devise est requise"}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${n.currency?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`,children:xs.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))}),n.currency&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.currency.message}),e.jsxs("div",{className:"flex mt-4 items-center p-4 mb-4 text-sm text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert",children:[e.jsx("svg",{className:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),l&&(((o=l==null?void 0:l.acceptedPaymentMethods)==null?void 0:o.length)<1?e.jsxs("span",{children:["Moyen de payment disponibles:"," ",e.jsx("span",{className:"font-semibold",children:"Livraison et autres moyens ajoutés personnellement"})]}):e.jsxs("span",{children:["Moyen de payment disponibles:"," ",e.jsxs("span",{className:"font-semibold",children:[l==null?void 0:l.acceptedPaymentMethods.join(", ")," "]})]}))]})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tl,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Limites de commande"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nombre maximum de commandes"}),e.jsx("input",{type:"number",...a("rateLimits.maxOrders",{required:"Ce champ est requis",min:{value:1,message:"La valeur minimum est 1"}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${(c=n.rateLimits)!=null&&c.maxOrders?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),((p=n.rateLimits)==null?void 0:p.maxOrders)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.rateLimits.maxOrders.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Nombre maximum de commandes par période"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Période (en heures)"}),e.jsx("input",{type:"number",...a("rateLimits.timeWindowHours",{required:"Ce champ est requis",min:{value:1,message:"La valeur minimum est 1"}}),className:`w-full rounded-lg border p-2 dark:bg-gray-700 ${(d=n.rateLimits)!=null&&d.timeWindowHours?"border-red-500 dark:border-red-500":"dark:border-gray-600"}`}),((u=n.rateLimits)==null?void 0:u.timeWindowHours)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:n.rateLimits.timeWindowHours.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Durée de la période de limitation"})]})]})]}),e.jsx(sp,{})]})}class lp{async requestDevice(){try{if(!navigator.bluetooth)throw new Error("Bluetooth not supported");const r=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["generic_access"]});return{id:r.id,name:r.name||"Unknown Device",status:"disconnected",device:r}}catch(r){throw console.error("Error requesting Bluetooth device:",r),r}}async connectDevice(r){var t;try{const n=await((t=r.gatt)==null?void 0:t.connect());if(!n)throw new Error("Failed to connect to device");await n.getPrimaryService("generic_access")}catch(n){throw console.error("Error connecting to device:",n),n}}async disconnectDevice(r){var t;try{(t=r.gatt)!=null&&t.connected&&r.gatt.disconnect()}catch(n){throw console.error("Error disconnecting device:",n),n}}}const qt=new lp;function op(){const[a,r]=f.useState([]),[t,n]=f.useState(!1),s=f.useCallback(async()=>{try{n(!0);const c=await qt.requestDevice();c&&(r(p=>p.some(u=>u.id===c.id)?p:[...p,c]),E.success("Appareil trouvé"))}catch(c){c.name==="NotFoundError"?E.error("Aucun appareil trouvé"):c.name==="SecurityError"?E.error("Permission refusée"):E.error("Erreur lors de la recherche"),console.error("Bluetooth scan error:",c)}finally{n(!1)}},[]),i=f.useCallback(async c=>{const p=a.find(d=>d.id===c);if(p)try{await qt.connectDevice(p.device),r(d=>d.map(u=>u.id===c?{...u,status:"connected"}:u)),E.success(`${p.name} connecté`)}catch(d){console.error("Connection error:",d),E.error("Erreur de connexion")}},[a]),l=f.useCallback(async c=>{const p=a.find(d=>d.id===c);if(p)try{await qt.disconnectDevice(p.device),r(d=>d.map(u=>u.id===c?{...u,status:"disconnected"}:u)),E.success(`${p.name} déconnecté`)}catch(d){console.error("Disconnection error:",d),E.error("Erreur de déconnexion")}},[a]),o=f.useCallback(c=>{r(p=>p.filter(d=>d.id!==c)),E.success("Appareil supprimé")},[]);return{devices:a,isScanning:t,scanForDevices:s,connectDevice:i,disconnectDevice:l,removeDevice:o}}function cp(){Ke();const{devices:a,isScanning:r,scanForDevices:t,connectDevice:n,disconnectDevice:s,removeDevice:i}=op();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ar,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Appareils Bluetooth"})]}),e.jsx(C,{onClick:t,disabled:r,className:"relative group",children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Recherche..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Ajouter un appareil"]})})]}),e.jsxs("div",{className:"space-y-3",children:[a.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ar,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-gray-500",children:l.status==="connected"?"Connecté":"Déconnecté"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="disconnected"?e.jsx(C,{onClick:()=>n(l.id),className:"text-sm",children:"Connecter"}):e.jsx(C,{onClick:()=>s(l.id),variant:"secondary",className:"text-sm",children:"Déconnecter"}),e.jsx(C,{variant:"ghost",onClick:()=>i(l.id),className:"text-red-500 hover:text-red-600",children:e.jsx(X,{className:"w-4 h-4"})})]})]},l.id)),a.length===0&&!r&&e.jsxs("div",{className:"text-center py-8 px-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(Ar,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Aucun appareil Bluetooth connecté"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:'Cliquez sur "Ajouter un appareil" pour commencer'})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dd,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"API & Webhooks"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Les intégrations API et webhooks seront bientôt disponibles. Vous pourrez connecter votre restaurant à des services tiers pour améliorer votre expérience."})})]})]})}function dp({value:a,onChange:r}){return e.jsx(ma,{value:a,onChange:r,label:"Favicon",description:"Format recommandé: ICO, PNG (32x32px ou 16x16px). Le fichier doit être carré."})}function Nl({value:a,onChange:r,type:t="text"}){const[n,s]=$.useState(""),i=c=>{if(!n.trim())return;const p=n.trim().toLowerCase();a.includes(p)||r([...a,p]),s("")},l=c=>{c.key==="Enter"&&(c.preventDefault(),i())},o=c=>{r(a.filter(p=>p!==c))};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:t,value:n,onChange:c=>s(c.target.value),onKeyPress:l,placeholder:"Ajouter un mot-clé...",className:"flex-1 rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsxs(C,{type:"button",onClick:()=>i(),disabled:!n.trim(),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(_,{mode:"popLayout",children:a.map(c=>e.jsxs(D.span,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:[c,e.jsx("button",{type:"button",onClick:()=>o(c),className:"p-0.5 hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full",children:e.jsx(X,{className:"w-3 h-3"})})]},c))})})]})}function up(a,r){f.useEffect(()=>{if(a&&(document.title=a),r){const t=document.querySelector("link[rel~='icon']");if(t)t.href=r;else{const n=document.createElement("link");n.rel="icon",n.href=r,document.head.appendChild(n)}}},[a,r])}function pp(){const{register:a,watch:r,setValue:t}=Ke();return up(r("seo.title"),r("seo.favicon")),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Paramètres SEO"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Titre du site"}),e.jsx("input",{type:"text",...a("seo.title"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Restaurant Name - Tagline"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Apparaît dans l'onglet du navigateur et les résultats de recherche"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{...a("seo.description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Une brève description de votre restaurant..."}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Apparaît dans les résultats de recherche (150-160 caractères recommandés)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mots-clés"}),e.jsx(Nl,{value:r("seo.keywords")||[],onChange:n=>t("seo.keywords",n,{shouldDirty:!0})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mots-clés pertinents pour votre restaurant"})]})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ji,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Ressources visuelles"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(dp,{value:r("seo.favicon"),onChange:n=>t("seo.favicon",n,{shouldDirty:!0})}),e.jsx("div",{children:e.jsx(ma,{value:r("seo.ogImage"),onChange:n=>t("seo.ogImage",n,{shouldDirty:!0}),label:"Image de partage social",description:"Image affichée lors du partage sur les réseaux sociaux (1200x630px recommandé)"})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Intégration sociale"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Twitter Handle"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"@"}),e.jsx("input",{type:"text",...a("seo.twitterHandle"),className:"w-full rounded-lg border dark:border-gray-600 p-2 pl-8 dark:bg-gray-700",placeholder:"username"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Utilisé pour les Twitter Cards"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Google Site Verification"}),e.jsx("input",{type:"text",...a("seo.googleSiteVerification"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Code de vérification Google"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Code de vérification pour Google Search Console"})]})]})]})]})}function mp(){const[a,r]=f.useState([]),[t,n]=f.useState(!0),[s,i]=f.useState(null),[l,o]=f.useState(!1),[c,p]=f.useState({isOpen:!1}),[d,u]=f.useState(!1);f.useEffect(()=>{m()},[]);const m=async()=>{try{n(!0);const h=["categories","menu_items","orders","inventory","stock_history","media","variants","transactions","payment_methods","staff","settings"],v=await Promise.all(h.map(async b=>{const j=await Sa(ca(Ie,b));return{name:b,count:j.size}}));r(v)}catch(h){console.error("Error loading collections:",h),E.error("Erreur lors du chargement des collections")}finally{n(!1)}},x=async()=>{var v;if(!c.collection)return;const h=c.collection;try{if(i(h),h==="media"){const y=(await Sa(ca(Ie,"media"))).docs.map(k=>k.data());for(const k of y)try{const w=(v=k.url.split("/").pop())==null?void 0:v.split(".")[0];w&&await Ya.deleteFile(w)}catch(w){console.error("Error deleting file from Cloudinary:",w)}}const b=await Sa(ca(Ie,h)),j=gn(Ie);b.docs.forEach(N=>{j.delete(N.ref)}),await j.commit(),await m(),E.success(`Collection ${h} supprimée avec succès`)}catch(b){console.error("Error deleting collection:",b),E.error("Erreur lors de la suppression")}finally{i(null),p({isOpen:!1})}},g=async()=>{var h;try{o(!0);for(const{name:v}of a){if(v==="settings"||v==="payment_methods")continue;if(v==="media"){const k=(await Sa(ca(Ie,"media"))).docs.map(w=>w.data());for(const w of k)try{const S=(h=w.url.split("/").pop())==null?void 0:h.split(".")[0];S&&await Ya.deleteFile(S)}catch(S){console.error("Error deleting file from Cloudinary:",S)}}const b=await Sa(ca(Ie,v)),j=gn(Ie);b.docs.forEach(y=>{j.delete(y.ref)});const N=localStorage.getItem("cookiesAccepted")?localStorage.getItem("cookiesAccepted")==="true":!1;await j.commit(),localStorage.clear(),N&&localStorage.setItem("cookiesAccepted",`${N}`)}await m(),E.success("Site réinitialisé avec succès")}catch(v){console.error("Error resetting website:",v),E.error("Erreur lors de la réinitialisation")}finally{o(!1),u(!1)}};return t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Qa,{className:"w-8 h-8 animate-spin text-blue-500"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Collections Firebase"}),e.jsxs("span",{className:"flex gap-2 text-red-800 dark:text-red-400",children:[e.jsx(aa,{})," A utiliser avec précaution"]})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:a.filter(({name:h})=>h!=="payment_methods").map(({name:h,count:v})=>e.jsxs(D.div,{layout:!0,className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(Yc,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium capitalize",children:h}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v," document",v!==1?"s":""]})]})]}),h!=="settings"&&e.jsx(C,{type:"button",variant:"danger",size:"sm",onClick:()=>p({isOpen:!0,collection:h,itemCount:v}),disabled:s===h,className:"flex-shrink-0",children:s===h?e.jsx(Qa,{className:"w-4 h-4 animate-spin"}):e.jsx(Ce,{className:"w-4 h-4"})})]},h))})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(aa,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Zone Dangereuse"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-100 mb-4",children:"Réinitialiser le Site"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-6",children:"Cette action supprimera définitivement toutes les données du site, y compris les catégories, les produits, les commandes et les médias. Cette action est irréversible."}),e.jsx(C,{variant:"danger",onClick:()=>u(!0),disabled:l,className:"w-full sm:w-auto",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"w-4 h-4 mr-2 animate-spin"}),"Réinitialisation..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sd,{className:"w-4 h-4 mr-2"}),"Réinitialiser le Site"]})})]})]}),e.jsx(Pa,{isOpen:c.isOpen,title:`Supprimer la collection ${c.collection}`,message:`Êtes-vous sûr de vouloir supprimer la collection "${c.collection}" ? 
                Cette action supprimera ${c.itemCount} document${c.itemCount!==1?"s":""} 
                et est irréversible.`,confirmLabel:"Supprimer",onConfirm:x,onCancel:()=>p({isOpen:!1}),isLoading:s===c.collection}),e.jsx(Pa,{isOpen:d,title:"Réinitialiser le site",message:`Êtes-vous sûr de vouloir réinitialiser le site ? Cette action supprimera toutes les données 
                et est irréversible. Les paramètres du site seront conservés.`,confirmLabel:"Réinitialiser",onConfirm:g,onCancel:()=>u(!1),isLoading:l})]})}function xp(){const{register:a}=Ke();return e.jsx("div",{className:"space-y-8",children:e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hi,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Documents Légaux"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Conditions Générales d'Utilisation"}),e.jsx("textarea",{...a("termsOfService"),rows:15,className:"w-full rounded-lg border dark:border-gray-600 p-4 dark:bg-gray-700 font-mono text-sm",placeholder:`<h2>1. Introduction</h2>
<p>Bienvenue sur notre site...</p>`}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Vous pouvez utiliser du HTML pour la mise en forme. Les balises suivantes sont supportées: h1-h6, p, ul, ol, li, strong, em, a, blockquote"})]})})]})})}function kl(a,r){a.prototype=Object.create(r.prototype),a.prototype.constructor=a,fn(a,r)}function R(){return R=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)({}).hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},R.apply(null,arguments)}function qs(a,r){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function $s(a){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?qs(Object(t),!0).forEach(function(n){Pc(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):qs(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function be(a){return"Minified Redux error #"+a+"; visit https://redux.js.org/Errors?code="+a+" for the full message or use the non-minified dev environment for full errors. "}var Us=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),$t=function(){return Math.random().toString(36).substring(7).split("").join(".")},Vs={INIT:"@@redux/INIT"+$t(),REPLACE:"@@redux/REPLACE"+$t(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+$t()}};function gp(a){if(typeof a!="object"||a===null)return!1;for(var r=a;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(a)===r}function Cl(a,r,t){var n;if(typeof r=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(be(0));if(typeof r=="function"&&typeof t>"u"&&(t=r,r=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(be(1));return t(Cl)(a,r)}if(typeof a!="function")throw new Error(be(2));var s=a,i=r,l=[],o=l,c=!1;function p(){o===l&&(o=l.slice())}function d(){if(c)throw new Error(be(3));return i}function u(h){if(typeof h!="function")throw new Error(be(4));if(c)throw new Error(be(5));var v=!0;return p(),o.push(h),function(){if(v){if(c)throw new Error(be(6));v=!1,p();var j=o.indexOf(h);o.splice(j,1),l=null}}}function m(h){if(!gp(h))throw new Error(be(7));if(typeof h.type>"u")throw new Error(be(8));if(c)throw new Error(be(9));try{c=!0,i=s(i,h)}finally{c=!1}for(var v=l=o,b=0;b<v.length;b++){var j=v[b];j()}return h}function x(h){if(typeof h!="function")throw new Error(be(10));s=h,m({type:Vs.REPLACE})}function g(){var h,v=u;return h={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(be(11));function N(){j.next&&j.next(d())}N();var y=v(N);return{unsubscribe:y}}},h[Us]=function(){return this},h}return m({type:Vs.INIT}),n={dispatch:m,subscribe:u,getState:d,replaceReducer:x},n[Us]=g,n}function Hs(a,r){return function(){return r(a.apply(this,arguments))}}function Ws(a,r){if(typeof a=="function")return Hs(a,r);if(typeof a!="object"||a===null)throw new Error(be(16));var t={};for(var n in a){var s=a[n];typeof s=="function"&&(t[n]=Hs(s,r))}return t}function Dl(){for(var a=arguments.length,r=new Array(a),t=0;t<a;t++)r[t]=arguments[t];return r.length===0?function(n){return n}:r.length===1?r[0]:r.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function hp(){for(var a=arguments.length,r=new Array(a),t=0;t<a;t++)r[t]=arguments[t];return function(n){return function(){var s=n.apply(void 0,arguments),i=function(){throw new Error(be(15))},l={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=r.map(function(c){return c(l)});return i=Dl.apply(void 0,o)(s.dispatch),$s($s({},s),{},{dispatch:i})}}}var Sl=$.createContext(null);function fp(a){a()}var Al=fp,vp=function(r){return Al=r},bp=function(){return Al};function yp(){var a=bp(),r=null,t=null;return{clear:function(){r=null,t=null},notify:function(){a(function(){for(var s=r;s;)s.callback(),s=s.next})},get:function(){for(var s=[],i=r;i;)s.push(i),i=i.next;return s},subscribe:function(s){var i=!0,l=t={callback:s,next:null,prev:t};return l.prev?l.prev.next=l:r=l,function(){!i||r===null||(i=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:r=l.next)}}}}var _s={notify:function(){},get:function(){return[]}};function El(a,r){var t,n=_s;function s(u){return c(),n.subscribe(u)}function i(){n.notify()}function l(){d.onStateChange&&d.onStateChange()}function o(){return!!t}function c(){t||(t=r?r.addNestedSub(l):a.subscribe(l),n=yp())}function p(){t&&(t(),t=void 0,n.clear(),n=_s)}var d={addNestedSub:s,notifyNestedSubs:i,handleChangeWrapper:l,isSubscribed:o,trySubscribe:c,tryUnsubscribe:p,getListeners:function(){return n}};return d}var Il=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?f.useLayoutEffect:f.useEffect;function jp(a){var r=a.store,t=a.context,n=a.children,s=f.useMemo(function(){var o=El(r);return{store:r,subscription:o}},[r]),i=f.useMemo(function(){return r.getState()},[r]);Il(function(){var o=s.subscription;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),i!==r.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[s,i]);var l=t||Sl;return $.createElement(l.Provider,{value:s},n)}function Hr(a,r){if(a==null)return{};var t={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(r.includes(n))continue;t[n]=a[n]}return t}var Ml={exports:{}},K={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de=typeof Symbol=="function"&&Symbol.for,Gn=de?Symbol.for("react.element"):60103,zn=de?Symbol.for("react.portal"):60106,lt=de?Symbol.for("react.fragment"):60107,ot=de?Symbol.for("react.strict_mode"):60108,ct=de?Symbol.for("react.profiler"):60114,dt=de?Symbol.for("react.provider"):60109,ut=de?Symbol.for("react.context"):60110,qn=de?Symbol.for("react.async_mode"):60111,pt=de?Symbol.for("react.concurrent_mode"):60111,mt=de?Symbol.for("react.forward_ref"):60112,xt=de?Symbol.for("react.suspense"):60113,wp=de?Symbol.for("react.suspense_list"):60120,gt=de?Symbol.for("react.memo"):60115,ht=de?Symbol.for("react.lazy"):60116,Np=de?Symbol.for("react.block"):60121,kp=de?Symbol.for("react.fundamental"):60117,Cp=de?Symbol.for("react.responder"):60118,Dp=de?Symbol.for("react.scope"):60119;function De(a){if(typeof a=="object"&&a!==null){var r=a.$$typeof;switch(r){case Gn:switch(a=a.type,a){case qn:case pt:case lt:case ct:case ot:case xt:return a;default:switch(a=a&&a.$$typeof,a){case ut:case mt:case ht:case gt:case dt:return a;default:return r}}case zn:return r}}}function Pl(a){return De(a)===pt}K.AsyncMode=qn;K.ConcurrentMode=pt;K.ContextConsumer=ut;K.ContextProvider=dt;K.Element=Gn;K.ForwardRef=mt;K.Fragment=lt;K.Lazy=ht;K.Memo=gt;K.Portal=zn;K.Profiler=ct;K.StrictMode=ot;K.Suspense=xt;K.isAsyncMode=function(a){return Pl(a)||De(a)===qn};K.isConcurrentMode=Pl;K.isContextConsumer=function(a){return De(a)===ut};K.isContextProvider=function(a){return De(a)===dt};K.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===Gn};K.isForwardRef=function(a){return De(a)===mt};K.isFragment=function(a){return De(a)===lt};K.isLazy=function(a){return De(a)===ht};K.isMemo=function(a){return De(a)===gt};K.isPortal=function(a){return De(a)===zn};K.isProfiler=function(a){return De(a)===ct};K.isStrictMode=function(a){return De(a)===ot};K.isSuspense=function(a){return De(a)===xt};K.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===lt||a===pt||a===ct||a===ot||a===xt||a===wp||typeof a=="object"&&a!==null&&(a.$$typeof===ht||a.$$typeof===gt||a.$$typeof===dt||a.$$typeof===ut||a.$$typeof===mt||a.$$typeof===kp||a.$$typeof===Cp||a.$$typeof===Dp||a.$$typeof===Np)};K.typeOf=De;Ml.exports=K;var Sp=Ml.exports,$n=Sp,Ap={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ep={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ip={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Tl={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Un={};Un[$n.ForwardRef]=Ip;Un[$n.Memo]=Tl;function Ks(a){return $n.isMemo(a)?Tl:Un[a.$$typeof]||Ap}var Mp=Object.defineProperty,Pp=Object.getOwnPropertyNames,Qs=Object.getOwnPropertySymbols,Tp=Object.getOwnPropertyDescriptor,Op=Object.getPrototypeOf,Ys=Object.prototype;function Ol(a,r,t){if(typeof r!="string"){if(Ys){var n=Op(r);n&&n!==Ys&&Ol(a,n,t)}var s=Pp(r);Qs&&(s=s.concat(Qs(r)));for(var i=Ks(a),l=Ks(r),o=0;o<s.length;++o){var c=s[o];if(!Ep[c]&&!(t&&t[c])&&!(l&&l[c])&&!(i&&i[c])){var p=Tp(r,c);try{Mp(a,c,p)}catch{}}}}return a}var Lp=Ol;const Js=kc(Lp);var Ll={exports:{}},Y={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=60103,vt=60106,pr=60107,mr=60108,xr=60114,gr=60109,hr=60110,fr=60112,vr=60113,Vn=60120,br=60115,yr=60116,Rl=60121,Fl=60122,Bl=60117,Gl=60129,zl=60131;if(typeof Symbol=="function"&&Symbol.for){var ue=Symbol.for;ft=ue("react.element"),vt=ue("react.portal"),pr=ue("react.fragment"),mr=ue("react.strict_mode"),xr=ue("react.profiler"),gr=ue("react.provider"),hr=ue("react.context"),fr=ue("react.forward_ref"),vr=ue("react.suspense"),Vn=ue("react.suspense_list"),br=ue("react.memo"),yr=ue("react.lazy"),Rl=ue("react.block"),Fl=ue("react.server.block"),Bl=ue("react.fundamental"),Gl=ue("react.debug_trace_mode"),zl=ue("react.legacy_hidden")}function Be(a){if(typeof a=="object"&&a!==null){var r=a.$$typeof;switch(r){case ft:switch(a=a.type,a){case pr:case xr:case mr:case vr:case Vn:return a;default:switch(a=a&&a.$$typeof,a){case hr:case fr:case yr:case br:case gr:return a;default:return r}}case vt:return r}}}var Rp=gr,Fp=ft,Bp=fr,Gp=pr,zp=yr,qp=br,$p=vt,Up=xr,Vp=mr,Hp=vr;Y.ContextConsumer=hr;Y.ContextProvider=Rp;Y.Element=Fp;Y.ForwardRef=Bp;Y.Fragment=Gp;Y.Lazy=zp;Y.Memo=qp;Y.Portal=$p;Y.Profiler=Up;Y.StrictMode=Vp;Y.Suspense=Hp;Y.isAsyncMode=function(){return!1};Y.isConcurrentMode=function(){return!1};Y.isContextConsumer=function(a){return Be(a)===hr};Y.isContextProvider=function(a){return Be(a)===gr};Y.isElement=function(a){return typeof a=="object"&&a!==null&&a.$$typeof===ft};Y.isForwardRef=function(a){return Be(a)===fr};Y.isFragment=function(a){return Be(a)===pr};Y.isLazy=function(a){return Be(a)===yr};Y.isMemo=function(a){return Be(a)===br};Y.isPortal=function(a){return Be(a)===vt};Y.isProfiler=function(a){return Be(a)===xr};Y.isStrictMode=function(a){return Be(a)===mr};Y.isSuspense=function(a){return Be(a)===vr};Y.isValidElementType=function(a){return typeof a=="string"||typeof a=="function"||a===pr||a===xr||a===Gl||a===mr||a===vr||a===Vn||a===zl||typeof a=="object"&&a!==null&&(a.$$typeof===yr||a.$$typeof===br||a.$$typeof===gr||a.$$typeof===hr||a.$$typeof===fr||a.$$typeof===Bl||a.$$typeof===Rl||a[0]===Fl)};Y.typeOf=Be;Ll.exports=Y;var Wp=Ll.exports,_p=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Kp=["reactReduxForwardedRef"],Qp=[],Yp=[null,null];function Jp(a,r){var t=a[1];return[r.payload,t+1]}function Xs(a,r,t){Il(function(){return a.apply(void 0,r)},t)}function Xp(a,r,t,n,s,i,l){a.current=n,r.current=s,t.current=!1,i.current&&(i.current=null,l())}function Zp(a,r,t,n,s,i,l,o,c,p){if(a){var d=!1,u=null,m=function(){if(!d){var h=r.getState(),v,b;try{v=n(h,s.current)}catch(j){b=j,u=j}b||(u=null),v===i.current?l.current||c():(i.current=v,o.current=v,l.current=!0,p({type:"STORE_UPDATED",payload:{error:b}}))}};t.onStateChange=m,t.trySubscribe(),m();var x=function(){if(d=!0,t.tryUnsubscribe(),t.onStateChange=null,u)throw u};return x}}var em=function(){return[null,0]};function am(a,r){r===void 0&&(r={});var t=r,n=t.getDisplayName,s=n===void 0?function(N){return"ConnectAdvanced("+N+")"}:n,i=t.methodName,l=i===void 0?"connectAdvanced":i,o=t.renderCountProp,c=o===void 0?void 0:o,p=t.shouldHandleStateChanges,d=p===void 0?!0:p,u=t.storeKey,m=u===void 0?"store":u;t.withRef;var x=t.forwardRef,g=x===void 0?!1:x,h=t.context,v=h===void 0?Sl:h,b=Hr(t,_p),j=v;return function(y){var k=y.displayName||y.name||"Component",w=s(k),S=R({},b,{getDisplayName:s,methodName:l,renderCountProp:c,shouldHandleStateChanges:d,storeKey:m,displayName:w,wrappedComponentName:k,WrappedComponent:y}),P=b.pure;function O(G){return a(G.dispatch,S)}var U=P?f.useMemo:function(G){return G()};function z(G){var V=f.useMemo(function(){var ze=G.reactReduxForwardedRef,Je=Hr(G,Kp);return[G.context,ze,Je]},[G]),te=V[0],me=V[1],fe=V[2],B=f.useMemo(function(){return te&&te.Consumer&&Wp.isContextConsumer($.createElement(te.Consumer,null))?te:j},[te,j]),H=f.useContext(B),se=!!G.store&&!!G.store.getState&&!!G.store.dispatch;H&&H.store;var ee=se?G.store:H.store,Qe=f.useMemo(function(){return O(ee)},[ee]),Te=f.useMemo(function(){if(!d)return Yp;var ze=El(ee,se?null:H.subscription),Je=ze.notifyNestedSubs.bind(ze);return[ze,Je]},[ee,se,H]),Oe=Te[0],Se=Te[1],na=f.useMemo(function(){return se?H:R({},H,{subscription:Oe})},[se,H,Oe]),sa=f.useReducer(Jp,Qp,em),ya=sa[0],Le=ya[0],Ye=sa[1];if(Le&&Le.error)throw Le.error;var He=f.useRef(),ja=f.useRef(fe),ia=f.useRef(),$a=f.useRef(!1),wa=U(function(){return ia.current&&fe===ja.current?ia.current:Qe(ee.getState(),fe)},[ee,Le,fe]);Xs(Xp,[ja,He,$a,fe,wa,ia,Se]),Xs(Zp,[d,ee,Oe,Qe,ja,He,$a,ia,Se,Ye],[ee,Oe,Qe]);var Ge=f.useMemo(function(){return $.createElement(y,R({},wa,{ref:me}))},[me,y,wa]),Ua=f.useMemo(function(){return d?$.createElement(B.Provider,{value:na},Ge):Ge},[B,Ge,na]);return Ua}var re=P?$.memo(z):z;if(re.WrappedComponent=y,re.displayName=z.displayName=w,g){var Z=$.forwardRef(function(V,te){return $.createElement(re,R({},V,{reactReduxForwardedRef:te}))});return Z.displayName=w,Z.WrappedComponent=y,Js(Z,y)}return Js(re,y)}}function Zs(a,r){return a===r?a!==0||r!==0||1/a===1/r:a!==a&&r!==r}function Ut(a,r){if(Zs(a,r))return!0;if(typeof a!="object"||a===null||typeof r!="object"||r===null)return!1;var t=Object.keys(a),n=Object.keys(r);if(t.length!==n.length)return!1;for(var s=0;s<t.length;s++)if(!Object.prototype.hasOwnProperty.call(r,t[s])||!Zs(a[t[s]],r[t[s]]))return!1;return!0}function rm(a,r){var t={},n=function(l){var o=a[l];typeof o=="function"&&(t[l]=function(){return r(o.apply(void 0,arguments))})};for(var s in a)n(s);return t}function Hn(a){return function(t,n){var s=a(t,n);function i(){return s}return i.dependsOnOwnProps=!1,i}}function ei(a){return a.dependsOnOwnProps!==null&&a.dependsOnOwnProps!==void 0?!!a.dependsOnOwnProps:a.length!==1}function ql(a,r){return function(n,s){s.displayName;var i=function(o,c){return i.dependsOnOwnProps?i.mapToProps(o,c):i.mapToProps(o)};return i.dependsOnOwnProps=!0,i.mapToProps=function(o,c){i.mapToProps=a,i.dependsOnOwnProps=ei(a);var p=i(o,c);return typeof p=="function"&&(i.mapToProps=p,i.dependsOnOwnProps=ei(p),p=i(o,c)),p},i}}function tm(a){return typeof a=="function"?ql(a):void 0}function nm(a){return a?void 0:Hn(function(r){return{dispatch:r}})}function sm(a){return a&&typeof a=="object"?Hn(function(r){return rm(a,r)}):void 0}const im=[tm,nm,sm];function lm(a){return typeof a=="function"?ql(a):void 0}function om(a){return a?void 0:Hn(function(){return{}})}const cm=[lm,om];function dm(a,r,t){return R({},t,a,r)}function um(a){return function(t,n){n.displayName;var s=n.pure,i=n.areMergedPropsEqual,l=!1,o;return function(p,d,u){var m=a(p,d,u);return l?(!s||!i(m,o))&&(o=m):(l=!0,o=m),o}}}function pm(a){return typeof a=="function"?um(a):void 0}function mm(a){return a?void 0:function(){return dm}}const xm=[pm,mm];var gm=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function hm(a,r,t,n){return function(i,l){return t(a(i,l),r(n,l),l)}}function fm(a,r,t,n,s){var i=s.areStatesEqual,l=s.areOwnPropsEqual,o=s.areStatePropsEqual,c=!1,p,d,u,m,x;function g(N,y){return p=N,d=y,u=a(p,d),m=r(n,d),x=t(u,m,d),c=!0,x}function h(){return u=a(p,d),r.dependsOnOwnProps&&(m=r(n,d)),x=t(u,m,d),x}function v(){return a.dependsOnOwnProps&&(u=a(p,d)),r.dependsOnOwnProps&&(m=r(n,d)),x=t(u,m,d),x}function b(){var N=a(p,d),y=!o(N,u);return u=N,y&&(x=t(u,m,d)),x}function j(N,y){var k=!l(y,d),w=!i(N,p,y,d);return p=N,d=y,k&&w?h():k?v():w?b():x}return function(y,k){return c?j(y,k):g(y,k)}}function vm(a,r){var t=r.initMapStateToProps,n=r.initMapDispatchToProps,s=r.initMergeProps,i=Hr(r,gm),l=t(a,i),o=n(a,i),c=s(a,i),p=i.pure?fm:hm;return p(l,o,c,a,i)}var bm=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Vt(a,r,t){for(var n=r.length-1;n>=0;n--){var s=r[n](a);if(s)return s}return function(i,l){throw new Error("Invalid value of type "+typeof a+" for "+t+" argument when connecting component "+l.wrappedComponentName+".")}}function ym(a,r){return a===r}function jm(a){var r=a===void 0?{}:a,t=r.connectHOC,n=t===void 0?am:t,s=r.mapStateToPropsFactories,i=s===void 0?cm:s,l=r.mapDispatchToPropsFactories,o=l===void 0?im:l,c=r.mergePropsFactories,p=c===void 0?xm:c,d=r.selectorFactory,u=d===void 0?vm:d;return function(x,g,h,v){v===void 0&&(v={});var b=v,j=b.pure,N=j===void 0?!0:j,y=b.areStatesEqual,k=y===void 0?ym:y,w=b.areOwnPropsEqual,S=w===void 0?Ut:w,P=b.areStatePropsEqual,O=P===void 0?Ut:P,U=b.areMergedPropsEqual,z=U===void 0?Ut:U,re=Hr(b,bm),Z=Vt(x,i,"mapStateToProps"),G=Vt(g,o,"mapDispatchToProps"),V=Vt(h,p,"mergeProps");return n(u,R({methodName:"connect",getDisplayName:function(me){return"Connect("+me+")"},shouldHandleStateChanges:!!x,initMapStateToProps:Z,initMapDispatchToProps:G,initMergeProps:V,pure:N,areStatesEqual:k,areOwnPropsEqual:S,areStatePropsEqual:O,areMergedPropsEqual:z},re))}}const $l=jm();vp(Cc.unstable_batchedUpdates);function wm(a,r){if(a.length!==r.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==r[t])return!1;return!0}function Ul(a,r){var t=f.useState(function(){return{inputs:r,result:a()}})[0],n=f.useRef(!0),s=f.useRef(t),i=n.current||!!(r&&s.current.inputs&&wm(r,s.current.inputs)),l=i?s.current:{inputs:r,result:a()};return f.useEffect(function(){n.current=!1,s.current=l},[l]),l.result}function Nm(a,r){return Ul(function(){return a},r)}var W=Ul,L=Nm,km="Invariant failed";function Cm(a,r){throw new Error(km)}var Fe=function(r){var t=r.top,n=r.right,s=r.bottom,i=r.left,l=n-i,o=s-t,c={top:t,right:n,bottom:s,left:i,width:l,height:o,x:i,y:t,center:{x:(n+i)/2,y:(s+t)/2}};return c},Wn=function(r,t){return{top:r.top-t.top,left:r.left-t.left,bottom:r.bottom+t.bottom,right:r.right+t.right}},ai=function(r,t){return{top:r.top+t.top,left:r.left+t.left,bottom:r.bottom-t.bottom,right:r.right-t.right}},Dm=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},Ht={top:0,right:0,bottom:0,left:0},_n=function(r){var t=r.borderBox,n=r.margin,s=n===void 0?Ht:n,i=r.border,l=i===void 0?Ht:i,o=r.padding,c=o===void 0?Ht:o,p=Fe(Wn(t,s)),d=Fe(ai(t,l)),u=Fe(ai(d,c));return{marginBox:p,borderBox:Fe(t),paddingBox:d,contentBox:u,margin:s,border:l,padding:c}},Ae=function(r){var t=r.slice(0,-2),n=r.slice(-2);if(n!=="px")return 0;var s=Number(t);return isNaN(s)&&Cm(),s},Sm=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Wr=function(r,t){var n=r.borderBox,s=r.border,i=r.margin,l=r.padding,o=Dm(n,t);return _n({borderBox:o,border:s,margin:i,padding:l})},_r=function(r,t){return t===void 0&&(t=Sm()),Wr(r,t)},Vl=function(r,t){var n={top:Ae(t.marginTop),right:Ae(t.marginRight),bottom:Ae(t.marginBottom),left:Ae(t.marginLeft)},s={top:Ae(t.paddingTop),right:Ae(t.paddingRight),bottom:Ae(t.paddingBottom),left:Ae(t.paddingLeft)},i={top:Ae(t.borderTopWidth),right:Ae(t.borderRightWidth),bottom:Ae(t.borderBottomWidth),left:Ae(t.borderLeftWidth)};return _n({borderBox:r,margin:n,padding:s,border:i})},Hl=function(r){var t=r.getBoundingClientRect(),n=window.getComputedStyle(r);return Vl(t,n)},ri=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Am(a,r){return!!(a===r||ri(a)&&ri(r))}function Em(a,r){if(a.length!==r.length)return!1;for(var t=0;t<a.length;t++)if(!Am(a[t],r[t]))return!1;return!0}function le(a,r){r===void 0&&(r=Em);var t,n=[],s,i=!1;function l(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return i&&t===this&&r(o,n)||(s=a.apply(this,o),i=!0,t=this,n=o),s}return l}var ar=function(r){var t=[],n=null,s=function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t=o,!n&&(n=requestAnimationFrame(function(){n=null,r.apply(void 0,t)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function Wl(a,r){}Wl.bind(null,"warn");Wl.bind(null,"error");function Xe(){}function Im(a,r){return R({},a,{},r)}function Me(a,r,t){var n=r.map(function(s){var i=Im(t,s.options);return a.addEventListener(s.eventName,s.fn,i),function(){a.removeEventListener(s.eventName,s.fn,i)}});return function(){n.forEach(function(i){i()})}}var Mm="Invariant failed";function Kr(a){this.message=a}Kr.prototype.toString=function(){return this.message};function A(a,r){throw new Kr(Mm)}var Pm=function(a){kl(r,a);function r(){for(var n,s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=a.call.apply(a,[this].concat(i))||this,n.callbacks=null,n.unbind=Xe,n.onWindowError=function(o){var c=n.getCallbacks();c.isDragging()&&c.tryAbort();var p=o.error;p instanceof Kr&&o.preventDefault()},n.getCallbacks=function(){if(!n.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return n.callbacks},n.setCallbacks=function(o){n.callbacks=o},n}var t=r.prototype;return t.componentDidMount=function(){this.unbind=Me(window,[{eventName:"error",fn:this.onWindowError}])},t.componentDidCatch=function(s){if(s instanceof Kr){this.setState({});return}throw s},t.componentWillUnmount=function(){this.unbind()},t.render=function(){return this.props.children(this.setCallbacks)},r}($.Component),Tm=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Qr=function(r){return r+1},Om=function(r){return`
  You have lifted an item in position `+Qr(r.source.index)+`
`},_l=function(r,t){var n=r.droppableId===t.droppableId,s=Qr(r.index),i=Qr(t.index);return n?`
      You have moved the item from position `+s+`
      to position `+i+`
    `:`
    You have moved the item from position `+s+`
    in list `+r.droppableId+`
    to list `+t.droppableId+`
    in position `+i+`
  `},Kl=function(r,t,n){var s=t.droppableId===n.droppableId;return s?`
      The item `+r+`
      has been combined with `+n.draggableId:`
      The item `+r+`
      in list `+t.droppableId+`
      has been combined with `+n.draggableId+`
      in list `+n.droppableId+`
    `},Lm=function(r){var t=r.destination;if(t)return _l(r.source,t);var n=r.combine;return n?Kl(r.draggableId,r.source,n):"You are over an area that cannot be dropped on"},ti=function(r){return`
  The item has returned to its starting position
  of `+Qr(r.index)+`
`},Rm=function(r){if(r.reason==="CANCEL")return`
      Movement cancelled.
      `+ti(r.source)+`
    `;var t=r.destination,n=r.combine;return t?`
      You have dropped the item.
      `+_l(r.source,t)+`
    `:n?`
      You have dropped the item.
      `+Kl(r.draggableId,r.source,n)+`
    `:`
    The item has been dropped while not over a drop area.
    `+ti(r.source)+`
  `},Fr={dragHandleUsageInstructions:Tm,onDragStart:Om,onDragUpdate:Lm,onDragEnd:Rm},oe={x:0,y:0},pe=function(r,t){return{x:r.x+t.x,y:r.y+t.y}},je=function(r,t){return{x:r.x-t.x,y:r.y-t.y}},Ze=function(r,t){return r.x===t.x&&r.y===t.y},Ga=function(r){return{x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}},xa=function(r,t,n){var s;return n===void 0&&(n=0),s={},s[r]=t,s[r==="x"?"y":"x"]=n,s},rr=function(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},ni=function(r,t){return Math.min.apply(Math,t.map(function(n){return rr(r,n)}))},Ql=function(r){return function(t){return{x:r(t.x),y:r(t.y)}}},Fm=function(a,r){var t=Fe({top:Math.max(r.top,a.top),right:Math.min(r.right,a.right),bottom:Math.min(r.bottom,a.bottom),left:Math.max(r.left,a.left)});return t.width<=0||t.height<=0?null:t},jr=function(r,t){return{top:r.top+t.y,left:r.left+t.x,bottom:r.bottom+t.y,right:r.right+t.x}},si=function(r){return[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}]},Bm={top:0,right:0,bottom:0,left:0},Gm=function(r,t){return t?jr(r,t.scroll.diff.displacement):r},zm=function(r,t,n){if(n&&n.increasedBy){var s;return R({},r,(s={},s[t.end]=r[t.end]+n.increasedBy[t.line],s))}return r},qm=function(r,t){return t&&t.shouldClipSubject?Fm(t.pageMarginBox,r):Fe(r)},Ta=function(a){var r=a.page,t=a.withPlaceholder,n=a.axis,s=a.frame,i=Gm(r.marginBox,s),l=zm(i,n,t),o=qm(l,s);return{page:r,withPlaceholder:t,active:o}},Kn=function(a,r){a.frame||A();var t=a.frame,n=je(r,t.scroll.initial),s=Ga(n),i=R({},t,{scroll:{initial:t.scroll.initial,current:r,diff:{value:n,displacement:s},max:t.scroll.max}}),l=Ta({page:a.subject.page,withPlaceholder:a.subject.withPlaceholder,axis:a.axis,frame:i}),o=R({},a,{frame:i,subject:l});return o};function Yr(a){return Object.values?Object.values(a):Object.keys(a).map(function(r){return a[r]})}function Qn(a,r){if(a.findIndex)return a.findIndex(r);for(var t=0;t<a.length;t++)if(r(a[t]))return t;return-1}function ta(a,r){if(a.find)return a.find(r);var t=Qn(a,r);if(t!==-1)return a[t]}function Yl(a){return Array.prototype.slice.call(a)}var Jl=le(function(a){return a.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),Xl=le(function(a){return a.reduce(function(r,t){return r[t.descriptor.id]=t,r},{})}),bt=le(function(a){return Yr(a)}),$m=le(function(a){return Yr(a)}),za=le(function(a,r){var t=$m(r).filter(function(n){return a===n.descriptor.droppableId}).sort(function(n,s){return n.descriptor.index-s.descriptor.index});return t});function Yn(a){return a.at&&a.at.type==="REORDER"?a.at.destination:null}function yt(a){return a.at&&a.at.type==="COMBINE"?a.at.combine:null}var jt=le(function(a,r){return r.filter(function(t){return t.descriptor.id!==a.descriptor.id})}),Um=function(a){var r=a.isMovingForward,t=a.draggable,n=a.destination,s=a.insideDestination,i=a.previousImpact;if(!n.isCombineEnabled)return null;var l=Yn(i);if(!l)return null;function o(h){var v={type:"COMBINE",combine:{draggableId:h,droppableId:n.descriptor.id}};return R({},i,{at:v})}var c=i.displaced.all,p=c.length?c[0]:null;if(r)return p?o(p):null;var d=jt(t,s);if(!p){if(!d.length)return null;var u=d[d.length-1];return o(u.descriptor.id)}var m=Qn(d,function(h){return h.descriptor.id===p});m===-1&&A();var x=m-1;if(x<0)return null;var g=d[x];return o(g.descriptor.id)},qa=function(a,r){return a.descriptor.droppableId===r.descriptor.id},Zl={point:oe,value:0},tr={invisible:{},visible:{},all:[]},Vm={displaced:tr,displacedBy:Zl,at:null},Pe=function(a,r){return function(t){return a<=t&&t<=r}},eo=function(a){var r=Pe(a.top,a.bottom),t=Pe(a.left,a.right);return function(n){var s=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);if(s)return!0;var i=r(n.top)||r(n.bottom),l=t(n.left)||t(n.right),o=i&&l;if(o)return!0;var c=n.top<a.top&&n.bottom>a.bottom,p=n.left<a.left&&n.right>a.right,d=c&&p;if(d)return!0;var u=c&&l||p&&i;return u}},Hm=function(a){var r=Pe(a.top,a.bottom),t=Pe(a.left,a.right);return function(n){var s=r(n.top)&&r(n.bottom)&&t(n.left)&&t(n.right);return s}},Jn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ao={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Wm=function(a){return function(r){var t=Pe(r.top,r.bottom),n=Pe(r.left,r.right);return function(s){return a===Jn?t(s.top)&&t(s.bottom):n(s.left)&&n(s.right)}}},_m=function(r,t){var n=t.frame?t.frame.scroll.diff.displacement:oe;return jr(r,n)},Km=function(r,t,n){return t.subject.active?n(t.subject.active)(r):!1},Qm=function(r,t,n){return n(t)(r)},Xn=function(r){var t=r.target,n=r.destination,s=r.viewport,i=r.withDroppableDisplacement,l=r.isVisibleThroughFrameFn,o=i?_m(t,n):t;return Km(o,n,l)&&Qm(o,s,l)},Ym=function(r){return Xn(R({},r,{isVisibleThroughFrameFn:eo}))},ro=function(r){return Xn(R({},r,{isVisibleThroughFrameFn:Hm}))},Jm=function(r){return Xn(R({},r,{isVisibleThroughFrameFn:Wm(r.destination.axis)}))},Xm=function(r,t,n){if(typeof n=="boolean")return n;if(!t)return!0;var s=t.invisible,i=t.visible;if(s[r])return!1;var l=i[r];return l?l.shouldAnimate:!0};function Zm(a,r){var t=a.page.marginBox,n={top:r.point.y,right:0,bottom:0,left:r.point.x};return Fe(Wn(t,n))}function nr(a){var r=a.afterDragging,t=a.destination,n=a.displacedBy,s=a.viewport,i=a.forceShouldAnimate,l=a.last;return r.reduce(function(c,p){var d=Zm(p,n),u=p.descriptor.id;c.all.push(u);var m=Ym({target:d,destination:t,viewport:s,withDroppableDisplacement:!0});if(!m)return c.invisible[p.descriptor.id]=!0,c;var x=Xm(u,l,i),g={draggableId:u,shouldAnimate:x};return c.visible[u]=g,c},{all:[],visible:{},invisible:{}})}function ex(a,r){if(!a.length)return 0;var t=a[a.length-1].descriptor.index;return r.inHomeList?t:t+1}function ii(a){var r=a.insideDestination,t=a.inHomeList,n=a.displacedBy,s=a.destination,i=ex(r,{inHomeList:t});return{displaced:tr,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:i}}}}function Jr(a){var r=a.draggable,t=a.insideDestination,n=a.destination,s=a.viewport,i=a.displacedBy,l=a.last,o=a.index,c=a.forceShouldAnimate,p=qa(r,n);if(o==null)return ii({insideDestination:t,inHomeList:p,displacedBy:i,destination:n});var d=ta(t,function(h){return h.descriptor.index===o});if(!d)return ii({insideDestination:t,inHomeList:p,displacedBy:i,destination:n});var u=jt(r,t),m=t.indexOf(d),x=u.slice(m),g=nr({afterDragging:x,destination:n,displacedBy:i,last:l,viewport:s.frame,forceShouldAnimate:c});return{displaced:g,displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function ra(a,r){return!!r.effected[a]}var ax=function(a){var r=a.isMovingForward,t=a.destination,n=a.draggables,s=a.combine,i=a.afterCritical;if(!t.isCombineEnabled)return null;var l=s.draggableId,o=n[l],c=o.descriptor.index,p=ra(l,i);return p?r?c:c-1:r?c+1:c},rx=function(a){var r=a.isMovingForward,t=a.isInHomeList,n=a.insideDestination,s=a.location;if(!n.length)return null;var i=s.index,l=r?i+1:i-1,o=n[0].descriptor.index,c=n[n.length-1].descriptor.index,p=t?c:c+1;return l<o||l>p?null:l},tx=function(a){var r=a.isMovingForward,t=a.isInHomeList,n=a.draggable,s=a.draggables,i=a.destination,l=a.insideDestination,o=a.previousImpact,c=a.viewport,p=a.afterCritical,d=o.at;if(d||A(),d.type==="REORDER"){var u=rx({isMovingForward:r,isInHomeList:t,location:d.destination,insideDestination:l});return u==null?null:Jr({draggable:n,insideDestination:l,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:u})}var m=ax({isMovingForward:r,destination:i,displaced:o.displaced,draggables:s,combine:d.combine,afterCritical:p});return m==null?null:Jr({draggable:n,insideDestination:l,destination:i,viewport:c,last:o.displaced,displacedBy:o.displacedBy,index:m})},nx=function(a){var r=a.displaced,t=a.afterCritical,n=a.combineWith,s=a.displacedBy,i=!!(r.visible[n]||r.invisible[n]);return ra(n,t)?i?oe:Ga(s.point):i?s.point:oe},sx=function(a){var r=a.afterCritical,t=a.impact,n=a.draggables,s=yt(t);s||A();var i=s.draggableId,l=n[i].page.borderBox.center,o=nx({displaced:t.displaced,afterCritical:r,combineWith:i,displacedBy:t.displacedBy});return pe(l,o)},to=function(r,t){return t.margin[r.start]+t.borderBox[r.size]/2},ix=function(r,t){return t.margin[r.end]+t.borderBox[r.size]/2},Zn=function(r,t,n){return t[r.crossAxisStart]+n.margin[r.crossAxisStart]+n.borderBox[r.crossAxisSize]/2},li=function(r){var t=r.axis,n=r.moveRelativeTo,s=r.isMoving;return xa(t.line,n.marginBox[t.end]+to(t,s),Zn(t,n.marginBox,s))},oi=function(r){var t=r.axis,n=r.moveRelativeTo,s=r.isMoving;return xa(t.line,n.marginBox[t.start]-ix(t,s),Zn(t,n.marginBox,s))},lx=function(r){var t=r.axis,n=r.moveInto,s=r.isMoving;return xa(t.line,n.contentBox[t.start]+to(t,s),Zn(t,n.contentBox,s))},ox=function(a){var r=a.impact,t=a.draggable,n=a.draggables,s=a.droppable,i=a.afterCritical,l=za(s.descriptor.id,n),o=t.page,c=s.axis;if(!l.length)return lx({axis:c,moveInto:s.page,isMoving:o});var p=r.displaced,d=r.displacedBy,u=p.all[0];if(u){var m=n[u];if(ra(u,i))return oi({axis:c,moveRelativeTo:m.page,isMoving:o});var x=Wr(m.page,d.point);return oi({axis:c,moveRelativeTo:x,isMoving:o})}var g=l[l.length-1];if(g.descriptor.id===t.descriptor.id)return o.borderBox.center;if(ra(g.descriptor.id,i)){var h=Wr(g.page,Ga(i.displacedBy.point));return li({axis:c,moveRelativeTo:h,isMoving:o})}return li({axis:c,moveRelativeTo:g.page,isMoving:o})},Nn=function(a,r){var t=a.frame;return t?pe(r,t.scroll.diff.displacement):r},cx=function(r){var t=r.impact,n=r.draggable,s=r.droppable,i=r.draggables,l=r.afterCritical,o=n.page.borderBox.center,c=t.at;return!s||!c?o:c.type==="REORDER"?ox({impact:t,draggable:n,draggables:i,droppable:s,afterCritical:l}):sx({impact:t,draggables:i,afterCritical:l})},wt=function(a){var r=cx(a),t=a.droppable,n=t?Nn(t,r):r;return n},no=function(a,r){var t=je(r,a.scroll.initial),n=Ga(t),s=Fe({top:r.y,bottom:r.y+a.frame.height,left:r.x,right:r.x+a.frame.width}),i={frame:s,scroll:{initial:a.scroll.initial,max:a.scroll.max,current:r,diff:{value:t,displacement:n}}};return i};function ci(a,r){return a.map(function(t){return r[t]})}function dx(a,r){for(var t=0;t<r.length;t++){var n=r[t].visible[a];if(n)return n}return null}var ux=function(a){var r=a.impact,t=a.viewport,n=a.destination,s=a.draggables,i=a.maxScrollChange,l=no(t,pe(t.scroll.current,i)),o=n.frame?Kn(n,pe(n.frame.scroll.current,i)):n,c=r.displaced,p=nr({afterDragging:ci(c.all,s),destination:n,displacedBy:r.displacedBy,viewport:l.frame,last:c,forceShouldAnimate:!1}),d=nr({afterDragging:ci(c.all,s),destination:o,displacedBy:r.displacedBy,viewport:t.frame,last:c,forceShouldAnimate:!1}),u={},m={},x=[c,p,d];c.all.forEach(function(h){var v=dx(h,x);if(v){m[h]=v;return}u[h]=!0});var g=R({},r,{displaced:{all:c.all,invisible:u,visible:m}});return g},px=function(a,r){return pe(a.scroll.diff.displacement,r)},es=function(a){var r=a.pageBorderBoxCenter,t=a.draggable,n=a.viewport,s=px(n,r),i=je(s,t.page.borderBox.center);return pe(t.client.borderBox.center,i)},so=function(a){var r=a.draggable,t=a.destination,n=a.newPageBorderBoxCenter,s=a.viewport,i=a.withDroppableDisplacement,l=a.onlyOnMainAxis,o=l===void 0?!1:l,c=je(n,r.page.borderBox.center),p=jr(r.page.borderBox,c),d={target:p,destination:t,withDroppableDisplacement:i,viewport:s};return o?Jm(d):ro(d)},mx=function(a){var r=a.isMovingForward,t=a.draggable,n=a.destination,s=a.draggables,i=a.previousImpact,l=a.viewport,o=a.previousPageBorderBoxCenter,c=a.previousClientSelection,p=a.afterCritical;if(!n.isEnabled)return null;var d=za(n.descriptor.id,s),u=qa(t,n),m=Um({isMovingForward:r,draggable:t,destination:n,insideDestination:d,previousImpact:i})||tx({isMovingForward:r,isInHomeList:u,draggable:t,draggables:s,destination:n,insideDestination:d,previousImpact:i,viewport:l,afterCritical:p});if(!m)return null;var x=wt({impact:m,draggable:t,droppable:n,draggables:s,afterCritical:p}),g=so({draggable:t,destination:n,newPageBorderBoxCenter:x,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(g){var h=es({pageBorderBoxCenter:x,draggable:t,viewport:l});return{clientSelection:h,impact:m,scrollJumpRequest:null}}var v=je(x,o),b=ux({impact:m,viewport:l,destination:n,draggables:s,maxScrollChange:v});return{clientSelection:c,impact:b,scrollJumpRequest:v}},he=function(r){var t=r.subject.active;return t||A(),t},xx=function(a){var r=a.isMovingForward,t=a.pageBorderBoxCenter,n=a.source,s=a.droppables,i=a.viewport,l=n.subject.active;if(!l)return null;var o=n.axis,c=Pe(l[o.start],l[o.end]),p=bt(s).filter(function(u){return u!==n}).filter(function(u){return u.isEnabled}).filter(function(u){return!!u.subject.active}).filter(function(u){return eo(i.frame)(he(u))}).filter(function(u){var m=he(u);return r?l[o.crossAxisEnd]<m[o.crossAxisEnd]:m[o.crossAxisStart]<l[o.crossAxisStart]}).filter(function(u){var m=he(u),x=Pe(m[o.start],m[o.end]);return c(m[o.start])||c(m[o.end])||x(l[o.start])||x(l[o.end])}).sort(function(u,m){var x=he(u)[o.crossAxisStart],g=he(m)[o.crossAxisStart];return r?x-g:g-x}).filter(function(u,m,x){return he(u)[o.crossAxisStart]===he(x[0])[o.crossAxisStart]});if(!p.length)return null;if(p.length===1)return p[0];var d=p.filter(function(u){var m=Pe(he(u)[o.start],he(u)[o.end]);return m(t[o.line])});return d.length===1?d[0]:d.length>1?d.sort(function(u,m){return he(u)[o.start]-he(m)[o.start]})[0]:p.sort(function(u,m){var x=ni(t,si(he(u))),g=ni(t,si(he(m)));return x!==g?x-g:he(u)[o.start]-he(m)[o.start]})[0]},di=function(r,t){var n=r.page.borderBox.center;return ra(r.descriptor.id,t)?je(n,t.displacedBy.point):n},gx=function(r,t){var n=r.page.borderBox;return ra(r.descriptor.id,t)?jr(n,Ga(t.displacedBy.point)):n},hx=function(a){var r=a.pageBorderBoxCenter,t=a.viewport,n=a.destination,s=a.insideDestination,i=a.afterCritical,l=s.filter(function(o){return ro({target:gx(o,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})}).sort(function(o,c){var p=rr(r,Nn(n,di(o,i))),d=rr(r,Nn(n,di(c,i)));return p<d?-1:d<p?1:o.descriptor.index-c.descriptor.index});return l[0]||null},wr=le(function(r,t){var n=t[r.line];return{value:n,point:xa(r.line,n)}}),fx=function(r,t,n){var s=r.axis;if(r.descriptor.mode==="virtual")return xa(s.line,t[s.line]);var i=r.subject.page.contentBox[s.size],l=za(r.descriptor.id,n),o=l.reduce(function(d,u){return d+u.client.marginBox[s.size]},0),c=o+t[s.line],p=c-i;return p<=0?null:xa(s.line,p)},io=function(r,t){return R({},r,{scroll:R({},r.scroll,{max:t})})},lo=function(r,t,n){var s=r.frame;qa(t,r)&&A(),r.subject.withPlaceholder&&A();var i=wr(r.axis,t.displaceBy).point,l=fx(r,i,n),o={placeholderSize:i,increasedBy:l,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!s){var c=Ta({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:r.frame});return R({},r,{subject:c})}var p=l?pe(s.scroll.max,l):s.scroll.max,d=io(s,p),u=Ta({page:r.subject.page,withPlaceholder:o,axis:r.axis,frame:d});return R({},r,{subject:u,frame:d})},vx=function(r){var t=r.subject.withPlaceholder;t||A();var n=r.frame;if(!n){var s=Ta({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return R({},r,{subject:s})}var i=t.oldFrameMaxScroll;i||A();var l=io(n,i),o=Ta({page:r.subject.page,axis:r.axis,frame:l,withPlaceholder:null});return R({},r,{subject:o,frame:l})},bx=function(a){var r=a.previousPageBorderBoxCenter,t=a.moveRelativeTo,n=a.insideDestination,s=a.draggable,i=a.draggables,l=a.destination,o=a.viewport,c=a.afterCritical;if(!t){if(n.length)return null;var p={displaced:tr,displacedBy:Zl,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},d=wt({impact:p,draggable:s,droppable:l,draggables:i,afterCritical:c}),u=qa(s,l)?l:lo(l,s,i),m=so({draggable:s,destination:u,newPageBorderBoxCenter:d,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return m?p:null}var x=r[l.axis.line]<=t.page.borderBox.center[l.axis.line],g=function(){var v=t.descriptor.index;return t.descriptor.id===s.descriptor.id||x?v:v+1}(),h=wr(l.axis,s.displaceBy);return Jr({draggable:s,insideDestination:n,destination:l,viewport:o,displacedBy:h,last:tr,index:g})},yx=function(a){var r=a.isMovingForward,t=a.previousPageBorderBoxCenter,n=a.draggable,s=a.isOver,i=a.draggables,l=a.droppables,o=a.viewport,c=a.afterCritical,p=xx({isMovingForward:r,pageBorderBoxCenter:t,source:s,droppables:l,viewport:o});if(!p)return null;var d=za(p.descriptor.id,i),u=hx({pageBorderBoxCenter:t,viewport:o,destination:p,insideDestination:d,afterCritical:c}),m=bx({previousPageBorderBoxCenter:t,destination:p,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:d,viewport:o,afterCritical:c});if(!m)return null;var x=wt({impact:m,draggable:n,droppable:p,draggables:i,afterCritical:c}),g=es({pageBorderBoxCenter:x,draggable:n,viewport:o});return{clientSelection:g,impact:m,scrollJumpRequest:null}},we=function(a){var r=a.at;return r?r.type==="REORDER"?r.destination.droppableId:r.combine.droppableId:null},jx=function(r,t){var n=we(r);return n?t[n]:null},wx=function(a){var r=a.state,t=a.type,n=jx(r.impact,r.dimensions.droppables),s=!!n,i=r.dimensions.droppables[r.critical.droppable.id],l=n||i,o=l.axis.direction,c=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(c&&!s)return null;var p=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=r.dimensions.draggables[r.critical.draggable.id],u=r.current.page.borderBoxCenter,m=r.dimensions,x=m.draggables,g=m.droppables;return c?mx({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:d,destination:l,draggables:x,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):yx({isMovingForward:p,previousPageBorderBoxCenter:u,draggable:d,isOver:l,draggables:x,droppables:g,viewport:r.viewport,afterCritical:r.afterCritical})};function oa(a){return a.phase==="DRAGGING"||a.phase==="COLLECTING"}function oo(a){var r=Pe(a.top,a.bottom),t=Pe(a.left,a.right);return function(s){return r(s.y)&&t(s.x)}}function Nx(a,r){return a.left<r.right&&a.right>r.left&&a.top<r.bottom&&a.bottom>r.top}function kx(a){var r=a.pageBorderBox,t=a.draggable,n=a.candidates,s=t.page.borderBox.center,i=n.map(function(l){var o=l.axis,c=xa(l.axis.line,r.center[o.line],l.page.borderBox.center[o.crossAxisLine]);return{id:l.descriptor.id,distance:rr(s,c)}}).sort(function(l,o){return o.distance-l.distance});return i[0]?i[0].id:null}function Cx(a){var r=a.pageBorderBox,t=a.draggable,n=a.droppables,s=bt(n).filter(function(i){if(!i.isEnabled)return!1;var l=i.subject.active;if(!l||!Nx(r,l))return!1;if(oo(l)(r.center))return!0;var o=i.axis,c=l.center[o.crossAxisLine],p=r[o.crossAxisStart],d=r[o.crossAxisEnd],u=Pe(l[o.crossAxisStart],l[o.crossAxisEnd]),m=u(p),x=u(d);return!m&&!x?!0:m?p<c:d>c});return s.length?s.length===1?s[0].descriptor.id:kx({pageBorderBox:r,draggable:t,candidates:s}):null}var co=function(r,t){return Fe(jr(r,t))},Dx=function(a,r){var t=a.frame;return t?co(r,t.scroll.diff.value):r};function uo(a){var r=a.displaced,t=a.id;return!!(r.visible[t]||r.invisible[t])}function Sx(a){var r=a.draggable,t=a.closest,n=a.inHomeList;return t?n&&t.descriptor.index>r.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Ax=function(a){var r=a.pageBorderBoxWithDroppableScroll,t=a.draggable,n=a.destination,s=a.insideDestination,i=a.last,l=a.viewport,o=a.afterCritical,c=n.axis,p=wr(n.axis,t.displaceBy),d=p.value,u=r[c.start],m=r[c.end],x=jt(t,s),g=ta(x,function(v){var b=v.descriptor.id,j=v.page.borderBox.center[c.line],N=ra(b,o),y=uo({displaced:i,id:b});return N?y?m<=j:u<j-d:y?m<=j+d:u<j}),h=Sx({draggable:t,closest:g,inHomeList:qa(t,n)});return Jr({draggable:t,insideDestination:s,destination:n,viewport:l,last:i,displacedBy:p,index:h})},Ex=4,Ix=function(a){var r=a.draggable,t=a.pageBorderBoxWithDroppableScroll,n=a.previousImpact,s=a.destination,i=a.insideDestination,l=a.afterCritical;if(!s.isCombineEnabled)return null;var o=s.axis,c=wr(s.axis,r.displaceBy),p=c.value,d=t[o.start],u=t[o.end],m=jt(r,i),x=ta(m,function(h){var v=h.descriptor.id,b=h.page.borderBox,j=b[o.size],N=j/Ex,y=ra(v,l),k=uo({displaced:n.displaced,id:v});return y?k?u>b[o.start]+N&&u<b[o.end]-N:d>b[o.start]-p+N&&d<b[o.end]-p-N:k?u>b[o.start]+p+N&&u<b[o.end]+p-N:d>b[o.start]+N&&d<b[o.end]-N});if(!x)return null;var g={displacedBy:c,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:x.descriptor.id,droppableId:s.descriptor.id}}};return g},po=function(a){var r=a.pageOffset,t=a.draggable,n=a.draggables,s=a.droppables,i=a.previousImpact,l=a.viewport,o=a.afterCritical,c=co(t.page.borderBox,r),p=Cx({pageBorderBox:c,draggable:t,droppables:s});if(!p)return Vm;var d=s[p],u=za(d.descriptor.id,n),m=Dx(d,c);return Ix({pageBorderBoxWithDroppableScroll:m,draggable:t,previousImpact:i,destination:d,insideDestination:u,afterCritical:o})||Ax({pageBorderBoxWithDroppableScroll:m,draggable:t,destination:d,insideDestination:u,last:i.displaced,viewport:l,afterCritical:o})},as=function(a,r){var t;return R({},a,(t={},t[r.descriptor.id]=r,t))},Mx=function(r){var t=r.previousImpact,n=r.impact,s=r.droppables,i=we(t),l=we(n);if(!i||i===l)return s;var o=s[i];if(!o.subject.withPlaceholder)return s;var c=vx(o);return as(s,c)},Px=function(a){var r=a.draggable,t=a.draggables,n=a.droppables,s=a.previousImpact,i=a.impact,l=Mx({previousImpact:s,impact:i,droppables:n}),o=we(i);if(!o)return l;var c=n[o];if(qa(r,c)||c.subject.withPlaceholder)return l;var p=lo(c,r,t);return as(l,p)},Ja=function(a){var r=a.state,t=a.clientSelection,n=a.dimensions,s=a.viewport,i=a.impact,l=a.scrollJumpRequest,o=s||r.viewport,c=n||r.dimensions,p=t||r.current.client.selection,d=je(p,r.initial.client.selection),u={offset:d,selection:p,borderBoxCenter:pe(r.initial.client.borderBoxCenter,d)},m={selection:pe(u.selection,o.scroll.current),borderBoxCenter:pe(u.borderBoxCenter,o.scroll.current),offset:pe(u.offset,o.scroll.diff.value)},x={client:u,page:m};if(r.phase==="COLLECTING")return R({phase:"COLLECTING"},r,{dimensions:c,viewport:o,current:x});var g=c.draggables[r.critical.draggable.id],h=i||po({pageOffset:m.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:r.impact,viewport:o,afterCritical:r.afterCritical}),v=Px({draggable:g,impact:h,previousImpact:r.impact,draggables:c.draggables,droppables:c.droppables}),b=R({},r,{current:x,dimensions:{draggables:c.draggables,droppables:v},impact:h,viewport:o,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null});return b};function Tx(a,r){return a.map(function(t){return r[t]})}var mo=function(a){var r=a.impact,t=a.viewport,n=a.draggables,s=a.destination,i=a.forceShouldAnimate,l=r.displaced,o=Tx(l.all,n),c=nr({afterDragging:o,destination:s,displacedBy:r.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:l});return R({},r,{displaced:c})},xo=function(a){var r=a.impact,t=a.draggable,n=a.droppable,s=a.draggables,i=a.viewport,l=a.afterCritical,o=wt({impact:r,draggable:t,draggables:s,droppable:n,afterCritical:l});return es({pageBorderBoxCenter:o,draggable:t,viewport:i})},go=function(a){var r=a.state,t=a.dimensions,n=a.viewport;r.movementMode!=="SNAP"&&A();var s=r.impact,i=n||r.viewport,l=t||r.dimensions,o=l.draggables,c=l.droppables,p=o[r.critical.draggable.id],d=we(s);d||A();var u=c[d],m=mo({impact:s,viewport:i,destination:u,draggables:o}),x=xo({impact:m,draggable:p,droppable:u,draggables:o,viewport:i,afterCritical:r.afterCritical});return Ja({impact:m,clientSelection:x,state:r,dimensions:l,viewport:i})},Ox=function(a){return{index:a.index,droppableId:a.droppableId}},ho=function(a){var r=a.draggable,t=a.home,n=a.draggables,s=a.viewport,i=wr(t.axis,r.displaceBy),l=za(t.descriptor.id,n),o=l.indexOf(r);o===-1&&A();var c=l.slice(o+1),p=c.reduce(function(x,g){return x[g.descriptor.id]=!0,x},{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:i,effected:p},u=nr({afterDragging:c,destination:t,displacedBy:i,last:null,viewport:s.frame,forceShouldAnimate:!1}),m={displaced:u,displacedBy:i,at:{type:"REORDER",destination:Ox(r.descriptor)}};return{impact:m,afterCritical:d}},Lx=function(a,r){return{draggables:a.draggables,droppables:as(a.droppables,r)}},Rx=function(a){var r=a.draggable,t=a.offset,n=a.initialWindowScroll,s=Wr(r.client,t),i=_r(s,n),l=R({},r,{placeholder:R({},r.placeholder,{client:s}),client:s,page:i});return l},Fx=function(a){var r=a.frame;return r||A(),r},Bx=function(a){var r=a.additions,t=a.updatedDroppables,n=a.viewport,s=n.scroll.diff.value;return r.map(function(i){var l=i.descriptor.droppableId,o=t[l],c=Fx(o),p=c.scroll.diff.value,d=pe(s,p),u=Rx({draggable:i,offset:d,initialWindowScroll:n.scroll.initial});return u})},Gx=function(a){var r=a.state,t=a.published,n=t.modified.map(function(N){var y=r.dimensions.droppables[N.droppableId],k=Kn(y,N.scroll);return k}),s=R({},r.dimensions.droppables,{},Jl(n)),i=Xl(Bx({additions:t.additions,updatedDroppables:s,viewport:r.viewport})),l=R({},r.dimensions.draggables,{},i);t.removals.forEach(function(N){delete l[N]});var o={droppables:s,draggables:l},c=we(r.impact),p=c?o.droppables[c]:null,d=o.draggables[r.critical.draggable.id],u=o.droppables[r.critical.droppable.id],m=ho({draggable:d,home:u,draggables:l,viewport:r.viewport}),x=m.impact,g=m.afterCritical,h=p&&p.isCombineEnabled?r.impact:x,v=po({pageOffset:r.current.page.offset,draggable:o.draggables[r.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:h,viewport:r.viewport,afterCritical:g}),b=R({phase:"DRAGGING"},r,{phase:"DRAGGING",impact:v,onLiftImpact:x,dimensions:o,afterCritical:g,forceShouldAnimate:!1});if(r.phase==="COLLECTING")return b;var j=R({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:r.reason,isWaiting:!1});return j},kn=function(r){return r.movementMode==="SNAP"},Wt=function(r,t,n){var s=Lx(r.dimensions,t);return!kn(r)||n?Ja({state:r,dimensions:s}):go({state:r,dimensions:s})};function _t(a){return a.isDragging&&a.movementMode==="SNAP"?R({phase:"DRAGGING"},a,{scrollJumpRequest:null}):a}var ui={phase:"IDLE",completed:null,shouldFlush:!1},zx=function(a,r){if(a===void 0&&(a=ui),r.type==="FLUSH")return R({},ui,{shouldFlush:!0});if(r.type==="INITIAL_PUBLISH"){a.phase!=="IDLE"&&A();var t=r.payload,n=t.critical,s=t.clientSelection,i=t.viewport,l=t.dimensions,o=t.movementMode,c=l.draggables[n.draggable.id],p=l.droppables[n.droppable.id],d={selection:s,borderBoxCenter:c.client.borderBox.center,offset:oe},u={client:d,page:{selection:pe(d.selection,i.scroll.initial),borderBoxCenter:pe(d.selection,i.scroll.initial),offset:pe(d.selection,i.scroll.diff.value)}},m=bt(l.droppables).every(function(Ye){return!Ye.isFixedOnPage}),x=ho({draggable:c,home:p,draggables:l.draggables,viewport:i}),g=x.impact,h=x.afterCritical,v={phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:l,initial:u,current:u,isWindowScrollAllowed:m,impact:g,afterCritical:h,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null};return v}if(r.type==="COLLECTION_STARTING"){if(a.phase==="COLLECTING"||a.phase==="DROP_PENDING")return a;a.phase!=="DRAGGING"&&A();var b=R({phase:"COLLECTING"},a,{phase:"COLLECTING"});return b}if(r.type==="PUBLISH_WHILE_DRAGGING")return a.phase==="COLLECTING"||a.phase==="DROP_PENDING"||A(),Gx({state:a,published:r.payload});if(r.type==="MOVE"){if(a.phase==="DROP_PENDING")return a;oa(a)||A();var j=r.payload.client;return Ze(j,a.current.client.selection)?a:Ja({state:a,clientSelection:j,impact:kn(a)?a.impact:null})}if(r.type==="UPDATE_DROPPABLE_SCROLL"){if(a.phase==="DROP_PENDING"||a.phase==="COLLECTING")return _t(a);oa(a)||A();var N=r.payload,y=N.id,k=N.newScroll,w=a.dimensions.droppables[y];if(!w)return a;var S=Kn(w,k);return Wt(a,S,!1)}if(r.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(a.phase==="DROP_PENDING")return a;oa(a)||A();var P=r.payload,O=P.id,U=P.isEnabled,z=a.dimensions.droppables[O];z||A(),z.isEnabled===U&&A();var re=R({},z,{isEnabled:U});return Wt(a,re,!0)}if(r.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(a.phase==="DROP_PENDING")return a;oa(a)||A();var Z=r.payload,G=Z.id,V=Z.isCombineEnabled,te=a.dimensions.droppables[G];te||A(),te.isCombineEnabled===V&&A();var me=R({},te,{isCombineEnabled:V});return Wt(a,me,!0)}if(r.type==="MOVE_BY_WINDOW_SCROLL"){if(a.phase==="DROP_PENDING"||a.phase==="DROP_ANIMATING")return a;oa(a)||A(),a.isWindowScrollAllowed||A();var fe=r.payload.newScroll;if(Ze(a.viewport.scroll.current,fe))return _t(a);var B=no(a.viewport,fe);return kn(a)?go({state:a,viewport:B}):Ja({state:a,viewport:B})}if(r.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!oa(a))return a;var H=r.payload.maxScroll;if(Ze(H,a.viewport.scroll.max))return a;var se=R({},a.viewport,{scroll:R({},a.viewport.scroll,{max:H})});return R({phase:"DRAGGING"},a,{viewport:se})}if(r.type==="MOVE_UP"||r.type==="MOVE_DOWN"||r.type==="MOVE_LEFT"||r.type==="MOVE_RIGHT"){if(a.phase==="COLLECTING"||a.phase==="DROP_PENDING")return a;a.phase!=="DRAGGING"&&A();var ee=wx({state:a,type:r.type});return ee?Ja({state:a,impact:ee.impact,clientSelection:ee.clientSelection,scrollJumpRequest:ee.scrollJumpRequest}):a}if(r.type==="DROP_PENDING"){var Qe=r.payload.reason;a.phase!=="COLLECTING"&&A();var Te=R({phase:"DROP_PENDING"},a,{phase:"DROP_PENDING",isWaiting:!0,reason:Qe});return Te}if(r.type==="DROP_ANIMATE"){var Oe=r.payload,Se=Oe.completed,na=Oe.dropDuration,sa=Oe.newHomeClientOffset;a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||A();var ya={phase:"DROP_ANIMATING",completed:Se,dropDuration:na,newHomeClientOffset:sa,dimensions:a.dimensions};return ya}if(r.type==="DROP_COMPLETE"){var Le=r.payload.completed;return{phase:"IDLE",completed:Le,shouldFlush:!1}}return a},qx=function(r){return{type:"BEFORE_INITIAL_CAPTURE",payload:r}},$x=function(r){return{type:"LIFT",payload:r}},Ux=function(r){return{type:"INITIAL_PUBLISH",payload:r}},Vx=function(r){return{type:"PUBLISH_WHILE_DRAGGING",payload:r}},Hx=function(){return{type:"COLLECTION_STARTING",payload:null}},Wx=function(r){return{type:"UPDATE_DROPPABLE_SCROLL",payload:r}},_x=function(r){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}},Kx=function(r){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}},fo=function(r){return{type:"MOVE",payload:r}},Qx=function(r){return{type:"MOVE_BY_WINDOW_SCROLL",payload:r}},Yx=function(r){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}},Jx=function(){return{type:"MOVE_UP",payload:null}},Xx=function(){return{type:"MOVE_DOWN",payload:null}},Zx=function(){return{type:"MOVE_RIGHT",payload:null}},eg=function(){return{type:"MOVE_LEFT",payload:null}},rs=function(){return{type:"FLUSH",payload:null}},ag=function(r){return{type:"DROP_ANIMATE",payload:r}},ts=function(r){return{type:"DROP_COMPLETE",payload:r}},vo=function(r){return{type:"DROP",payload:r}},rg=function(r){return{type:"DROP_PENDING",payload:r}},bo=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},tg=function(a){return function(r){var t=r.getState,n=r.dispatch;return function(s){return function(i){if(i.type!=="LIFT"){s(i);return}var l=i.payload,o=l.id,c=l.clientSelection,p=l.movementMode,d=t();d.phase==="DROP_ANIMATING"&&n(ts({completed:d.completed})),t().phase!=="IDLE"&&A(),n(rs()),n(qx({draggableId:o,movementMode:p}));var u={shouldPublishImmediately:p==="SNAP"},m={draggableId:o,scrollOptions:u},x=a.startPublishing(m),g=x.critical,h=x.dimensions,v=x.viewport;n(Ux({critical:g,dimensions:h,clientSelection:c,movementMode:p,viewport:v}))}}}},ng=function(a){return function(){return function(r){return function(t){t.type==="INITIAL_PUBLISH"&&a.dragging(),t.type==="DROP_ANIMATE"&&a.dropping(t.payload.completed.result.reason),(t.type==="FLUSH"||t.type==="DROP_COMPLETE")&&a.resting(),r(t)}}}},ns={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},sr={opacity:{drop:0,combining:.7},scale:{drop:.75}},ss={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},la=ss.outOfTheWay+"s "+ns.outOfTheWay,Xa={fluid:"opacity "+la,snap:"transform "+la+", opacity "+la,drop:function(r){var t=r+"s "+ns.drop;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+la,placeholder:"height "+la+", width "+la+", margin "+la},pi=function(r){return Ze(r,oe)?null:"translate("+r.x+"px, "+r.y+"px)"},Cn={moveTo:pi,drop:function(r,t){var n=pi(r);return n?t?n+" scale("+sr.scale.drop+")":n:null}},Dn=ss.minDropTime,yo=ss.maxDropTime,sg=yo-Dn,mi=1500,ig=.6,lg=function(a){var r=a.current,t=a.destination,n=a.reason,s=rr(r,t);if(s<=0)return Dn;if(s>=mi)return yo;var i=s/mi,l=Dn+sg*i,o=n==="CANCEL"?l*ig:l;return Number(o.toFixed(2))},og=function(a){var r=a.impact,t=a.draggable,n=a.dimensions,s=a.viewport,i=a.afterCritical,l=n.draggables,o=n.droppables,c=we(r),p=c?o[c]:null,d=o[t.descriptor.droppableId],u=xo({impact:r,draggable:t,draggables:l,afterCritical:i,droppable:p||d,viewport:s}),m=je(u,t.client.borderBox.center);return m},cg=function(a){var r=a.draggables,t=a.reason,n=a.lastImpact,s=a.home,i=a.viewport,l=a.onLiftImpact;if(!n.at||t!=="DROP"){var o=mo({draggables:r,impact:l,destination:s,viewport:i,forceShouldAnimate:!0});return{impact:o,didDropInsideDroppable:!1}}if(n.at.type==="REORDER")return{impact:n,didDropInsideDroppable:!0};var c=R({},n,{displaced:tr});return{impact:c,didDropInsideDroppable:!0}},dg=function(a){var r=a.getState,t=a.dispatch;return function(n){return function(s){if(s.type!=="DROP"){n(s);return}var i=r(),l=s.payload.reason;if(i.phase==="COLLECTING"){t(rg({reason:l}));return}if(i.phase!=="IDLE"){var o=i.phase==="DROP_PENDING"&&i.isWaiting;o&&A(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||A();var c=i.critical,p=i.dimensions,d=p.draggables[i.critical.draggable.id],u=cg({reason:l,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),m=u.impact,x=u.didDropInsideDroppable,g=x?Yn(m):null,h=x?yt(m):null,v={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:d.descriptor.id,type:d.descriptor.type,source:v,reason:l,mode:i.movementMode,destination:g,combine:h},j=og({impact:m,draggable:d,dimensions:p,viewport:i.viewport,afterCritical:i.afterCritical}),N={critical:i.critical,afterCritical:i.afterCritical,result:b,impact:m},y=!Ze(i.current.client.offset,j)||!!b.combine;if(!y){t(ts({completed:N}));return}var k=lg({current:i.current.client.offset,destination:j,reason:l}),w={newHomeClientOffset:j,dropDuration:k,completed:N};t(ag(w))}}}},jo=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function ug(a){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||a()}}}function pg(a){var r=a.onWindowScroll;function t(){r(jo())}var n=ar(t),s=ug(n),i=Xe;function l(){return i!==Xe}function o(){l()&&A(),i=Me(window,[s])}function c(){l()||A(),n.cancel(),i(),i=Xe}return{start:o,stop:c,isActive:l}}var mg=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},xg=function(a){var r=pg({onWindowScroll:function(n){a.dispatch(Qx({newScroll:n}))}});return function(t){return function(n){!r.isActive()&&n.type==="INITIAL_PUBLISH"&&r.start(),r.isActive()&&mg(n)&&r.stop(),t(n)}}},gg=function(a){var r=!1,t=!1,n=setTimeout(function(){t=!0}),s=function(l){r||t||(r=!0,a(l),clearTimeout(n))};return s.wasCalled=function(){return r},s},hg=function(){var a=[],r=function(i){var l=Qn(a,function(p){return p.timerId===i});l===-1&&A();var o=a.splice(l,1),c=o[0];c.callback()},t=function(i){var l=setTimeout(function(){return r(l)}),o={timerId:l,callback:i};a.push(o)},n=function(){if(a.length){var i=[].concat(a);a.length=0,i.forEach(function(l){clearTimeout(l.timerId),l.callback()})}};return{add:t,flush:n}},fg=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.droppableId===t.droppableId&&r.index===t.index},vg=function(r,t){return r==null&&t==null?!0:r==null||t==null?!1:r.draggableId===t.draggableId&&r.droppableId===t.droppableId},bg=function(r,t){if(r===t)return!0;var n=r.draggable.id===t.draggable.id&&r.draggable.droppableId===t.draggable.droppableId&&r.draggable.type===t.draggable.type&&r.draggable.index===t.draggable.index,s=r.droppable.id===t.droppable.id&&r.droppable.type===t.droppable.type;return n&&s},Ha=function(r,t){t()},Mr=function(r,t){return{draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:t}},Kt=function(r,t,n,s){if(!r){n(s(t));return}var i=gg(n),l={announce:i};r(t,l),i.wasCalled()||n(s(t))},yg=function(a,r){var t=hg(),n=null,s=function(m,x){n&&A(),Ha("onBeforeCapture",function(){var g=a().onBeforeCapture;if(g){var h={draggableId:m,mode:x};g(h)}})},i=function(m,x){n&&A(),Ha("onBeforeDragStart",function(){var g=a().onBeforeDragStart;g&&g(Mr(m,x))})},l=function(m,x){n&&A();var g=Mr(m,x);n={mode:x,lastCritical:m,lastLocation:g.source,lastCombine:null},t.add(function(){Ha("onDragStart",function(){return Kt(a().onDragStart,g,r,Fr.onDragStart)})})},o=function(m,x){var g=Yn(x),h=yt(x);n||A();var v=!bg(m,n.lastCritical);v&&(n.lastCritical=m);var b=!fg(n.lastLocation,g);b&&(n.lastLocation=g);var j=!vg(n.lastCombine,h);if(j&&(n.lastCombine=h),!(!v&&!b&&!j)){var N=R({},Mr(m,n.mode),{combine:h,destination:g});t.add(function(){Ha("onDragUpdate",function(){return Kt(a().onDragUpdate,N,r,Fr.onDragUpdate)})})}},c=function(){n||A(),t.flush()},p=function(m){n||A(),n=null,Ha("onDragEnd",function(){return Kt(a().onDragEnd,m,r,Fr.onDragEnd)})},d=function(){if(n){var m=R({},Mr(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});p(m)}};return{beforeCapture:s,beforeStart:i,start:l,update:o,flush:c,drop:p,abort:d}},jg=function(a,r){var t=yg(a,r);return function(n){return function(s){return function(i){if(i.type==="BEFORE_INITIAL_CAPTURE"){t.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(i.type==="INITIAL_PUBLISH"){var l=i.payload.critical;t.beforeStart(l,i.payload.movementMode),s(i),t.start(l,i.payload.movementMode);return}if(i.type==="DROP_COMPLETE"){var o=i.payload.completed.result;t.flush(),s(i),t.drop(o);return}if(s(i),i.type==="FLUSH"){t.abort();return}var c=n.getState();c.phase==="DRAGGING"&&t.update(c.critical,c.impact)}}}},wg=function(a){return function(r){return function(t){if(t.type!=="DROP_ANIMATION_FINISHED"){r(t);return}var n=a.getState();n.phase!=="DROP_ANIMATING"&&A(),a.dispatch(ts({completed:n.completed}))}}},Ng=function(a){var r=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),r&&(r(),r=null)}return function(s){return function(i){if((i.type==="FLUSH"||i.type==="DROP_COMPLETE"||i.type==="DROP_ANIMATION_FINISHED")&&n(),s(i),i.type==="DROP_ANIMATE"){var l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=a.getState();c.phase==="DROP_ANIMATING"&&a.dispatch(bo())}};t=requestAnimationFrame(function(){t=null,r=Me(window,[l])})}}}},kg=function(a){return function(){return function(r){return function(t){(t.type==="DROP_COMPLETE"||t.type==="FLUSH"||t.type==="DROP_ANIMATE")&&a.stopPublishing(),r(t)}}}},Cg=function(a){var r=!1;return function(){return function(t){return function(n){if(n.type==="INITIAL_PUBLISH"){r=!0,a.tryRecordFocus(n.payload.critical.draggable.id),t(n),a.tryRestoreFocusRecorded();return}if(t(n),!!r){if(n.type==="FLUSH"){r=!1,a.tryRestoreFocusRecorded();return}if(n.type==="DROP_COMPLETE"){r=!1;var s=n.payload.completed.result;s.combine&&a.tryShiftRecord(s.draggableId,s.combine.draggableId),a.tryRestoreFocusRecorded()}}}}}},Dg=function(r){return r.type==="DROP_COMPLETE"||r.type==="DROP_ANIMATE"||r.type==="FLUSH"},Sg=function(a){return function(r){return function(t){return function(n){if(Dg(n)){a.stop(),t(n);return}if(n.type==="INITIAL_PUBLISH"){t(n);var s=r.getState();s.phase!=="DRAGGING"&&A(),a.start(s);return}t(n),a.scroll(r.getState())}}}},Ag=function(a){return function(r){return function(t){if(r(t),t.type==="PUBLISH_WHILE_DRAGGING"){var n=a.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||a.dispatch(vo({reason:n.reason})))}}}},Eg=Dl,Ig=function(a){var r=a.dimensionMarshal,t=a.focusMarshal,n=a.styleMarshal,s=a.getResponders,i=a.announce,l=a.autoScroller;return Cl(zx,Eg(hp(ng(n),kg(r),tg(r),dg,wg,Ng,Ag,Sg(l),xg,Cg(t),jg(s,i))))},Qt=function(){return{additions:{},removals:{},modified:{}}};function Mg(a){var r=a.registry,t=a.callbacks,n=Qt(),s=null,i=function(){s||(t.collectionStarting(),s=requestAnimationFrame(function(){s=null;var d=n,u=d.additions,m=d.removals,x=d.modified,g=Object.keys(u).map(function(b){return r.draggable.getById(b).getDimension(oe)}).sort(function(b,j){return b.descriptor.index-j.descriptor.index}),h=Object.keys(x).map(function(b){var j=r.droppable.getById(b),N=j.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:N}}),v={additions:g,removals:Object.keys(m),modified:h};n=Qt(),t.publish(v)}))},l=function(d){var u=d.descriptor.id;n.additions[u]=d,n.modified[d.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],i()},o=function(d){var u=d.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],i()},c=function(){s&&(cancelAnimationFrame(s),s=null,n=Qt())};return{add:l,remove:o,stop:c}}var wo=function(a){var r=a.scrollHeight,t=a.scrollWidth,n=a.height,s=a.width,i=je({x:t,y:r},{x:s,y:n}),l={x:Math.max(0,i.x),y:Math.max(0,i.y)};return l},No=function(){var a=document.documentElement;return a||A(),a},ko=function(){var a=No(),r=wo({scrollHeight:a.scrollHeight,scrollWidth:a.scrollWidth,width:a.clientWidth,height:a.clientHeight});return r},Pg=function(){var a=jo(),r=ko(),t=a.y,n=a.x,s=No(),i=s.clientWidth,l=s.clientHeight,o=n+i,c=t+l,p=Fe({top:t,left:n,right:o,bottom:c}),d={frame:p,scroll:{initial:a,current:a,max:r,diff:{value:oe,displacement:oe}}};return d},Tg=function(a){var r=a.critical,t=a.scrollOptions,n=a.registry,s=Pg(),i=s.scroll.current,l=r.droppable,o=n.droppable.getAllByType(l.type).map(function(u){return u.callbacks.getDimensionAndWatchScroll(i,t)}),c=n.draggable.getAllByType(r.draggable.type).map(function(u){return u.getDimension(i)}),p={draggables:Xl(c),droppables:Jl(o)},d={dimensions:p,critical:r,viewport:s};return d};function xi(a,r,t){if(t.descriptor.id===r.id||t.descriptor.type!==r.type)return!1;var n=a.droppable.getById(t.descriptor.droppableId);return n.descriptor.mode==="virtual"}var Og=function(a,r){var t=null,n=Mg({callbacks:{publish:r.publishWhileDragging,collectionStarting:r.collectionStarting},registry:a}),s=function(x,g){a.droppable.exists(x)||A(),t&&r.updateDroppableIsEnabled({id:x,isEnabled:g})},i=function(x,g){t&&(a.droppable.exists(x)||A(),r.updateDroppableIsCombineEnabled({id:x,isCombineEnabled:g}))},l=function(x,g){t&&(a.droppable.exists(x)||A(),r.updateDroppableScroll({id:x,newScroll:g}))},o=function(x,g){t&&a.droppable.getById(x).callbacks.scroll(g)},c=function(){if(t){n.stop();var x=t.critical.droppable;a.droppable.getAllByType(x.type).forEach(function(g){return g.callbacks.dragStopped()}),t.unsubscribe(),t=null}},p=function(x){t||A();var g=t.critical.draggable;x.type==="ADDITION"&&xi(a,g,x.value)&&n.add(x.value),x.type==="REMOVAL"&&xi(a,g,x.value)&&n.remove(x.value)},d=function(x){t&&A();var g=a.draggable.getById(x.draggableId),h=a.droppable.getById(g.descriptor.droppableId),v={draggable:g.descriptor,droppable:h.descriptor},b=a.subscribe(p);return t={critical:v,unsubscribe:b},Tg({critical:v,registry:a,scrollOptions:x.scrollOptions})},u={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:o,updateDroppableScroll:l,startPublishing:d,stopPublishing:c};return u},Co=function(a,r){return a.phase==="IDLE"?!0:a.phase!=="DROP_ANIMATING"||a.completed.result.draggableId===r?!1:a.completed.result.reason==="DROP"},Lg=function(a){window.scrollBy(a.x,a.y)},Rg=le(function(a){return bt(a).filter(function(r){return!(!r.isEnabled||!r.frame)})}),Fg=function(r,t){var n=ta(Rg(t),function(s){return s.frame||A(),oo(s.frame.pageMarginBox)(r)});return n},Bg=function(a){var r=a.center,t=a.destination,n=a.droppables;if(t){var s=n[t];return s.frame?s:null}var i=Fg(r,n);return i},ea={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(r){return Math.pow(r,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Gg=function(a,r){var t=a[r.size]*ea.startFromPercentage,n=a[r.size]*ea.maxScrollAtPercentage,s={startScrollingFrom:t,maxScrollValueAt:n};return s},Do=function(a){var r=a.startOfRange,t=a.endOfRange,n=a.current,s=t-r;if(s===0)return 0;var i=n-r,l=i/s;return l},is=1,zg=function(a,r){if(a>r.startScrollingFrom)return 0;if(a<=r.maxScrollValueAt)return ea.maxPixelScroll;if(a===r.startScrollingFrom)return is;var t=Do({startOfRange:r.maxScrollValueAt,endOfRange:r.startScrollingFrom,current:a}),n=1-t,s=ea.maxPixelScroll*ea.ease(n);return Math.ceil(s)},gi=ea.durationDampening.accelerateAt,hi=ea.durationDampening.stopDampeningAt,qg=function(a,r){var t=r,n=hi,s=Date.now(),i=s-t;if(i>=hi)return a;if(i<gi)return is;var l=Do({startOfRange:gi,endOfRange:n,current:i}),o=a*ea.ease(l);return Math.ceil(o)},fi=function(a){var r=a.distanceToEdge,t=a.thresholds,n=a.dragStartTime,s=a.shouldUseTimeDampening,i=zg(r,t);return i===0?0:s?Math.max(qg(i,n),is):i},vi=function(a){var r=a.container,t=a.distanceToEdges,n=a.dragStartTime,s=a.axis,i=a.shouldUseTimeDampening,l=Gg(r,s),o=t[s.end]<t[s.start];return o?fi({distanceToEdge:t[s.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i}):-1*fi({distanceToEdge:t[s.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:i})},$g=function(a){var r=a.container,t=a.subject,n=a.proposedScroll,s=t.height>r.height,i=t.width>r.width;return!i&&!s?n:i&&s?null:{x:i?0:n.x,y:s?0:n.y}},Ug=Ql(function(a){return a===0?0:a}),So=function(a){var r=a.dragStartTime,t=a.container,n=a.subject,s=a.center,i=a.shouldUseTimeDampening,l={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},o=vi({container:t,distanceToEdges:l,dragStartTime:r,axis:Jn,shouldUseTimeDampening:i}),c=vi({container:t,distanceToEdges:l,dragStartTime:r,axis:ao,shouldUseTimeDampening:i}),p=Ug({x:c,y:o});if(Ze(p,oe))return null;var d=$g({container:t,subject:n,proposedScroll:p});return d?Ze(d,oe)?null:d:null},Vg=Ql(function(a){return a===0?0:a>0?1:-1}),ls=function(){var a=function(t,n){return t<0?t:t>n?t-n:0};return function(r){var t=r.current,n=r.max,s=r.change,i=pe(t,s),l={x:a(i.x,n.x),y:a(i.y,n.y)};return Ze(l,oe)?null:l}}(),Ao=function(r){var t=r.max,n=r.current,s=r.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},l=Vg(s),o=ls({max:i,current:n,change:l});return!o||l.x!==0&&o.x===0||l.y!==0&&o.y===0},os=function(r,t){return Ao({current:r.scroll.current,max:r.scroll.max,change:t})},Hg=function(r,t){if(!os(r,t))return null;var n=r.scroll.max,s=r.scroll.current;return ls({current:s,max:n,change:t})},cs=function(r,t){var n=r.frame;return n?Ao({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Wg=function(r,t){var n=r.frame;return!n||!cs(r,t)?null:ls({current:n.scroll.current,max:n.scroll.max,change:t})},_g=function(a){var r=a.viewport,t=a.subject,n=a.center,s=a.dragStartTime,i=a.shouldUseTimeDampening,l=So({dragStartTime:s,container:r.frame,subject:t,center:n,shouldUseTimeDampening:i});return l&&os(r,l)?l:null},Kg=function(a){var r=a.droppable,t=a.subject,n=a.center,s=a.dragStartTime,i=a.shouldUseTimeDampening,l=r.frame;if(!l)return null;var o=So({dragStartTime:s,container:l.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i});return o&&cs(r,o)?o:null},bi=function(a){var r=a.state,t=a.dragStartTime,n=a.shouldUseTimeDampening,s=a.scrollWindow,i=a.scrollDroppable,l=r.current.page.borderBoxCenter,o=r.dimensions.draggables[r.critical.draggable.id],c=o.page.marginBox;if(r.isWindowScrollAllowed){var p=r.viewport,d=_g({dragStartTime:t,viewport:p,subject:c,center:l,shouldUseTimeDampening:n});if(d){s(d);return}}var u=Bg({center:l,destination:we(r.impact),droppables:r.dimensions.droppables});if(u){var m=Kg({dragStartTime:t,droppable:u,subject:c,center:l,shouldUseTimeDampening:n});m&&i(u.descriptor.id,m)}},Qg=function(a){var r=a.scrollWindow,t=a.scrollDroppable,n=ar(r),s=ar(t),i=null,l=function(d){i||A();var u=i,m=u.shouldUseTimeDampening,x=u.dragStartTime;bi({state:d,scrollWindow:n,scrollDroppable:s,dragStartTime:x,shouldUseTimeDampening:m})},o=function(d){i&&A();var u=Date.now(),m=!1,x=function(){m=!0};bi({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:x,scrollDroppable:x}),i={dragStartTime:u,shouldUseTimeDampening:m},m&&l(d)},c=function(){i&&(n.cancel(),s.cancel(),i=null)};return{start:o,stop:c,scroll:l}},Yg=function(a){var r=a.move,t=a.scrollDroppable,n=a.scrollWindow,s=function(p,d){var u=pe(p.current.client.selection,d);r({client:u})},i=function(p,d){if(!cs(p,d))return d;var u=Wg(p,d);if(!u)return t(p.descriptor.id,d),null;var m=je(d,u);t(p.descriptor.id,m);var x=je(d,m);return x},l=function(p,d,u){if(!p||!os(d,u))return u;var m=Hg(d,u);if(!m)return n(u),null;var x=je(u,m);n(x);var g=je(u,x);return g},o=function(p){var d=p.scrollJumpRequest;if(d){var u=we(p.impact);u||A();var m=i(p.dimensions.droppables[u],d);if(m){var x=p.viewport,g=l(p.isWindowScrollAllowed,x,m);g&&s(p,g)}}};return o},Jg=function(a){var r=a.scrollDroppable,t=a.scrollWindow,n=a.move,s=Qg({scrollWindow:t,scrollDroppable:r}),i=Yg({move:n,scrollWindow:t,scrollDroppable:r}),l=function(p){if(p.phase==="DRAGGING"){if(p.movementMode==="FLUID"){s.scroll(p);return}p.scrollJumpRequest&&i(p)}},o={scroll:l,start:s.start,stop:s.stop};return o},Oa="data-rbd",La=function(){var a=Oa+"-drag-handle";return{base:a,draggableId:a+"-draggable-id",contextId:a+"-context-id"}}(),Sn=function(){var a=Oa+"-draggable";return{base:a,contextId:a+"-context-id",id:a+"-id"}}(),Xg=function(){var a=Oa+"-droppable";return{base:a,contextId:a+"-context-id",id:a+"-id"}}(),yi={contextId:Oa+"-scroll-container-context-id"},Zg=function(r){return function(t){return"["+t+'="'+r+'"]'}},Wa=function(r,t){return r.map(function(n){var s=n.styles[t];return s?n.selector+" { "+s+" }":""}).join(" ")},eh="pointer-events: none;",ah=function(a){var r=Zg(a),t=function(){var o=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:r(La.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:o,dragging:eh,dropAnimating:o}}}(),n=function(){var o=`
      transition: `+Xa.outOfTheWay+`;
    `;return{selector:r(Sn.contextId),styles:{dragging:o,dropAnimating:o,userCancel:o}}}(),s={selector:r(Xg.contextId),styles:{always:"overflow-anchor: none;"}},i={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},l=[n,t,s,i];return{always:Wa(l,"always"),resting:Wa(l,"resting"),dragging:Wa(l,"dragging"),dropAnimating:Wa(l,"dropAnimating"),userCancel:Wa(l,"userCancel")}},Ne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?f.useLayoutEffect:f.useEffect,Yt=function(){var r=document.querySelector("head");return r||A(),r},ji=function(r){var t=document.createElement("style");return r&&t.setAttribute("nonce",r),t.type="text/css",t};function rh(a,r){var t=W(function(){return ah(a)},[a]),n=f.useRef(null),s=f.useRef(null),i=L(le(function(u){var m=s.current;m||A(),m.textContent=u}),[]),l=L(function(u){var m=n.current;m||A(),m.textContent=u},[]);Ne(function(){!n.current&&!s.current||A();var u=ji(r),m=ji(r);return n.current=u,s.current=m,u.setAttribute(Oa+"-always",a),m.setAttribute(Oa+"-dynamic",a),Yt().appendChild(u),Yt().appendChild(m),l(t.always),i(t.resting),function(){var x=function(h){var v=h.current;v||A(),Yt().removeChild(v),h.current=null};x(n),x(s)}},[r,l,i,t.always,t.resting,a]);var o=L(function(){return i(t.dragging)},[i,t.dragging]),c=L(function(u){if(u==="DROP"){i(t.dropAnimating);return}i(t.userCancel)},[i,t.dropAnimating,t.userCancel]),p=L(function(){s.current&&i(t.resting)},[i,t.resting]),d=W(function(){return{dragging:o,dropping:c,resting:p}},[o,c,p]);return d}var Eo=function(a){return a&&a.ownerDocument?a.ownerDocument.defaultView:window};function Nt(a){return a instanceof Eo(a).HTMLElement}function th(a,r){var t="["+La.contextId+'="'+a+'"]',n=Yl(document.querySelectorAll(t));if(!n.length)return null;var s=ta(n,function(i){return i.getAttribute(La.draggableId)===r});return!s||!Nt(s)?null:s}function nh(a){var r=f.useRef({}),t=f.useRef(null),n=f.useRef(null),s=f.useRef(!1),i=L(function(m,x){var g={id:m,focus:x};return r.current[m]=g,function(){var v=r.current,b=v[m];b!==g&&delete v[m]}},[]),l=L(function(m){var x=th(a,m);x&&x!==document.activeElement&&x.focus()},[a]),o=L(function(m,x){t.current===m&&(t.current=x)},[]),c=L(function(){n.current||s.current&&(n.current=requestAnimationFrame(function(){n.current=null;var m=t.current;m&&l(m)}))},[l]),p=L(function(m){t.current=null;var x=document.activeElement;x&&x.getAttribute(La.draggableId)===m&&(t.current=m)},[]);Ne(function(){return s.current=!0,function(){s.current=!1;var m=n.current;m&&cancelAnimationFrame(m)}},[]);var d=W(function(){return{register:i,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[i,p,c,o]);return d}function sh(){var a={draggables:{},droppables:{}},r=[];function t(u){return r.push(u),function(){var x=r.indexOf(u);x!==-1&&r.splice(x,1)}}function n(u){r.length&&r.forEach(function(m){return m(u)})}function s(u){return a.draggables[u]||null}function i(u){var m=s(u);return m||A(),m}var l={register:function(m){a.draggables[m.descriptor.id]=m,n({type:"ADDITION",value:m})},update:function(m,x){var g=a.draggables[x.descriptor.id];g&&g.uniqueId===m.uniqueId&&(delete a.draggables[x.descriptor.id],a.draggables[m.descriptor.id]=m)},unregister:function(m){var x=m.descriptor.id,g=s(x);g&&m.uniqueId===g.uniqueId&&(delete a.draggables[x],n({type:"REMOVAL",value:m}))},getById:i,findById:s,exists:function(m){return!!s(m)},getAllByType:function(m){return Yr(a.draggables).filter(function(x){return x.descriptor.type===m})}};function o(u){return a.droppables[u]||null}function c(u){var m=o(u);return m||A(),m}var p={register:function(m){a.droppables[m.descriptor.id]=m},unregister:function(m){var x=o(m.descriptor.id);x&&m.uniqueId===x.uniqueId&&delete a.droppables[m.descriptor.id]},getById:c,findById:o,exists:function(m){return!!o(m)},getAllByType:function(m){return Yr(a.droppables).filter(function(x){return x.descriptor.type===m})}};function d(){a.draggables={},a.droppables={},r.length=0}return{draggable:l,droppable:p,subscribe:t,clean:d}}function ih(){var a=W(sh,[]);return f.useEffect(function(){return function(){requestAnimationFrame(a.clean)}},[a]),a}var ds=$.createContext(null),Xr=function(){var a=document.body;return a||A(),a},lh={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},oh=function(r){return"rbd-announcement-"+r};function ch(a){var r=W(function(){return oh(a)},[a]),t=f.useRef(null);f.useEffect(function(){var i=document.createElement("div");return t.current=i,i.id=r,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),R(i.style,lh),Xr().appendChild(i),function(){setTimeout(function(){var c=Xr();c.contains(i)&&c.removeChild(i),i===t.current&&(t.current=null)})}},[r]);var n=L(function(s){var i=t.current;if(i){i.textContent=s;return}},[]);return n}var dh=0,uh={separator:"::"};function us(a,r){return r===void 0&&(r=uh),W(function(){return""+a+r.separator+dh++},[r.separator,a])}function ph(a){var r=a.contextId,t=a.uniqueId;return"rbd-hidden-text-"+r+"-"+t}function mh(a){var r=a.contextId,t=a.text,n=us("hidden-text",{separator:"-"}),s=W(function(){return ph({contextId:r,uniqueId:n})},[n,r]);return f.useEffect(function(){var l=document.createElement("div");return l.id=s,l.textContent=t,l.style.display="none",Xr().appendChild(l),function(){var c=Xr();c.contains(l)&&c.removeChild(l)}},[s,t]),s}var kt=$.createContext(null);function Io(a){var r=f.useRef(a);return f.useEffect(function(){r.current=a}),r}function xh(){var a=null;function r(){return!!a}function t(l){return l===a}function n(l){a&&A();var o={abandon:l};return a=o,o}function s(){a||A(),a=null}function i(){a&&(a.abandon(),s())}return{isClaimed:r,isActive:t,claim:n,release:s,tryAbandon:i}}var gh=9,hh=13,ps=27,Mo=32,fh=33,vh=34,bh=35,yh=36,jh=37,wh=38,Nh=39,kh=40,Pr,Ch=(Pr={},Pr[hh]=!0,Pr[gh]=!0,Pr),Po=function(a){Ch[a.keyCode]&&a.preventDefault()},Ct=function(){var a="visibilitychange";if(typeof document>"u")return a;var r=[a,"ms"+a,"webkit"+a,"moz"+a,"o"+a],t=ta(r,function(n){return"on"+n in document});return t||a}(),To=0,wi=5;function Dh(a,r){return Math.abs(r.x-a.x)>=wi||Math.abs(r.y-a.y)>=wi}var Ni={type:"IDLE"};function Sh(a){var r=a.cancel,t=a.completed,n=a.getPhase,s=a.setPhase;return[{eventName:"mousemove",fn:function(l){var o=l.button,c=l.clientX,p=l.clientY;if(o===To){var d={x:c,y:p},u=n();if(u.type==="DRAGGING"){l.preventDefault(),u.actions.move(d);return}u.type!=="PENDING"&&A();var m=u.point;if(Dh(m,d)){l.preventDefault();var x=u.actions.fluidLift(d);s({type:"DRAGGING",actions:x})}}}},{eventName:"mouseup",fn:function(l){var o=n();if(o.type!=="DRAGGING"){r();return}l.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:function(l){n().type==="DRAGGING"&&l.preventDefault(),r()}},{eventName:"keydown",fn:function(l){var o=n();if(o.type==="PENDING"){r();return}if(l.keyCode===ps){l.preventDefault(),r();return}Po(l)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){n().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:function(l){var o=n();if(o.type==="IDLE"&&A(),o.actions.shouldRespectForcePress()){r();return}l.preventDefault()}},{eventName:Ct,fn:r}]}function Ah(a){var r=f.useRef(Ni),t=f.useRef(Xe),n=W(function(){return{eventName:"mousedown",fn:function(u){if(!u.defaultPrevented&&u.button===To&&!(u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)){var m=a.findClosestDraggableId(u);if(m){var x=a.tryGetLock(m,l,{sourceEvent:u});if(x){u.preventDefault();var g={x:u.clientX,y:u.clientY};t.current(),p(x,g)}}}}}},[a]),s=W(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(u){if(!u.defaultPrevented){var m=a.findClosestDraggableId(u);if(m){var x=a.findOptionsForDraggable(m);x&&(x.shouldRespectForcePress||a.canGetLock(m)&&u.preventDefault())}}}}},[a]),i=L(function(){var u={passive:!1,capture:!0};t.current=Me(window,[s,n],u)},[s,n]),l=L(function(){var d=r.current;d.type!=="IDLE"&&(r.current=Ni,t.current(),i())},[i]),o=L(function(){var d=r.current;l(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[l]),c=L(function(){var u={capture:!0,passive:!1},m=Sh({cancel:o,completed:l,getPhase:function(){return r.current},setPhase:function(g){r.current=g}});t.current=Me(window,m,u)},[o,l]),p=L(function(u,m){r.current.type!=="IDLE"&&A(),r.current={type:"PENDING",point:m,actions:u},c()},[c]);Ne(function(){return i(),function(){t.current()}},[i])}var Ca;function Eh(){}var Ih=(Ca={},Ca[vh]=!0,Ca[fh]=!0,Ca[yh]=!0,Ca[bh]=!0,Ca);function Mh(a,r){function t(){r(),a.cancel()}function n(){r(),a.drop()}return[{eventName:"keydown",fn:function(i){if(i.keyCode===ps){i.preventDefault(),t();return}if(i.keyCode===Mo){i.preventDefault(),n();return}if(i.keyCode===kh){i.preventDefault(),a.moveDown();return}if(i.keyCode===wh){i.preventDefault(),a.moveUp();return}if(i.keyCode===Nh){i.preventDefault(),a.moveRight();return}if(i.keyCode===jh){i.preventDefault(),a.moveLeft();return}if(Ih[i.keyCode]){i.preventDefault();return}Po(i)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Ct,fn:t}]}function Ph(a){var r=f.useRef(Eh),t=W(function(){return{eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==Mo)return;var l=a.findClosestDraggableId(i);if(!l)return;var o=a.tryGetLock(l,d,{sourceEvent:i});if(!o)return;i.preventDefault();var c=!0,p=o.snapLift();r.current();function d(){c||A(),c=!1,r.current(),n()}r.current=Me(window,Mh(p,d),{capture:!0,passive:!1})}}},[a]),n=L(function(){var i={passive:!1,capture:!0};r.current=Me(window,[t],i)},[t]);Ne(function(){return n(),function(){r.current()}},[n])}var Jt={type:"IDLE"},Th=120,Oh=.15;function Lh(a){var r=a.cancel,t=a.getPhase;return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(t().type!=="DRAGGING"){r();return}s.keyCode===ps&&s.preventDefault(),r()}},{eventName:Ct,fn:r}]}function Rh(a){var r=a.cancel,t=a.completed,n=a.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(i){var l=n();if(l.type!=="DRAGGING"){r();return}l.hasMoved=!0;var o=i.touches[0],c=o.clientX,p=o.clientY,d={x:c,y:p};i.preventDefault(),l.actions.move(d)}},{eventName:"touchend",fn:function(i){var l=n();if(l.type!=="DRAGGING"){r();return}i.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:function(i){if(n().type!=="DRAGGING"){r();return}i.preventDefault(),r()}},{eventName:"touchforcechange",fn:function(i){var l=n();l.type==="IDLE"&&A();var o=i.touches[0];if(o){var c=o.force>=Oh;if(c){var p=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){p&&r();return}if(p){if(l.hasMoved){i.preventDefault();return}r();return}i.preventDefault()}}}},{eventName:Ct,fn:r}]}function Fh(a){var r=f.useRef(Jt),t=f.useRef(Xe),n=L(function(){return r.current},[]),s=L(function(x){r.current=x},[]),i=W(function(){return{eventName:"touchstart",fn:function(x){if(!x.defaultPrevented){var g=a.findClosestDraggableId(x);if(g){var h=a.tryGetLock(g,o,{sourceEvent:x});if(h){var v=x.touches[0],b=v.clientX,j=v.clientY,N={x:b,y:j};t.current(),u(h,N)}}}}}},[a]),l=L(function(){var x={capture:!0,passive:!1};t.current=Me(window,[i],x)},[i]),o=L(function(){var m=r.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),s(Jt),t.current(),l())},[l,s]),c=L(function(){var m=r.current;o(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[o]),p=L(function(){var x={capture:!0,passive:!1},g={cancel:c,completed:o,getPhase:n},h=Me(window,Rh(g),x),v=Me(window,Lh(g),x);t.current=function(){h(),v()}},[c,n,o]),d=L(function(){var x=n();x.type!=="PENDING"&&A();var g=x.actions.fluidLift(x.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[n,s]),u=L(function(x,g){n().type!=="IDLE"&&A();var h=setTimeout(d,Th);s({type:"PENDING",point:g,actions:x,longPressTimerId:h}),p()},[p,n,s,d]);Ne(function(){return l(),function(){t.current();var g=n();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(Jt))}},[n,l,s]),Ne(function(){var x=Me(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return x},[])}var Bh={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Oo(a,r){if(r==null)return!1;var t=!!Bh[r.tagName.toLowerCase()];if(t)return!0;var n=r.getAttribute("contenteditable");return n==="true"||n===""?!0:r===a?!1:Oo(a,r.parentElement)}function Gh(a,r){var t=r.target;return Nt(t)?Oo(a,t):!1}var zh=function(a){return Fe(a.getBoundingClientRect()).center};function qh(a){return a instanceof Eo(a).Element}var $h=function(){var a="matches";if(typeof document>"u")return a;var r=[a,"msMatchesSelector","webkitMatchesSelector"],t=ta(r,function(n){return n in Element.prototype});return t||a}();function Lo(a,r){return a==null?null:a[$h](r)?a:Lo(a.parentElement,r)}function Uh(a,r){return a.closest?a.closest(r):Lo(a,r)}function Vh(a){return"["+La.contextId+'="'+a+'"]'}function Hh(a,r){var t=r.target;if(!qh(t))return null;var n=Vh(a),s=Uh(t,n);return!s||!Nt(s)?null:s}function Wh(a,r){var t=Hh(a,r);return t?t.getAttribute(La.draggableId):null}function _h(a,r){var t="["+Sn.contextId+'="'+a+'"]',n=Yl(document.querySelectorAll(t)),s=ta(n,function(i){return i.getAttribute(Sn.id)===r});return!s||!Nt(s)?null:s}function Kh(a){a.preventDefault()}function Tr(a){var r=a.expected,t=a.phase,n=a.isLockActive;return a.shouldWarn,!(!n()||r!==t)}function Ro(a){var r=a.lockAPI,t=a.store,n=a.registry,s=a.draggableId;if(r.isClaimed())return!1;var i=n.draggable.findById(s);return!(!i||!i.options.isEnabled||!Co(t.getState(),s))}function Qh(a){var r=a.lockAPI,t=a.contextId,n=a.store,s=a.registry,i=a.draggableId,l=a.forceSensorStop,o=a.sourceEvent,c=Ro({lockAPI:r,store:n,registry:s,draggableId:i});if(!c)return null;var p=s.draggable.getById(i),d=_h(t,p.descriptor.id);if(!d||o&&!p.options.canDragInteractiveElements&&Gh(d,o))return null;var u=r.claim(l||Xe),m="PRE_DRAG";function x(){return p.options.shouldRespectForcePress}function g(){return r.isActive(u)}function h(w,S){Tr({expected:w,phase:m,isLockActive:g,shouldWarn:!0})&&n.dispatch(S())}var v=h.bind(null,"DRAGGING");function b(w){function S(){r.release(),m="COMPLETED"}m!=="PRE_DRAG"&&(S(),m!=="PRE_DRAG"&&A()),n.dispatch($x(w.liftActionArgs)),m="DRAGGING";function P(O,U){if(U===void 0&&(U={shouldBlockNextClick:!1}),w.cleanup(),U.shouldBlockNextClick){var z=Me(window,[{eventName:"click",fn:Kh,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(z)}S(),n.dispatch(vo({reason:O}))}return R({isActive:function(){return Tr({expected:"DRAGGING",phase:m,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:x,drop:function(U){return P("DROP",U)},cancel:function(U){return P("CANCEL",U)}},w.actions)}function j(w){var S=ar(function(O){v(function(){return fo({client:O})})}),P=b({liftActionArgs:{id:i,clientSelection:w,movementMode:"FLUID"},cleanup:function(){return S.cancel()},actions:{move:S}});return R({},P,{move:S})}function N(){var w={moveUp:function(){return v(Jx)},moveRight:function(){return v(Zx)},moveDown:function(){return v(Xx)},moveLeft:function(){return v(eg)}};return b({liftActionArgs:{id:i,clientSelection:zh(d),movementMode:"SNAP"},cleanup:Xe,actions:w})}function y(){var w=Tr({expected:"PRE_DRAG",phase:m,isLockActive:g,shouldWarn:!0});w&&r.release()}var k={isActive:function(){return Tr({expected:"PRE_DRAG",phase:m,isLockActive:g,shouldWarn:!1})},shouldRespectForcePress:x,fluidLift:j,snapLift:N,abort:y};return k}var Yh=[Ah,Ph,Fh];function Jh(a){var r=a.contextId,t=a.store,n=a.registry,s=a.customSensors,i=a.enableDefaultSensors,l=[].concat(i?Yh:[],s||[]),o=f.useState(function(){return xh()})[0],c=L(function(j,N){j.isDragging&&!N.isDragging&&o.tryAbandon()},[o]);Ne(function(){var j=t.getState(),N=t.subscribe(function(){var y=t.getState();c(j,y),j=y});return N},[o,t,c]),Ne(function(){return o.tryAbandon},[o.tryAbandon]);for(var p=L(function(b){return Ro({lockAPI:o,registry:n,store:t,draggableId:b})},[o,n,t]),d=L(function(b,j,N){return Qh({lockAPI:o,registry:n,contextId:r,store:t,draggableId:b,forceSensorStop:j,sourceEvent:N&&N.sourceEvent?N.sourceEvent:null})},[r,o,n,t]),u=L(function(b){return Wh(r,b)},[r]),m=L(function(b){var j=n.draggable.findById(b);return j?j.options:null},[n.draggable]),x=L(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(rs()))},[o,t]),g=L(o.isClaimed,[o]),h=W(function(){return{canGetLock:p,tryGetLock:d,findClosestDraggableId:u,findOptionsForDraggable:m,tryReleaseLock:x,isLockClaimed:g}},[p,d,u,m,x,g]),v=0;v<l.length;v++)l[v](h)}var Xh=function(r){return{onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}};function _a(a){return a.current||A(),a.current}function Zh(a){var r=a.contextId,t=a.setCallbacks,n=a.sensors,s=a.nonce,i=a.dragHandleUsageInstructions,l=f.useRef(null),o=Io(a),c=L(function(){return Xh(o.current)},[o]),p=ch(r),d=mh({contextId:r,text:i}),u=rh(r,s),m=L(function(O){_a(l).dispatch(O)},[]),x=W(function(){return Ws({publishWhileDragging:Vx,updateDroppableScroll:Wx,updateDroppableIsEnabled:_x,updateDroppableIsCombineEnabled:Kx,collectionStarting:Hx},m)},[m]),g=ih(),h=W(function(){return Og(g,x)},[g,x]),v=W(function(){return Jg(R({scrollWindow:Lg,scrollDroppable:h.scrollDroppable},Ws({move:fo},m)))},[h.scrollDroppable,m]),b=nh(r),j=W(function(){return Ig({announce:p,autoScroller:v,dimensionMarshal:h,focusMarshal:b,getResponders:c,styleMarshal:u})},[p,v,h,b,c,u]);l.current=j;var N=L(function(){var O=_a(l),U=O.getState();U.phase!=="IDLE"&&O.dispatch(rs())},[]),y=L(function(){var O=_a(l).getState();return O.isDragging||O.phase==="DROP_ANIMATING"},[]),k=W(function(){return{isDragging:y,tryAbort:N}},[y,N]);t(k);var w=L(function(O){return Co(_a(l).getState(),O)},[]),S=L(function(){return oa(_a(l).getState())},[]),P=W(function(){return{marshal:h,focus:b,contextId:r,canLift:w,isMovementAllowed:S,dragHandleUsageInstructionsId:d,registry:g}},[r,h,d,b,w,S,g]);return Jh({contextId:r,store:j,registry:g,customSensors:n,enableDefaultSensors:a.enableDefaultSensors!==!1}),f.useEffect(function(){return N},[N]),$.createElement(kt.Provider,{value:P},$.createElement(jp,{context:ds,store:j},a.children))}var ef=0;function af(){return W(function(){return""+ef++},[])}function rf(a){var r=af(),t=a.dragHandleUsageInstructions||Fr.dragHandleUsageInstructions;return $.createElement(Pm,null,function(n){return $.createElement(Zh,{nonce:a.nonce,contextId:r,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:a.enableDefaultSensors,sensors:a.sensors,onBeforeCapture:a.onBeforeCapture,onBeforeDragStart:a.onBeforeDragStart,onDragStart:a.onDragStart,onDragUpdate:a.onDragUpdate,onDragEnd:a.onDragEnd},a.children)})}var Fo=function(r){return function(t){return r===t}},tf=Fo("scroll"),nf=Fo("auto"),ki=function(r,t){return t(r.overflowX)||t(r.overflowY)},sf=function(r){var t=window.getComputedStyle(r),n={overflowX:t.overflowX,overflowY:t.overflowY};return ki(n,tf)||ki(n,nf)},lf=function(){return!1},of=function a(r){return r==null?null:r===document.body?lf()?r:null:r===document.documentElement?null:sf(r)?r:a(r.parentElement)},An=function(a){return{x:a.scrollLeft,y:a.scrollTop}},cf=function a(r){if(!r)return!1;var t=window.getComputedStyle(r);return t.position==="fixed"?!0:a(r.parentElement)},df=function(a){var r=of(a),t=cf(a);return{closestScrollable:r,isFixedOnPage:t}},uf=function(a){var r=a.descriptor,t=a.isEnabled,n=a.isCombineEnabled,s=a.isFixedOnPage,i=a.direction,l=a.client,o=a.page,c=a.closest,p=function(){if(!c)return null;var x=c.scrollSize,g=c.client,h=wo({scrollHeight:x.scrollHeight,scrollWidth:x.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:g,scrollSize:x,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:h,diff:{value:oe,displacement:oe}}}}(),d=i==="vertical"?Jn:ao,u=Ta({page:o,withPlaceholder:null,axis:d,frame:p}),m={descriptor:r,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:t,client:l,page:o,frame:p,subject:u};return m},pf=function(r,t){var n=Hl(r);if(!t||r!==t)return n;var s=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,l=s+t.scrollHeight,o=i+t.scrollWidth,c={top:s,right:o,bottom:l,left:i},p=Wn(c,n.border),d=_n({borderBox:p,margin:n.margin,border:n.border,padding:n.padding});return d},mf=function(a){var r=a.ref,t=a.descriptor,n=a.env,s=a.windowScroll,i=a.direction,l=a.isDropDisabled,o=a.isCombineEnabled,c=a.shouldClipSubject,p=n.closestScrollable,d=pf(r,p),u=_r(d,s),m=function(){if(!p)return null;var g=Hl(p),h={scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth};return{client:g,page:_r(g,s),scroll:An(p),scrollSize:h,shouldClipSubject:c}}(),x=uf({descriptor:t,isEnabled:!l,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:d,page:u,closest:m});return x},xf={passive:!1},gf={passive:!0},Ci=function(a){return a.shouldPublishImmediately?xf:gf};function Zr(a){var r=f.useContext(a);return r||A(),r}var Or=function(r){return r&&r.env.closestScrollable||null};function hf(a){var r=f.useRef(null),t=Zr(kt),n=us("droppable"),s=t.registry,i=t.marshal,l=Io(a),o=W(function(){return{id:a.droppableId,type:a.type,mode:a.mode}},[a.droppableId,a.mode,a.type]),c=f.useRef(o),p=W(function(){return le(function(y,k){r.current||A();var w={x:y,y:k};i.updateDroppableScroll(o.id,w)})},[o.id,i]),d=L(function(){var y=r.current;return!y||!y.env.closestScrollable?oe:An(y.env.closestScrollable)},[]),u=L(function(){var y=d();p(y.x,y.y)},[d,p]),m=W(function(){return ar(u)},[u]),x=L(function(){var y=r.current,k=Or(y);y&&k||A();var w=y.scrollOptions;if(w.shouldPublishImmediately){u();return}m()},[m,u]),g=L(function(y,k){r.current&&A();var w=l.current,S=w.getDroppableRef();S||A();var P=df(S),O={ref:S,descriptor:o,env:P,scrollOptions:k};r.current=O;var U=mf({ref:S,descriptor:o,env:P,windowScroll:y,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),z=P.closestScrollable;return z&&(z.setAttribute(yi.contextId,t.contextId),z.addEventListener("scroll",x,Ci(O.scrollOptions))),U},[t.contextId,o,x,l]),h=L(function(){var y=r.current,k=Or(y);return y&&k||A(),An(k)},[]),v=L(function(){var y=r.current;y||A();var k=Or(y);r.current=null,k&&(m.cancel(),k.removeAttribute(yi.contextId),k.removeEventListener("scroll",x,Ci(y.scrollOptions)))},[x,m]),b=L(function(y){var k=r.current;k||A();var w=Or(k);w||A(),w.scrollTop+=y.y,w.scrollLeft+=y.x},[]),j=W(function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:h,dragStopped:v,scroll:b}},[v,g,h,b]),N=W(function(){return{uniqueId:n,descriptor:o,callbacks:j}},[j,o,n]);Ne(function(){return c.current=N.descriptor,s.droppable.register(N),function(){r.current&&v(),s.droppable.unregister(N)}},[j,o,v,N,i,s.droppable]),Ne(function(){r.current&&i.updateDroppableIsEnabled(c.current.id,!a.isDropDisabled)},[a.isDropDisabled,i]),Ne(function(){r.current&&i.updateDroppableIsCombineEnabled(c.current.id,a.isCombineEnabled)},[a.isCombineEnabled,i])}function Xt(){}var Di={width:0,height:0,margin:Bm},ff=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,s=r.animate;return t||s==="close"?Di:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}},vf=function(r){var t=r.isAnimatingOpenOnMount,n=r.placeholder,s=r.animate,i=ff({isAnimatingOpenOnMount:t,placeholder:n,animate:s});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?Xa.placeholder:null}};function bf(a){var r=f.useRef(null),t=L(function(){r.current&&(clearTimeout(r.current),r.current=null)},[]),n=a.animate,s=a.onTransitionEnd,i=a.onClose,l=a.contextId,o=f.useState(a.animate==="open"),c=o[0],p=o[1];f.useEffect(function(){return c?n!=="open"?(t(),p(!1),Xt):r.current?Xt:(r.current=setTimeout(function(){r.current=null,p(!1)}),t):Xt},[n,c,t]);var d=L(function(m){m.propertyName==="height"&&(s(),n==="close"&&i())},[n,i,s]),u=vf({isAnimatingOpenOnMount:c,animate:a.animate,placeholder:a.placeholder});return $.createElement(a.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":l,onTransitionEnd:d,ref:a.innerRef})}var yf=$.memo(bf),ms=$.createContext(null),jf=function(a){kl(r,a);function r(){for(var n,s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=a.call.apply(a,[this].concat(i))||this,n.state={isVisible:!!n.props.on,data:n.props.on,animate:n.props.shouldAnimate&&n.props.on?"open":"none"},n.onClose=function(){n.state.animate==="close"&&n.setState({isVisible:!1})},n}r.getDerivedStateFromProps=function(s,i){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:i.isVisible?{isVisible:!0,data:i.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var t=r.prototype;return t.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},r}($.PureComponent),Si={dragging:5e3,dropAnimating:4500},wf=function(r,t){return t?Xa.drop(t.duration):r?Xa.snap:Xa.fluid},Nf=function(r,t){return r?t?sr.opacity.drop:sr.opacity.combining:null},kf=function(r){return r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP"};function Cf(a){var r=a.dimension,t=r.client,n=a.offset,s=a.combineWith,i=a.dropping,l=!!s,o=kf(a),c=!!i,p=c?Cn.drop(n,l):Cn.moveTo(n),d={position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:wf(o,i),transform:p,opacity:Nf(l,c),zIndex:c?Si.dropAnimating:Si.dragging,pointerEvents:"none"};return d}function Df(a){return{transform:Cn.moveTo(a.offset),transition:a.shouldAnimateDisplacement?null:"none"}}function Sf(a){return a.type==="DRAGGING"?Cf(a):Df(a)}function Af(a,r,t){t===void 0&&(t=oe);var n=window.getComputedStyle(r),s=r.getBoundingClientRect(),i=Vl(s,n),l=_r(i,t),o={client:i,tagName:r.tagName.toLowerCase(),display:n.display},c={x:i.marginBox.width,y:i.marginBox.height},p={descriptor:a,placeholder:o,displaceBy:c,client:i,page:l};return p}function Ef(a){var r=us("draggable"),t=a.descriptor,n=a.registry,s=a.getDraggableRef,i=a.canDragInteractiveElements,l=a.shouldRespectForcePress,o=a.isEnabled,c=W(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}},[i,o,l]),p=L(function(x){var g=s();return g||A(),Af(t,g,x)},[t,s]),d=W(function(){return{uniqueId:r,descriptor:t,options:c,getDimension:p}},[t,p,c,r]),u=f.useRef(d),m=f.useRef(!0);Ne(function(){return n.draggable.register(u.current),function(){return n.draggable.unregister(u.current)}},[n.draggable]),Ne(function(){if(m.current){m.current=!1;return}var x=u.current;u.current=d,n.draggable.update(d,x)},[d,n.draggable])}function If(a){a.preventDefault()}function Mf(a){var r=f.useRef(null),t=L(function(O){r.current=O},[]),n=L(function(){return r.current},[]),s=Zr(kt),i=s.contextId,l=s.dragHandleUsageInstructionsId,o=s.registry,c=Zr(ms),p=c.type,d=c.droppableId,u=W(function(){return{id:a.draggableId,index:a.index,type:p,droppableId:d}},[a.draggableId,a.index,p,d]),m=a.children,x=a.draggableId,g=a.isEnabled,h=a.shouldRespectForcePress,v=a.canDragInteractiveElements,b=a.isClone,j=a.mapped,N=a.dropAnimationFinished;if(!b){var y=W(function(){return{descriptor:u,registry:o,getDraggableRef:n,canDragInteractiveElements:v,shouldRespectForcePress:h,isEnabled:g}},[u,o,n,v,h,g]);Ef(y)}var k=W(function(){return g?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":x,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:If}:null},[i,l,x,g]),w=L(function(O){j.type==="DRAGGING"&&j.dropping&&O.propertyName==="transform"&&N()},[N,j]),S=W(function(){var O=Sf(j),U=j.type==="DRAGGING"&&j.dropping?w:null,z={innerRef:t,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":x,style:O,onTransitionEnd:U},dragHandleProps:k};return z},[i,k,x,j,w,t]),P=W(function(){return{draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}},[u.droppableId,u.id,u.index,u.type]);return m(S,j.snapshot,P)}var Bo=function(a,r){return a===r},Go=function(a){var r=a.combine,t=a.destination;return t?t.droppableId:r?r.droppableId:null},Pf=function(r){return r.combine?r.combine.draggableId:null},Tf=function(r){return r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null};function Of(){var a=le(function(s,i){return{x:s,y:i}}),r=le(function(s,i,l,o,c){return{isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:l,combineWith:o,combineTargetFor:null}}),t=le(function(s,i,l,o,c,p,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:i,offset:s,dimension:l,forceShouldAnimate:d,snapshot:r(i,o,c,p,null)}}}),n=function(i,l){if(i.isDragging){if(i.critical.draggable.id!==l.draggableId)return null;var o=i.current.client.offset,c=i.dimensions.draggables[l.draggableId],p=we(i.impact),d=Tf(i.impact),u=i.forceShouldAnimate;return t(a(o.x,o.y),i.movementMode,c,l.isClone,p,d,u)}if(i.phase==="DROP_ANIMATING"){var m=i.completed;if(m.result.draggableId!==l.draggableId)return null;var x=l.isClone,g=i.dimensions.draggables[l.draggableId],h=m.result,v=h.mode,b=Go(h),j=Pf(h),N=i.dropDuration,y={duration:N,curve:ns.drop,moveTo:i.newHomeClientOffset,opacity:j?sr.opacity.drop:null,scale:j?sr.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:g,dropping:y,draggingOver:b,combineWith:j,mode:v,forceShouldAnimate:null,snapshot:r(v,x,b,j,y)}}}return null};return n}function zo(a){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:a,combineWith:null}}var Lf={mapped:{type:"SECONDARY",offset:oe,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:zo(null)}};function Rf(){var a=le(function(l,o){return{x:l,y:o}}),r=le(zo),t=le(function(l,o,c){return o===void 0&&(o=null),{mapped:{type:"SECONDARY",offset:l,combineTargetFor:o,shouldAnimateDisplacement:c,snapshot:r(o)}}}),n=function(o){return o?t(oe,o,!0):null},s=function(o,c,p,d){var u=p.displaced.visible[o],m=!!(d.inVirtualList&&d.effected[o]),x=yt(p),g=x&&x.draggableId===o?c:null;if(!u){if(!m)return n(g);if(p.displaced.invisible[o])return null;var h=Ga(d.displacedBy.point),v=a(h.x,h.y);return t(v,g,!0)}if(m)return n(g);var b=p.displacedBy.point,j=a(b.x,b.y);return t(j,g,u.shouldAnimate)},i=function(o,c){if(o.isDragging)return o.critical.draggable.id===c.draggableId?null:s(c.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){var p=o.completed;return p.result.draggableId===c.draggableId?null:s(c.draggableId,p.result.draggableId,p.impact,p.afterCritical)}return null};return i}var Ff=function(){var r=Of(),t=Rf(),n=function(i,l){return r(i,l)||t(i,l)||Lf};return n},Bf={dropAnimationFinished:bo},Gf=$l(Ff,Bf,null,{context:ds,pure:!0,areStatePropsEqual:Bo})(Mf);function qo(a){var r=Zr(ms),t=r.isUsingCloneFor;return t===a.draggableId&&!a.isClone?null:$.createElement(Gf,a)}function zf(a){var r=typeof a.isDragDisabled=="boolean"?!a.isDragDisabled:!0,t=!!a.disableInteractiveElementBlocking,n=!!a.shouldRespectForcePress;return $.createElement(qo,R({},a,{isClone:!1,isEnabled:r,canDragInteractiveElements:t,shouldRespectForcePress:n}))}function qf(a){var r=f.useContext(kt);r||A();var t=r.contextId,n=r.isMovementAllowed,s=f.useRef(null),i=f.useRef(null),l=a.children,o=a.droppableId,c=a.type,p=a.mode,d=a.direction,u=a.ignoreContainerClipping,m=a.isDropDisabled,x=a.isCombineEnabled,g=a.snapshot,h=a.useClone,v=a.updateViewportMaxScroll,b=a.getContainerForClone,j=L(function(){return s.current},[]),N=L(function(z){s.current=z},[]);L(function(){return i.current},[]);var y=L(function(z){i.current=z},[]),k=L(function(){n()&&v({maxScroll:ko()})},[n,v]);hf({droppableId:o,type:c,mode:p,direction:d,isDropDisabled:m,isCombineEnabled:x,ignoreContainerClipping:u,getDroppableRef:j});var w=$.createElement(jf,{on:a.placeholder,shouldAnimate:a.shouldAnimatePlaceholder},function(z){var re=z.onClose,Z=z.data,G=z.animate;return $.createElement(yf,{placeholder:Z,onClose:re,innerRef:y,animate:G,contextId:t,onTransitionEnd:k})}),S=W(function(){return{innerRef:N,placeholder:w,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":t}}},[t,o,w,N]),P=h?h.dragging.draggableId:null,O=W(function(){return{droppableId:o,type:c,isUsingCloneFor:P}},[o,P,c]);function U(){if(!h)return null;var z=h.dragging,re=h.render,Z=$.createElement(qo,{draggableId:z.draggableId,index:z.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(G,V){return re(G,V,z)});return Dc.createPortal(Z,b())}return $.createElement(ms.Provider,{value:O},l(S,g),U())}var Zt=function(r,t){return r===t.droppable.type},Ai=function(r,t){return t.draggables[r.draggable.id]},$f=function(){var r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=R({},r,{shouldAnimatePlaceholder:!1}),n=le(function(l){return{draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}}),s=le(function(l,o,c,p,d,u){var m=d.descriptor.id,x=d.descriptor.droppableId===l;if(x){var g=u?{render:u,dragging:n(d.descriptor)}:null,h={isDraggingOver:c,draggingOverWith:c?m:null,draggingFromThisWith:m,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:g}}if(!o)return t;if(!p)return r;var v={isDraggingOver:c,draggingOverWith:m,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}}),i=function(o,c){var p=c.droppableId,d=c.type,u=!c.isDropDisabled,m=c.renderClone;if(o.isDragging){var x=o.critical;if(!Zt(d,x))return t;var g=Ai(x,o.dimensions),h=we(o.impact)===p;return s(p,u,h,h,g,m)}if(o.phase==="DROP_ANIMATING"){var v=o.completed;if(!Zt(d,v.critical))return t;var b=Ai(v.critical,o.dimensions);return s(p,u,Go(v.result)===p,we(v.impact)===p,b,m)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){var j=o.completed;if(!Zt(d,j.critical))return t;var N=we(j.impact)===p,y=!!(j.impact.at&&j.impact.at.type==="COMBINE"),k=j.critical.droppable.id===p;return N?y?r:t:k?r:t}return t};return i},Uf={updateViewportMaxScroll:Yx};function Vf(){return document.body||A(),document.body}var Hf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Vf},$o=$l($f,Uf,null,{context:ds,pure:!0,areStatePropsEqual:Bo})(qf);$o.defaultProps=Hf;function Wf(){const{register:a,watch:r,control:t,setValue:n}=Ke(),{fields:s,append:i,remove:l,move:o}=lc({control:t,name:"taxes.rates"}),{categories:c}=cr(),p=r("taxes.enabled"),d=r("tips.enabled"),u=({index:g})=>{const h=r(`taxes.rates.${g}.appliesTo`);return e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"S'applique à"}),e.jsxs("select",{value:h,onChange:v=>n(`taxes.rates.${g}.appliesTo`,v.target.value,{shouldDirty:!0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"all",children:"Tous les produits"}),c==null?void 0:c.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]})},m=g=>{g.preventDefault(),g.stopPropagation(),i({id:crypto.randomUUID(),name:"",rate:0,enabled:!0,appliesTo:"all",order:s.length})},x=g=>{if(!g.destination)return;const h=g.source.index,v=g.destination.index,b=[...s],[j]=b.splice(h,1);b.splice(v,0,j),b.forEach((N,y)=>{n(`taxes.rates.${y}.order`,y)}),o(h,v)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rl,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Taxes"})]}),p&&e.jsxs(C,{onClick:m,children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une taxe"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...a("taxes.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:"Activer la gestion des taxes"})]}),p&&e.jsx(e.Fragment,{children:e.jsx(rf,{onDragEnd:x,children:e.jsx($o,{droppableId:"tax-rates",children:g=>e.jsxs("div",{...g.droppableProps,ref:g.innerRef,className:"space-y-4",children:[s.map((h,v)=>e.jsx(zf,{draggableId:h.id,index:v,children:(b,j)=>e.jsx("div",{ref:b.innerRef,...b.draggableProps,className:`
                                bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4 space-y-4
                                ${j.isDragging?"shadow-lg ring-2 ring-blue-500":""}
                              `,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{...b.dragHandleProps,className:"cursor-move hover:text-blue-500 transition-colors",children:e.jsx(Jc,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom de la taxe"}),e.jsx("input",{type:"text",...a(`taxes.rates.${v}.name`),placeholder:"Ex: TVA",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Taux (%)"}),e.jsx("input",{type:"number",step:"0.001",min:"0",max:"100",...a(`taxes.rates.${v}.rate`),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsx(u,{index:v}),e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...a(`taxes.rates.${v}.enabled`),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:"Activer cette taxe"})]}),e.jsx(C,{variant:"ghost",onClick:()=>l(v),className:"text-red-500 hover:text-red-600",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})]})})},h.id)),g.placeholder]})})})})]})]}),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Wc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Pourboires"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...a("tips.enabled"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:"Activer les pourboires"})]}),d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pourcentages suggérés (séparés par des virgules)"}),e.jsx(Nl,{type:"number",value:r("tips.defaultPercentages")||[],onChange:g=>n("tips.defaultPercentages",g,{shouldDirty:!0})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Ces pourcentages seront proposés comme options de pourboire"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Libellé du pourboire"}),e.jsx("input",{type:"text",...a("tips.label"),placeholder:"Ex: Pourboire",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})]})]})]})}function _f({zone:a,onSave:r,onCancel:t,currency:n}){const{register:s,handleSubmit:i,formState:{errors:l}}=Ve({defaultValues:a||{name:"",description:"",price:0,active:!0}}),o=c=>{r(c)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier la zone":"Nouvelle zone de livraison"}),e.jsx("button",{onClick:t,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom de la zone"}),e.jsx("input",{type:"text",...s("name",{required:"Le nom est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Ex: Centre-ville"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{...s("description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Description de la zone (optionnel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Prix de livraison"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:n==="XOF"?"1":"0.01",...s("price",{required:"Le prix est requis",min:{value:0,message:"Le prix doit être positif"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:n})]}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.price.message})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,children:"Annuler"}),e.jsx(C,{type:"button",onClick:i(o),children:a?"Mettre à jour":"Ajouter"})]})]})]})})}function Kf({zones:a,isLoading:r,currency:t,onEdit:n,onDelete:s,itemsPerPage:i=5}){const[l,o]=f.useState(1),c=f.useMemo(()=>{const u=(l-1)*i,m=u+i;return a.slice(u,m)},[a,l,i]),p=Math.ceil(a.length/i),d=u=>{o(u)};return r?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((u,m)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},m))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(_,{mode:"popLayout",children:[c.map(u=>e.jsx(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(un,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg",children:u.name}),u.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-semibold text-lg",children:I(u.price,t)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"button",variant:"ghost",onClick:()=>n(u),className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white",children:e.jsx(va,{className:"w-4 h-4"})}),a.length>1&&e.jsx(C,{type:"button",variant:"ghost",onClick:()=>s(u),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})]})},u.id)),a.length===0&&e.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx(un,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune zone de livraison"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Commencez par ajouter une zone de livraison"})]})]}),p>1&&e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",l," sur ",p]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{type:"button",variant:"secondary",size:"sm",onClick:()=>d(l-1),disabled:l===1,className:"px-2",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex gap-1",children:[...Array(p)].map((u,m)=>{const x=m+1,g=x===l;return e.jsx(C,{type:"button",variant:g?"primary":"secondary",size:"sm",onClick:()=>d(x),className:`w-8 ${g?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 dark:text-gray-300"}`,children:x},x)})}),e.jsx(C,{type:"button",variant:"secondary",size:"sm",onClick:()=>d(l+1),disabled:l===p,className:"px-2",children:e.jsx(Ra,{className:"w-4 h-4"})})]})]})]})}function Qf(){var b,j;const{watch:a,setValue:r,register:t,formState:{errors:n},trigger:s}=Ke(),[i,l]=$.useState(!1),[o,c]=$.useState(null),[p,d]=$.useState({isOpen:!1,zone:null}),u=a("delivery.enabled"),m=a("delivery.zones")||[],x=a("currency");$.useEffect(()=>{t("delivery.zones",{validate:N=>u&&(!N||N.length===0)?"Au moins une zone de livraison est requise lorsque la livraison est activée":!0})},[t,u]);const g=async N=>{r("delivery.enabled",N.target.checked),await s("delivery.zones")},h=N=>{const y=o?m.map(k=>k.id===o.id?{...k,...N}:k):[...m,{...N,id:crypto.randomUUID()}];r("delivery.zones",y,{shouldDirty:!0,shouldValidate:!0}),l(!1),c(null)},v=()=>{if(!p.zone)return;const N=m.filter(y=>{var k;return y.id!==((k=p.zone)==null?void 0:k.id)});r("delivery.zones",N,{shouldDirty:!0,shouldValidate:!0}),d({isOpen:!1,zone:null})};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Za,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Livraison"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",...t("delivery.enabled",{onChange:g}),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("label",{className:"text-sm font-medium",children:"Activer la livraison"})]})]}),u&&e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Zones de Livraison"}),e.jsxs(C,{type:"button",onClick:()=>l(!0),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une zone"]})]}),((b=n.delivery)==null?void 0:b.zones)&&e.jsxs("div",{className:"flex items-center gap-2 p-4 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-lg",children:[e.jsx(dr,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:n.delivery.zones.message})]}),e.jsx(Kf,{zones:m,isLoading:!1,currency:x,onEdit:N=>{c(N),l(!0)},onDelete:N=>{u&&m.length===1||d({isOpen:!0,zone:N})}})]}),i&&e.jsx(_f,{zone:o,onSave:h,onCancel:()=>{l(!1),c(null)},currency:x}),e.jsx(Pa,{isOpen:p.isOpen,title:"Supprimer la zone",message:u&&m.length===1?"Impossible de supprimer la dernière zone de livraison lorsque la livraison est activée.":`Êtes-vous sûr de vouloir supprimer la zone "${(j=p.zone)==null?void 0:j.name}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",onConfirm:v,onCancel:()=>d({isOpen:!1,zone:null})})]})}const Yf=[{id:"general",label:"Général"},{id:"appearance",label:"Apparence"},{id:"business",label:"Entreprise"},{id:"tax",label:"Taxes & Pourboires"},{id:"delivery",label:"Livraison"},{id:"seo",label:"SEO"},{id:"legal",label:"Légal"},{id:"integrations",label:"Intégrations"},{id:"data",label:"Données"}];function Jf(){const{settings:a,updateSettings:r,isLoading:t}=q(),[n,s]=$.useState("general"),i=Ve({defaultValues:a||{}}),{handleSubmit:l,formState:{isSubmitting:o,isDirty:c},reset:p}=i;$.useEffect(()=>{a&&p(a)},[a,p]);const d=async m=>{try{await r(m),E.success("Paramètres mis à jour avec succès"),p(m)}catch(x){console.error("Error saving settings:",x),E.error("Impossible de sauvegarder les paramètres")}},u=()=>{switch(n){case"general":return e.jsx(ip,{});case"appearance":return e.jsx(ap,{});case"business":return e.jsx(np,{});case"seo":return e.jsx(pp,{});case"tax":return e.jsx(Wf,{});case"delivery":return e.jsx(Qf,{});case"legal":return e.jsx(xp,{});case"integrations":return e.jsx(cp,{});case"data":return e.jsx(mp,{});default:return null}};return t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx(oc,{...i,children:e.jsxs(D.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto space-y-8 px-4 py-8",children:[e.jsx(it,{tabs:Yf,activeTab:n,onChange:s}),e.jsxs("form",{onSubmit:l(d),className:"space-y-8",children:[e.jsx("div",{className:"mt-8",children:u()}),n!=="data"&&e.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-gray-700",children:e.jsx("button",{type:"submit",disabled:!c||o,className:`
                  px-6 py-2 rounded-lg font-medium text-white
                  transition-all duration-200
                  ${c&&!o?"bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl":"bg-gray-400 cursor-not-allowed"}
                `,children:o?"Enregistrement...":"Enregistrer les modifications"})})]})]})})}const en=8;function Xf({items:a,onAddToCart:r,searchTerm:t,onSearchChange:n,onToggleCart:s}){const{settings:i}=q(),[l,o]=f.useState(null),[c,p]=f.useState(1),d=Math.ceil(a.length/en),u=(c-1)*en,m=a.slice(u,u+en);return e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",placeholder:"Rechercher produit...",value:t,onChange:x=>n(x.target.value),className:"w-full pl-4 pr-4 py-2 rounded-lg border dark:border-gray-700"})}),e.jsx(C,{variant:"secondary",className:"lg:hidden",onClick:s,children:e.jsx(We,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.jsx(_,{mode:"popLayout",children:m.map(x=>e.jsxs(D.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:()=>o(x),className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx("div",{className:"aspect-video mb-3 rounded-lg overflow-hidden",children:e.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover"})}),e.jsx("h3",{className:"font-medium mb-1",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 line-clamp-2",children:x.description}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:I(x.price,i==null?void 0:i.currency)})})]},x.id))})})}),d>1&&e.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:c,totalPages:d,onPageChange:p})}),l&&e.jsx(cc,{item:l,onClose:()=>o(null),onAddToCart:r})]})}function Zf(){const{settings:a}=q(),{cart:r,updateQuantity:t,removeFromCart:n}=at();return r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(We,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Le panier est vide"})]}):e.jsx(_,{mode:"popLayout",children:r.map(s=>{var i;return e.jsxs(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex items-start gap-4 py-4 border-b dark:border-gray-700 last:border-0",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.name}),((i=s==null?void 0:s.selectedVariants)==null?void 0:i.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.selectedVariants.map((l,o)=>e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs
                             bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300`,children:l.split(": ")[1]},o))}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:I(s.price,a==null?void 0:a.currency)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>t(s.id,s.quantity-1),className:"h-8 w-8 p-0 rounded-full",children:e.jsx(Wi,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:s.quantity}),e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>t(s.id,s.quantity+1),className:"h-8 w-8 p-0 rounded-full",disabled:!!(s.stockQuantity&&s.quantity>=s.stockQuantity),children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>n(s.id),className:"h-8 w-8 p-0 rounded-full ml-2",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]},s.id)})})}function e0({customerInfo:a,onChange:r}){return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom"}),e.jsx("input",{type:"text",value:a.name||"",onChange:t=>r({...a,name:t.target.value}),placeholder:"Nom du client",className:"w-full rounded-lg border dark:border-gray-700 p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Téléphone"}),e.jsx("input",{type:"tel",value:a.phone||"",onChange:t=>r({...a,phone:t.target.value}),placeholder:"Numéro de téléphone",className:"w-full rounded-lg border dark:border-gray-700 p-2"})]})]})})}function a0({items:a}){var p,d;const{settings:r}=q(),{subtotal:t,taxes:n,tip:s,total:i,setTipPercentage:l,cart:o}=at(),c=o.reduce((u,m)=>u+m.quantity,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rl,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:"Résumé de la Commande"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[c," ",c>1?"articles":"article"]}),e.jsx("span",{className:"font-medium",children:I(i,r==null?void 0:r.currency)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Sous-total"}),e.jsx("span",{children:I(t,r==null?void 0:r.currency)})]}),n.map(u=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:[u.name," (",$i(u.rate),")"]}),e.jsx("span",{children:I(u.amount,r==null?void 0:r.currency)})]},u.id)),(r==null?void 0:r.tips.enabled)&&e.jsxs("div",{className:"pt-2 border-t dark:border-gray-700",children:[e.jsx("span",{className:"mb-2 block",children:r.tips.label}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[(d=(p=r==null?void 0:r.tips)==null?void 0:p.defaultPercentages.map(Number))==null?void 0:d.map(u=>e.jsxs("button",{onClick:()=>l(u),className:`
                                    px-3 py-1 text-sm rounded-full transition-colors
                                    ${(s==null?void 0:s.percentage)===u?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}
                                  `,children:[u,"%"]},u)),e.jsx("button",{onClick:()=>l(null),className:"px-3 py-1 text-sm rounded-full bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:"Aucun"})]}),s&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Total ",r.tips.label," (",s.percentage,"%)"]}),e.jsx("span",{children:I(s.amount,r==null?void 0:r.currency)})]})]})]})]})}function r0({total:a,amountPaid:r,onAmountPaidChange:t}){const{settings:n}=q(),s=r-a;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yi,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"font-medium",children:"Détails du Paiement"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Montant Reçu"}),e.jsx("input",{type:"number",onChange:i=>t(Math.abs(parseFloat(i.target.value))||0),className:"w-full rounded-lg border dark:border-gray-700 p-2",min:0,step:dc(n==null?void 0:n.currency),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Monnaie"}),e.jsx("div",{className:`w-full rounded-lg p-2 font-mono text-lg ${s>=0?"!text-green-600":"!text-red-600"}`,children:e.jsx("span",{className:`${s>=0?"text-green-600":"text-red-600"}`,children:I(s<0?0:s,n==null?void 0:n.currency)})})]})]})]})}function Ei({onClose:a,cart:r,tableNumber:t,setTableNumber:n,customerInfo:s,setCustomerInfo:i,amountPaid:l,setAmountPaid:o,onQuickAmount:c,onCheckout:p,isSubmitting:d}){const[u,m]=f.useState(""),[x,g]=f.useState(!1),{settings:h}=q(),{total:v}=at(),b=async()=>{try{if(!l){m("Montant reçu obligatoire");return}if(l<v){m("Montant reçu doit etre supérieur ou égal au total");return}await p(),E.success("Commande créée avec succès")}catch(j){console.error("Error creating order:",j),j instanceof Error?E.error(j.message):E.error("Échec de la création de la commande")}};return e.jsxs("div",{className:"h-full flex flex-col",children:[a&&e.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Panier"}),e.jsx(C,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Numéro de Table (Optionnel)"}),e.jsx("input",{type:"text",value:t,onChange:j=>n(j.target.value),className:"w-full rounded-lg border dark:border-gray-700 p-2",placeholder:"Ex: 42"})]}),e.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:e.jsx(e0,{customerInfo:s,onChange:i})}),e.jsx("div",{className:"px-4",children:e.jsx(Zf,{})})]}),r.length>0&&e.jsxs("div",{className:"dark:border-gray-700 p-4 space-y-4 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold border-t dark:border-gray-700 pt-4",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:I(v,h==null?void 0:h.currency)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>g(!x),className:"w-full flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"Taxes et pourboires"}),x?e.jsx(Vc,{className:"w-4 h-4"}):e.jsx(Uc,{className:"w-4 h-4"})]}),x&&e.jsx(a0,{items:r,total:v})]}),e.jsx(r0,{total:v,amountPaid:l,onAmountPaidChange:o,onQuickAmount:c}),u&&e.jsx("p",{className:"text-red-500 dark:text-red-400",children:u}),e.jsx(C,{onClick:b,disabled:r.length===0||d,className:`w-full py-3 text-base font-medium bg-blue-600 hover:bg-blue-700 text-white rounded-lg
                     transition-colors duration-200 shadow-sm hover:shadow-md
                     disabled:bg-gray-400 disabled:cursor-not-allowed`,children:d?"Traitement...":"Valider la commande"})]})]})}function t0({order:a,onClose:r}){const{settings:t}=q(),[n,s]=f.useState(!1),[i,l]=f.useState(!1),o=async()=>{try{s(!0),(await mn(a,t)).save(`commande-${a.id.slice(0,8)}.pdf`),E.success("Ticket téléchargé")}catch(p){console.error("Error downloading receipt:",p),E.error("Erreur lors du téléchargement")}finally{s(!1)}},c=async()=>{try{l(!0);const p=await mn(a,t);p.autoPrint(),window.open(p.output("bloburl")),E.success("Ticket envoyé à l'impression")}catch(p){console.error("Error printing receipt:",p),E.error("Erreur lors de l'impression")}finally{l(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 max-w-md w-full",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-3 rounded-full",children:e.jsx(Pn,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Commande confirmée !"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["La commande #",a.id.slice(0,8)," a été enregistrée avec succès."]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(C,{onClick:c,disabled:i,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(al,{className:"w-4 h-4 mr-1"}),i?"Impression...":"Imprimer le ticket"]}),e.jsxs(C,{variant:"secondary",onClick:o,disabled:n,className:"w-full flex items-center justify-center gap-2",children:[e.jsx(ga,{className:"w-4 h-4 mr-1"}),n?"Téléchargement...":"Télécharger le ticket"]}),e.jsx(C,{variant:"ghost",onClick:r,className:"w-full",children:"Fermer"})]})]})})}function n0(){const{items:a}=uc(),{settings:r}=q(),{staffData:t}=ur(),[n,s]=f.useState("all"),[i,l]=f.useState(""),[o,c]=f.useState(""),[p,d]=f.useState(0),[u,m]=f.useState({}),[x,g]=f.useState(!1),[h,v]=f.useState(!1),[b,j]=f.useState(null),{total:N,addToCart:y,updateQuantity:k,cart:w,clearCart:S,taxTotal:P,taxes:O,tip:U,subtotal:z}=at(),re=a.filter(V=>{const te=V.name.toLowerCase().includes(i.toLowerCase()),me=n==="all"||V.categoryId===n;return te&&me}),Z=V=>{d(V)},G=async()=>{if(w.length!==0)try{g(!0);const V={items:w,status:"pending",total:N,customerName:u.name||`Table ${o}`,customerEmail:u.email||null,customerPhone:u.phone||"",diningOption:"dine-in",tableNumber:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),paymentMethod:{name:"Paiement à la caisse",id:"Paiement à la caisse",active:!0,createdAt:new Date().toDateString(),updatedAt:new Date().toDateString()},subtotal:z,taxes:O,taxTotal:P,amountPaid:p,change:p-N,tip:U,servedBy:(t==null?void 0:t.name)||"Le gérant"},te=await on.createOrder({...V,taxRates:(r==null?void 0:r.taxes.rates)||[]}),me=await on.getOrderById(te);me&&(j(me),S(),c(""),d(0),m({}),v(!1))}catch(V){console.error("Error creating order:",V),E.error("Erreur lors de la création de la commande")}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(pc,{activeCategory:n,onCategoryChange:s}),e.jsx(Xf,{items:re,onAddToCart:y,searchTerm:i,onSearchChange:l,onToggleCart:()=>v(!0)})]}),e.jsx(_,{children:h&&e.jsx(D.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},className:"fixed inset-y-0 right-0 w-full sm:w-96 bg-white dark:bg-gray-800 shadow-xl z-50 lg:hidden",children:e.jsx(Ei,{onClose:()=>v(!1),cart:w,tableNumber:o,setTableNumber:c,customerInfo:u,setCustomerInfo:m,amountPaid:p,setAmountPaid:d,total:N,onUpdateQuantity:k,onQuickAmount:Z,onCheckout:G,isSubmitting:x})})}),e.jsx("div",{className:"hidden lg:block w-96 bg-white dark:bg-gray-800 rounded-lg p-6 flex flex-col",children:e.jsx(Ei,{cart:w,tableNumber:o,setTableNumber:c,customerInfo:u,setCustomerInfo:m,amountPaid:p,setAmountPaid:d,total:N,onUpdateQuantity:k,onQuickAmount:Z,onCheckout:G,isSubmitting:x})})]}),b&&e.jsx(t0,{order:b,onClose:()=>j(null)})]})}function s0(a){a=a.trim().replace(/\/+$/,""),!a.startsWith("http://")&&!a.startsWith("https://")&&(a="https://"+a);try{const r=new URL(a);return/^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,}$/.test(r.hostname)?{isValid:!0,formattedUrl:a}:{isValid:!1,formattedUrl:a}}catch{return{isValid:!1,formattedUrl:a}}}function i0(){const[a,r]=f.useState(""),[t,n]=f.useState(null),[s,i]=f.useState(!1),[l,o]=f.useState(!1),[c,p]=f.useState(null),d=g=>{const h=g.target.value;r(h),p(null)},u=f.useCallback(async()=>{if(!a){E.error("Veuillez saisir une adresse URL");return}const{isValid:g,formattedUrl:h}=s0(a);if(!g){p("Format d'URL invalide"),E.error("Format d'URL invalide");return}try{i(!0),p(null);const v=await mc.toDataURL(h,{width:512,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"});n(v),r(h),E.success("QR Code généré avec succès")}catch(v){console.error("Erreur lors de la génération du QR code:",v),E.error("Échec de la génération du QR code")}finally{i(!1)}},[a]),m=async()=>{try{await navigator.clipboard.writeText(a),o(!0),E.success("URL copiée"),setTimeout(()=>o(!1),2e3)}catch(g){console.error("Erreur lors de la copie:",g),E.error("Échec de la copie")}},x=()=>{if(!t)return;const g=document.createElement("a");g.href=t,g.download=`qr-code-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g),E.success("QR Code téléchargé")};return e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center p-4 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-3xl space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs(D.div,{initial:{scale:0},animate:{scale:1},className:"relative inline-flex h-20 w-20 items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 dark:bg-blue-500/20 rounded-3xl rotate-6"}),e.jsx("div",{className:"absolute inset-0 bg-indigo-500/10 dark:bg-indigo-500/20 rounded-3xl -rotate-6"}),e.jsx("div",{className:"relative bg-gradient-to-br from-blue-500 to-indigo-600 p-4 rounded-2xl shadow-lg",children:e.jsx(Br,{className:"h-8 w-8 text-white"})})]}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:"Générateur de QR Code"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto text-lg",children:"Générez facilement des QR codes pour vos liens"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-xl",children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"URL à convertir"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(xc,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:a,onChange:d,placeholder:"google.com ou https://google.com",className:`
                    block w-full rounded-xl border pl-10 pr-12 py-3
                    transition-colors
                    ${c?"border-red-300 dark:border-red-500 bg-red-50 dark:bg-red-900/10":"border-gray-200 dark:border-gray-600 dark:bg-gray-700/50"}
                    focus:outline-none focus:ring-2
                    ${c?"focus:ring-red-500 focus:border-red-500":"focus:ring-blue-500 focus:border-blue-500"}
                  `}),e.jsx(_,{children:a&&e.jsx(D.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:m,className:"absolute inset-y-0 right-0 flex items-center pr-3",title:l?"Copié!":"Copier",children:l?e.jsx(Pn,{className:"h-5 w-5 text-green-500"}):e.jsx(Kc,{className:"h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors"})})})]}),e.jsxs(C,{onClick:u,disabled:!a||s,className:`
                  relative inline-flex items-center justify-center px-6 py-3 
                  text-sm font-medium text-white
                  bg-gradient-to-r from-blue-500 to-indigo-600 
                  hover:from-blue-600 hover:to-indigo-700 
                  rounded-xl shadow-lg hover:shadow-xl 
                  transition-all duration-200 min-w-[140px]
                  disabled:opacity-50 disabled:cursor-not-allowed 
                  transform hover:-translate-y-0.5 active:scale-95
                  [&>*]:text-white [&>span]:text-white
                  disabled:from-gray-400 disabled:to-gray-500
                `,children:[e.jsx(bs,{className:`w-4 h-4 mr-2 text-white ${s?"animate-spin":""}`}),e.jsx("span",{children:s?"Génération...":"Générer"})]})]}),c&&e.jsxs(D.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center gap-1",children:[e.jsx(dr,{className:"h-4 w-4"}),c]})]}),e.jsx(_,{mode:"wait",children:t?e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-6 border-t dark:border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl opacity-20 group-hover:opacity-30 blur transition-opacity"}),e.jsx("div",{className:"relative bg-white rounded-xl p-6 shadow-lg",children:e.jsx("img",{src:t,alt:"QR Code",className:"w-64 h-64"})})]}),e.jsxs(C,{onClick:x,className:`px-6 py-3 bg-gray-900 dark:bg-gray-700 text-white rounded-xl
                             hover:bg-gray-800 dark:hover:bg-gray-600 shadow-lg hover:shadow-xl
                             transition-all duration-200 transform hover:-translate-y-0.5
                             active:scale-95 group flex items-center`,children:[e.jsx(ga,{className:"w-4 h-4 mr-2 transition-transform group-hover:scale-110"}),e.jsx("span",{children:"Télécharger le QR Code"})]})]})},"qr-code"):e.jsx(D.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-12 border-t dark:border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400 dark:text-gray-500",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-700/50 rounded-xl blur-xl"}),e.jsx(Br,{className:"relative w-16 h-16 mb-4"})]}),e.jsx("p",{className:"text-sm mt-4",children:"Le QR code s'affichera ici"})]})},"placeholder")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(D.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20
                       rounded-2xl p-6 backdrop-blur-xl border border-blue-100/50 dark:border-blue-800/50`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/10 dark:bg-blue-500/20 rounded-lg",children:e.jsx(gc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Conseils d'utilisation"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"Utilisez des URLs courtes pour de meilleurs résultats"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"Testez le QR code avant de l'imprimer"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"Évitez les caractères spéciaux dans l'URL"]})]})]}),e.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50
                       rounded-2xl p-6 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-gray-500/10 dark:bg-gray-500/20 rounded-lg",children:e.jsx(bs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Applications"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),"Menu digital pour votre restaurant"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),"Cartes de visite numériques"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-gray-400"}),"Promotions et événements spéciaux"]})]})]})]}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center text-sm text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Formats d'URL acceptés : google.com, www.google.com, https://google.com"})})]})})}const an=9;function l0({items:a,isLoading:r,onEdit:t,onDelete:n}){const{settings:s}=q(),[i,l]=f.useState(1),o=Math.ceil(a.length/an),c=(i-1)*an,p=a.slice(c,c+an);return r?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((d,u)=>e.jsx("div",{className:"h-16 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},u))}):a.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-4 bg-gray-100 dark:bg-gray-700 rounded-full",children:e.jsx(nd,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun produit en stock"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Il n'y a actuellement aucun produit dans votre inventaire. Commencez par en ajouter un."})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Produit"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Catégorie"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Quantité"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Prix Unitaire"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Date d'expiration"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(d=>{const u=Number(d.quantity)<=Number(d.minQuantity),m=typeof d.price=="string"?parseFloat(d.price):d.price;return e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[u&&e.jsx(aa,{className:"h-5 w-5 text-amber-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.name}),d.description&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.description})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"rounded-full bg-gray-100 px-3 py-1 text-sm dark:bg-gray-800",children:d.category})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-medium ${u?"text-red-500":""}`,children:[pa(Number(Number(d.quantity).toFixed(2)))," ",d.unit]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:I(m,s==null?void 0:s.currency)}),e.jsx("td",{className:"px-4 py-3",children:d.expiryDate?J(d.expiryDate):"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>t(d),children:e.jsx(va,{className:"h-4 w-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:()=>n(d.id),children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},d.id)})})]})}),o>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:i,totalPages:o,onPageChange:l})})]})}function o0({item:a,onSave:r,onCancel:t}){var c;const{settings:n}=q(),{register:s,handleSubmit:i,formState:{errors:l,isSubmitting:o}}=Ve({defaultValues:a?{name:a.name,description:a.description||"",quantity:a.quantity,unit:a.unit,minQuantity:a.minQuantity,category:a.category,price:a.price,supplier:a.supplier||"",expiryDate:a.expiryDate||""}:{name:"",description:"",quantity:0,unit:"unités",minQuantity:0,category:"ingredients",price:0,supplier:"",expiryDate:""}});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col w-full max-w-2xl max-h-[90vh] bg-white dark:bg-gray-800 rounded-xl shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier le produit":"Nouveau produit"}),e.jsx("button",{onClick:t,className:"hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-full transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("form",{onSubmit:i(r),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom"}),e.jsx("input",{type:"text",...s("name",{required:"Le nom est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Catégorie"}),e.jsxs("select",{...s("category"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"ingredients",children:"Ingrédients"}),e.jsx("option",{value:"boissons",children:"Boissons"}),e.jsx("option",{value:"fournitures",children:"Fournitures"}),e.jsx("option",{value:"emballages",children:"Emballages"}),e.jsx("option",{value:"nettoyage",children:"Produits d'entretien"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantité"}),e.jsx("input",{type:"number",...s("quantity",{required:"La quantité est requise",min:{value:0,message:"La quantité doit être positive"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),l.quantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.quantity.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Unité"}),e.jsxs("select",{...s("unit"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"unités",children:"Unités"}),e.jsx("option",{value:"kg",children:"Kilogrammes"}),e.jsx("option",{value:"g",children:"Grammes"}),e.jsx("option",{value:"l",children:"Litres"}),e.jsx("option",{value:"ml",children:"Millilitres"}),e.jsx("option",{value:"cartons",children:"Cartons"}),e.jsx("option",{value:"packs",children:"Packs"}),e.jsx("option",{value:"lb",children:"Lb"}),e.jsx("option",{value:"oz",children:"Oz"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantité minimale"}),e.jsx("input",{type:"number",...s("minQuantity",{required:"La quantité minimale est requise",min:{value:0,message:"La quantité minimale doit être positive"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),l.minQuantity&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.minQuantity.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Prix unitaire",n!=null&&n.currency?` (${(c=hc(n==null?void 0:n.currency))==null?void 0:c.display})`:""]}),e.jsx("input",{type:"number",step:(n==null?void 0:n.currency)==="XOF"?"1":"0.01",...s("price",{required:"Le prix est requis",min:{value:0,message:"Le prix doit être positif"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.price.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fournisseur"}),e.jsx("input",{type:"text",...s("supplier"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date d'expiration"}),e.jsx("input",{lang:"fr",type:"date",...s("expiryDate"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{...s("description"),rows:3,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]})}),e.jsx("div",{className:"p-6 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,children:"Annuler"}),e.jsx(C,{onClick:i(r),disabled:o,children:o?"Enregistrement...":a?"Mettre à jour":"Ajouter"})]})})]})})}function c0({items:a}){const r=a.filter(s=>Number(s.quantity)<=Number(s.minQuantity)),t=a.filter(s=>{if(!s.expiryDate)return!1;const i=new Date(s.expiryDate),l=new Date,o=Math.ceil((i.getTime()-l.getTime())/(1e3*60*60*24));return o<=7&&o>0}),n=a.filter(s=>s.expiryDate?new Date(s.expiryDate)<new Date:!1);return!r.length&&!t.length&&!n.length?null:e.jsxs("div",{className:"space-y-4",children:[r.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(aa,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-400",children:"Produits en stock faible"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:r.map(s=>e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:[s.name,": ",s.quantity," ",s.unit," (Min:"," ",s.minQuantity,")"]},s.id))})]}),n.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-900 dark:bg-red-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dr,{className:"h-5 w-5 text-red-500"}),e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-400",children:"Produits expirés"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:n.map(s=>e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:[s.name," - Expiré le"," ",new Date(s.expiryDate).toLocaleDateString()]},s.id))})]}),t.length>0&&e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"rounded-lg border border-blue-200 bg-blue-50 p-4 dark:border-blue-900 dark:bg-blue-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(aa,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-400",children:"Produits bientôt expirés"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:t.map(s=>e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[s.name," - Expire le"," ",new Date(s.expiryDate).toLocaleDateString()]},s.id))})]})]})}function d0({updates:a=[],isLoading:r,currentPage:t,totalPages:n,onPageChange:s,dateRange:i}){const{settings:l}=q(),[o,c]=f.useState(!1);if(r)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"p-6 space-y-4",children:[...Array(3)].map((d,u)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-100 dark:bg-gray-700/50 rounded"})]},u))})});if(!a||a.length===0)return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8 text-center",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun historique"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Les mises à jour de stock apparaîtront ici"})]});const p=async()=>{try{c(!0),await xn.generateHistoryPDF(i==null?void 0:i.startDate,i==null?void 0:i.endDate),E.success("Historique exporté avec succès")}catch(d){console.error("Error exporting history:",d),E.error("Erreur lors de l'export")}finally{c(!1)}};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Historique des Stocks"}),e.jsxs(C,{onClick:p,disabled:o,children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),o?"Téléchargement en cours...":"Exporter en PDF"]})]}),e.jsx("div",{className:"divide-y dark:divide-gray-700",children:e.jsx(_,{mode:"wait",children:a.length>0?a.map((d,u)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:u*.05},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx(Ln,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:d.itemName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:d.reason}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"w-4 h-4"}),J(d.date)]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-red-500 dark:text-red-400 font-medium",children:["-",Number(d.quantity).toFixed(2)," unités"]}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"font-medium",children:I(d.cost,l==null?void 0:l.currency)})]})]})]})})},d.id)):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun historique disponible"})]})})}),n>1&&e.jsx("div",{className:"p-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:t,totalPages:n,onPageChange:s})})]})}function u0({items:a,onSubmit:r,onCancel:t,isSubmitting:n}){const{settings:s}=q(),[i,l]=f.useState(""),{register:o,handleSubmit:c,watch:p,formState:{errors:d}}=Ve({defaultValues:{updates:a.map(g=>({itemId:g.id,quantity:0,reason:""}))}}),u=p("updates"),m=a.filter(g=>{var h;return g.name.toLowerCase().includes(i.toLowerCase())||((h=g.description)==null?void 0:h.toLowerCase().includes(i.toLowerCase()))}),x=g=>{const h=g.updates.filter(v=>v.quantity>0);h.length!==0&&r(h)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 sm:p-6 border-b dark:border-gray-700 gap-4 sm:gap-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-2",children:[e.jsxs("h2",{className:"text-lg sm:text-xl font-semibold flex items-center gap-2 truncate",children:[e.jsx(Ue,{className:"w-5 h-5 flex-shrink-0 text-blue-500"}),e.jsx("span",{className:"truncate",children:"Mise à jour des stocks"})]}),e.jsx("button",{onClick:t,disabled:n,className:"sm:hidden p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:"Enregistrez les produits utilisés aujourd'hui"})]}),e.jsx("button",{onClick:t,disabled:n,className:"hidden sm:block p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 sm:p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:i,onChange:g=>l(g.target.value),placeholder:"Rechercher un produit...",className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700"})]})}),e.jsxs("form",{onSubmit:c(x),className:"flex flex-col flex-1 min-h-0",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[m.map((g,h)=>{var b,j,N,y,k,w;const v=a.findIndex(S=>S.id===g.id);return v===-1?null:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 rounded-lg p-4 space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:g.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Stock actuel: ",g.quantity," ",g.unit]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Prix unitaire:"," ",I(g.price,s==null?void 0:s.currency)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantité utilisée"}),e.jsx("input",{type:"number",...o(`updates.${v}.quantity`,{min:{value:0,message:"La quantité doit être positive"},max:{value:g.quantity,message:"Quantité supérieure au stock disponible"}}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",disabled:n}),((j=(b=d.updates)==null?void 0:b[v])==null?void 0:j.quantity)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:(N=d.updates[v].quantity)==null?void 0:N.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Raison"}),e.jsx("input",{type:"text",...o(`updates.${v}.reason`,{validate:S=>u[v].quantity>0&&!S?"La raison est requise":!0}),placeholder:"Ex: Service du soir",className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",disabled:n}),((k=(y=d.updates)==null?void 0:y[v])==null?void 0:k.reason)&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:(w=d.updates[v].reason)==null?void 0:w.message})]})]})]},g.id)}),m.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Aucun produit trouvé"})]})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4 sm:p-6 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,disabled:n,className:"w-full sm:w-auto order-2 sm:order-1",children:"Annuler"}),e.jsx(C,{type:"submit",disabled:n||!u.some(g=>g.quantity>0),className:"w-full sm:w-auto min-w-0 sm:min-w-[200px] relative order-1 sm:order-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Qa,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx("span",{className:"truncate",children:"Mise à jour en cours..."})]}):"Mettre à jour les stocks"})]})})]})]})})}const p0=[{id:"inventory",label:"Inventaire"},{id:"history",label:"Historique"}];function m0(){const[a,r]=f.useState(""),[t,n]=f.useState("all"),[s,i]=f.useState(!1),[l,o]=f.useState(!1),[c,p]=f.useState(null),[d,u]=f.useState({isOpen:!1}),[m,x]=f.useState(!1),[g,h]=f.useState("inventory"),[v,b]=f.useState(1),[j,N]=f.useState(!1),[y,k]=f.useState({updates:[],totalPages:0}),[w,S]=f.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),{items:P,isLoading:O,addItem:U,updateItem:z,deleteItem:re}=yl();f.useEffect(()=>{g==="history"&&Z()},[g,v,w]);const Z=async()=>{try{N(!0);const{updates:B,totalCount:H}=await xn.getHistory({page:v,pageSize:10,startDate:w.startDate,endDate:w.endDate});k({updates:B,totalPages:Math.ceil(H/10)})}catch(B){console.error("Error loading stock history:",B)}finally{N(!1)}},G=async B=>{try{c?await z(c.id,B):await U(B),i(!1),p(null)}catch(H){console.error("Error saving inventory item:",H)}},V=async()=>{if(d.itemId)try{x(!0),await re(d.itemId)}catch(B){console.error("Error deleting inventory item:",B)}finally{x(!1),u({isOpen:!1})}},te=async B=>{try{for(const H of B){const se=P.find(ee=>ee.id===H.itemId);se&&(await z(H.itemId,{quantity:se.quantity-H.quantity}),await xn.addUpdate({itemId:H.itemId,itemName:se.name,quantity:H.quantity,reason:H.reason,cost:H.quantity*se.price,date:new Date().toISOString(),type:""}))}o(!1),g==="history"&&Z()}catch(H){console.error("Error updating stock:",H)}},me=(B,H)=>{S({startDate:B,endDate:H}),b(1)},fe=P.filter(B=>{var ee;const H=B.name.toLowerCase().includes(a.toLowerCase())||((ee=B.description)==null?void 0:ee.toLowerCase().includes(a.toLowerCase())),se=t==="all"||B.category===t;return H&&se});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion des Stocks"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Gérez votre inventaire et suivez vos stocks"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{onClick:()=>o(!0),children:"Mise à jour des stocks"}),e.jsxs(C,{onClick:()=>{p(null),i(!0)},children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter un Produit"]})]})]}),e.jsx(c0,{items:P}),e.jsx(it,{tabs:p0,activeTab:g,onChange:h}),g!=="inventory"&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($e,{className:"w-5 h-5 text-gray-500"}),e.jsx(ba,{startDate:w.startDate,endDate:w.endDate,onDateChange:me})]}),g==="inventory"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_e,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-500 dark:text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:a,onChange:B=>r(B.target.value),className:"w-full rounded-lg border border-gray-300 px-12 py-3 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:focus:border-blue-400 dark:focus:ring-blue-400"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:t,onChange:B=>n(B.target.value),className:"rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-700 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200 dark:focus:border-blue-400 dark:focus:ring-blue-400",children:[e.jsx("option",{value:"all",children:"Toutes les catégories"}),e.jsx("option",{value:"ingredients",children:"Ingrédients"}),e.jsx("option",{value:"boissons",children:"Boissons"}),e.jsx("option",{value:"fournitures",children:"Fournitures"}),e.jsx("option",{value:"emballages",children:"Emballages"}),e.jsx("option",{value:"nettoyage",children:"Produits d'entretien"})]})})]}),e.jsx(l0,{items:fe,isLoading:O,onEdit:B=>{p(B),i(!0)},onDelete:B=>{const H=P.find(se=>se.id===B);u({isOpen:!0,itemId:B,itemName:H==null?void 0:H.name})}})]}):e.jsx(d0,{updates:y.updates,isLoading:j,currentPage:v,totalPages:y.totalPages,onPageChange:b,dateRange:w}),s&&e.jsx(o0,{item:c,onSave:G,onCancel:()=>{i(!1),p(null)}}),l&&e.jsx(u0,{items:P,onSubmit:te,onCancel:()=>o(!1),isSubmitting:!1}),e.jsx(Pa,{isOpen:d.isOpen,title:"Supprimer le produit",message:`Êtes-vous sûr de vouloir supprimer "${d.itemName}" ? Cette action est irréversible.`,confirmLabel:"Supprimer",onConfirm:V,onCancel:()=>u({isOpen:!1}),isLoading:m})]})}function x0({stats:a,isLoading:r}){const{settings:t}=q();if(r)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,i)=>e.jsx("div",{className:"h-32 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},i))});const n=[{label:"Débit",amount:(a==null?void 0:a.totalDebit)||0,icon:Bc,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{label:"Crédit",amount:(a==null?void 0:a.totalCredit)||0,icon:Oc,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-50 dark:bg-purple-900/20"},{label:"Montant Net",amount:(a==null?void 0:a.netAmount)||0,icon:fa,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-50 dark:bg-green-900/20"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map((s,i)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`w-6 h-6 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s.label}),e.jsx("p",{className:"text-2xl font-semibold",children:I(s.amount,t==null?void 0:t.currency)})]})]})},s.label))})}function Uo({transaction:a,onSave:r,onCancel:t}){const{settings:n}=q(),[s,i]=f.useState(!1),{register:l,handleSubmit:o,watch:c,formState:{errors:p}}=Ve({defaultValues:a||{date:new Date().toISOString().split("T")[0],source:"",description:"",reference:"",debit:0,credit:0}}),d=async u=>{try{i(!0);const m={...u,debit:parseFloat(u.debit)||0,credit:parseFloat(u.credit)||0};await r(m)}catch(m){console.log(m)}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier la Transaction":"Nouvelle Transaction"}),e.jsx("button",{onClick:t,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o(d),className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),e.jsx("input",{type:"date",...l("date",{required:"La date est requise"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),p.date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Source"}),e.jsx("input",{type:"text",...l("source",{required:"La source est requise"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("input",{type:"text",...l("description",{required:"La description est requise"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Débit"}),e.jsx("input",{type:"number",step:(n==null?void 0:n.currency)==="XOF"?"1":"0.01",...l("debit",{min:0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Crédit"}),e.jsx("input",{type:"number",step:(n==null?void 0:n.currency)==="XOF"?"1":"0.01",...l("credit",{min:0}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Référence"}),e.jsx("input",{type:"text",...l("reference"),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,children:"Annuler"}),e.jsx(C,{type:"submit",disabled:s,children:a?"Mettre à jour":"Ajouter"})]})]})]})})}const rn=8,g0={orders:"commandes",inventory:"Inventaire"};function h0({transactions:a,isLoading:r,onUpdate:t,onDelete:n}){const{settings:s}=q(),i=Math.ceil(a.length/rn),[l,o]=f.useState(1),[c,p]=f.useState(null),[d,u]=f.useState({isOpen:!1}),m=a.slice((l-1)*rn,l*rn);return r?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((x,g)=>e.jsx("div",{className:"h-16 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},g))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase text-right",children:"Débit (HT)"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase text-right",children:"Crédit (HT)"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx(_,{mode:"wait",children:m.map((x,g)=>e.jsxs(D.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:g*.05},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:J(x.date)}),e.jsx("td",{className:"px-6 py-4 text-sm",children:g0[x.source]||x.source}),e.jsx("td",{className:"px-6 py-4 text-sm",children:x.description}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:x.reference||`#${x.id}`.slice(0,6)}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:x.debit>0&&e.jsx("span",{className:"text-red-600 dark:text-red-400",children:I(x.debit,s==null?void 0:s.currency)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:x.credit>0&&e.jsx("span",{className:"text-green-600 dark:text-green-400",children:I(x.credit,s==null?void 0:s.currency)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>p(x),className:"text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>u({isOpen:!0,transactionId:x.id}),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]})})]},x.id))}),m.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:"Aucune transaction trouvée"})})]})]})}),i>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:l,totalPages:i,onPageChange:o})})]}),c&&e.jsx(Uo,{transaction:c,onSave:async x=>{await t(c.id,x),p(null)},onCancel:()=>p(null)}),e.jsx(Ba,{isOpen:d.isOpen,onClose:()=>u({isOpen:!1}),onConfirm:async()=>{d.transactionId&&(await n(d.transactionId),u({isOpen:!1}))},title:"Supprimer la transaction",message:"Êtes-vous sûr de vouloir supprimer cette transaction ? Cette action est irréversible."})]})}function f0(){const{settings:a}=q(),[r,t]=f.useState([]),n=i=>{const l=(new Date().getTime()-new Date(i.purchaseDate).getTime())/31536e6,o=i.value*(i.depreciationRate/100)*l;return Math.max(0,i.value-o)},s=r.reduce((i,l)=>i+n(l),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Actifs Immobilisés"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Valeur totale: ",I(s,a==null?void 0:a.currency)]})]}),e.jsxs(C,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter un Actif"]})]}),e.jsx("div",{className:"grid gap-4",children:r.map(i=>e.jsx(D.div,{layout:!0,className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Acheté le ",new Date(i.purchaseDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:I(n(i),a==null?void 0:a.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Valeur initiale: ",I(i.value,a==null?void 0:a.currency)]})]})]})},i.id))})]})}function v0(){const{settings:a}=q(),[r,t]=f.useState([]),n=i=>{const l=(new Date(i.dueDate).getTime()-new Date(i.startDate).getTime())/2592e6,o=i.amount*(i.interestRate/100)*(l/12);return i.amount+o},s=r.reduce((i,l)=>l.status==="active"?i+n(l):i,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Dettes et Emprunts"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total des dettes: ",I(s,a==null?void 0:a.currency)]})]}),e.jsxs(C,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une Dette"]})]}),e.jsx("div",{className:"grid gap-4",children:r.map(i=>e.jsx(D.div,{layout:!0,className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.creditor}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Échéance: ",new Date(i.dueDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:I(n(i),a==null?void 0:a.currency)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Taux: ",i.interestRate,"%"]})]})]})},i.id))})]})}function b0(a){const[r,t]=f.useState([]),[n,s]=f.useState(!0),i=f.useMemo(()=>{const o=r.filter(x=>(typeof x.debit=="number"||typeof x.credit=="number")&&!isNaN(x.debit||0)&&!isNaN(x.credit||0)),c=o.reduce((x,g)=>{const h=typeof g.debit=="number"?Math.abs(g.debit):0;return x+h},0),p=o.reduce((x,g)=>{const h=typeof g.credit=="number"?Math.abs(g.credit):0;return x+h},0),d=Math.round(c*100)/100,u=Math.round(p*100)/100,m=Math.round((u-d)*100)/100;return{totalDebit:d,totalCredit:u,netAmount:m,transactionCount:o.length,invalidTransactions:r.length-o.length}},[r]);f.useEffect(()=>{l()},[a]);const l=async()=>{try{s(!0);const o=await Ka.getTransactions(a),c=o.map(d=>({...d,debit:typeof d.debit=="number"?d.debit:0,credit:typeof d.credit=="number"?d.credit:0}));t(c);const p=o.filter(d=>typeof d.debit!="number"&&d.debit!==null||typeof d.credit!="number"&&d.credit!==null||isNaN(d.debit||0)||isNaN(d.credit||0)).length;p>0&&console.warn(`Found ${p} transactions with invalid debit/credit values`)}catch(o){console.error("Error loading accounting data:",o),E.error("Erreur lors du chargement des données comptables")}finally{s(!1)}};return{transactions:r,stats:i,isLoading:n,refreshData:l}}function Ii({transactions:a,period:r,settings:t}){const n=a.reduce((i,l)=>({debit:i.debit+(l.debit||0),credit:i.credit+(l.credit||0),net:i.net+((l.credit||0)-(l.debit||0))}),{debit:0,credit:0,net:0}),s=(t==null?void 0:t.currency)||"XOF";return e.jsxs("div",{className:"p-12 bg-white text-black font-sans max-w-4xl mx-auto",children:[e.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-blue-800",children:(t==null?void 0:t.name)||"Restaurant"}),e.jsx("h2",{className:"text-xl font-semibold text-black",children:"États Financiers"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx($c,{className:"w-12 h-12 text-black mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-black",style:{color:"#000"},children:["Période: ",J(r.startDate.toISOString())," -"," ",J(r.endDate.toISOString())]})]})]})}),e.jsxs("table",{className:"w-full mb-8 border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-50",children:[e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Date"}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Source"}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Description"}),e.jsx("th",{className:"text-left px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Référence"}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Débit"}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Crédit"}),e.jsx("th",{className:"text-right px-3 py-2 border-b border-gray-200 font-semibold text-black",children:"Solde"})]})}),e.jsx("tbody",{children:a.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:J(i.date)}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:i.source}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:i.description}),e.jsx("td",{className:"px-3 py-2 border-b border-gray-100 text-black",children:i.reference}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-semibold	",children:i.debit>0&&I(i.debit,s)}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-semibold",children:i.credit>0&&I(i.credit,s)}),e.jsx("td",{className:"text-right px-3 py-2 border-b border-gray-100 text-black font-bold",children:I(i.gross,s)})]},i.id))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Ln,{className:"w-6 h-6 text-red-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:"Total Débit"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",style:{color:"#000"},children:I(n.debit,s)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Fa,{className:"w-6 h-6 text-green-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:"Total Crédit"})]}),e.jsx("p",{className:"text-2xl font-bold text-black",style:{color:"#000"},children:I(n.credit,s)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Hi,{className:"w-6 h-6 text-blue-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:"Solde Net"})]}),e.jsx("p",{className:`text-2xl font-bold ${n.net>=0?"text-green-600":"text-red-600"}`,style:{color:"#000"},children:I(n.net,s)})]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-6 text-center",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-black",style:{color:"#000"},children:(t==null?void 0:t.name)||"Restaurant"}),e.jsx("p",{className:"text-xs text-black",style:{color:"#000"},children:(t==null?void 0:t.address)||"Adresse non disponible"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-black",style:{color:"#000"},children:["Document généré le ",new Date().toLocaleDateString()]}),e.jsxs("p",{className:"text-xs text-black",style:{color:"#000"},children:["Tous droits réservés © ",new Date().getFullYear()]})]})]})})]})}async function y0(a){const{default:r}=await _i(async()=>{const{default:t}=await import("./index-B3rSoFKX.js").then(n=>n.aK);return{default:t}},__vite__mapDeps([0,1,2,3]));try{const t=await r(a,{scale:2,backgroundColor:"#ffffff",logging:!1,useCORS:!0,windowWidth:1920,onclone:u=>{const m=u.createElement("style");m.innerHTML=`
          * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
          }
        `,u.head.appendChild(m)}}),n=210,s=297,i=t.height*n/t.width,l=new fc({orientation:i>s?"portrait":"landscape",unit:"mm"});let o=i,c=0,p=1;for(l.addImage(t.toDataURL("image/png"),"PNG",0,c,n,i,"","FAST"),o-=s;o>=0;)c=o-i,l.addPage(),l.addImage(t.toDataURL("image/png"),"PNG",0,c,n,i,"","FAST"),o-=s,p++;const d=new Date().toISOString().split("T")[0];l.save(`etats-financiers-${d}.pdf`)}catch(t){throw console.error("Error exporting to PDF:",t),t}}const tn=8;async function j0(a,r,t){try{const n=a.sort((u,m)=>u.createdAt-m.createdAt),s=new Map;let i=0,l=0;n.forEach(u=>{i+=u.subtotal,l+=u.total,u.taxes.forEach(m=>{const x=s.get(m.name);x?x.amount+=m.amount:s.set(m.name,{amount:m.amount,rate:m.rate})})});let o="";o+=`${(r==null?void 0:r.name)||"Restaurant"}
`,o+=`Rapport des taxes
`,o+=`Période: ${J(t==null?void 0:t.from)} - ${J(t==null?void 0:t.to)}

`,o+=`Résumé
`,o+=`Total HT,${I(i,r==null?void 0:r.currency)}
`,o+=`Total Taxes,${I(l-i,r==null?void 0:r.currency)}
`,o+=`Total TTC,${I(l,r==null?void 0:r.currency)}

`,o+=`Résumé par type de taxe
`,o+=`Type de taxe,Taux,Montant total
`,Array.from(s.entries()).forEach(([u,m])=>{o+=`${u},${(m.rate*100).toFixed(2)}%,${I(m.amount,r==null?void 0:r.currency)}
`}),o+=`
`,o+=`Détail des transactions
`,o+=`Date,Référence,Montant HT,Détails des taxes,Total Taxes,Total TTC
`,n.forEach(u=>{const m=u.taxes.map(x=>`${x.name} (${(x.rate*100).toFixed(2)}%): ${I(x.amount,r==null?void 0:r.currency)}`).join(" | ");o+=[J(u.createdAt),`#${u.id}`,I(u.subtotal,r==null?void 0:r.currency),m,I(u.taxTotal,r==null?void 0:r.currency),I(u.total,r==null?void 0:r.currency)].join(",")+`
`});const c=new Blob(["\uFEFF"+o],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),d=URL.createObjectURL(c);p.setAttribute("href",d),p.setAttribute("download",`taxes-${J(t==null?void 0:t.from)}-${J(t==null?void 0:t.to)}.csv`),document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(n){throw console.error("Error generating tax report CSV:",n),new Error("Failed to generate tax report CSV")}}const w0=()=>{const{settings:a,isLoading:r}=q(),[t,n]=f.useState([]),[s,i]=f.useState(!1),[l,o]=f.useState(!1),{getDateOrders:c}=et(),[p,d]=f.useState(1),u=t.filter(y=>{var k;return((k=y==null?void 0:y.taxes)==null?void 0:k.length)>0}),m=Math.ceil(u.length/tn),x=(p-1)*tn,g=u.slice(x,x+tn),[h,v]=f.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),b=(y,k)=>{v({from:y,to:k})},j=async()=>{i(!0);const k=(await c({startDate:h.from,endDate:h.to})).sort((w,S)=>S.createdAt-w.createdAt);n(k),i(!1)},N=async()=>{try{o(!0),await j0(u,a,h),o(!1)}catch(y){console.log(y)}finally{o(!1)}};return f.useEffect(()=>{j()},[h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Taxes"}),e.jsx("p",{className:"text-2xl font-semibold",children:I(u.reduce((y,k)=>y+k.taxTotal,0),a==null?void 0:a.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(ba,{startDate:h.from,endDate:h.to,onDateChange:b}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:r&&!a||l,variant:"secondary",onClick:N,children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),l?"Téléchargement en cours...":"Télécharger les taxes"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Taxes"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Total Taxes"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Montant (HT)"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Montant (TTC)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(_,{mode:"wait",children:g.map((y,k)=>e.jsxs(D.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:k*.05},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:J(y.createdAt)}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",y.id]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:y.taxes.map(w=>e.jsx("div",{children:e.jsxs("p",{children:[w.name," (",w.rate,"%) :"," ",I(w.amount,a==null?void 0:a.currency)]})}))}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:I(y.taxTotal,a==null?void 0:a.currency)}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:I(y.subtotal,a==null?void 0:a.currency)}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:I(y.total,a==null?void 0:a.currency)})]},y.id))})})]})}),!s&&g.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Pas de taxes trouvées"})]}),m>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:p,totalPages:m,onPageChange:d})})]})]})},nn=8,N0=(a,r,t)=>{const n=a.reduce((m,x)=>{var g;return m+(((g=x.tip)==null?void 0:g.amount)||0)},0),s=n/a.length,i=["Date","Référence","Montant Commande","Pourboire","Pourcentage","Client","Mode de paiement"].join(","),l=[`Période,${J(t.from)} - ${J(t.to)}`,`Total des pourboires,${I(n,r==null?void 0:r.currency)}`,`Moyenne des pourboires,${I(s,r==null?void 0:r.currency)}`,""].join(`
`),o=a.map(m=>{var x,g,h;return[J(m.createdAt),m.id,I(m.total,r==null?void 0:r.currency),I(((x=m.tip)==null?void 0:x.amount)||0,r==null?void 0:r.currency),(g=m.tip)!=null&&g.percentage?`${m.tip.percentage}%`:"Personnalisé",m.customerName,((h=m.paymentMethod)==null?void 0:h.name)||"-"].join(",")}).join(`
`),c=`${l}
${i}
${o}`,p=new Blob([c],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),u=URL.createObjectURL(p);d.setAttribute("href",u),d.setAttribute("download",`pourboires-${J(t.from)}-${J(t.to)}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},k0=()=>{const{settings:a,isLoading:r}=q(),[t,n]=f.useState([]),[s,i]=f.useState(!1),[l,o]=f.useState(!1),{getDateOrders:c}=et(),[p,d]=f.useState(1),u=t.filter(y=>!!(y!=null&&y.tip)).sort((y,k)=>k.createdAt-y.createdAt),m=Math.ceil(u.length/nn),x=(p-1)*nn,g=u.slice(x,x+nn),[h,v]=f.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),b=(y,k)=>{v({from:y,to:k})},j=async()=>{try{o(!0),N0(u,a,h)}catch(y){console.error("Error exporting tips:",y)}finally{o(!1)}},N=async()=>{i(!0);const y=await c({startDate:h.from,endDate:h.to});n(y),i(!1)};return f.useEffect(()=>{N()},[h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Taxes"}),e.jsx("p",{className:"text-2xl font-semibold",children:I(u.reduce((y,k)=>{var w;return y+(((w=k.tip)==null?void 0:w.amount)||0)},0),a==null?void 0:a.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(ba,{startDate:h.from,endDate:h.to,onDateChange:b}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:r&&!a||l,variant:"secondary",onClick:j,children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),l?"Téléchargement en cours...":"Télécharger les pourboires"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Pourboire"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(_,{mode:"wait",children:g.map((y,k)=>{var w;return e.jsxs(D.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:k*.05},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:J(y.createdAt)}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",y.id]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:I((w=y==null?void 0:y.tip)==null?void 0:w.amount,a==null?void 0:a.currency)})]},y.id)})})})]})}),!s&&g.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Pas de pourboires trouvés"})]}),m>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:p,totalPages:m,onPageChange:d})})]})]})},sn=8,C0=(a,r,t)=>{const n=a.reduce((m,x)=>{var g;return m+Number(((g=x.delivery)==null?void 0:g.price)||0)},0),s=n/a.length,i=["Date","Référence","Montant Commande","Client","Mode de paiement"].join(","),l=[`Période,${J(t.from)} - ${J(t.to)}`,`Total des livraisons,${I(n,r==null?void 0:r.currency)}`,`Moyenne des livraisons,${I(s,r==null?void 0:r.currency)}`,""].join(`
`),o=a.map(m=>{var x;return[J(m.createdAt),m.id,I(m.total,r==null?void 0:r.currency),m.customerName||m.customerPhone||m.customerEmail||"#",((x=m.paymentMethod)==null?void 0:x.name)||"-"].join(",")}).join(`
`),c=`${l}
${i}
${o}`,p=new Blob([c],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),u=URL.createObjectURL(p);d.setAttribute("href",u),d.setAttribute("download",`pourboires-${J(t.from)}-${J(t.to)}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)},D0=()=>{const{settings:a,isLoading:r}=q(),[t,n]=f.useState([]),[s,i]=f.useState(!1),[l,o]=f.useState(!1),{getDateOrders:c}=et(),[p,d]=f.useState(1),u=t.filter(y=>{var k;return!!y.delivery&&Number(((k=y.delivery)==null?void 0:k.price)||0)!==0}).sort((y,k)=>new Date(k.createdAt).getTime()-new Date(y.createdAt).getTime()),m=Math.ceil(u.length/sn),x=(p-1)*sn,g=u.slice(x,x+sn),[h,v]=f.useState({from:new Date(new Date().setHours(0,0,0,0)),to:new Date}),b=(y,k)=>{v({from:y,to:k})},j=async()=>{try{o(!0),C0(u,a,h)}catch(y){console.error("Error exporting tips:",y)}finally{o(!1)}},N=async()=>{i(!0);const y=await c({startDate:h.from,endDate:h.to});n(y),i(!1)};return f.useEffect(()=>{N()},[h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Livraisons"}),e.jsx("p",{className:"text-2xl font-semibold",children:I(u.reduce((y,k)=>{var w;return y+Number(((w=k.delivery)==null?void 0:w.price)||0)},0),a==null?void 0:a.currency)})]})]})})}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(ba,{startDate:h.from,endDate:h.to,onDateChange:b}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(C,{disabled:r&&!a||l,variant:"secondary",onClick:j,children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),l?"Téléchargement en cours...":"Télécharger les livraisons"]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Référence"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Livraison"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx(_,{mode:"wait",children:g.map((y,k)=>{var w;return e.jsxs(D.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:k*.05},className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:J(y.createdAt)}),e.jsxs("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:["#",y.id]}),e.jsx("td",{className:"px-6 py-4 text-sm whitespace-nowrap",children:I(Number(((w=y.delivery)==null?void 0:w.price)||0),a==null?void 0:a.currency)})]},y.id)})})})]})}),!s&&g.length<1&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Pas de livraisons trouvées"})]}),m>1&&e.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:p,totalPages:m,onPageChange:d})})]})]})},S0=[{id:"transactions",label:"Transactions"},{id:"tax",label:"Taxes"},{id:"tips",label:"Pourboires"},{id:"delivery",label:"Livraison"}];function A0(){const{settings:a,isLoading:r}=q(),[t,n]=f.useState("transactions"),[s,i]=f.useState({startDate:new Date(new Date().setHours(0,0,0,0)),endDate:new Date}),[l,o]=f.useState(!1),[c,p]=f.useState(!1),d=f.useRef(null),{transactions:u,stats:m,isLoading:x,refreshData:g}=b0(s);console.log(u.sort((k,w)=>w.createdAt-k.createdAt));const h=(k,w)=>{i({startDate:k,endDate:w})},v=async k=>{try{await Ka.createTransaction(k),p(!1),g(),E.success("Transaction ajoutée avec succès")}catch(w){console.error("Error saving transaction:",w),E.error("Erreur lors de la sauvegarde de la transaction")}},b=async(k,w)=>{try{await Ka.updateTransaction(k,w),g(),E.success("Transaction mise à jour avec succès")}catch(S){console.error("Error updating transaction:",S),E.error("Erreur lors de la mise à jour de la transaction")}},j=async k=>{try{await Ka.deleteTransaction(k),g(),E.success("Transaction supprimée avec succès")}catch(w){console.error("Error deleting transaction:",w),E.error("Erreur lors de la suppression de la transaction")}},N=async()=>{if(!(!d.current||!a))try{o(!0);const k=await Ka.getTransactions(s),w=e.jsx(Ii,{transactions:k,period:s,settings:a}),S=document.createElement("div");S.style.position="absolute",S.style.left="-9999px",document.body.appendChild(S);const{createRoot:P}=await _i(async()=>{const{createRoot:U}=await import("./index-B3rSoFKX.js").then(z=>z.c);return{createRoot:U}},__vite__mapDeps([0,1,2,3])),O=P(S);await new Promise(U=>{O.render(e.jsx("div",{ref:d,children:w})),setTimeout(U,100)}),await y0(S),document.body.removeChild(S),O.unmount(),E.success("États financiers exportés avec succès")}catch(k){console.error("Error exporting statement:",k),E.error("Erreur lors de l'export")}finally{o(!1)}},y=()=>{switch(t){case"assets":return e.jsx(f0,{});case"debts":return e.jsx(v0,{});case"tax":return e.jsx(w0,{});case"tips":return e.jsx(k0,{});case"delivery":return e.jsx(D0,{});default:return e.jsxs(e.Fragment,{children:[e.jsx(x0,{stats:m,isLoading:x}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(ba,{startDate:s.startDate,endDate:s.endDate,onDateChange:h}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(C,{onClick:()=>p(!0),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une Transaction"]}),e.jsxs(C,{disabled:r&&!a||l,variant:"secondary",onClick:N,children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),l?"Téléchargement en cours...":"Télécharger les États financiers"]})]})]}),e.jsx(h0,{transactions:u.sort((k,w)=>new Date(w.createdAt).getTime()-new Date(k.createdAt).getTime()),isLoading:x,onUpdate:b,onDelete:j})]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(it,{tabs:S0,activeTab:t,onChange:n}),y(),c&&e.jsx(Uo,{onSave:v,onCancel:()=>p(!1)}),a&&e.jsx("div",{className:"hidden",children:e.jsx("div",{ref:d,children:e.jsx(Ii,{transactions:u,period:s,settings:a})})})]})}const ln=6;function E0({variants:a,categories:r,isLoading:t,onEdit:n,onDelete:s}){const[i,l]=f.useState(1),o=Math.ceil(a.length/ln),c=(i-1)*ln,p=a.slice(c,c+ln),d=u=>u.map(m=>{const x=r.find(g=>g.id===m);return x?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 border border-blue-100 dark:border-blue-800",children:x.name},m):null});return t?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((u,m)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700/50"},m))}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"space-y-3",children:e.jsx(_,{mode:"popLayout",children:p.map((u,m)=>e.jsx(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:m*.05},className:"group relative bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700/50 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(od,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[u.name,e.jsx(Ra,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:d(u.categoryIds)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{onClick:()=>n(u),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx(C,{onClick:()=>s(u.id),className:"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx(Ce,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:u.values.map((x,g)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:x},g))})]})},u.id))})}),o>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(ge,{currentPage:i,totalPages:o,onPageChange:l})})]})}function I0({variant:a,categories:r,onSave:t,onCancel:n}){const{register:s,handleSubmit:i,watch:l,setValue:o,formState:{errors:c,isDirty:p}}=Ve({defaultValues:a||{name:"",type:"",values:[""],categoryIds:[],isRequired:!1}}),d=l("values"),u=l("categoryIds"),m=()=>{o("values",[...d,""],{shouldDirty:!0})},x=g=>{o("values",d.filter((h,v)=>v!==g),{shouldDirty:!0})};return e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"relative border-b dark:border-gray-700",children:[e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(hn,{className:"w-5 h-5 text-blue-500"}),a?"Modifier la Variante":"Nouvelle Variante"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a?"Modifier les options de cette variante":"Ajouter une nouvelle variante au menu"})]}),e.jsx("button",{onClick:n,className:"absolute right-4 top-4 p-2 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:i(t),className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(nl,{className:"w-4 h-4"}),"Nom de la Variante"]}),e.jsx("input",{type:"text",...s("name",{required:"Le nom est requis"}),className:"w-full px-4 py-2.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow",placeholder:"ex: Taille, Couleur, Options..."}),c.name&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),c.name.message]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",...s("isRequired"),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{children:"Obligatoire"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(On,{className:"w-4 h-4"}),"Catégories Applicables"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:r.map(g=>e.jsxs("label",{className:`
                      group flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all duration-200
                      ${u!=null&&u.includes(g.id)?"bg-blue-50 border-blue-500 dark:bg-blue-900/20 dark:border-blue-400":"border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600"}
                    `,children:[e.jsx("input",{type:"checkbox",value:g.id,...s("categoryIds",{required:"Sélectionnez au moins une catégorie"}),className:"rounded-md border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:g.name})]},g.id))}),c.categoryIds&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),c.categoryIds.message]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[e.jsx(hn,{className:"w-4 h-4"}),"Valeurs Possibles"]}),e.jsxs(C,{type:"button",onClick:m,className:"px-3 py-1.5 text-sm bg-blue-50 hover:bg-blue-100 text-blue-600 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),e.jsx("div",{className:"space-y-2",children:d.map((g,h)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{...s(`values.${h}`,{required:"La valeur est requise"}),className:"flex-1 px-4 py-2.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-shadow",placeholder:`Option ${h+1}`}),d.length>1&&e.jsx(C,{type:"button",onClick:()=>x(h),className:"px-2.5 text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(Wi,{className:"w-4 h-4"})})]},h))}),c.values&&e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-red-500"}),"Toutes les valeurs sont requises"]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(C,{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Annuler"}),e.jsx(C,{type:"submit",disabled:!p,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white shadow-sm disabled:opacity-50",children:a?"Mettre à jour":"Ajouter"})]})})]})]})})}function M0(){const{variants:a,isLoading:r,addVariant:t,updateVariant:n,deleteVariant:s}=zi(),{categories:i}=cr(),[l,o]=f.useState(!1),[c,p]=f.useState(null),[d,u]=f.useState({isOpen:!1,variantId:null}),[m,x]=f.useState(""),g=a.filter(b=>b.name.toLowerCase().includes(m.toLowerCase())||b.values.some(j=>j.toLowerCase().includes(m.toLowerCase()))),h=async b=>{try{c?await n(c.id,b):await t(b),o(!1),p(null)}catch(j){console.error("Error saving variant:",j)}},v=async()=>{d.variantId&&(await s(d.variantId),u({isOpen:!1,variantId:null}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des Variantes"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gérez les variantes de vos produits (tailles, options, etc.)"})]}),e.jsxs(C,{onClick:()=>o(!0),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une Variante"]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",value:m,onChange:b=>x(b.target.value),placeholder:"Rechercher une variante...",className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow"})]})}),e.jsx(E0,{variants:g,categories:i,isLoading:r,onEdit:p,onDelete:b=>u({isOpen:!0,variantId:b})}),(l||c)&&e.jsx(I0,{variant:c,categories:i,onSave:h,onCancel:()=>{o(!1),p(null)}}),e.jsx(Ba,{isOpen:d.isOpen,onClose:()=>u({isOpen:!1,variantId:null}),onConfirm:v,title:"Supprimer la variante",message:"Êtes-vous sûr de vouloir supprimer cette variante ? Cette action est irréversible."})]})}function P0(a){if(a===0)return"0 B";const r=1024,t=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(a)/Math.log(r));return`${parseFloat((a/Math.pow(r,n)).toFixed(2))} ${t[n]}`}function T0(a){return new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function O0({files:a,isLoading:r,onDelete:t,onSelect:n,selectedFiles:s,onToggleSelect:i}){return r?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((l,o)=>e.jsx("div",{className:"h-20 animate-pulse rounded-xl bg-gray-100 dark:bg-gray-800"},o))}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(pn,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Aucun fichier"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Commencez par ajouter des fichiers"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(_,{mode:"popLayout",children:a.map(l=>e.jsx(D.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},onClick:()=>i(l.id),className:`
              group relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden
              border border-gray-200 dark:border-gray-700
              transition-all duration-200
              hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600
              cursor-pointer
              ${s.has(l.id)?"ring-2 ring-blue-500 dark:ring-blue-400":""}
            `,children:e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx("div",{className:`
                w-6 h-6 rounded-full border-2 mr-4
                transition-colors duration-200 
                ${s.has(l.id)?"border-blue-500 bg-blue-500 dark:border-blue-400 dark:bg-blue-400":"border-gray-300 dark:border-gray-600"}
                flex items-center justify-center
              `,children:s.has(l.id)&&e.jsx(Gr,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"h-16 w-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100 dark:bg-gray-700",children:e.jsx("img",{src:l.url,alt:l.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"})}),e.jsxs("div",{className:"flex-1 min-w-0 ml-4",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:l.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:P0(l.size)}),e.jsx("span",{className:"text-gray-300 dark:text-gray-600",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:T0(l.createdAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n?e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),n(l.url)},className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white dark:bg-gray-700/90 dark:hover:bg-gray-700",children:e.jsx(Gr,{className:"h-4 w-4"})}):e.jsx(C,{variant:"secondary",size:"sm",onClick:o=>{o.stopPropagation(),window.open(l.url,"_blank")},className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white dark:bg-gray-700/90 dark:hover:bg-gray-700",children:e.jsx(pn,{className:"h-4 w-4"})}),e.jsx(C,{variant:"danger",size:"sm",onClick:o=>{o.stopPropagation(),t(l.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})},l.id))})})}function L0({onClose:a,onUpload:r,maxSizeMB:t=5,acceptedFileTypes:n=[".png",".jpg",".jpeg",".gif"]}){const[s,i]=f.useState({}),[l,o]=f.useState(!1),c=f.useCallback(async m=>{if(m.length===0)return;o(!0);const x={};m.forEach(g=>{x[g.name]={progress:0}}),i(x);try{const g=m.map(async h=>{const v=setInterval(()=>{i(b=>{var N;const j=((N=b[h.name])==null?void 0:N.progress)||0;return j<90?{...b,[h.name]:{...b[h.name],progress:Math.min(j+10,90)}}:b})},500);try{await r([h]),clearInterval(v),i(b=>({...b,[h.name]:{progress:100,complete:!0}}))}catch{clearInterval(v),i(j=>({...j,[h.name]:{progress:0,error:"Failed to upload file"}}))}});await Promise.all(g),setTimeout(a,1500)}catch(g){console.error("Upload error:",g)}finally{o(!1)}},[r,a]),{getRootProps:p,getInputProps:d,isDragActive:u}=Bn({onDrop:c,accept:{"image/*":n},maxSize:t*1024*1024,disabled:l});return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"relative w-full max-w-lg bg-white dark:bg-gray-800 rounded-xl p-6 shadow-xl",children:[e.jsx("button",{onClick:a,disabled:l,className:"absolute right-4 top-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors disabled:opacity-50",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Ajouter des médias"}),e.jsxs("div",{...p(),className:`
            relative flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8
            transition-all
            ${u?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}
            ${l?"opacity-50 cursor-not-allowed":""}
          `,children:[e.jsx("input",{...d()}),e.jsx(rt,{className:`h-12 w-12 mb-4 ${u?"text-blue-500 dark:text-blue-400":"text-gray-400"}`}),e.jsx("p",{className:"text-center text-gray-900 dark:text-gray-100",children:u?"Déposez les fichiers ici...":e.jsxs(e.Fragment,{children:["Glissez et déposez plusieurs fichiers ici, ou",e.jsx("br",{}),e.jsx("span",{className:"text-blue-500 dark:text-blue-400",children:"cliquez pour sélectionner"})]})}),e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-bold",children:["PNG, JPG, GIF jusqu'à ",t,"MB"]})]}),e.jsx(_,{children:Object.entries(s).length>0&&e.jsx(D.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 space-y-4 overflow-hidden",children:Object.entries(s).map(([m,x])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300 truncate",children:m}),x.error?e.jsxs("span",{className:"text-red-500 flex items-center",children:[e.jsx(dr,{className:"w-4 h-4 mr-1"}),x.error]}):e.jsxs("span",{className:"text-gray-500",children:[x.progress,"%"]})]}),e.jsx(bl,{progress:x.progress,isComplete:x.complete})]},m))})})]})})}function R0({selectedCount:a,onUpload:r,onDelete:t,onClearSelection:n}){return a===0?e.jsxs(C,{onClick:r,children:[e.jsx(rt,{className:"w-4 h-4 mr-2"}),"Ajouter des médias"]}):e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a," élément",a>1?"s":""," sélectionné",a>1?"s":""]}),e.jsxs(C,{variant:"danger",onClick:t,children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Supprimer"]}),e.jsx(C,{variant:"secondary",onClick:n,children:"Annuler"})]})}function F0(a=12){const[r,t]=f.useState([]),[n,s]=f.useState(!0),[i,l]=f.useState(1),[o,c]=f.useState({});f.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const g=await Ea.getAllMedia();t(g)}catch(g){console.error("Error loading media files:",g),E.error("Erreur chargement gallerie")}finally{s(!1)}},d=async g=>{try{const h=g.map(v=>Ea.uploadFile(v,b=>{c(j=>({...j,[v.name]:b}))}));return await Promise.all(h),await p(),l(1),c({}),!0}catch(h){throw console.error("Upload error:",h),c({}),h}},u=async g=>{try{await Ea.deleteFiles(g),await p();const h=Math.ceil((r.length-g.length)/a);i>h&&l(Math.max(1,h))}catch(h){throw console.error("Delete error:",h),h}},m=Math.ceil(r.length/a);return{files:r.slice((i-1)*a,i*a),totalFiles:r.length,currentPage:i,totalPages:m,setCurrentPage:l,isLoading:n,uploadFiles:d,deleteFiles:u,uploadProgress:o,refreshFiles:p}}const B0=12;function G0(){var S;const[a,r]=f.useState(!0),[t,n]=f.useState(""),[s,i]=f.useState(!1),[l,o]=f.useState(new Set),[c,p]=f.useState({isOpen:!1,isBulk:!1}),{files:d,totalFiles:u,currentPage:m,totalPages:x,setCurrentPage:g,isLoading:h,uploadFiles:v,deleteFiles:b,refreshFiles:j}=F0(B0),N=d.filter(P=>P.name.toLowerCase().includes(t.toLowerCase())),y=async P=>{try{await v(P),i(!1)}catch(O){console.error("Upload error:",O)}},k=async()=>{var P;if((P=c.fileIds)!=null&&P.length)try{await b(c.fileIds),o(new Set),E.success(c.isBulk?"Fichiers supprimés avec succès":"Fichier supprimé avec succès")}catch(O){console.error("Delete error:",O)}finally{p({isOpen:!1,isBulk:!1})}},w=P=>{const O=new Set(l);O.has(P)?O.delete(P):O.add(P),o(O)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gallerie media"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u," Fichiers"]})]}),e.jsx(R0,{selectedCount:l.size,onUpload:()=>i(!0),onDelete:()=>p({isOpen:!0,isBulk:!0,fileIds:Array.from(l)}),onClearSelection:()=>o(new Set)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:t,onChange:P=>n(P.target.value),className:"w-full rounded-lg border pl-10 pr-4 py-2 dark:border-gray-700 dark:bg-gray-800"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!0),className:`p-2 rounded-lg ${a?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(Xi,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(!1),className:`p-2 rounded-lg ${a?"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400"}`,children:e.jsx(On,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[a?e.jsx(ol,{files:N,isLoading:h,onDelete:P=>p({isOpen:!0,isBulk:!1,fileIds:[P]}),selectedFiles:l,onToggleSelect:w}):e.jsx(O0,{files:N,isLoading:h,onDelete:P=>p({isOpen:!0,isBulk:!1,fileIds:[P]}),selectedFiles:l,onToggleSelect:w}),x>1&&e.jsx("div",{className:"mt-6 pt-6 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:m,totalPages:x,onPageChange:g})})]}),s&&e.jsx(L0,{onClose:()=>i(!1),onUpload:y,maxSizeMB:5,acceptedFileTypes:[".png",".jpg",".jpeg",".gif"]}),e.jsx(Pa,{isOpen:c.isOpen,title:c.isBulk?"Supprimer les fichiers":"Supprimer le fichier",message:c.isBulk?`Êtes-vous sûr de vouloir supprimer ${(S=c.fileIds)==null?void 0:S.length} fichiers ? Cette action est irréversible.`:"Êtes-vous sûr de vouloir supprimer ce fichier ? Cette action est irréversible.",confirmLabel:"Supprimer",onConfirm:k,onCancel:()=>p({isOpen:!1,isBulk:!1})})]})}function z0({staff:a,isLoading:r,onEdit:t,onDelete:n}){const{user:s}=nt(),{isStaff:i,staffData:l}=ur();return r?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((o,c)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},c))}):e.jsx("div",{className:"space-y-4",children:e.jsx(_,{mode:"popLayout",children:a.map(o=>e.jsx(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Hc,{className:"w-10 h-10 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:o.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(lr,{className:"w-4 h-4 mr-1"}),o.email]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(gs,{variant:o.role==="admin"?"success":"default",children:o.role==="admin"?"Admin":"Staff"}),e.jsx(gs,{variant:o.active?"success":"warning",children:o.active?"Actif":"Inactif"}),e.jsxs("div",{className:"flex gap-2",children:[(i&&(l==null?void 0:l.role)==="admin"||!i)&&e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>t(o),children:e.jsx(va,{className:"w-4 h-4"})}),(s==null?void 0:s.email)===o.email&&e.jsx(C,{variant:"danger",size:"sm",onClick:()=>n(o),children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})]})},o.id))})})}function q0({staff:a,onSave:r,onCancel:t}){const{register:n,handleSubmit:s,formState:{errors:i,isSubmitting:l}}=Ve({defaultValues:a?{name:a.name,email:a.email,role:a.role}:{role:"staff"}});return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(D.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold",children:a?"Modifier le membre":"Nouveau membre du personnel"}),e.jsx("button",{onClick:t,children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:s(r),className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nom complet"}),e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",...n("name",{required:"Le nom est requis",minLength:{value:2,message:"Le nom doit contenir au moins 2 caractères"}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"John Doe"})]}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(lr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"email",...n("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse email invalide"}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"john@example.com",disabled:!!a})]}),i.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.email.message})]}),!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(vc,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"password",...n("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caractères"}}),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700",placeholder:"••••••••"})]}),i.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:i.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rôle"}),e.jsxs("div",{className:"relative",children:[e.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsxs("select",{...n("role"),className:"w-full pl-10 pr-4 py-2 rounded-lg border dark:border-gray-600 dark:bg-gray-700 appearance-none",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-6 pt-4 border-t dark:border-gray-700",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,children:"Annuler"}),e.jsx(C,{type:"submit",disabled:l,children:l?"Enregistrement...":a?"Mettre à jour":"Créer le compte"})]})]})]})})}function $0(){const[a,r]=f.useState([]),[t,n]=f.useState(!0);f.useEffect(()=>{s()},[]);const s=async()=>{try{n(!0);const c=await Aa.getAll();r(c)}catch(c){console.error("Error loading staff:",c)}finally{n(!1)}};return{staff:a,isLoading:t,createStaff:async c=>{try{await Aa.createStaffMember(c.email,c.password,{name:c.name,role:c.role,active:!0,createdAt:new Date().toDateString(),updatedAt:new Date().toDateString(),permissions:[]}),await s()}catch(p){throw console.error("Error creating staff:",p),p}},updateStaff:async(c,p)=>{try{await Aa.updateStaffMember(c,p),await s()}catch(d){throw console.error("Error updating staff:",d),d}},deleteStaff:async c=>{try{await Aa.deleteStaffMember(c),await s()}catch(p){throw console.error("Error deleting staff:",p),p}},refreshStaff:s}}function U0(){var v;const{staff:a,isLoading:r,createStaff:t,updateStaff:n,deleteStaff:s}=$0(),{isStaff:i,staffData:l}=ur(),[o,c]=f.useState(!1),[p,d]=f.useState(null),[u,m]=f.useState({isOpen:!1,member:null}),x=async b=>{try{await t(b),c(!1),E.success("Membre du personnel créé avec succès")}catch(j){if(j!=null&&j.code)switch(j.code){case"auth/email-already-in-use":E.error("Cette adresse mail est déjà utilisée...");break;case"auth/invalid-email":E.error("L'adresse e-mail fournie n'est pas valide.");break;case"auth/weak-password":E.error("Le mot de passe est trop faible.");break;case"auth/operation-not-allowed":E.error("Cette opération n'est pas autorisée.");break;case"auth/network-request-failed":E.error("Problème de connexion Internet, veuillez réessayer.");break;default:E.error("Une erreur est survenue..."),console.error("Firebase Auth Error:",j)}else E.error((j==null?void 0:j.message)||"Une erreur est survenue..."),console.error("Error creating staff:",j)}},g=async b=>{if(p)try{await n(p.id,b),d(null),c(!1),E.success("Membre du personnel mis à jour avec succès")}catch(j){console.error("Error updating staff:",j),E.error("Erreur lors de la mise à jour")}},h=async()=>{if(u.member)try{await s(u.member.id),E.success("Membre du personnel supprimé avec succès")}catch(b){console.error("Error deleting staff:",b),E.error("Erreur lors de la suppression")}finally{m({isOpen:!1,member:null})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestion du Personnel"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gérez les comptes du personnel et leurs accès"})]}),(i&&(l==null?void 0:l.role)==="admin"||!i)&&e.jsxs(C,{onClick:()=>c(!0),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter un membre"]})]}),e.jsx(z0,{staff:a,isLoading:r,onEdit:b=>{d(b),c(!0)},onDelete:b=>m({isOpen:!0,member:b})}),(i&&(l==null?void 0:l.role)==="admin"||!i)&&a.length>0&&e.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:border-amber-900 dark:bg-amber-900/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(aa,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium text-amber-800 dark:text-amber-400",children:"Important"})]}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-bold",children:"Pour supprimer un membre du personnel, connectez-vous à son compte, puis cliquez sur le bouton avec l'icône de suppression pour confirmer l'action."})})]}),o&&e.jsx(q0,{staff:p,onSave:p?g:x,onCancel:()=>{c(!1),d(null)}}),e.jsx(Ba,{isOpen:u.isOpen,onClose:()=>m({isOpen:!1,member:null}),onConfirm:h,title:"Supprimer le membre",message:`Êtes-vous sûr de vouloir supprimer ${(v=u.member)==null?void 0:v.name} ? Cette action est irréversible.`})]})}const Mi={Wave:"Wave",PayTech:"PayTech",Stripe:"Stripe",CinetPay:"CinetPay","Money Fusion":"Money Fusion","Paiement à la livraison":"Paiement à la livraison"},V0=({value:a,onChange:r,disabled:t})=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Type de méthode"}),e.jsxs("select",{value:a,onChange:n=>r(n.target.value),disabled:t,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",children:[e.jsx("option",{value:"Paiement à la livraison",children:"Paiement à la livraison"}),e.jsx("option",{value:"CinetPay",children:"CinetPay"}),e.jsx("option",{value:"PayTech",children:"PayTech"}),e.jsx("option",{value:"Stripe",children:"Stripe"}),e.jsx("option",{value:"Wave",children:"Wave"}),e.jsx("option",{value:"Money Fusion",children:"Money Fusion"}),e.jsx("option",{value:"Autres",children:"Autres"})]})]});function H0({method:a,onSave:r,onCancel:t}){const[n,s]=f.useState(Mi[`${a==null?void 0:a.name}`]??"Autres"),{control:i,register:l,handleSubmit:o,setValue:c,watch:p,formState:{errors:d,isSubmitting:u}}=Ve({defaultValues:a||{name:"",qrCode:"",url:"",isDefault:!1,apiKey:"",apiSecret:"",instruction:""}}),m=f.useMemo(()=>!!(a!=null&&a.name),[a==null?void 0:a.name]);f.useEffect(()=>{n!=="Autres"&&Mi[n]?c("name",n):n==="Autres"&&!m&&c("name","")},[n,c,m]);const x=async h=>{try{if((await bc.getActivePaymentMethods()).some(j=>j.name.toLowerCase()===h.name.toLowerCase()&&j.id!==(a==null?void 0:a.id))){E.error("Une méthode de paiement avec ce nom existe déjà");return}await r(h)}catch(v){v.code==="payment/duplicate-name"?E.error("Une méthode de paiement avec ce nom existe déjà"):E.error("Une erreur est survenue")}},g=()=>{switch(n){case"Money Fusion":return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"API URL"}),e.jsx("input",{type:"url",...l("url",{required:"L'URL de l'API est requise"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"https://api.moneyfusion.com/v1"}),d.url&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.url.message})]})});case"Wave":return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lien de paiement Wave"}),e.jsx("input",{type:"url",...l("url",{required:"Le lien Wave est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"https://pay.wave.com/m/xxxxxxxxxxxxxx/c/sn/"}),d.url&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.url.message}),e.jsx("small",{className:"text-red-800 dark:text-red-400",children:"Coller votre lien de paiement wave marchand"})]})});case"PayTech":case"Stripe":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n==="Stripe"?"PUBLIC KEY":"API KEY"}),e.jsx("input",{type:"text",...l("apiKey",{required:"API key obligatoire"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:n==="Stripe"?"pk_live_VePHdqKTYQjKNInc7u56JBrQ":"1afac858d4fa5ec74e3e3734c3829793eb6bd5f4602c84ac4a5069369812915e"}),d.apiKey&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.apiKey.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:n==="Stripe"?"SECRET KEY":"API SECRET"}),e.jsx("input",{type:"text",...l("apiSecret",{required:"Ce champ est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:n==="Stripe"?"sk_live_VePHdqKTYQjKNInc7u56JBrQ":"96bc36c11560f2151c4b43eee310cefabc2e9e9000f7e315c3ca3d279e3f98ac"}),d.apiSecret&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.apiSecret.message})]})]});case"CinetPay":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"SITE ID"}),e.jsx("input",{type:"text",...l("apiSecret",{required:"Ce champ est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"96bc36c11560f2151c4b43eee310cefabc2e9e9000f7e315c3ca3d279e3f98ac"}),d.apiSecret&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.apiSecret.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"API KEY"}),e.jsx("input",{type:"text",...l("apiKey",{required:"API key obligatoire"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"1afac858d4fa5ec74e3e3734c3829793eb6bd5f4602c84ac4a5069369812915e"}),d.apiKey&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.apiKey.message})]})]});case"Autres":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Nom de la méthode"}),e.jsx("input",{type:"text",...l("name",{required:"Le nom est requis"}),className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700"}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:d.name.message})]}),e.jsx(yc,{name:"qrCode",control:i,render:({field:h})=>e.jsx(ma,{value:h.value,onChange:h.onChange,label:"QR Code de paiement",description:"Format recommandé: PNG avec fond transparent"})})]});default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[90vw] max-w-2xl h-[75vh] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 md:p-6 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:a?"Modifier la méthode":"Nouvelle méthode de paiement"}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:e.jsx(X,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:o(x),className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:[e.jsx(V0,{value:n,onChange:s,disabled:m}),g(),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Consigne à l'utilisateur pour ce type de paiement"}),e.jsx("textarea",{...l("instruction"),rows:2,className:"w-full rounded-lg border dark:border-gray-600 p-2 dark:bg-gray-700",placeholder:"Consigne ou instruction à partager pendant le paiement..."})]})]}),e.jsx("div",{className:"p-4 md:p-6 border-t dark:border-gray-700 mt-auto",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(C,{type:"button",variant:"secondary",onClick:t,children:"Annuler"}),e.jsx(C,{type:"submit",disabled:u,children:u?"Enregistrement...":a?"Mettre à jour":"Ajouter"})]})})]})]})})}function W0({methods:a,isLoading:r,onEdit:t,onDelete:n}){return r?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,i)=>e.jsx("div",{className:"h-24 animate-pulse bg-gray-100 dark:bg-gray-800 rounded-lg"},i))}):e.jsx("div",{className:"space-y-4",children:e.jsx(_,{mode:"popLayout",children:a.map(s=>e.jsxs(D.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.qrCode?e.jsx("img",{src:s.qrCode,alt:`QR Code for ${s.name}`,className:"w-16 h-16 object-contain rounded-lg bg-gray-50 dark:bg-gray-700 p-2"}):e.jsx("div",{className:"w-16 h-16 flex items-center justify-center rounded-lg bg-gray-50 dark:bg-gray-700",children:e.jsx(Br,{className:"w-8 h-8 text-gray-400"})}),e.jsx("div",{children:e.jsxs("h3",{className:"font-medium text-lg",children:[s.name,s.isDefault&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:"Par défaut"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{variant:"secondary",size:"sm",onClick:()=>t(s),disabled:s.isDefault,children:e.jsx(va,{className:"w-4 h-4"})}),a.length>1&&e.jsx(C,{variant:"danger",size:"sm",onClick:()=>n(s.id),disabled:a.length<2,children:e.jsx(Ce,{className:"w-4 h-4"})})]})]},s.id))})})}function _0(){const{paymentMethods:a,isLoading:r,addPaymentMethod:t,updatePaymentMethod:n,deletePaymentMethod:s}=jc(),[i,l]=f.useState(!1),[o,c]=f.useState(null),[p,d]=f.useState({isOpen:!1}),u=async x=>{try{o?await n(o.id,x):await t(x),l(!1),c(null)}catch(g){console.error("Error saving payment method:",g)}},m=async()=>{if(p.methodId)try{await s(p.methodId)}catch(x){console.error("Error deleting payment method:",x)}finally{d({isOpen:!1})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Méthodes de Paiement"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gérez les méthodes de paiement disponibles"})]}),e.jsxs(C,{onClick:()=>l(!0),children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Ajouter une méthode"]})]}),e.jsx(W0,{methods:a,isLoading:r,onEdit:x=>{c(x),l(!0)},onDelete:x=>d({isOpen:!0,methodId:x})}),i&&e.jsx(H0,{method:o,onSave:u,onCancel:()=>{l(!1),c(null)}}),e.jsx(Ba,{isOpen:p.isOpen,onClose:()=>d({isOpen:!1}),onConfirm:m,title:"Supprimer la méthode de paiement",message:"Êtes-vous sûr de vouloir supprimer cette méthode de paiement ?"})]})}function K0(a,r){return f.useMemo(()=>{const t=r?a.filter(d=>{const u=new Date(d.createdAt.seconds*1e3);return u>=r.start&&u<=r.end}):a,n=t.filter(d=>d.diningOption==="dine-in").length,s=t.filter(d=>d.diningOption==="delivery").length,i=t.filter(d=>d.status==="cancelled").length,l=t.filter(d=>d.status==="delivered").length,o=t.filter(d=>d.status==="pending").length,c=new Map;t.forEach(d=>{d.status!=="cancelled"&&d.items.forEach(u=>{const m=c.get(u.id)||{name:u.name,quantity:0,revenue:0};m.quantity+=u.quantity,m.revenue+=u.price*u.quantity,c.set(u.id,m)})});const p=Array.from(c.entries()).map(([d,u])=>({id:d,...u})).sort((d,u)=>u.quantity-d.quantity).slice(0,5);return{totalOrders:t.length,dineInOrders:n,deliveryOrders:s,canceledOrders:i,fulfilledOrders:l,bestSellers:p,pendingOrders:o}},[a,r])}function Q0({orders:a,currentPage:r,onPageChange:t,itemsPerPage:n=10}){const{settings:s}=q(),i=a.filter(d=>d.rating),l=i.length>0?i.reduce((d,u)=>{var m;return d+(((m=u.rating)==null?void 0:m.rating)||0)},0)/i.length:0,o=i.reduce((d,u)=>{var x;const m=((x=u.rating)==null?void 0:x.rating)||0;return d[m]=(d[m]||0)+1,d},{}),c=Math.ceil(i.length/n),p=i.slice((r-1)*n,r*n);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:e.jsx(Sr,{className:"w-6 h-6 text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Note moyenne"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-semibold",children:pa(Number(l.toFixed(2)))}),e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(d=>e.jsx(Sr,{className:`w-4 h-4 ${d<=Math.round(l)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},d))})]})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(vs,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total avis"}),e.jsx("p",{className:"text-2xl font-semibold",children:i.length})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Taux d'avis"}),e.jsx("p",{className:"text-2xl font-semibold",children:a.length>0?`${pa(Number((i.length/a.length*100).toFixed(1)))}%`:"0%"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Distribution des notes"}),e.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(d=>{const u=o[d]||0,m=i.length>0?u/i.length*100:0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-20",children:[e.jsx(Sr,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-sm font-medium",children:d})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(D.div,{initial:{width:0},animate:{width:`${m}%`},className:"h-full bg-yellow-400"})})}),e.jsx("div",{className:"w-20 text-right",children:e.jsxs("span",{className:"text-sm text-gray-500",children:[u," (",m.toFixed(1),"%)"]})})]},d)})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Avis clients"})}),e.jsxs("div",{className:"divide-y dark:divide-gray-700",children:[p.map(d=>{var u,m;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:d.customerName}),e.jsxs("span",{className:"text-sm text-gray-500",children:["• Commande #",d.id.slice(0,8)]})]}),d.customerPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx(or,{className:"w-4 h-4"}),d.customerPhone]}),e.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(x=>{var g;return e.jsx(Sr,{className:`w-4 h-4 ${x<=(((g=d.rating)==null?void 0:g.rating)||0)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"}`},x)})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:ua(((u=d.rating)==null?void 0:u.createdAt)||d.createdAt)}),e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:I(d.total,s==null?void 0:s.currency)})]})]}),((m=d.rating)==null?void 0:m.feedback)&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:d.rating.feedback})]},d.id)}),i.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(vs,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun avis client pour le moment"})]})]}),c>1&&e.jsx("div",{className:"p-6 border-t dark:border-gray-700",children:e.jsx(ge,{currentPage:r,totalPages:c,onPageChange:t})})]})]})}const Y0=[{id:"overview",label:"Vue d'ensemble"},{id:"feedback",label:"Avis clients"}];function J0(){const{orders:a}=st(),{settings:r}=q(),[t,n]=f.useState("overview"),[s,i]=f.useState({start:new Date(new Date().setHours(0,0,0,0)),end:new Date}),[l,o]=f.useState(1),c=K0(a,s),p=f.useMemo(()=>{const u=a.filter(y=>{const k=new Date(y.createdAt.seconds*1e3);return y.status==="delivered"&&k>=s.start&&k<=s.end}),m=u.reduce((y,k)=>k.status==="delivered"?y+Number(k.subtotal):y,0),x=u.length>0?m/u.length:0,g=a.filter(y=>y.status==="cancelled"),h=u.length>0?g.length/a.length*100:0,v=u.filter(y=>y.diningOption==="dine-in"),b=u.filter(y=>y.diningOption==="delivery"),j=u.length>0?v.length/u.length*100:0,N=new Set(u.map(y=>y.customerEmail||y.customerPhone)).size;return{totalRevenue:m,averageOrderValue:x,canceledOrders:g.length,cancelRate:h,dineInOrders:v.length,deliveryOrders:b.length,dineInRate:j,uniqueCustomers:N}},[a,s]),d=(u,m)=>{i({start:u,end:m}),o(1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Analyse du Trafic"}),e.jsx(ba,{startDate:s.start,endDate:s.end,onDateChange:d})]}),e.jsx(it,{tabs:Y0,activeTab:t,onChange:n}),t==="overview"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(fa,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Revenu Total"}),e.jsx("p",{className:"text-2xl font-semibold",children:I(p.totalRevenue,r==null?void 0:r.currency)})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(Fa,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Panier Moyen"}),e.jsx("p",{className:"text-2xl font-semibold",children:I(p.averageOrderValue,r==null?void 0:r.currency)})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(Rn,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Clients Uniques"}),e.jsx("p",{className:"text-2xl font-semibold",children:p.uniqueCustomers})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx(Gi,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Taux d'Annulation"}),e.jsxs("p",{className:"text-2xl font-semibold",children:[pa(Number(p.cancelRate.toFixed(2))),"%"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:e.jsx(Mn,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"En Attente"}),e.jsx("p",{className:"text-2xl font-semibold",children:c.pendingOrders})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:e.jsx(Za,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Livraisons"}),e.jsx("p",{className:"text-2xl font-semibold",children:p.deliveryOrders})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(qi,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sur Place"}),e.jsxs("p",{className:"text-2xl font-semibold",children:[p.dineInOrders," (",pa(Number(p.dineInRate.toFixed(2))),"%)"]})]})]})}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-rose-50 dark:bg-rose-900/20 rounded-lg",children:e.jsx(Ln,{className:"w-6 h-6 text-rose-600 dark:text-rose-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Commandes Annulées"}),e.jsx("p",{className:"text-2xl font-semibold",children:p.canceledOrders})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Meilleures Ventes"}),e.jsxs("div",{className:"space-y-4",children:[c.bestSellers.map((u,m)=>e.jsxs(D.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg font-medium",children:["#",m+1]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[u.quantity," vendus"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-medium text-green-600 dark:text-green-400",children:I(u.revenue,r==null?void 0:r.currency)})})]},u.id)),c.bestSellers.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Aucune donnée disponible"})]})]})]}):e.jsx(Q0,{orders:a,currentPage:l,onPageChange:o})]})}const X0=["pos","orders","qr-code"];function Ee({element:a,route:r,isStaff:t,staffData:n,settings:s}){const i=(s==null?void 0:s.staffPermissions)||[];return!t||(n==null?void 0:n.role)==="admin"||X0.includes(r)||i.filter(l=>t&&(n==null?void 0:n.role)!=="admin"&&l!=="dashboard").includes(r)?a:e.jsx(Qi,{to:"/dashboard/pos",replace:!0})}const Pi=({children:a})=>e.jsx(ve,{children:a});function Z0({isStaff:a,staffData:r,settings:t}){return e.jsxs(Sc,{children:[e.jsx(xe,{path:"/",element:e.jsx(Ee,{settings:t,route:"dashboard",element:e.jsx(Pi,{children:e.jsx(Pd,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/orders",element:e.jsx(Pi,{children:e.jsx(Vu,{})})}),e.jsx(xe,{path:"/pos",element:e.jsx(ve,{children:e.jsx(n0,{})})}),e.jsx(xe,{path:"/traffic",element:e.jsx(Ee,{settings:t,route:"traffic",element:e.jsx(ve,{children:e.jsx(J0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/menu",element:e.jsx(Ee,{settings:t,route:"menu",element:e.jsx(ve,{children:e.jsx(Bu,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/categories",element:e.jsx(Ee,{settings:t,route:"categories",element:e.jsx(ve,{children:e.jsx(Od,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/variants",element:e.jsx(Ee,{settings:t,route:"variants",element:e.jsx(ve,{children:e.jsx(M0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/inventory",element:e.jsx(Ee,{settings:t,route:"inventory",element:e.jsx(ve,{children:e.jsx(m0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/accounting",element:e.jsx(Ee,{settings:t,route:"accounting",element:e.jsx(ve,{children:e.jsx(A0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/payments",element:e.jsx(Ee,{settings:t,route:"payments",element:e.jsx(ve,{children:e.jsx(_0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/customers",element:e.jsx(Ee,{settings:t,route:"customers",element:e.jsx(ve,{children:e.jsx(Ku,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/qr-code",element:e.jsx(ve,{children:e.jsx(i0,{})})}),e.jsx(xe,{path:"/staff",element:e.jsx(Ee,{settings:t,route:"staff",element:e.jsx(ve,{children:e.jsx(U0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/media",element:e.jsx(Ee,{settings:t,route:"media",element:e.jsx(ve,{children:e.jsx(G0,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"/settings",element:e.jsx(Ee,{settings:t,route:"settings",element:e.jsx(ve,{children:e.jsx(Jf,{})}),isStaff:a,staffData:r})}),e.jsx(xe,{path:"*",element:e.jsx(Qi,{to:"/dashboard",replace:!0})})]})}function sv(){const{logout:a}=wc(),{isStaff:r,staffData:t,isLoading:n}=ur(),{isLoading:s,settings:i}=q(),{isLoading:l}=Sd();return l||n||s?e.jsx(Nc,{isLoading:!0}):e.jsx(e.Fragment,{children:e.jsx(Dd,{onLogout:a,settings:i,isStaff:r,staffData:t,children:e.jsx(Z0,{isStaff:r,staffData:t,settings:i})})})}export{sv as default};
